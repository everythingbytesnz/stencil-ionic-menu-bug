!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Mazemap=e():t.Mazemap=e()}(window,function(){return r={},n.m=i=[function(t,e,i){"use strict";var r=i(27),n=i(30),o=i(31),a=i(94),s=o();r(s,{getPolyfill:o,implementation:n,shim:a}),t.exports=s},function(t,e,i){t.exports=function(){"use strict";var n,o,a;function t(t,e){if(!n){n=e}else if(!o){o=e}else{var i="var sharedChunk = {}; ("+n+")(sharedChunk); ("+o+")(sharedChunk);";var r={};n(r);a=e(r);if(typeof window!=="undefined"){a.workerUrl=window.URL.createObjectURL(new Blob([i],{type:"text/javascript"}))}}}return t(["exports"],function(t){"use strict";function e(t,e){return t(e={exports:{}},e.exports),e.exports}var a=i;function i(t,e,i,r){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=i,this.p2y=r}i.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},i.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},i.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},i.prototype.solveCurveX=function(t,e){var i,r,n,o,a;for(void 0===e&&(e=1e-6),n=t,a=0;a<8;a++){if(o=this.sampleCurveX(n)-t,Math.abs(o)<e)return n;var s=this.sampleCurveDerivativeX(n);if(Math.abs(s)<1e-6)break;n-=o/s}if((n=t)<(i=0))return i;if(n>(r=1))return r;for(;i<r;){if(o=this.sampleCurveX(n),Math.abs(o-t)<e)return n;o<t?i=n:r=n,n=.5*(r-i)+i}return n},i.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var pt=r;function r(t,e){this.x=t,this.y=e}r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),r=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=r,this},_rotateAround:function(t,e){var i=Math.cos(t),r=Math.sin(t),n=e.y+r*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-r*(this.y-e.y),this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return!(t instanceof r)&&Array.isArray(t)?new r(t[0],t[1]):t};var d="undefined"!=typeof self?self:{};function n(t,e,i,r){var n=new a(t,e,i,r);return function(t){return n.solve(t)}}var o=n(.25,.1,.25,1);function l(t,e,i){return Math.min(i,Math.max(e,t))}function s(t,e,i){var r=i-e,n=((t-e)%r+r)%r+e;return n===e?i:n}function f(t){for(var e=[],i=arguments.length-1;0<i--;)e[i]=arguments[i+1];for(var r=0,n=e;r<n.length;r+=1){var o=n[r];for(var a in o)t[a]=o[a]}return t}var u=1;function c(){return u++}function p(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function h(t){return t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function y(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function m(t,e){return-1!==t.indexOf(e,t.length-e.length)}function g(t,e,i){var r={};for(var n in t)r[n]=e.call(i||this,t[n],n,t);return r}function v(t,e,i){var r={};for(var n in t)e.call(i||this,t[n],n,t)&&(r[n]=t[n]);return r}function _(t){return Array.isArray(t)?t.map(_):"object"==typeof t&&t?g(t,_):t}var x={};function ht(t){x[t]||("undefined"!=typeof console&&console.warn(t),x[t]=!0)}function b(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}function M(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function w(t){var e,o={};return t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,e,i,r){var n=i||r;return o[e]=!n||n.toLowerCase(),""}),o["max-age"]&&(e=parseInt(o["max-age"],10),isNaN(e)?delete o["max-age"]:o["max-age"]=e),o}var I=null;function T(t){var e;return null==I&&(e=t.navigator?t.navigator.userAgent:null,I=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))),I}function L(t){try{var e=d[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var z,D,A,S,E=d.performance&&d.performance.now?d.performance.now.bind(d.performance):Date.now.bind(Date),C=d.requestAnimationFrame||d.mozRequestAnimationFrame||d.webkitRequestAnimationFrame||d.msRequestAnimationFrame,N=d.cancelAnimationFrame||d.mozCancelAnimationFrame||d.webkitCancelAnimationFrame||d.msCancelAnimationFrame,j={now:E,frame:function(t){var e=C(t);return{cancel:function(){return N(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var i=d.document.createElement("canvas"),r=i.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return i.width=t.width,i.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return(z=z||d.document.createElement("a")).href=t,z.href},hardwareConcurrency:d.navigator&&d.navigator.hardwareConcurrency||4,get devicePixelRatio(){return d.devicePixelRatio},get prefersReducedMotion(){return!!d.matchMedia&&(null==D&&(D=d.matchMedia("(prefers-reduced-motion: reduce)")),D.matches)}},k={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},P={supported:!1,testSupport:function(t){!O&&S&&(B?U(t):A=t)}},O=!1,B=!1;function U(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,S),t.isContextLost())return;P.supported=!0}catch(t){}t.deleteTexture(e),O=!0}d.document&&((S=d.document.createElement("img")).onload=function(){A&&U(A),B=!(A=null)},S.onerror=function(){O=!0,A=null},S.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function R(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()}var F="01";function Z(t){return 0===t.indexOf("mapbox:")}R.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",F,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},R.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},R.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},R.prototype.normalizeStyleURL=function(t,e){if(!Z(t))return t;var i=Q(t);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},R.prototype.normalizeGlyphsURL=function(t,e){if(!Z(t))return t;var i=Q(t);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},R.prototype.normalizeSourceURL=function(t,e){if(!Z(t))return t;var i=Q(t);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||e)},R.prototype.normalizeSpriteURL=function(t,e,i,r){var n=Q(t);return Z(t)?(n.path="/styles/v1"+n.path+"/sprite"+e+i,this._makeAPIURL(n,this._customAccessToken||r)):(n.path+=""+e+i,W(n))},R.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!Z(t))return t;var r=Q(t);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,(2<=j.devicePixelRatio||512===e?"@2x":"")+(P.supported?".webp":"$1")),r.path=r.path.replace(/^.+\/v4\//,"/"),r.path="/v4"+r.path;var i=this._customAccessToken||function(){for(var t=0,e=r.params;t<e.length;t+=1){var i=e[t].match(/^access_token=(.*)$/);if(i)return i[1]}return null}()||k.ACCESS_TOKEN;return k.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&r.params.push("sku="+this._skuToken),this._makeAPIURL(r,i)},R.prototype.canonicalizeTileURL=function(t,e){var i=Q(t);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return t;var r="mapbox://tiles/";r+=i.path.replace("/v4/","");var n=i.params;return e&&(n=n.filter(function(t){return!t.match(/^access_token=/)})),n.length&&(r+="?"+n.join("&")),r},R.prototype.canonicalizeTileset=function(t,e){for(var i=!!e&&Z(e),r=[],n=0,o=t.tiles||[];n<o.length;n+=1){var a=o[n];G(a)?r.push(this.canonicalizeTileURL(a,i)):r.push(a)}return r},R.prototype._makeAPIURL=function(t,e){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=Q(k.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"/"!==r.path&&(t.path=""+r.path+t.path),!k.REQUIRE_ACCESS_TOKEN)return W(t);if(!(e=e||k.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return t.params=t.params.filter(function(t){return-1===t.indexOf("access_token")}),t.params.push("access_token="+e),W(t)};var V=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function G(t){return V.test(t)}var Y=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Q(t){var e=t.match(Y);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function W(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function H(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(d.atob(e[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(t){return null}}function q(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}q.prototype.getStorageKey=function(t){var e=H(k.ACCESS_TOKEN),i=e&&e.u?d.btoa(encodeURIComponent(e.u).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(Number("0x"+e))})):k.ACCESS_TOKEN||"";return t?"mapbox.eventData."+t+":"+i:"mapbox.eventData:"+i},q.prototype.fetchEventData=function(){var t=L("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{var r=d.localStorage.getItem(e);r&&(this.eventData=JSON.parse(r));var n=d.localStorage.getItem(i);n&&(this.anonId=n)}catch(t){ht("Unable to read from LocalStorage")}},q.prototype.saveEventData=function(){var t=L("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{d.localStorage.setItem(i,this.anonId),1<=Object.keys(this.eventData).length&&d.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){ht("Unable to write to LocalStorage")}},q.prototype.processRequests=function(t){},q.prototype.postEvent=function(t,e,i,r){var n,o,a,s,u=this;k.EVENTS_URL&&((n=Q(k.EVENTS_URL)).params.push("access_token="+(r||k.ACCESS_TOKEN||"")),o={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.11.0",skuId:F,userId:this.anonId},a=e?f(o,e):o,s={url:W(n),headers:{"Content-Type":"text/plain"},body:JSON.stringify([a])},this.pendingRequest=wt(s,function(t){u.pendingRequest=null,i(t),u.saveEventData(),u.processRequests(r)}))},q.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var X,J,K,$,tt=(($=q)&&(ut.__proto__=$),((ut.prototype=Object.create($&&$.prototype)).constructor=ut).prototype.postMapLoadEvent=function(t,e,i,r){this.skuToken=i,(k.EVENTS_URL&&r||k.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return Z(t)||G(t)}))&&this.queueRequest({id:e,timestamp:Date.now()},r)},ut.prototype.processRequests=function(t){var e,i,r,n=this;this.pendingRequest||0===this.queue.length||(e=this.queue.shift(),i=e.id,r=e.timestamp,i&&this.success[i]||(this.anonId||this.fetchEventData(),h(this.anonId)||(this.anonId=p()),this.postEvent(r,{skuToken:this.skuToken},function(t){t||i&&(n.success[i]=!0)},t)))},ut),et=((K=q)&&(st.__proto__=K),((st.prototype=Object.create(K&&K.prototype)).constructor=st).prototype.postTurnstileEvent=function(t,e){k.EVENTS_URL&&k.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return Z(t)||G(t)})&&this.queueRequest(Date.now(),e)},st.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var i=H(k.ACCESS_TOKEN),r=i?i.u:k.ACCESS_TOKEN,n=r!==this.eventData.tokenU;h(this.anonId)||(this.anonId=p(),n=!0);var o,a,s,u=this.queue.shift();if(!(n=!this.eventData.lastSuccess||(o=new Date(this.eventData.lastSuccess),a=new Date(u),s=(u-this.eventData.lastSuccess)/864e5,n||1<=s||s<-1||o.getDate()!==a.getDate())))return this.processRequests();this.postEvent(u,{"enabled.telemetry":!1},function(t){t||(e.eventData.lastSuccess=u,e.eventData.tokenU=r)},t)}},new st),it=et.postTurnstileEvent.bind(et),rt=new tt,nt=rt.postMapLoadEvent.bind(rt),ot=500,at=50;function st(t){K.call(this,"appUserTurnstile"),this._customAccessToken=t}function ut(){$.call(this,"map.load"),this.success={},this.skuToken=""}function lt(){d.caches&&!X&&(X=d.caches.open("mapbox-tiles"))}function ct(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var dt,ft=1/0;function yt(){return null==dt&&(dt=d.OffscreenCanvas&&new d.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof d.createImageBitmap),dt}var mt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(mt);var gt,vt=((gt=Error)&&(xt.__proto__=gt),((xt.prototype=Object.create(gt&&gt.prototype)).constructor=xt).prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},xt),_t=M()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===d.location.protocol?d.parent:d).location.href};function xt(t,e,i){401===e&&G(i)&&(t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),gt.call(this,t),this.status=e,this.url=i,this.name=this.constructor.name,this.message=t}function bt(t,e){if(!(/^file:/.test(i=t.url)||/^file:/.test(_t())&&!/^\w+:/.test(i))){if(d.fetch&&d.Request&&d.AbortController&&d.Request.prototype.hasOwnProperty("signal"))return function(n,l){var t,e=new d.AbortController,c=new d.Request(n.url,{method:n.method||"GET",body:n.body,credentials:n.credentials,headers:n.headers,referrer:_t(),signal:e.signal}),p=!1,h=!1,o=0<(t=c.url).indexOf("sku=")&&G(t);"json"===n.type&&c.headers.set("Accept","application/json");function i(t,e,i){if(!h){if(t&&"SecurityError"!==t.message&&ht(t),e&&i)return a(e);var r=Date.now();d.fetch(c).then(function(t){if(t.ok){var e=o?t.clone():null;return a(t,e,r)}return l(new vt(t.statusText,t.status,n.url))}).catch(function(t){20!==t.code&&l(new Error(t.message))})}}var a=function(a,s,u){("arrayBuffer"===n.type?a.arrayBuffer():"json"===n.type?a.json():a.text()).then(function(t){var i,e,r,n,o;h||(s&&u&&(i=c,e=s,r=u,lt(),X&&(n={status:e.status,statusText:e.statusText,headers:new d.Headers},e.headers.forEach(function(t,e){return n.headers.set(e,t)}),(o=w(e.headers.get("Cache-Control")||""))["no-store"]||(o["max-age"]&&n.headers.set("Expires",new Date(r+1e3*o["max-age"]).toUTCString()),new Date(n.headers.get("Expires")).getTime()-r<42e4||function(t,e){if(void 0===J)try{new Response(new ReadableStream),J=!0}catch(t){J=!1}J?e(t.body):t.blob().then(e)}(e,function(t){var e=new d.Response(t,n);lt(),X&&X.then(function(t){return t.put(ct(i.url),e)}).catch(function(t){return ht(t.message)})})))),p=!0,l(null,t,a.headers.get("Cache-Control"),a.headers.get("Expires")))}).catch(function(t){h||l(new Error(t.message))})};return o?function(t,r){if(lt(),!X)return r(null);var n=ct(t.url);X.then(function(i){i.match(n).then(function(t){var e=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),i=w(t.headers.get("Cache-Control")||"");return e>Date.now()&&!i["no-cache"]}(t);i.delete(n),e&&i.put(n,t.clone()),r(null,t,e)}).catch(r)}).catch(r)}(c,i):i(null,null),{cancel:function(){h=!0,p||e.abort()}}}(t,e);if(M()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var i;return function(e,i){var r=new d.XMLHttpRequest;for(var t in r.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(r.responseType="arraybuffer"),e.headers)r.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===e.credentials,r.onerror=function(){i(new Error(r.statusText))},r.onload=function(){if((200<=r.status&&r.status<300||0===r.status)&&null!==r.response){var t=r.response;if("json"===e.type)try{t=JSON.parse(r.response)}catch(t){return i(t)}i(null,t,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else i(new vt(r.statusText,r.status,e.url))},r.send(e.body),{cancel:function(){return r.abort()}}}(t,e)}function Mt(t,e){return bt(f(t,{type:"arrayBuffer"}),e)}var wt=function(t,e){return bt(f(t,{method:"POST"}),e)},It=[],Tt=0,Lt=function(t,a){if(P.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Tt>=k.MAX_PARALLEL_IMAGE_REQUESTS){var e={requestParameters:t,callback:a,cancelled:!1,cancel:function(){this.cancelled=!0}};return It.push(e),e}Tt++;function s(){if(!i)for(i=!0,Tt--;It.length&&Tt<k.MAX_PARALLEL_IMAGE_REQUESTS;){var t=It.shift();t.cancelled||(t.cancel=Lt(t.requestParameters,t.callback).cancel)}}var i=!1,r=Mt(t,function(t,e,i,r){var n,o;s(),t?a(t):e&&(yt()?(n=a,o=new d.Blob([new Uint8Array(e)],{type:"image/png"}),d.createImageBitmap(o).then(function(t){n(null,t)}).catch(function(t){n(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(t,e,i,r){var n=new d.Image,o=d.URL;n.onload=function(){e(null,n),o.revokeObjectURL(n.src)},n.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var a=new d.Blob([new Uint8Array(t)],{type:"image/png"});n.cacheControl=i,n.expires=r,n.src=t.byteLength?o.createObjectURL(a):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(e,a,i,r))});return{cancel:function(){r.cancel(),s()}}};function zt(t,e,i){i[t]&&-1!==i[t].indexOf(e)||(i[t]=i[t]||[],i[t].push(e))}function Dt(t,e,i){var r;i&&i[t]&&(-1!==(r=i[t].indexOf(e))&&i[t].splice(r,1))}function At(t,e){void 0===e&&(e={}),f(this,e),this.type=t}function St(){}var Et,Ct=((Et=At)&&(Nt.__proto__=Et),(Nt.prototype=Object.create(Et&&Et.prototype)).constructor=Nt);function Nt(t,e){void 0===e&&(e={}),Et.call(this,"error",f({error:t},e))}St.prototype.on=function(t,e){return this._listeners=this._listeners||{},zt(t,e,this._listeners),this},St.prototype.off=function(t,e){return Dt(t,e,this._listeners),Dt(t,e,this._oneTimeListeners),this},St.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},zt(t,e,this._oneTimeListeners),this},St.prototype.fire=function(t,e){"string"==typeof t&&(t=new At(t,e||{}));var i=t.type;if(this.listens(i)){for(var r=0,n=(t.target=this)._listeners&&this._listeners[i]?this._listeners[i].slice():[];r<n.length;r+=1)n[r].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];o<a.length;o+=1){var s=a[o];Dt(i,s,this._oneTimeListeners),s.call(this,t)}var u=this._eventedParent;u&&(f(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(t))}else t instanceof Ct&&console.error(t.error);return this},St.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&0<this._listeners[t].length||this._oneTimeListeners&&this._oneTimeListeners[t]&&0<this._oneTimeListeners[t].length||this._eventedParent&&this._eventedParent.listens(t)};var jt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!(St.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this})},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},kt=function(t,e,i,r){this.message=(t?t+": ":"")+i,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)};function Pt(t){var e=t.value;return e?[new kt(t.key,e,"constants have been deprecated as of v8")]:[]}function Ot(t){for(var e=[],i=arguments.length-1;0<i--;)e[i]=arguments[i+1];for(var r=0,n=e;r<n.length;r+=1){var o=n[r];for(var a in o)t[a]=o[a]}return t}function Bt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Ut(t){if(Array.isArray(t))return t.map(Ut);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var i in t)e[i]=Ut(t[i]);return e}return Bt(t)}function Rt(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var i=0,r=e;i<r.length;i+=1){var n=r[i];this.bindings[n[0]]=n[1]}}var Ft,Zt=((Ft=Error)&&(Vt.__proto__=Ft),(Vt.prototype=Object.create(Ft&&Ft.prototype)).constructor=Vt);function Vt(t,e){Ft.call(this,e),this.message=e,this.key=t}Rt.prototype.concat=function(t){return new Rt(this,t)},Rt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Rt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Gt={kind:"null"},Yt={kind:"number"},Qt={kind:"string"},Wt={kind:"boolean"},Ht={kind:"color"},qt={kind:"object"},Xt={kind:"value"},Jt={kind:"collator"},Kt={kind:"formatted"},$t={kind:"resolvedImage"};function te(t,e){return{kind:"array",itemType:t,N:e}}function ee(t){if("array"!==t.kind)return t.kind;var e=ee(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}var ie=[Gt,Yt,Qt,Wt,Ht,Kt,qt,te(Xt),$t];function re(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!re(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var i=0,r=ie;i<r.length;i+=1)if(!re(r[i],e))return null}return"Expected "+ee(t)+" but found "+ee(e)+" instead."}function ne(e,t){return t.some(function(t){return t.kind===e.kind})}function oe(e,t){return t.some(function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e})}var ae=e(function(t,e){var d={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function f(t){return(t=Math.round(t))<0?0:255<t?255:t}function y(t){return f("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function m(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:1<e?1:e;var e}function g(t,e,i){return i<0?i+=1:1<i&&--i,6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{e.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in d)return d[i].slice();if("#"===i[0])return 4===i.length?0<=(e=parseInt(i.substr(1),16))&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&0<=(e=parseInt(i.substr(1),16))&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var r=i.indexOf("("),n=i.indexOf(")");if(-1!==r&&n+1===i.length){var o=i.substr(0,r),a=i.substr(r+1,n-(r+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=m(a.pop());case"rgb":return 3!==a.length?null:[y(a[0]),y(a[1]),y(a[2]),s];case"hsla":if(4!==a.length)return null;s=m(a.pop());case"hsl":if(3!==a.length)return null;var u=(parseFloat(a[0])%360+360)%360/360,l=m(a[1]),c=m(a[2]),p=c<=.5?c*(l+1):c+l-c*l,h=2*c-p;return[f(255*g(h,p,u+1/3)),f(255*g(h,p,u)),f(255*g(h,p,u-1/3)),s];default:return null}}return null}}catch(t){}}).parseCSSColor,se=function(t,e,i,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=i,this.a=r};se.parse=function(t){if(t){if(t instanceof se)return t;if("string"==typeof t){var e=ae(t);if(e)return new se(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},se.prototype.toString=function(){var t=this.toArray(),e=t[1],i=t[2],r=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(i)+","+r+")"},se.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},se.black=new se(0,0,0,1),se.white=new se(1,1,1,1),se.transparent=new se(0,0,0,0),se.red=new se(1,0,0,1);var ue=function(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ue.prototype.compare=function(t,e){return this.collator.compare(t,e)},ue.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};function le(t,e,i,r,n){this.text=t,this.image=e,this.scale=i,this.fontStack=r,this.textColor=n}var ce=function(t){this.sections=t};ce.fromString=function(t){return new ce([new le(t,null,null,null,null)])},ce.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length})},ce.factory=function(t){return t instanceof ce?t:ce.fromString(t)},ce.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(t){return t.text}).join("")},ce.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var r,n=i[e];n.image?t.push(["image",n.image.name]):(t.push(n.text),r={},n.fontStack&&(r["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(r["font-scale"]=n.scale),n.textColor&&(r["text-color"]=["rgba"].concat(n.textColor.toArray())),t.push(r))}return t};var pe=function(t){this.name=t.name,this.available=t.available};function he(t,e,i,r){return"number"==typeof t&&0<=t&&t<=255&&"number"==typeof e&&0<=e&&e<=255&&"number"==typeof i&&0<=i&&i<=255?void 0===r||"number"==typeof r&&0<=r&&r<=1?null:"Invalid rgba value ["+[t,e,i,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,i,r]:[t,e,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function de(t){if(null===t)return 1;if("string"==typeof t)return 1;if("boolean"==typeof t)return 1;if("number"==typeof t)return 1;if(t instanceof se)return 1;if(t instanceof ue)return 1;if(t instanceof ce)return 1;if(t instanceof pe)return 1;if(Array.isArray(t)){for(var e=0,i=t;e<i.length;e+=1)if(!de(i[e]))return;return 1}if("object"==typeof t){for(var r in t)if(!de(t[r]))return;return 1}}function fe(t){if(null===t)return Gt;if("string"==typeof t)return Qt;if("boolean"==typeof t)return Wt;if("number"==typeof t)return Yt;if(t instanceof se)return Ht;if(t instanceof ue)return Jt;if(t instanceof ce)return Kt;if(t instanceof pe)return $t;if(Array.isArray(t)){for(var e,i=t.length,r=0,n=t;r<n.length;r+=1){var o=fe(n[r]);if(e){if(e===o)continue;e=Xt;break}e=o}return te(e||Xt,i)}return qt}function ye(t){var e=typeof t;return null===t?"":"string"==e||"number"==e||"boolean"==e?String(t):t instanceof se||t instanceof ce||t instanceof pe?t.toString():JSON.stringify(t)}pe.prototype.toString=function(){return this.name},pe.fromString=function(t){return t?new pe({name:t,available:!1}):null},pe.prototype.serialize=function(){return["image",this.name]};function me(t,e){this.type=t,this.value=e}me.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!de(t[1]))return e.error("invalid value");var i=t[1],r=fe(i),n=e.expectedType;return"array"!==r.kind||0!==r.N||!n||"array"!==n.kind||"number"==typeof n.N&&0!==n.N||(r=n),new me(r,i)},me.prototype.evaluate=function(){return this.value},me.prototype.eachChild=function(){},me.prototype.outputDefined=function(){return!0},me.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof se?["rgba"].concat(this.value.toArray()):this.value instanceof ce?this.value.serialize():this.value};var ge=function(t){this.name="ExpressionEvaluationError",this.message=t};ge.prototype.toJSON=function(){return this.message};function ve(t,e){this.type=t,this.args=e}var _e={string:Qt,number:Yt,boolean:Wt,object:qt};ve.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i,r,n,o=1,a=t[0];if("array"===a){if(2<t.length){var s=t[1];if("string"!=typeof s||!(s in _e)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);r=_e[s],o++}else r=Xt;if(3<t.length){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);n=t[2],o++}i=te(r,n)}else i=_e[a];for(var u=[];o<t.length;o++){var l=e.parse(t[o],o,Xt);if(!l)return null;u.push(l)}return new ve(i,u)},ve.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var i=this.args[e].evaluate(t);if(!re(this.type,fe(i)))return i;if(e===this.args.length-1)throw new ge("Expected value to be of type "+ee(this.type)+", but found "+ee(fe(i))+" instead.")}return null},ve.prototype.eachChild=function(t){this.args.forEach(t)},ve.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},ve.prototype.serialize=function(){var t,e,i=this.type,r=[i.kind];return"array"===i.kind&&("string"!==(t=i.itemType).kind&&"number"!==t.kind&&"boolean"!==t.kind||(r.push(t.kind),("number"==typeof(e=i.N)||1<this.args.length)&&r.push(e))),r.concat(this.args.map(function(t){return t.serialize()}))};function xe(t){this.type=Kt,this.sections=t}xe.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");for(var r=[],n=!1,o=1;o<=t.length-1;++o){var a=t[o];if(n&&"object"==typeof a&&!Array.isArray(a)){n=!1;var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,Yt)))return null;var u=null;if(a["text-font"]&&!(u=e.parse(a["text-font"],1,te(Qt))))return null;var l=null;if(a["text-color"]&&!(l=e.parse(a["text-color"],1,Ht)))return null;var c=r[r.length-1];c.scale=s,c.font=u,c.textColor=l}else{var p=e.parse(t[o],1,Xt);if(!p)return null;var h=p.type.kind;if("string"!==h&&"value"!==h&&"null"!==h&&"resolvedImage"!==h)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");n=!0,r.push({content:p,scale:null,font:null,textColor:null})}}return new xe(r)},xe.prototype.evaluate=function(i){return new ce(this.sections.map(function(t){var e=t.content.evaluate(i);return fe(e)===$t?new le("",e,null,null,null):new le(ye(e),null,t.scale?t.scale.evaluate(i):null,t.font?t.font.evaluate(i).join(","):null,t.textColor?t.textColor.evaluate(i):null)}))},xe.prototype.eachChild=function(t){for(var e=0,i=this.sections;e<i.length;e+=1){var r=i[e];t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}},xe.prototype.outputDefined=function(){return!1},xe.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var r=i[e];t.push(r.content.serialize());var n={};r.scale&&(n["font-scale"]=r.scale.serialize()),r.font&&(n["text-font"]=r.font.serialize()),r.textColor&&(n["text-color"]=r.textColor.serialize()),t.push(n)}return t};function be(t){this.type=$t,this.input=t}be.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,Qt);return i?new be(i):e.error("No image name provided.")},be.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=pe.fromString(e);return i&&t.availableImages&&(i.available=-1<t.availableImages.indexOf(e)),i},be.prototype.eachChild=function(t){t(this.input)},be.prototype.outputDefined=function(){return!1},be.prototype.serialize=function(){return["image",this.input.serialize()]};function Me(t,e){this.type=t,this.args=e}var we={"to-boolean":Wt,"to-color":Ht,"to-number":Yt,"to-string":Qt};Me.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");for(var r=we[i],n=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,Xt);if(!a)return null;n.push(a)}return new Me(r,n)},Me.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,i,r=0,n=this.args;r<n.length;r+=1){if(i=null,(e=n[r].evaluate(t))instanceof se)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(i=e.length<3||4<e.length?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":he(e[0],e[1],e[2],e[3])))return new se(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ge(i||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"!==this.type.kind)return"formatted"===this.type.kind?ce.fromString(ye(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?pe.fromString(ye(this.args[0].evaluate(t))):ye(this.args[0].evaluate(t));for(var a=null,s=0,u=this.args;s<u.length;s+=1){if(null===(a=u[s].evaluate(t)))return 0;var l=Number(a);if(!isNaN(l))return l}throw new ge("Could not convert "+JSON.stringify(a)+" to number.")},Me.prototype.eachChild=function(t){this.args.forEach(t)},Me.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},Me.prototype.serialize=function(){if("formatted"===this.type.kind)return new xe([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new be(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};function Ie(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}var Te=["Unknown","Point","LineString","Polygon"];Ie.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Ie.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Te[this.feature.type]:this.feature.type:null},Ie.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Ie.prototype.canonicalID=function(){return this.canonical},Ie.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Ie.prototype.parseColor=function(t){return this._parseColorCache[t]||(this._parseColorCache[t]=se.parse(t))};var Le=function(t,e,i,r){this.name=t,this.type=e,this._evaluate=i,this.args=r};Le.prototype.evaluate=function(t){return this._evaluate(t,this.args)},Le.prototype.eachChild=function(t){this.args.forEach(t)},Le.prototype.outputDefined=function(){return!1},Le.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},Le.parse=function(i,t){var e,r=i[0],n=Le.definitions[r];if(!n)return t.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(n)?n[0]:n.type,a=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,s=a.filter(function(t){var e=t[0];return!Array.isArray(e)||e.length===i.length-1}),u=null,l=0,c=s;l<c.length;l+=1){for(var p=c[l],h=p[0],d=p[1],u=new Ve(t.registry,t.path,null,t.scope),f=[],y=!1,m=1;m<i.length;m++){var g=i[m],v=Array.isArray(h)?h[m-1]:h.type,_=u.parse(g,1+f.length,v);if(!_){y=!0;break}f.push(_)}if(!y)if(Array.isArray(h)&&h.length!==f.length)u.error("Expected "+h.length+" arguments, but found "+f.length+" instead.");else{for(var x=0;x<f.length;x++){var b=Array.isArray(h)?h[x]:h.type,M=f[x];u.concat(x+1).checkSubtype(b,M.type)}if(0===u.errors.length)return new Le(r,o,d,f)}}if(1===s.length)(e=t.errors).push.apply(e,u.errors);else{for(var w=(s.length?s:a).map(function(t){var e=t[0];return Array.isArray(e)?"("+e.map(ee).join(", ")+")":"("+ee(e.type)+"...)"}).join(" | "),I=[],T=1;T<i.length;T++){var L=t.parse(i[T],1+I.length);if(!L)return null;I.push(ee(L.type))}t.error("Expected arguments of type "+w+", but found ("+I.join(", ")+") instead.")}return null},Le.register=function(t,e){for(var i in Le.definitions=e)t[i]=Le};function ze(t,e,i){this.type=Jt,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e}function De(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Ae(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Se(t,e){for(var i,r,n,o,a,s,u,l,c,p=!1,h=0,d=e.length;h<d;h++)for(var f=e[h],y=0,m=f.length;y<m-1;y++){if((n=t[0]-(i=f[y])[0])*(s=t[1]-(r=f[y+1])[1])-(a=t[0]-r[0])*(o=t[1]-i[1])==0&&n*a<=0&&o*s<=0)return;u=t,l=f[y],c=f[y+1],l[1]>u[1]!=c[1]>u[1]&&u[0]<(c[0]-l[0])*(u[1]-l[1])/(c[1]-l[1])+l[0]&&(p=!p)}return p}function Ee(t,e,i,r){var n=r[0]-i[0],o=r[1]-i[1],a=(t[0]-i[0])*o-n*(t[1]-i[1]),s=(e[0]-i[0])*o-n*(e[1]-i[1]);return 0<a&&s<0||a<0&&0<s}function Ce(t,e){for(var i=0;i<t.length;++i)if(!Se(t[i],e))return;for(var r=0;r<t.length-1;++r)if(function(t,e,i){for(var r,n,o,a,s=0,u=i;s<u.length;s+=1)for(var l=u[s],c=0;c<l.length-1;++c)if(0!=(o=[(n=l[c+1])[0]-(r=l[c])[0],n[1]-r[1]])[0]*(a=[e[0]-t[0],e[1]-t[1]])[1]-o[1]*a[0]&&Ee(t,e,r,n)&&Ee(r,n,t,e))return 1}(t[r],t[r+1],e))return;return 1}function Ne(t,e,i){for(var r,n,o,a,s,u=[],l=0;l<t.length;l++){for(var c=[],p=0;p<t[l].length;p++){var h=(r=t[l][p],n=i,0,o=(180+r[0])/360,a=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,s=Math.pow(2,n.z),[Math.round(o*s*8192),Math.round(a*s*8192)]);De(e,h),c.push(h)}u.push(c)}return u}function je(t,e,i){for(var r=[],n=0;n<t.length;n++){var o=Ne(t[n],e,i);r.push(o)}return r}function ke(t,e,i,r){var n,o;(t[0]<i[0]||t[0]>i[2])&&(n=.5*r,0===(o=t[0]-i[0]>n?-r:i[0]-t[0]>n?r:0)&&(o=t[0]-i[2]>n?-r:i[2]-t[0]>n?r:0),t[0]+=o),De(e,t)}function Pe(t,e,i,r){for(var n=8192*Math.pow(2,r.z),o=[8192*r.x,8192*r.y],a=[],s=0,u=t;s<u.length;s+=1)for(var l=0,c=u[s];l<c.length;l+=1){var p=c[l],h=[p.x+o[0],p.y+o[1]];ke(h,e,i,n),a.push(h)}return a}function Oe(t,e,i,r){for(var n,o=8192*Math.pow(2,r.z),a=[8192*r.x,8192*r.y],s=[],u=0,l=t;u<l.length;u+=1){for(var c=[],p=0,h=l[u];p<h.length;p+=1){var d=h[p],f=[d.x+a[0],d.y+a[1]];De(e,f),c.push(f)}s.push(c)}if(e[2]-e[0]<=o/2){(n=e)[0]=n[1]=1/0,n[2]=n[3]=-1/0;for(var y=0,m=s;y<m.length;y+=1)for(var g=0,v=m[y];g<v.length;g+=1)ke(v[g],e,i,o)}return s}ze.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");var r=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,Wt);if(!r)return null;var n=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,Wt);if(!n)return null;var o=null;return i.locale&&!(o=e.parse(i.locale,1,Qt))?null:new ze(r,n,o)},ze.prototype.evaluate=function(t){return new ue(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},ze.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},ze.prototype.outputDefined=function(){return!1},ze.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Be=function(t,e){this.type=Wt,this.geojson=t,this.geometries=e};function Ue(t){if(t instanceof Le){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Be)return!1;var e=!0;return t.eachChild(function(t){e&&!Ue(t)&&(e=!1)}),e}function Re(t){if(!(t instanceof Le&&"feature-state"===t.name)){var e=!0;return t.eachChild(function(t){e&&!Re(t)&&(e=!1)}),e}}function Fe(t,e){if(t instanceof Le&&0<=e.indexOf(t.name))return!1;var i=!0;return t.eachChild(function(t){i&&!Fe(t,e)&&(i=!1)}),i}Be.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(de(t[1])){var i=t[1];if("FeatureCollection"===i.type)for(var r=0;r<i.features.length;++r){var n=i.features[r].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new Be(i,i.features[r].geometry)}else if("Feature"===i.type){var o=i.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Be(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new Be(i,i)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Be.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=t.canonicalID();if("Polygon"===e.type){var o=Ne(e.coordinates,r,n),a=Pe(t.geometry(),i,r,n);if(!Ae(i,r))return!1;for(var s=0,u=a;s<u.length;s+=1)if(!Se(u[s],o))return!1}if("MultiPolygon"===e.type){var l=je(e.coordinates,r,n),c=Pe(t.geometry(),i,r,n);if(!Ae(i,r))return!1;for(var p=0,h=c;p<h.length;p+=1)if(!function(t,e){for(var i=0;i<e.length;i++)if(Se(t,e[i]))return 1}(h[p],l))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=t.canonicalID();if("Polygon"===e.type){var o=Ne(e.coordinates,r,n),a=Oe(t.geometry(),i,r,n);if(!Ae(i,r))return!1;for(var s=0,u=a;s<u.length;s+=1)if(!Ce(u[s],o))return!1}if("MultiPolygon"===e.type){var l=je(e.coordinates,r,n),c=Oe(t.geometry(),i,r,n);if(!Ae(i,r))return!1;for(var p=0,h=c;p<h.length;p+=1)if(!function(t,e){for(var i=0;i<e.length;i++)if(Ce(t,e[i]))return 1}(h[p],l))return!1}return!0}(t,this.geometries)}return!1},Be.prototype.eachChild=function(){},Be.prototype.outputDefined=function(){return!0},Be.prototype.serialize=function(){return["within",this.geojson]};function Ze(t,e){this.type=e.type,this.name=t,this.boundExpression=e}Ze.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var i=t[1];return e.scope.has(i)?new Ze(i,e.scope.get(i)):e.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},Ze.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Ze.prototype.eachChild=function(){},Ze.prototype.outputDefined=function(){return!1},Ze.prototype.serialize=function(){return["var",this.name]};var Ve=function(t,e,i,r,n){void 0===e&&(e=[]),void 0===r&&(r=new Rt),void 0===n&&(n=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=r,this.errors=n,this.expectedType=i};function Ge(t,e){for(var i,r=t.length-1,n=0,o=r,a=0;n<=o;)if((i=t[a=Math.floor((n+o)/2)])<=e){if(a===r||e<t[a+1])return a;n=a+1}else{if(!(e<i))throw new ge("Input is not a number.");o=a-1}return 0}Ve.prototype.parse=function(t,e,i,r,n){return void 0===n&&(n={}),e?this.concat(e,i,r)._parse(t,n):this._parse(t,n)},Ve.prototype._parse=function(t,e){function i(t,e,i){return"assert"===i?new ve(e,[t]):"coerce"===i?new Me(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var n=this.registry[r];if(n){var o=n.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=i(o,a,e.typeAnnotation||"coerce");else o=i(o,a,e.typeAnnotation||"assert")}if(!(o instanceof me)&&"resolvedImage"!==o.type.kind&&function e(t){if(t instanceof Ze)return e(t.boundExpression);if(t instanceof Le&&"error"===t.name)return!1;if(t instanceof ze)return!1;if(t instanceof Be)return!1;var i=t instanceof Me||t instanceof ve,r=!0;return t.eachChild(function(t){r=i?r&&e(t):r&&t instanceof me}),!!r&&Ue(t)&&Fe(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var u=new Ie;try{o=new me(o.type,o.evaluate(u))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},Ve.prototype.concat=function(t,e,i){var r="number"==typeof t?this.path.concat(t):this.path,n=i?this.scope.concat(i):this.scope;return new Ve(this.registry,r,e||null,n,this.errors)},Ve.prototype.error=function(t){for(var e=[],i=arguments.length-1;0<i--;)e[i]=arguments[i+1];var r=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new Zt(r,t))},Ve.prototype.checkSubtype=function(t,e){var i=re(t,e);return i&&this.error(i),i};var Ye=function(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,n=i;r<n.length;r+=1){var o=n[r],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};function Qe(t,e,i){return t*(1-i)+e*i}Ye.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var i=e.parse(t[1],1,Yt);if(!i)return null;var r=[],n=null;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var o=1;o<t.length;o+=2){var a=1===o?-1/0:t[o],s=t[o+1],u=o,l=o+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var c=e.parse(s,l,n);if(!c)return null;n=n||c.type,r.push([a,c])}return new Ye(n,i,r)},Ye.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);var n=e.length;return r>=e[n-1]?i[n-1].evaluate(t):i[Ge(e,r)].evaluate(t)},Ye.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},Ye.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},Ye.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)0<e&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var We=Object.freeze({__proto__:null,number:Qe,color:function(t,e,i){return new se(Qe(t.r,e.r,i),Qe(t.g,e.g,i),Qe(t.b,e.b,i),Qe(t.a,e.a,i))},array:function(t,i,r){return t.map(function(t,e){return Qe(t,i[e],r)})}}),He=6/29*3*(6/29),qe=Math.PI/180,Xe=180/Math.PI;function Je(t){return.008856451679035631<t?Math.pow(t,1/3):t/He+4/29}function Ke(t){return 6/29<t?t*t*t:He*(t-4/29)}function $e(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ti(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ei(t){var e=ti(t.r),i=ti(t.g),r=ti(t.b),n=Je((.4124564*e+.3575761*i+.1804375*r)/.95047),o=Je(.2126729*e+.7151522*i+.072175*r);return{l:116*o-16,a:500*(n-o),b:200*(o-Je((.0193339*e+.119192*i+.9503041*r)/1.08883)),alpha:t.a}}function ii(t){var e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200,e=+Ke(e),i=.95047*Ke(i),r=1.08883*Ke(r);return new se($e(3.2404542*i-1.5371385*e-.4985314*r),$e(-.969266*i+1.8760108*e+.041556*r),$e(.0556434*i-.2040259*e+1.0572252*r),t.alpha)}var ri={forward:ei,reverse:ii,interpolate:function(t,e,i){return{l:Qe(t.l,e.l,i),a:Qe(t.a,e.a,i),b:Qe(t.b,e.b,i),alpha:Qe(t.alpha,e.alpha,i)}}},ni={forward:function(t){var e=ei(t),i=e.l,r=e.a,n=e.b,o=Math.atan2(n,r)*Xe;return{h:o<0?360+o:o,c:Math.sqrt(r*r+n*n),l:i,alpha:t.a}},reverse:function(t){var e=t.h*qe,i=t.c;return ii({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:(r=t.h,n=e.h,r+i*(180<(o=n-r)||o<-180?o-360*Math.round(o/360):o)),c:Qe(t.c,e.c,i),l:Qe(t.l,e.l,i),alpha:Qe(t.alpha,e.alpha,i)};var r,n,o}},oi=Object.freeze({__proto__:null,lab:ri,hcl:ni}),ai=function(t,e,i,r,n){this.type=t,this.operator=e,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(var o=0,a=n;o<a.length;o+=1){var s=a[o],u=s[1];this.labels.push(s[0]),this.outputs.push(u)}};function si(t,e,i,r){var n=r-i,o=t-i;return 0==n?0:1===e?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}ai.interpolationFactor=function(t,e,i,r){var n,o=0;return"exponential"===t.name?o=si(e,t.base,i,r):"linear"===t.name?o=si(e,1,i,r):"cubic-bezier"===t.name&&(n=t.controlPoints,o=new a(n[0],n[1],n[2],n[3]).solve(si(e,1,i,r))),o},ai.parse=function(t,e){var i=t[0],r=t[1],n=t[2],o=t.slice(3);if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some(function(t){return"number"!=typeof t||t<0||1<t}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,2,Yt)))return null;var u=[],l=null;"interpolate-hcl"===i||"interpolate-lab"===i?l=Ht:e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(var c=0;c<o.length;c+=2){var p=o[c],h=o[c+1],d=c+3,f=c+4;if("number"!=typeof p)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(u.length&&u[u.length-1][0]>=p)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);var y=e.parse(h,f,l);if(!y)return null;l=l||y.type,u.push([p,y])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new ai(l,i,r,n,u):e.error("Type "+ee(l)+" is not interpolatable.")},ai.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);var n=e.length;if(r>=e[n-1])return i[n-1].evaluate(t);var o=Ge(e,r),a=ai.interpolationFactor(this.interpolation,r,e[o],e[o+1]),s=i[o].evaluate(t),u=i[o+1].evaluate(t);return"interpolate"===this.operator?We[this.type.kind.toLowerCase()](s,u,a):"interpolate-hcl"===this.operator?ni.reverse(ni.interpolate(ni.forward(s),ni.forward(u),a)):ri.reverse(ri.interpolate(ri.forward(s),ri.forward(u),a))},ai.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},ai.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},ai.prototype.serialize=function(){for(var t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints),e=[this.operator,t,this.input.serialize()],i=0;i<this.labels.length;i++)e.push(this.labels[i],this.outputs[i].serialize());return e};var ui=function(t,e){this.type=t,this.args=e};ui.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var i=null,r=e.expectedType;r&&"value"!==r.kind&&(i=r);for(var n=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=e.parse(a[o],1+n.length,i,void 0,{typeAnnotation:"omit"});if(!s)return null;i=i||s.type,n.push(s)}var u=r&&n.some(function(t){return re(r,t.type)});return new ui(u?Xt:i,n)},ui.prototype.evaluate=function(t){for(var e,i=null,r=0,n=0,o=this.args;n<o.length&&(r++,(i=o[n].evaluate(t))&&i instanceof pe&&!i.available&&(e=e||i.name,i=null,r===this.args.length&&(i=e)),null===i);n+=1);return i},ui.prototype.eachChild=function(t){this.args.forEach(t)},ui.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},ui.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var li=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};li.prototype.evaluate=function(t){return this.result.evaluate(t)},li.prototype.eachChild=function(t){for(var e=0,i=this.bindings;e<i.length;e+=1)t(i[e][1]);t(this.result)},li.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var i=[],r=1;r<t.length-1;r+=2){var n=t[r];if("string"!=typeof n)return e.error("Expected string, but found "+typeof n+" instead.",r);if(/[^a-zA-Z0-9_]/.test(n))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=e.parse(t[r+1],r+1);if(!o)return null;i.push([n,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return a?new li(i,a):null},li.prototype.outputDefined=function(){return this.result.outputDefined()},li.prototype.serialize=function(){for(var t=["let"],e=0,i=this.bindings;e<i.length;e+=1){var r=i[e];t.push(r[0],r[1].serialize())}return t.push(this.result.serialize()),t};function ci(t,e,i){this.type=t,this.index=e,this.input=i}ci.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Yt),r=e.parse(t[2],2,te(e.expectedType||Xt));return i&&r?new ci(r.type.itemType,i,r):null},ci.prototype.evaluate=function(t){var e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new ge("Array index out of bounds: "+e+" < 0.");if(e>=i.length)throw new ge("Array index out of bounds: "+e+" > "+(i.length-1)+".");if(e!==Math.floor(e))throw new ge("Array index must be an integer, but found "+e+" instead.");return i[e]},ci.prototype.eachChild=function(t){t(this.index),t(this.input)},ci.prototype.outputDefined=function(){return!1},ci.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};function pi(t,e){this.type=Wt,this.needle=t,this.haystack=e}pi.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Xt),r=e.parse(t[2],2,Xt);return i&&r?ne(i.type,[Wt,Qt,Yt,Gt,Xt])?new pi(i,r):e.error("Expected first argument to be of type boolean, string, number or null, but found "+ee(i.type)+" instead"):null},pi.prototype.evaluate=function(t){var e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!oe(e,["boolean","string","number","null"]))throw new ge("Expected first argument to be of type boolean, string, number or null, but found "+ee(fe(e))+" instead.");if(!oe(i,["string","array"]))throw new ge("Expected second argument to be of type array or string, but found "+ee(fe(i))+" instead.");return 0<=i.indexOf(e)},pi.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},pi.prototype.outputDefined=function(){return!0},pi.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};function hi(t,e,i){this.type=Yt,this.needle=t,this.haystack=e,this.fromIndex=i}hi.parse=function(t,e){if(t.length<=2||5<=t.length)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Xt),r=e.parse(t[2],2,Xt);if(!i||!r)return null;if(!ne(i.type,[Wt,Qt,Yt,Gt,Xt]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+ee(i.type)+" instead");if(4!==t.length)return new hi(i,r);var n=e.parse(t[3],3,Yt);return n?new hi(i,r,n):null},hi.prototype.evaluate=function(t){var e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!oe(e,["boolean","string","number","null"]))throw new ge("Expected first argument to be of type boolean, string, number or null, but found "+ee(fe(e))+" instead.");if(!oe(i,["string","array"]))throw new ge("Expected second argument to be of type array or string, but found "+ee(fe(i))+" instead.");if(this.fromIndex){var r=this.fromIndex.evaluate(t);return i.indexOf(e,r)}return i.indexOf(e)},hi.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},hi.prototype.outputDefined=function(){return!1},hi.prototype.serialize=function(){if(null==this.fromIndex||void 0===this.fromIndex)return["index-of",this.needle.serialize(),this.haystack.serialize()];var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]};function di(t,e,i,r,n,o){this.inputType=t,this.type=e,this.input=i,this.cases=r,this.outputs=n,this.otherwise=o}di.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var i,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var n={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],u=t[a+1];Array.isArray(s)||(s=[s]);var l=e.concat(a);if(0===s.length)return l.error("Expected at least one branch label.");for(var c=0,p=s;c<p.length;c+=1){var h=p[c];if("number"!=typeof h&&"string"!=typeof h)return l.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return l.error("Numeric branch labels must be integer values.");if(i){if(l.checkSubtype(i,fe(h)))return null}else i=fe(h);if(void 0!==n[String(h)])return l.error("Branch labels must be unique.");n[String(h)]=o.length}var d=e.parse(u,a,r);if(!d)return null;r=r||d.type,o.push(d)}var f=e.parse(t[1],1,Xt);if(!f)return null;var y=e.parse(t[t.length-1],t.length-1,r);return!y||"value"!==f.type.kind&&e.concat(1).checkSubtype(i,f.type)?null:new di(i,r,f,n,o,y)},di.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(fe(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},di.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},di.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})&&this.otherwise.outputDefined()},di.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],i=[],r={},n=0,o=Object.keys(this.cases).sort();n<o.length;n+=1){var a=o[n];void 0===(p=r[this.cases[a]])?(r[this.cases[a]]=i.length,i.push([this.cases[a],[a]])):i[p][1].push(a)}for(var s=function(t){return"number"===e.inputType.kind?Number(t):t},u=0,l=i;u<l.length;u+=1){var c=l[u],p=c[0],h=c[1];t.push(1===h.length?s(h[0]):h.map(s)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};function fi(t,e,i){this.type=t,this.branches=e,this.otherwise=i}fi.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var r=[],n=1;n<t.length-1;n+=2){var o=e.parse(t[n],n,Wt);if(!o)return null;var a=e.parse(t[n+1],n+1,i);if(!a)return null;r.push([o,a]),i=i||a.type}var s=e.parse(t[t.length-1],t.length-1,i);return s?new fi(i,r,s):null},fi.prototype.evaluate=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var r=i[e],n=r[1];if(r[0].evaluate(t))return n.evaluate(t)}return this.otherwise.evaluate(t)},fi.prototype.eachChild=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var r=i[e],n=r[1];t(r[0]),t(n)}t(this.otherwise)},fi.prototype.outputDefined=function(){return this.branches.every(function(t){return t[1].outputDefined()})&&this.otherwise.outputDefined()},fi.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};function yi(t,e,i,r){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=r}function mi(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function gi(t,e,i,r){return 0===r.compare(e,i)}function vi(s,u,l){var c="=="!==s&&"!="!==s;return a.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var i=t[0],r=e.parse(t[1],1,Xt);if(!r)return null;if(!mi(i,r.type))return e.concat(1).error('"'+i+"\" comparisons are not supported for type '"+ee(r.type)+"'.");var n=e.parse(t[2],2,Xt);if(!n)return null;if(!mi(i,n.type))return e.concat(2).error('"'+i+"\" comparisons are not supported for type '"+ee(n.type)+"'.");if(r.type.kind!==n.type.kind&&"value"!==r.type.kind&&"value"!==n.type.kind)return e.error("Cannot compare types '"+ee(r.type)+"' and '"+ee(n.type)+"'.");c&&("value"===r.type.kind&&"value"!==n.type.kind?r=new ve(n.type,[r]):"value"!==r.type.kind&&"value"===n.type.kind&&(n=new ve(r.type,[n])));var o=null;if(4===t.length){if("string"!==r.type.kind&&"string"!==n.type.kind&&"value"!==r.type.kind&&"value"!==n.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(o=e.parse(t[3],3,Jt)))return null}return new a(r,n,o)},a.prototype.evaluate=function(t){var e=this.lhs.evaluate(t),i=this.rhs.evaluate(t);if(c&&this.hasUntypedArgument){var r=fe(e),n=fe(i);if(r.kind!==n.kind||"string"!==r.kind&&"number"!==r.kind)throw new ge('Expected arguments for "'+s+'" to be (string, string) or (number, number), but found ('+r.kind+", "+n.kind+") instead.")}if(this.collator&&!c&&this.hasUntypedArgument){var o=fe(e),a=fe(i);if("string"!==o.kind||"string"!==a.kind)return u(t,e,i)}return this.collator?l(t,e,i,this.collator.evaluate(t)):u(t,e,i)},a.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},a.prototype.outputDefined=function(){return!0},a.prototype.serialize=function(){var e=[s];return this.eachChild(function(t){e.push(t.serialize())}),e},a;function a(t,e,i){this.type=Wt,this.lhs=t,this.rhs=e,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}}yi.parse=function(t,e){if(t.length<=2||5<=t.length)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Xt),r=e.parse(t[2],2,Yt);if(!i||!r)return null;if(!ne(i.type,[te(Xt),Qt,Xt]))return e.error("Expected first argument to be of type array or string, but found "+ee(i.type)+" instead");if(4!==t.length)return new yi(i.type,i,r);var n=e.parse(t[3],3,Yt);return n?new yi(i.type,i,r,n):null},yi.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!oe(e,["string","array"]))throw new ge("Expected first argument to be of type array or string, but found "+ee(fe(e))+" instead.");if(this.endIndex){var r=this.endIndex.evaluate(t);return e.slice(i,r)}return e.slice(i)},yi.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},yi.prototype.outputDefined=function(){return!1},yi.prototype.serialize=function(){if(null==this.endIndex||void 0===this.endIndex)return["slice",this.input.serialize(),this.beginIndex.serialize()];var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]};function _i(t,e,i,r,n){this.type=Qt,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=n}var xi=vi("==",function(t,e,i){return e===i},gi),bi=vi("!=",function(t,e,i){return e!==i},function(t,e,i,r){return!gi(0,e,i,r)}),Mi=vi("<",function(t,e,i){return e<i},function(t,e,i,r){return r.compare(e,i)<0}),wi=vi(">",function(t,e,i){return i<e},function(t,e,i,r){return 0<r.compare(e,i)}),Ii=vi("<=",function(t,e,i){return e<=i},function(t,e,i,r){return r.compare(e,i)<=0}),Ti=vi(">=",function(t,e,i){return i<=e},function(t,e,i,r){return 0<=r.compare(e,i)});_i.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,Yt);if(!i)return null;var r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");var n=null;if(r.locale&&!(n=e.parse(r.locale,1,Qt)))return null;var o=null;if(r.currency&&!(o=e.parse(r.currency,1,Qt)))return null;var a=null;if(r["min-fraction-digits"]&&!(a=e.parse(r["min-fraction-digits"],1,Yt)))return null;var s=null;return r["max-fraction-digits"]&&!(s=e.parse(r["max-fraction-digits"],1,Yt))?null:new _i(i,n,o,a,s)},_i.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},_i.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},_i.prototype.outputDefined=function(){return!1},_i.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};function Li(t){this.type=Yt,this.input=t}Li.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error("Expected argument of type string or array, but found "+ee(i.type)+" instead."):new Li(i):null},Li.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ge("Expected value to be of type string or array, but found "+ee(fe(e))+" instead.")},Li.prototype.eachChild=function(t){t(this.input)},Li.prototype.outputDefined=function(){return!1},Li.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var zi={"==":xi,"!=":bi,">":wi,"<":Mi,">=":Ti,"<=":Ii,array:ve,at:ci,boolean:ve,case:fi,coalesce:ui,collator:ze,format:xe,image:be,in:pi,"index-of":hi,interpolate:ai,"interpolate-hcl":ai,"interpolate-lab":ai,length:Li,let:li,literal:me,match:di,number:ve,"number-format":_i,object:ve,slice:yi,step:Ye,string:ve,"to-boolean":Me,"to-color":Me,"to-number":Me,"to-string":Me,var:Ze,within:Be};function Di(t,e){var i=e[0],r=e[1],n=e[2],o=e[3],i=i.evaluate(t),r=r.evaluate(t),n=n.evaluate(t),a=o?o.evaluate(t):1,s=he(i,r,n,a);if(s)throw new ge(s);return new se(i/255*a,r/255*a,n/255*a,a)}function Ai(t,e){var i=e[t];return void 0===i?null:i}function Si(t){return{type:t}}function Ei(t){return{result:"success",value:t}}function Ci(t){return{result:"error",value:t}}function Ni(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function ji(t){return t.expression&&-1<t.expression.parameters.indexOf("zoom")}function ki(t){return t.expression&&t.expression.interpolated}function Pi(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Oi(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Bi(t){return t}function Ui(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function Ri(t,e,i,r,n){return Ui(typeof i===n?r[i]:void 0,t.default,e.default)}function Fi(t,e,i){if("number"!==Pi(i))return Ui(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[r-1][0])return t.stops[r-1][1];var n=Ge(t.stops.map(function(t){return t[0]}),i);return t.stops[n][1]}function Zi(t,e,i){var r=void 0!==t.base?t.base:1;if("number"!==Pi(i))return Ui(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[n-1][0])return t.stops[n-1][1];var o,a,s,u,l,c=Ge(t.stops.map(function(t){return t[0]}),i),p=(o=r,a=t.stops[c][0],s=t.stops[c+1][0]-a,u=i-a,0==s?0:1===o?u/s:(Math.pow(o,u)-1)/(Math.pow(o,s)-1)),h=t.stops[c][1],d=t.stops[c+1][1],f=We[e.type]||Bi;return t.colorSpace&&"rgb"!==t.colorSpace&&(l=oi[t.colorSpace],f=function(t,e){return l.reverse(l.interpolate(l.forward(t),l.forward(e),p))}),"function"==typeof h.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=h.evaluate.apply(void 0,t),r=d.evaluate.apply(void 0,t);if(void 0!==i&&void 0!==r)return f(i,r,p)}}:f(h,d,p)}function Vi(t,e,i){return"color"===e.type?i=se.parse(i):"formatted"===e.type?i=ce.fromString(i.toString()):"resolvedImage"===e.type?i=pe.fromString(i.toString()):Pi(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0),Ui(i,t.default,e.default)}Le.register(zi,{error:[{kind:"error"},[Qt],function(t,e){throw new ge(e[0].evaluate(t))}],typeof:[Qt,[Xt],function(t,e){return ee(fe(e[0].evaluate(t)))}],"to-rgba":[te(Yt,4),[Ht],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Ht,[Yt,Yt,Yt],Di],rgba:[Ht,[Yt,Yt,Yt,Yt],Di],has:{type:Wt,overloads:[[[Qt],function(t,e){return e[0].evaluate(t)in t.properties()}],[[Qt,qt],function(t,e){var i=e[1];return e[0].evaluate(t)in i.evaluate(t)}]]},get:{type:Xt,overloads:[[[Qt],function(t,e){return Ai(e[0].evaluate(t),t.properties())}],[[Qt,qt],function(t,e){var i=e[1];return Ai(e[0].evaluate(t),i.evaluate(t))}]]},"feature-state":[Xt,[Qt],function(t,e){return Ai(e[0].evaluate(t),t.featureState||{})}],properties:[qt,[],function(t){return t.properties()}],"geometry-type":[Qt,[],function(t){return t.geometryType()}],id:[Xt,[],function(t){return t.id()}],zoom:[Yt,[],function(t){return t.globals.zoom}],"heatmap-density":[Yt,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Yt,[],function(t){return t.globals.lineProgress||0}],accumulated:[Xt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Yt,Si(Yt),function(t,e){for(var i=0,r=0,n=e;r<n.length;r+=1)i+=n[r].evaluate(t);return i}],"*":[Yt,Si(Yt),function(t,e){for(var i=1,r=0,n=e;r<n.length;r+=1)i*=n[r].evaluate(t);return i}],"-":{type:Yt,overloads:[[[Yt,Yt],function(t,e){var i=e[1];return e[0].evaluate(t)-i.evaluate(t)}],[[Yt],function(t,e){return-e[0].evaluate(t)}]]},"/":[Yt,[Yt,Yt],function(t,e){var i=e[1];return e[0].evaluate(t)/i.evaluate(t)}],"%":[Yt,[Yt,Yt],function(t,e){var i=e[1];return e[0].evaluate(t)%i.evaluate(t)}],ln2:[Yt,[],function(){return Math.LN2}],pi:[Yt,[],function(){return Math.PI}],e:[Yt,[],function(){return Math.E}],"^":[Yt,[Yt,Yt],function(t,e){var i=e[1];return Math.pow(e[0].evaluate(t),i.evaluate(t))}],sqrt:[Yt,[Yt],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[Yt,[Yt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[Yt,[Yt],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[Yt,[Yt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[Yt,[Yt],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[Yt,[Yt],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[Yt,[Yt],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[Yt,[Yt],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[Yt,[Yt],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[Yt,[Yt],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[Yt,Si(Yt),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[Yt,Si(Yt),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],abs:[Yt,[Yt],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[Yt,[Yt],function(t,e){var i=e[0].evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[Yt,[Yt],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[Yt,[Yt],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[Wt,[Qt,Xt],function(t,e){var i=e[0],r=e[1];return t.properties()[i.value]===r.value}],"filter-id-==":[Wt,[Xt],function(t,e){var i=e[0];return t.id()===i.value}],"filter-type-==":[Wt,[Qt],function(t,e){var i=e[0];return t.geometryType()===i.value}],"filter-<":[Wt,[Qt,Xt],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&n<o}],"filter-id-<":[Wt,[Xt],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&r<n}],"filter->":[Wt,[Qt,Xt],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&o<n}],"filter-id->":[Wt,[Xt],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&n<r}],"filter-<=":[Wt,[Qt,Xt],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&n<=o}],"filter-id-<=":[Wt,[Xt],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&r<=n}],"filter->=":[Wt,[Qt,Xt],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&o<=n}],"filter-id->=":[Wt,[Xt],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&n<=r}],"filter-has":[Wt,[Xt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Wt,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[Wt,[te(Qt)],function(t,e){return 0<=e[0].value.indexOf(t.geometryType())}],"filter-id-in":[Wt,[te(Xt)],function(t,e){return 0<=e[0].value.indexOf(t.id())}],"filter-in-small":[Wt,[Qt,te(Xt)],function(t,e){var i=e[0];return 0<=e[1].value.indexOf(t.properties()[i.value])}],"filter-in-large":[Wt,[Qt,te(Xt)],function(t,e){var i=e[0],r=e[1];return function(t,e,i,r){for(;i<=r;){var n=i+r>>1;if(e[n]===t)return!0;e[n]>t?r=n-1:i=1+n}return!1}(t.properties()[i.value],r.value,0,r.value.length-1)}],all:{type:Wt,overloads:[[[Wt,Wt],function(t,e){var i=e[1];return e[0].evaluate(t)&&i.evaluate(t)}],[Si(Wt),function(t,e){for(var i=0,r=e;i<r.length;i+=1)if(!r[i].evaluate(t))return!1;return!0}]]},any:{type:Wt,overloads:[[[Wt,Wt],function(t,e){var i=e[1];return e[0].evaluate(t)||i.evaluate(t)}],[Si(Wt),function(t,e){for(var i=0,r=e;i<r.length;i+=1)if(r[i].evaluate(t))return!0;return!1}]]},"!":[Wt,[Wt],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Wt,[Qt],function(t,e){var i=t.globals&&t.globals.isSupportedScript;return!i||i(e[0].evaluate(t))}],upcase:[Qt,[Qt],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Qt,[Qt],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Qt,Si(Xt),function(e,t){return t.map(function(t){return ye(t.evaluate(e))}).join("")}],"resolved-locale":[Qt,[Jt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var Gi=function(t,e){var i;this.expression=t,this._warningHistory={},this._evaluator=new Ie,this._defaultValue=e?"color"===(i=e).type&&Oi(i.default)?new se(0,0,0,0):"color"===i.type?se.parse(i.default)||null:void 0===i.default?null:i.default:null,this._enumValues=e&&"enum"===e.type?e.values:null};function Yi(t){return Array.isArray(t)&&0<t.length&&"string"==typeof t[0]&&t[0]in zi}function Qi(t,e){var i,r=new Ve(zi,[],e?(i={color:Ht,string:Qt,number:Yt,enum:Qt,boolean:Wt,formatted:Kt,resolvedImage:$t},"array"===e.type?te(i[e.value]||Xt,e.length):i[e.type]):void 0),n=r.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?Ei(new Gi(n,e)):Ci(r.errors)}Gi.prototype.evaluateWithoutErrorHandling=function(t,e,i,r,n,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)},Gi.prototype.evaluate=function(t,e,i,r,n,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new ge("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Wi=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Re(e.expression)};Wi.prototype.evaluateWithoutErrorHandling=function(t,e,i,r,n,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,n,o)},Wi.prototype.evaluate=function(t,e,i,r,n,o){return this._styleExpression.evaluate(t,e,i,r,n,o)};var Hi=function(t,e,i,r){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Re(e.expression),this.interpolationType=r};function qi(t,e){if("error"===(t=Qi(t,e)).result)return t;var i=t.value.expression,r=Ue(i);if(!r&&!Ni(e))return Ci([new Zt("","data expressions not supported")]);var n=Fe(i,["zoom"]);if(!n&&!ji(e))return Ci([new Zt("","zoom expressions not supported")]);var o=function i(t){var r=null;if(t instanceof li)r=i(t.result);else if(t instanceof ui)for(var e=0,n=t.args;e<n.length&&!(r=i(n[e]));e+=1);else(t instanceof Ye||t instanceof ai)&&t.input instanceof Le&&"zoom"===t.input.name&&(r=t);return r instanceof Zt||t.eachChild(function(t){var e=i(t);e instanceof Zt?r=e:!r&&e?r=new Zt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&e&&r!==e&&(r=new Zt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}(i);return o||n?o instanceof Zt?Ci([o]):o instanceof ai&&!ki(e)?Ci([new Zt("",'"interpolate" expressions cannot be used with this property')]):Ei(o?new Hi(r?"camera":"composite",t.value,o.labels,o instanceof ai?o.interpolation:void 0):new Wi(r?"constant":"source",t.value)):Ci([new Zt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Hi.prototype.evaluateWithoutErrorHandling=function(t,e,i,r,n,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,n,o)},Hi.prototype.evaluate=function(t,e,i,r,n,o){return this._styleExpression.evaluate(t,e,i,r,n,o)},Hi.prototype.interpolationFactor=function(t,e,i){return this.interpolationType?ai.interpolationFactor(this.interpolationType,t,e,i):0};function Xi(t,e){this._parameters=t,this._specification=e,Ot(this,function t(r,n){var o,a,s,e="color"===n.type,i=r.stops&&"object"==typeof r.stops[0][0],u=i||!(i||void 0!==r.property),l=r.type||(ki(n)?"exponential":"interval");if(e&&((r=Ot({},r)).stops&&(r.stops=r.stops.map(function(t){return[t[0],se.parse(t[1])]})),r.default=se.parse(r.default?r.default:n.default)),r.colorSpace&&"rgb"!==r.colorSpace&&!oi[r.colorSpace])throw new Error("Unknown color space: "+r.colorSpace);if("exponential"===l)o=Zi;else if("interval"===l)o=Fi;else if("categorical"===l){o=Ri,a=Object.create(null);for(var c=0,p=r.stops;c<p.length;c+=1){var h=p[c];a[h[0]]=h[1]}s=typeof r.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'+l+'"');o=Vi}if(i){for(var d={},f=[],y=0;y<r.stops.length;y++){var m=r.stops[y],g=m[0].zoom;void 0===d[g]&&(d[g]={zoom:g,type:r.type,property:r.property,default:r.default,stops:[]},f.push(g)),d[g].stops.push([m[0].value,m[1]])}for(var v=[],_=0,x=f;_<x.length;_+=1){var b=x[_];v.push([d[b].zoom,t(d[b],n)])}var M={name:"linear"};return{kind:"composite",interpolationType:M,interpolationFactor:ai.interpolationFactor.bind(void 0,M),zoomStops:v.map(function(t){return t[0]}),evaluate:function(t,e){var i=t.zoom;return Zi({stops:v,base:r.base},n,i).evaluate(i,e)}}}if(u){var w="exponential"===l?{name:"exponential",base:void 0!==r.base?r.base:1}:null;return{kind:"camera",interpolationType:w,interpolationFactor:ai.interpolationFactor.bind(void 0,w),zoomStops:r.stops.map(function(t){return t[0]}),evaluate:function(t){return o(r,n,t.zoom,a,s)}}}return{kind:"source",evaluate:function(t,e){var i=e&&e.properties?e.properties[r.property]:void 0;return void 0===i?Ui(r.default,n.default):o(r,n,i,a,s)}}}(this._parameters,this._specification))}function Ji(t){var e=t.key,i=t.value,r=t.valueSpec||{},n=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],u=Pi(i);if("object"!==u)return[new kt(e,i,"object expected, "+u+" found")];for(var l in i){var c=l.split(".")[0],p=r[c]||r["*"],h=void 0;if(n[c])h=n[c];else if(r[c])h=Mr;else if(n["*"])h=n["*"];else{if(!r["*"]){s.push(new kt(e,i[l],'unknown property "'+l+'"'));continue}h=Mr}s=s.concat(h({key:(e?e+".":e)+l,value:i[l],valueSpec:p,style:o,styleSpec:a,object:i,objectKey:l},i))}for(var d in r)n[d]||r[d].required&&void 0===r[d].default&&void 0===i[d]&&s.push(new kt(e,i,'missing required property "'+d+'"'));return s}function Ki(t){var e=t.value,i=t.valueSpec,r=t.style,n=t.styleSpec,o=t.key,a=t.arrayElementValidator||Mr;if("array"!==Pi(e))return[new kt(o,e,"array expected, "+Pi(e)+" found")];if(i.length&&e.length!==i.length)return[new kt(o,e,"array length "+i.length+" expected, length "+e.length+" found")];if(i["min-length"]&&e.length<i["min-length"])return[new kt(o,e,"array length at least "+i["min-length"]+" expected, length "+e.length+" found")];var s={type:i.value,values:i.values};n.$version<7&&(s.function=i.function),"object"===Pi(i.value)&&(s=i.value);for(var u=[],l=0;l<e.length;l++)u=u.concat(a({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:r,styleSpec:n,key:o+"["+l+"]"}));return u}function $i(t){var e=t.key,i=t.value,r=t.valueSpec,n=Pi(i);return"number"===n&&i!=i&&(n="NaN"),"number"!==n?[new kt(e,i,"number expected, "+n+" found")]:"minimum"in r&&i<r.minimum?[new kt(e,i,i+" is less than the minimum value "+r.minimum)]:"maximum"in r&&i>r.maximum?[new kt(e,i,i+" is greater than the maximum value "+r.maximum)]:[]}function tr(t){var a,s,n,u=t.valueSpec,l=Bt(t.value.type),c={},e="categorical"!==l&&void 0===t.value.property,i=!e,o="array"===Pi(t.value.stops)&&"array"===Pi(t.value.stops[0])&&"object"===Pi(t.value.stops[0][0]),r=Ji({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===l)return[new kt(t.key,t.value,'identity function may not have a "stops" property')];var e=[],i=t.value,e=e.concat(Ki({key:t.key,value:i,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:p}));return"array"===Pi(i)&&0===i.length&&e.push(new kt(t.key,i,"array must have at least one stop")),e},default:function(t){return Mr({key:t.key,value:t.value,valueSpec:u,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===l&&e&&r.push(new kt(t.key,t.value,'missing required property "property"')),"identity"===l||t.value.stops||r.push(new kt(t.key,t.value,'missing required property "stops"')),"exponential"===l&&t.valueSpec.expression&&!ki(t.valueSpec)&&r.push(new kt(t.key,t.value,"exponential functions not supported")),8<=t.styleSpec.$version&&(i&&!Ni(t.valueSpec)?r.push(new kt(t.key,t.value,"property functions not supported")):e&&!ji(t.valueSpec)&&r.push(new kt(t.key,t.value,"zoom functions not supported"))),"categorical"!==l&&!o||void 0!==t.value.property||r.push(new kt(t.key,t.value,'"property" property is required')),r;function p(t){var e=[],i=t.value,r=t.key;if("array"!==Pi(i))return[new kt(r,i,"array expected, "+Pi(i)+" found")];if(2!==i.length)return[new kt(r,i,"array length 2 expected, length "+i.length+" found")];if(o){if("object"!==Pi(i[0]))return[new kt(r,i,"object expected, "+Pi(i[0])+" found")];if(void 0===i[0].zoom)return[new kt(r,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new kt(r,i,"object stop key must have value")];if(n&&n>Bt(i[0].zoom))return[new kt(r,i[0].zoom,"stop zoom values must appear in ascending order")];Bt(i[0].zoom)!==n&&(n=Bt(i[0].zoom),s=void 0,c={}),e=e.concat(Ji({key:r+"[0]",value:i[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:$i,value:h}}))}else e=e.concat(h({key:r+"[0]",value:i[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},i));return Yi(Ut(i[1]))?e.concat([new kt(r+"[1]",i[1],"expressions are not allowed in function stops.")]):e.concat(Mr({key:r+"[1]",value:i[1],valueSpec:u,style:t.style,styleSpec:t.styleSpec}))}function h(t,e){var i=Pi(t.value),r=Bt(t.value),n=null!==t.value?t.value:e;if(a){if(i!==a)return[new kt(t.key,n,i+" stop domain type must match previous stop domain type "+a)]}else a=i;if("number"!==i&&"string"!==i&&"boolean"!==i)return[new kt(t.key,n,"stop domain value must be a number, string, or boolean")];if("number"===i||"categorical"===l)return"categorical"!==l||"number"!==i||isFinite(r)&&Math.floor(r)===r?"categorical"!==l&&"number"===i&&void 0!==s&&r<s?[new kt(t.key,n,"stop domain values must appear in ascending order")]:(s=r,"categorical"===l&&r in c?[new kt(t.key,n,"stop domain values must be unique")]:(c[r]=!0,[])):[new kt(t.key,n,"integer expected, found "+r)];var o="number expected, "+i+" found";return Ni(u)&&void 0===l&&(o+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new kt(t.key,n,o)]}}function er(e){var t=("property"===e.expressionContext?qi:Qi)(Ut(e.value),e.valueSpec);if("error"===t.result)return t.value.map(function(t){return new kt(""+e.key+t.key,e.value,t.message)});var i=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!i.outputDefined())return[new kt(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Re(i))return[new kt(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!Re(i))return[new kt(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Fe(i,["zoom","feature-state"]))return[new kt(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Ue(i))return[new kt(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ir(t){var e=t.key,i=t.value,r=t.valueSpec,n=[];return Array.isArray(r.values)?-1===r.values.indexOf(Bt(i))&&n.push(new kt(e,i,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(i)+" found")):-1===Object.keys(r.values).indexOf(Bt(i))&&n.push(new kt(e,i,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(i)+" found")),n}function rr(t){if(!0===t||!1===t)return 1;if(Array.isArray(t)&&0!==t.length)switch(t[0]){case"has":return 2<=t.length&&"$id"!==t[1]&&"$type"!==t[1];case"in":return 3<=t.length&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,i=t.slice(1);e<i.length;e+=1){var r=i[e];if(!rr(r)&&"boolean"!=typeof r)return}return 1;default:return 1}}Xi.deserialize=function(t){return new Xi(t._parameters,t._specification)};var nr={type:"boolean",default:!(Xi.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}}),transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function or(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};rr(t)||(t=sr(t));var r=Qi(t,nr);if("error"===r.result)throw new Error(r.value.map(function(t){return t.key+": "+t.message}).join(", "));return{filter:function(t,e,i){return r.value.evaluate(t,e,{},i)},needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var i=1;i<e.length;i++)if(t(e[i]))return!0;return!1}(t)}}function ar(t,e){return t<e?-1:e<t?1:0}function sr(t){if(!t)return!0;var e,i=t[0];return t.length<=1?"any"!==i:"=="===i?ur(t[1],t[2],"=="):"!="===i?pr(ur(t[1],t[2],"==")):"<"===i||">"===i||"<="===i||">="===i?ur(t[1],t[2],i):"any"===i?(e=t.slice(1),["any"].concat(e.map(sr))):"all"===i?["all"].concat(t.slice(1).map(sr)):"none"===i?["all"].concat(t.slice(1).map(sr).map(pr)):"in"===i?lr(t[1],t.slice(2)):"!in"===i?pr(lr(t[1],t.slice(2))):"has"===i?cr(t[1]):"!has"===i?pr(cr(t[1])):"within"!==i||t}function ur(t,e,i){switch(t){case"$type":return["filter-type-"+i,e];case"$id":return["filter-id-"+i,e];default:return["filter-"+i,t,e]}}function lr(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return 200<e.length&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(ar)]]:["filter-in-small",t,["literal",e]]}}function cr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function pr(t){return["!",t]}function hr(t){return rr(Ut(t.value))?er(Ot({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var i=e.value,r=e.key;if("array"!==Pi(i))return[new kt(r,i,"array expected, "+Pi(i)+" found")];var n,o=e.styleSpec,a=[];if(i.length<1)return[new kt(r,i,"filter array must have at least 1 element")];switch(a=a.concat(ir({key:r+"[0]",value:i[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),Bt(i[0])){case"<":case"<=":case">":case">=":2<=i.length&&"$type"===Bt(i[1])&&a.push(new kt(r,i,'"$type" cannot be use with operator "'+i[0]+'"'));case"==":case"!=":3!==i.length&&a.push(new kt(r,i,'filter array for operator "'+i[0]+'" must have 3 elements'));case"in":case"!in":2<=i.length&&"string"!==(n=Pi(i[1]))&&a.push(new kt(r+"[1]",i[1],"string expected, "+n+" found"));for(var s=2;s<i.length;s++)n=Pi(i[s]),"$type"===Bt(i[1])?a=a.concat(ir({key:r+"["+s+"]",value:i[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&a.push(new kt(r+"["+s+"]",i[s],"string, number, or boolean expected, "+n+" found"));break;case"any":case"all":case"none":for(var u=1;u<i.length;u++)a=a.concat(t({key:r+"["+u+"]",value:i[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=Pi(i[1]),2!==i.length?a.push(new kt(r,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"string"!==n&&a.push(new kt(r+"[1]",i[1],"string expected, "+n+" found"));break;case"within":n=Pi(i[1]),2!==i.length?a.push(new kt(r,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"object"!==n&&a.push(new kt(r+"[1]",i[1],"object expected, "+n+" found"))}return a}(t)}function dr(t,e){var i=t.key,r=t.style,n=t.styleSpec,o=t.value,a=t.objectKey,s=n[e+"_"+t.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return Mr({key:i,value:o,valueSpec:n.transition,style:r,styleSpec:n});var l,c=t.valueSpec||s[a];if(!c)return[new kt(i,o,'unknown property "'+a+'"')];if("string"===Pi(o)&&Ni(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new kt(i,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var p=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&p.push(new kt(i,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Oi(Ut(o))&&"identity"===Bt(o.type)&&p.push(new kt(i,o,'"text-font" does not support identity functions'))),p.concat(Mr({key:t.key,value:o,valueSpec:c,style:r,styleSpec:n,expressionContext:"property",propertyType:e,propertyKey:a}))}function fr(t){return dr(t,"paint")}function yr(t){return dr(t,"layout")}function mr(t){var e=[],i=t.value,r=t.key,n=t.style,o=t.styleSpec;i.type||i.ref||e.push(new kt(r,i,'either "type" or "ref" is required'));var a,s,u,l=Bt(i.type),c=Bt(i.ref);if(i.id)for(var p=Bt(i.id),h=0;h<t.arrayIndex;h++){var d=n.layers[h];Bt(d.id)===p&&e.push(new kt(r,i.id,'duplicate layer id "'+i.id+'", previously used at line '+d.id.__line__))}return"ref"in i?(["type","source","source-layer","filter","layout"].forEach(function(t){t in i&&e.push(new kt(r,i[t],'"'+t+'" is prohibited for ref layers'))}),n.layers.forEach(function(t){Bt(t.id)===c&&(a=t)}),a?a.ref?e.push(new kt(r,i.ref,"ref cannot reference another ref layer")):l=Bt(a.type):e.push(new kt(r,i.ref,'ref layer "'+c+'" not found'))):"background"!==l&&(i.source?(u=(s=n.sources&&n.sources[i.source])&&Bt(s.type),s?"vector"===u&&"raster"===l?e.push(new kt(r,i.source,'layer "'+i.id+'" requires a raster source')):"raster"===u&&"raster"!==l?e.push(new kt(r,i.source,'layer "'+i.id+'" requires a vector source')):"vector"!==u||i["source-layer"]?"raster-dem"===u&&"hillshade"!==l?e.push(new kt(r,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==l||!i.paint||!i.paint["line-gradient"]||"geojson"===u&&s.lineMetrics||e.push(new kt(r,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new kt(r,i,'layer "'+i.id+'" must specify a "source-layer"')):e.push(new kt(r,i.source,'source "'+i.source+'" not found'))):e.push(new kt(r,i,'missing required property "source"'))),e=e.concat(Ji({key:r,value:i,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Mr({key:r+".type",value:i.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:i,objectKey:"type"})},filter:hr,layout:function(t){return Ji({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return yr(Ot({layerType:l},t))}}})},paint:function(t){return Ji({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return fr(Ot({layerType:l},t))}}})}}}))}function gr(t){var e=t.value,i=t.key,r=Pi(e);return"string"!==r?[new kt(i,e,"string expected, "+r+" found")]:[]}var vr={promoteId:function(t){var e=t.key,i=t.value;if("string"===Pi(i))return gr({key:e,value:i});var r=[];for(var n in i)r.push.apply(r,gr({key:e+"."+n,value:i[n]}));return r}};function _r(t){var e=t.value,i=t.key,r=t.styleSpec,n=t.style;if(!e.type)return[new kt(i,e,'"type" is required')];var o,a=Bt(e.type);switch(a){case"vector":case"raster":case"raster-dem":return Ji({key:i,value:e,valueSpec:r["source_"+a.replace("-","_")],style:t.style,styleSpec:r,objectElementValidators:vr});case"geojson":if(o=Ji({key:i,value:e,valueSpec:r.source_geojson,style:n,styleSpec:r,objectElementValidators:vr}),e.cluster)for(var s in e.clusterProperties){var u=e.clusterProperties[s],l=u[0],c="string"==typeof l?[l,["accumulated"],["get",s]]:l;o.push.apply(o,er({key:i+"."+s+".map",value:u[1],expressionContext:"cluster-map"})),o.push.apply(o,er({key:i+"."+s+".reduce",value:c,expressionContext:"cluster-reduce"}))}return o;case"video":return Ji({key:i,value:e,valueSpec:r.source_video,style:n,styleSpec:r});case"image":return Ji({key:i,value:e,valueSpec:r.source_image,style:n,styleSpec:r});case"canvas":return[new kt(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ir({key:i+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:n,styleSpec:r})}}function xr(t){var e=t.value,i=t.styleSpec,r=i.light,n=t.style,o=[],a=Pi(e);if(void 0===e)return o;if("object"!==a)return o.concat([new kt("light",e,"object expected, "+a+" found")]);for(var s in e)var u=s.match(/^(.*)-transition$/),o=o.concat(u&&r[u[1]]&&r[u[1]].transition?Mr({key:s,value:e[s],valueSpec:i.transition,style:n,styleSpec:i}):r[s]?Mr({key:s,value:e[s],valueSpec:r[s],style:n,styleSpec:i}):[new kt(s,e[s],'unknown property "'+s+'"')]);return o}var br={"*":function(){return[]},array:Ki,boolean:function(t){var e=t.value,i=t.key,r=Pi(e);return"boolean"!==r?[new kt(i,e,"boolean expected, "+r+" found")]:[]},number:$i,color:function(t){var e=t.key,i=t.value,r=Pi(i);return"string"!==r?[new kt(e,i,"color expected, "+r+" found")]:null===ae(i)?[new kt(e,i,'color expected, "'+i+'" found')]:[]},constants:Pt,enum:ir,filter:hr,function:tr,layer:mr,object:Ji,source:_r,light:xr,string:gr,formatted:function(t){return 0===gr(t).length?[]:er(t)},resolvedImage:function(t){return 0===gr(t).length?[]:er(t)}};function Mr(t){var e=t.value,i=t.valueSpec,r=t.styleSpec;return i.expression&&Oi(Bt(e))?tr(t):i.expression&&Yi(Ut(e))?er(t):i.type&&br[i.type]?br[i.type](t):Ji(Ot({},t,{valueSpec:i.type?r[i.type]:i}))}function wr(t){var e=t.value,i=t.key,r=gr(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new kt(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new kt(i,e,'"glyphs" url must include a "{range}" token'))),r}function Ir(t,e){void 0===e&&(e=jt);var i=(i=[]).concat(Mr({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:wr,"*":function(){return[]}}}));return t.constants&&(i=i.concat(Pt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Tr(i)}function Tr(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function Lr(i){return function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Tr(i.apply(this,t))}}Ir.source=Lr(_r),Ir.light=Lr(xr),Ir.layer=Lr(mr),Ir.filter=Lr(hr),Ir.paintProperty=Lr(fr),Ir.layoutProperty=Lr(yr);var zr=Ir,Dr=zr.light,Ar=zr.paintProperty,Sr=zr.layoutProperty;function Er(t,e){var i=!1;if(e&&e.length)for(var r=0,n=e;r<n.length;r+=1)t.fire(new Ct(new Error(n[r].message))),i=!0;return i}var Cr=Nr;function Nr(t,e,i){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var n=new Int32Array(this.arrayBuffer);t=n[0],this.d=(e=n[1])+2*(i=n[2]);for(var o=0;o<this.d*this.d;o++){var a=n[3+o],s=n[3+o+1];r.push(a===s?null:n.subarray(a,s))}var u=n[3+r.length+1];this.keys=n.subarray(n[3+r.length],u),this.bboxes=n.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*i;for(var l=0;l<this.d*this.d;l++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;var c=i/e*t;this.min=-c,this.max=t+c}Nr.prototype.insert=function(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)},Nr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Nr.prototype._insertCell=function(t,e,i,r,n,o){this.cells[n].push(o)},Nr.prototype.query=function(t,e,i,r,n){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=i&&a<=r&&!n)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,i,r,this._queryCell,s,{},n),s},Nr.prototype._queryCell=function(t,e,i,r,n,o,a,s){var u=this.cells[n];if(null!==u)for(var l=this.keys,c=this.bboxes,p=0;p<u.length;p++){var h,d=u[p];void 0===a[d]&&(h=4*d,(s?s(c[0+h],c[1+h],c[2+h],c[3+h]):t<=c[2+h]&&e<=c[3+h]&&i>=c[0+h]&&r>=c[1+h])?(a[d]=!0,o.push(l[d])):a[d]=!1)}},Nr.prototype._forEachCell=function(t,e,i,r,n,o,a,s){for(var u=this._convertToCellCoord(t),l=this._convertToCellCoord(e),c=this._convertToCellCoord(i),p=this._convertToCellCoord(r),h=u;h<=c;h++)for(var d=l;d<=p;d++){var f=this.d*d+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(d),this._convertFromCellCoord(h+1),this._convertFromCellCoord(d+1)))&&n.call(this,t,e,i,r,f,o,a,s))return}},Nr.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Nr.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Nr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,i=0,r=0;r<this.cells.length;r++)i+=this.cells[r].length;var n=new Int32Array(e+i+this.keys.length+this.bboxes.length);n[0]=this.extent,n[1]=this.n,n[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];n[3+a]=o,n.set(s,o),o+=s.length}return n[3+t.length]=o,n.set(this.keys,o),n[3+t.length+1]=o+=this.keys.length,n.set(this.bboxes,o),o+=this.bboxes.length,n.buffer};var jr=d.ImageData,kr=d.ImageBitmap,Pr={};function Or(t,e,i){void 0===i&&(i={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Pr[t]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}for(var Br in Or("Object",Object),Cr.serialize=function(t,e){var i=t.toArrayBuffer();return e&&e.push(i),{buffer:i}},Cr.deserialize=function(t){return new Cr(t.buffer)},Or("Grid",Cr),Or("Color",se),Or("Error",Error),Or("ResolvedImage",pe),Or("StylePropertyFunction",Xi),Or("StyleExpression",Gi,{omit:["_evaluator"]}),Or("ZoomDependentExpression",Hi),Or("ZoomConstantExpression",Wi),Or("CompoundExpression",Le,{omit:["_evaluate"]}),zi)zi[Br]._classRegistryKey||Or("Expression_"+Br,zi[Br]);function Ur(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Rr(t){return kr&&t instanceof kr}function Fr(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Ur(t)||Rr(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var i=t;return e&&e.push(i.buffer),i}if(t instanceof jr)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],n=0,o=t;n<o.length;n+=1)r.push(Fr(o[n],e));return r}if("object"!=typeof t)throw new Error("can't serialize object of type "+typeof t);var a=t.constructor,s=a._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var u,l=a.serialize?a.serialize(t,e):{};if(!a.serialize){for(var c in t){!t.hasOwnProperty(c)||0<=Pr[s].omit.indexOf(c)||(u=t[c],l[c]=0<=Pr[s].shallow.indexOf(c)?u:Fr(u,e))}t instanceof Error&&(l.message=t.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(l.$name=s),l}function Zr(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Ur(t)||Rr(t)||ArrayBuffer.isView(t)||t instanceof jr)return t;if(Array.isArray(t))return t.map(Zr);if("object"!=typeof t)throw new Error("can't deserialize object of type "+typeof t);var e=t.$name||"Object",i=Pr[e].klass;if(!i)throw new Error("can't deserialize unregistered class "+e);if(i.deserialize)return i.deserialize(t);for(var r=Object.create(i.prototype),n=0,o=Object.keys(t);n<o.length;n+=1){var a,s=o[n];"$name"!==s&&(a=t[s],r[s]=0<=Pr[e].shallow.indexOf(s)?a:Zr(a))}return r}function Vr(){this.first=!0}Vr.prototype.update=function(t,e){var i=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=i,!0))};var Gr={"Latin-1 Supplement":function(t){return 128<=t&&t<=255},Arabic:function(t){return 1536<=t&&t<=1791},"Arabic Supplement":function(t){return 1872<=t&&t<=1919},"Arabic Extended-A":function(t){return 2208<=t&&t<=2303},"Hangul Jamo":function(t){return 4352<=t&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return 5120<=t&&t<=5759},Khmer:function(t){return 6016<=t&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return 6320<=t&&t<=6399},"General Punctuation":function(t){return 8192<=t&&t<=8303},"Letterlike Symbols":function(t){return 8448<=t&&t<=8527},"Number Forms":function(t){return 8528<=t&&t<=8591},"Miscellaneous Technical":function(t){return 8960<=t&&t<=9215},"Control Pictures":function(t){return 9216<=t&&t<=9279},"Optical Character Recognition":function(t){return 9280<=t&&t<=9311},"Enclosed Alphanumerics":function(t){return 9312<=t&&t<=9471},"Geometric Shapes":function(t){return 9632<=t&&t<=9727},"Miscellaneous Symbols":function(t){return 9728<=t&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return 11008<=t&&t<=11263},"CJK Radicals Supplement":function(t){return 11904<=t&&t<=12031},"Kangxi Radicals":function(t){return 12032<=t&&t<=12255},"Ideographic Description Characters":function(t){return 12272<=t&&t<=12287},"CJK Symbols and Punctuation":function(t){return 12288<=t&&t<=12351},Hiragana:function(t){return 12352<=t&&t<=12447},Katakana:function(t){return 12448<=t&&t<=12543},Bopomofo:function(t){return 12544<=t&&t<=12591},"Hangul Compatibility Jamo":function(t){return 12592<=t&&t<=12687},Kanbun:function(t){return 12688<=t&&t<=12703},"Bopomofo Extended":function(t){return 12704<=t&&t<=12735},"CJK Strokes":function(t){return 12736<=t&&t<=12783},"Katakana Phonetic Extensions":function(t){return 12784<=t&&t<=12799},"Enclosed CJK Letters and Months":function(t){return 12800<=t&&t<=13055},"CJK Compatibility":function(t){return 13056<=t&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return 13312<=t&&t<=19903},"Yijing Hexagram Symbols":function(t){return 19904<=t&&t<=19967},"CJK Unified Ideographs":function(t){return 19968<=t&&t<=40959},"Yi Syllables":function(t){return 40960<=t&&t<=42127},"Yi Radicals":function(t){return 42128<=t&&t<=42191},"Hangul Jamo Extended-A":function(t){return 43360<=t&&t<=43391},"Hangul Syllables":function(t){return 44032<=t&&t<=55215},"Hangul Jamo Extended-B":function(t){return 55216<=t&&t<=55295},"Private Use Area":function(t){return 57344<=t&&t<=63743},"CJK Compatibility Ideographs":function(t){return 63744<=t&&t<=64255},"Arabic Presentation Forms-A":function(t){return 64336<=t&&t<=65023},"Vertical Forms":function(t){return 65040<=t&&t<=65055},"CJK Compatibility Forms":function(t){return 65072<=t&&t<=65103},"Small Form Variants":function(t){return 65104<=t&&t<=65135},"Arabic Presentation Forms-B":function(t){return 65136<=t&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return 65280<=t&&t<=65519}};function Yr(t){for(var e=0,i=t;e<i.length;e+=1)if(Qr(i[e].charCodeAt(0)))return!0;return!1}function Qr(t){return 746===t||747===t||!(t<4352)&&(Gr["Bopomofo Extended"](t)||Gr.Bopomofo(t)||Gr["CJK Compatibility Forms"](t)&&!(65097<=t&&t<=65103)||Gr["CJK Compatibility Ideographs"](t)||Gr["CJK Compatibility"](t)||Gr["CJK Radicals Supplement"](t)||Gr["CJK Strokes"](t)||!(!Gr["CJK Symbols and Punctuation"](t)||12296<=t&&t<=12305||12308<=t&&t<=12319||12336===t)||Gr["CJK Unified Ideographs Extension A"](t)||Gr["CJK Unified Ideographs"](t)||Gr["Enclosed CJK Letters and Months"](t)||Gr["Hangul Compatibility Jamo"](t)||Gr["Hangul Jamo Extended-A"](t)||Gr["Hangul Jamo Extended-B"](t)||Gr["Hangul Jamo"](t)||Gr["Hangul Syllables"](t)||Gr.Hiragana(t)||Gr["Ideographic Description Characters"](t)||Gr.Kanbun(t)||Gr["Kangxi Radicals"](t)||Gr["Katakana Phonetic Extensions"](t)||Gr.Katakana(t)&&12540!==t||!(!Gr["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||65306<=t&&t<=65310||65339===t||65341===t||65343===t||65371<=t&&t<=65503||65507===t||65512<=t&&t<=65519)||!(!Gr["Small Form Variants"](t)||65112<=t&&t<=65118||65123<=t&&t<=65126)||Gr["Unified Canadian Aboriginal Syllabics"](t)||Gr["Unified Canadian Aboriginal Syllabics Extended"](t)||Gr["Vertical Forms"](t)||Gr["Yijing Hexagram Symbols"](t)||Gr["Yi Syllables"](t)||Gr["Yi Radicals"](t))}function Wr(t){return!(Qr(t)||(e=t,Gr["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||Gr["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||Gr["Letterlike Symbols"](e)||Gr["Number Forms"](e)||Gr["Miscellaneous Technical"](e)&&(8960<=e&&e<=8967||8972<=e&&e<=8991||8996<=e&&e<=9e3||9003===e||9085<=e&&e<=9114||9150<=e&&e<=9165||9167===e||9169<=e&&e<=9179||9186<=e&&e<=9215)||Gr["Control Pictures"](e)&&9251!==e||Gr["Optical Character Recognition"](e)||Gr["Enclosed Alphanumerics"](e)||Gr["Geometric Shapes"](e)||Gr["Miscellaneous Symbols"](e)&&!(9754<=e&&e<=9759)||Gr["Miscellaneous Symbols and Arrows"](e)&&(11026<=e&&e<=11055||11088<=e&&e<=11097||11192<=e&&e<=11243)||Gr["CJK Symbols and Punctuation"](e)||Gr.Katakana(e)||Gr["Private Use Area"](e)||Gr["CJK Compatibility Forms"](e)||Gr["Small Form Variants"](e)||Gr["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||9984<=e&&e<=10087||10102<=e&&e<=10131||65532===e||65533===e));var e}function Hr(t){return 1424<=t&&t<=2303||Gr["Arabic Presentation Forms-A"](t)||Gr["Arabic Presentation Forms-B"](t)}function qr(t){t&&"string"==typeof t&&-1<t.indexOf("NetworkError")&&(Jr="error"),Xr&&Xr(t)}var Xr=null,Jr="unavailable",Kr=null;function $r(){nn.fire(new At("pluginStateChange",{pluginStatus:Jr,pluginURL:Kr}))}function tn(){return Jr}function en(){if("deferred"!==Jr||!Kr)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Jr="loading",$r(),Kr&&Mt({url:Kr},function(t){t?qr(t):(Jr="loaded",$r())})}function rn(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Vr,this.transition={})}var nn=new St,on={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Jr||null!=on.applyArabicShaping},isLoading:function(){return"loading"===Jr},setState:function(t){Jr=t.pluginStatus,Kr=t.pluginURL},isParsed:function(){return null!=on.applyArabicShaping&&null!=on.processBidirectionalText&&null!=on.processStyledBidirectionalText},getPluginURL:function(){return Kr}};rn.prototype.isSupportedScript=function(t){return function(t,e){for(var i,r=0,n=t;r<n.length;r+=1)if(i=n[r].charCodeAt(0),!e&&Hr(i)||2304<=i&&i<=3583||3840<=i&&i<=4255||Gr.Khmer(i))return!1;return!0}(t,on.isLoaded())},rn.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},rn.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),i=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*e}};function an(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Oi(t))return new Xi(t,e);if(Yi(t)){var i=qi(t,e);if("error"===i.result)throw new Error(i.value.map(function(t){return t.key+": "+t.message}).join(", "));return i.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=se.parse(t)),{kind:"constant",evaluate:function(){return r}}}(void 0===e?t.specification.default:e,t.specification)}an.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},an.prototype.possiblyEvaluate=function(t,e,i){return this.property.possiblyEvaluate(this,t,e,i)};function sn(t){this.property=t,this.value=new an(t,void 0)}sn.prototype.transitioned=function(t,e){return new ln(this.property,this.value,e,f({},t.transition,this.transition),t.now)},sn.prototype.untransitioned=function(){return new ln(this.property,this.value,null,{},0)};function un(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}un.prototype.getValue=function(t){return _(this._values[t].value.value)},un.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new sn(this._values[t].property)),this._values[t].value=new an(this._values[t].property,null===e?void 0:_(e))},un.prototype.getTransition=function(t){return _(this._values[t].transition)},un.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new sn(this._values[t].property)),this._values[t].transition=_(e)||void 0},un.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var r=i[e],n=this.getValue(r);void 0!==n&&(t[r]=n);var o=this.getTransition(r);void 0!==o&&(t[r+"-transition"]=o)}return t},un.prototype.transitioned=function(t,e){for(var i=new cn(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var o=n[r];i._values[o]=this._values[o].transitioned(t,e._values[o])}return i},un.prototype.untransitioned=function(){for(var t=new cn(this._properties),e=0,i=Object.keys(this._values);e<i.length;e+=1){var r=i[e];t._values[r]=this._values[r].untransitioned()}return t};var ln=function(t,e,i,r,n){this.property=t,this.value=e,this.begin=n+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=i)};ln.prototype.possiblyEvaluate=function(t,e,i){var r=t.now||0,n=this.value.possiblyEvaluate(t,e,i),o=this.prior;if(o){if(r>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(r<this.begin)return o.possiblyEvaluate(t,e,i);var a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,i),n,function(){if(a<=0)return 0;if(1<=a)return 1;var t=a*a,e=t*a;return 4*(a<.5?e:3*(a-t)+e-.75)}())}return n};var cn=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};cn.prototype.possiblyEvaluate=function(t,e,i){for(var r=new dn(this._properties),n=0,o=Object.keys(this._values);n<o.length;n+=1){var a=o[n];r._values[a]=this._values[a].possiblyEvaluate(t,e,i)}return r},cn.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};function pn(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}pn.prototype.getValue=function(t){return _(this._values[t].value)},pn.prototype.setValue=function(t,e){this._values[t]=new an(this._values[t].property,null===e?void 0:_(e))},pn.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var r=i[e],n=this.getValue(r);void 0!==n&&(t[r]=n)}return t},pn.prototype.possiblyEvaluate=function(t,e,i){for(var r=new dn(this._properties),n=0,o=Object.keys(this._values);n<o.length;n+=1){var a=o[n];r._values[a]=this._values[a].possiblyEvaluate(t,e,i)}return r};function hn(t,e,i){this.property=t,this.value=e,this.parameters=i}hn.prototype.isConstant=function(){return"constant"===this.value.kind},hn.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},hn.prototype.evaluate=function(t,e,i,r){return this.property.evaluate(this.value,this.parameters,t,e,i,r)};var dn=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};dn.prototype.get=function(t){return this._values[t]};function fn(t){this.specification=t}fn.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},fn.prototype.interpolate=function(t,e,i){var r=We[this.specification.type];return r?r(t,e,i):t};function yn(t,e){this.specification=t,this.overrides=e}yn.prototype.possiblyEvaluate=function(t,e,i,r){return new hn(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},i,r)}:t.expression,e)},yn.prototype.interpolate=function(t,e,i){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new hn(this,{kind:"constant",value:void 0},t.parameters);var r=We[this.specification.type];return r?new hn(this,{kind:"constant",value:r(t.value.value,e.value.value,i)},t.parameters):t},yn.prototype.evaluate=function(t,e,i,r,n,o){return"constant"===t.kind?t.value:t.evaluate(e,i,r,n,o)};function mn(t){this.specification=t}var gn,vn=((gn=yn)&&(_n.__proto__=gn),((_n.prototype=Object.create(gn&&gn.prototype)).constructor=_n).prototype.possiblyEvaluate=function(t,e,i,r){if(void 0===t.value)return new hn(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var n=t.expression.evaluate(e,null,{},i,r),o="resolvedImage"===t.property.specification.type&&"string"!=typeof n?n.name:n,a=this._calculate(o,o,o,e);return new hn(this,{kind:"constant",value:a},e)}if("camera"!==t.expression.kind)return new hn(this,t.expression,e);var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new hn(this,{kind:"constant",value:s},e)},_n.prototype.evaluate=function(t,e,i,r,n,o){if("source"!==t.kind)return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},i,r),t.evaluate({zoom:Math.floor(e.zoom)},i,r),t.evaluate({zoom:Math.floor(e.zoom)+1},i,r),e):t.value;var a=t.evaluate(e,i,r,n,o);return this._calculate(a,a,a,e)},_n.prototype._calculate=function(t,e,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}},_n.prototype.interpolate=function(t){return t},_n);function _n(){gn.apply(this,arguments)}mn.prototype.possiblyEvaluate=function(t,e,i,r){if(void 0!==t.value){if("constant"!==t.expression.kind)return this._calculate(t.expression.evaluate(new rn(Math.floor(e.zoom-1),e)),t.expression.evaluate(new rn(Math.floor(e.zoom),e)),t.expression.evaluate(new rn(Math.floor(e.zoom+1),e)),e);var n=t.expression.evaluate(e,null,{},i,r);return this._calculate(n,n,n,e)}},mn.prototype._calculate=function(t,e,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}},mn.prototype.interpolate=function(t){return t};function xn(t){this.specification=t}xn.prototype.possiblyEvaluate=function(t,e,i,r){return!!t.expression.evaluate(e,null,{},i,r)},xn.prototype.interpolate=function(){return!1};function bn(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var i=t[e];i.specification.overridable&&this.overridableProperties.push(e);var r=this.defaultPropertyValues[e]=new an(i,void 0),n=this.defaultTransitionablePropertyValues[e]=new sn(i);this.defaultTransitioningPropertyValues[e]=n.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}}Or("DataDrivenProperty",yn),Or("DataConstantProperty",fn),Or("CrossFadedDataDrivenProperty",vn),Or("CrossFadedProperty",mn),Or("ColorRampProperty",xn);function Mn(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}function wn(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}var In,Tn=((In=St)&&(zn.__proto__=In),((zn.prototype=Object.create(In&&In.prototype)).constructor=zn).prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},zn.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},zn.prototype.setLayoutProperty=function(t,e,i){void 0===i&&(i={}),null!=e&&this._validate(Sr,"layers."+this.id+".layout."+t,t,e,i)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},zn.prototype.getPaintProperty=function(t){return m(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},zn.prototype.setPaintProperty=function(t,e,i){if(void 0===i&&(i={}),null!=e&&this._validate(Ar,"layers."+this.id+".paint."+t,t,e,i))return!1;if(m(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var r=this._transitionablePaint._values[t],n="cross-faded-data-driven"===r.property.specification["property-type"],o=r.value.isDataDriven(),a=r.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||o||n||this._handleOverridablePaintPropertyUpdate(t,a,s)},zn.prototype._handleSpecialPaintPropertyUpdate=function(t){},zn.prototype._handleOverridablePaintPropertyUpdate=function(t,e,i){return!1},zn.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},zn.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},zn.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},zn.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)},zn.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),v(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},zn.prototype._validate=function(t,e,i,r,n){return void 0===n&&(n={}),(!n||!1!==n.validate)&&Er(this,t.call(zr,{key:e,layerType:this.type,objectKey:i,value:r,styleSpec:jt,style:{glyphs:!0,sprite:!0}}))},zn.prototype.is3D=function(){return!1},zn.prototype.isTileClipped=function(){return!1},zn.prototype.hasOffscreenPass=function(){return!1},zn.prototype.resize=function(){},zn.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof hn&&Ni(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},zn),Ln={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};function zn(t,e){if(In.call(this),this.id=t.id,this.type=t.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==t.type&&(this.metadata=(t=t).metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new pn(e.layout)),e.paint)){for(var i in this._transitionablePaint=new un(e.paint),t.paint)this.setPaintProperty(i,t.paint[i],{validate:!1});for(var r in t.layout)this.setLayoutProperty(r,t.layout[r],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new dn(e.paint)}}function Dn(t,n){void 0===n&&(n=1);var o=0,a=0;return{members:t.map(function(t){var e=Ln[t.type].BYTES_PER_ELEMENT,i=o=An(o,Math.max(n,e)),r=t.components||1;return a=Math.max(a,e),o+=e*r,{name:t.name,type:t.type,components:r,offset:i}}),size:An(o,Math.max(a,n)),alignment:n}}function An(t,e){return Math.ceil(t/e)*e}wn.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},wn.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},wn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},wn.prototype.clear=function(){this.length=0},wn.prototype.resize=function(t){this.reserve(t),this.length=t},wn.prototype.reserve=function(t){var e;t>this.capacity&&(this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),e=this.uint8,this._refreshViews(),e&&this.uint8.set(e))},wn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Sn,En=((Sn=wn)&&(Cn.__proto__=Sn),((Cn.prototype=Object.create(Sn&&Sn.prototype)).constructor=Cn).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},Cn.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},Cn.prototype.emplace=function(t,e,i){var r=2*t;return this.int16[0+r]=e,this.int16[1+r]=i,t},Cn);function Cn(){Sn.apply(this,arguments)}En.prototype.bytesPerElement=4,Or("StructArrayLayout2i4",En);var Nn,jn=((Nn=wn)&&(kn.__proto__=Nn),((kn.prototype=Object.create(Nn&&Nn.prototype)).constructor=kn).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},kn.prototype.emplaceBack=function(t,e,i,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)},kn.prototype.emplace=function(t,e,i,r,n){var o=4*t;return this.int16[0+o]=e,this.int16[1+o]=i,this.int16[2+o]=r,this.int16[3+o]=n,t},kn);function kn(){Nn.apply(this,arguments)}jn.prototype.bytesPerElement=8,Or("StructArrayLayout4i8",jn);var Pn,On=((Pn=wn)&&(Bn.__proto__=Pn),((Bn.prototype=Object.create(Pn&&Pn.prototype)).constructor=Bn).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},Bn.prototype.emplaceBack=function(t,e,i,r,n,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,o)},Bn.prototype.emplace=function(t,e,i,r,n,o,a){var s=6*t;return this.int16[0+s]=e,this.int16[1+s]=i,this.int16[2+s]=r,this.int16[3+s]=n,this.int16[4+s]=o,this.int16[5+s]=a,t},Bn);function Bn(){Pn.apply(this,arguments)}On.prototype.bytesPerElement=12,Or("StructArrayLayout2i4i12",On);var Un,Rn=((Un=wn)&&(Fn.__proto__=Un),((Fn.prototype=Object.create(Un&&Un.prototype)).constructor=Fn).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},Fn.prototype.emplaceBack=function(t,e,i,r,n,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,o)},Fn.prototype.emplace=function(t,e,i,r,n,o,a){var s=4*t,u=8*t;return this.int16[0+s]=e,this.int16[1+s]=i,this.uint8[4+u]=r,this.uint8[5+u]=n,this.uint8[6+u]=o,this.uint8[7+u]=a,t},Fn);function Fn(){Un.apply(this,arguments)}Rn.prototype.bytesPerElement=8,Or("StructArrayLayout2i4ub8",Rn);var Zn,Vn=((Zn=wn)&&(Gn.__proto__=Zn),((Gn.prototype=Object.create(Zn&&Zn.prototype)).constructor=Gn).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},Gn.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,u,l){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,i,r,n,o,a,s,u,l)},Gn.prototype.emplace=function(t,e,i,r,n,o,a,s,u,l,c){var p=10*t;return this.uint16[0+p]=e,this.uint16[1+p]=i,this.uint16[2+p]=r,this.uint16[3+p]=n,this.uint16[4+p]=o,this.uint16[5+p]=a,this.uint16[6+p]=s,this.uint16[7+p]=u,this.uint16[8+p]=l,this.uint16[9+p]=c,t},Gn);function Gn(){Zn.apply(this,arguments)}Vn.prototype.bytesPerElement=20,Or("StructArrayLayout10ui20",Vn);var Yn,Qn=((Yn=wn)&&(Wn.__proto__=Yn),((Wn.prototype=Object.create(Yn&&Yn.prototype)).constructor=Wn).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},Wn.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,u,l,c,p){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,i,r,n,o,a,s,u,l,c,p)},Wn.prototype.emplace=function(t,e,i,r,n,o,a,s,u,l,c,p,h){var d=12*t;return this.int16[0+d]=e,this.int16[1+d]=i,this.int16[2+d]=r,this.int16[3+d]=n,this.uint16[4+d]=o,this.uint16[5+d]=a,this.uint16[6+d]=s,this.uint16[7+d]=u,this.int16[8+d]=l,this.int16[9+d]=c,this.int16[10+d]=p,this.int16[11+d]=h,t},Wn);function Wn(){Yn.apply(this,arguments)}Qn.prototype.bytesPerElement=24,Or("StructArrayLayout4i4ui4i24",Qn);var Hn,qn=((Hn=wn)&&(Xn.__proto__=Hn),((Xn.prototype=Object.create(Hn&&Hn.prototype)).constructor=Xn).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Xn.prototype.emplaceBack=function(t,e,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)},Xn.prototype.emplace=function(t,e,i,r){var n=3*t;return this.float32[0+n]=e,this.float32[1+n]=i,this.float32[2+n]=r,t},Xn);function Xn(){Hn.apply(this,arguments)}qn.prototype.bytesPerElement=12,Or("StructArrayLayout3f12",qn);var Jn,Kn=((Jn=wn)&&($n.__proto__=Jn),(($n.prototype=Object.create(Jn&&Jn.prototype)).constructor=$n).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},$n.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},$n.prototype.emplace=function(t,e){return this.uint32[+t+0]=e,t},$n);function $n(){Jn.apply(this,arguments)}Kn.prototype.bytesPerElement=4,Or("StructArrayLayout1ul4",Kn);var to,eo=((to=wn)&&(io.__proto__=to),((io.prototype=Object.create(to&&to.prototype)).constructor=io).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},io.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,u){var l=this.length;return this.resize(l+1),this.emplace(l,t,e,i,r,n,o,a,s,u)},io.prototype.emplace=function(t,e,i,r,n,o,a,s,u,l){var c=10*t,p=5*t;return this.int16[0+c]=e,this.int16[1+c]=i,this.int16[2+c]=r,this.int16[3+c]=n,this.int16[4+c]=o,this.int16[5+c]=a,this.uint32[3+p]=s,this.uint16[8+c]=u,this.uint16[9+c]=l,t},io);function io(){to.apply(this,arguments)}eo.prototype.bytesPerElement=20,Or("StructArrayLayout6i1ul2ui20",eo);var ro,no=((ro=wn)&&(oo.__proto__=ro),((oo.prototype=Object.create(ro&&ro.prototype)).constructor=oo).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},oo.prototype.emplaceBack=function(t,e,i,r,n,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,o)},oo.prototype.emplace=function(t,e,i,r,n,o,a){var s=6*t;return this.int16[0+s]=e,this.int16[1+s]=i,this.int16[2+s]=r,this.int16[3+s]=n,this.int16[4+s]=o,this.int16[5+s]=a,t},oo);function oo(){ro.apply(this,arguments)}no.prototype.bytesPerElement=12,Or("StructArrayLayout2i2i2i12",no);var ao,so=((ao=wn)&&(uo.__proto__=ao),((uo.prototype=Object.create(ao&&ao.prototype)).constructor=uo).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},uo.prototype.emplaceBack=function(t,e,i,r,n){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,i,r,n)},uo.prototype.emplace=function(t,e,i,r,n,o){var a=4*t,s=8*t;return this.float32[0+a]=e,this.float32[1+a]=i,this.float32[2+a]=r,this.int16[6+s]=n,this.int16[7+s]=o,t},uo);function uo(){ao.apply(this,arguments)}so.prototype.bytesPerElement=16,Or("StructArrayLayout2f1f2i16",so);var lo,co=((lo=wn)&&(po.__proto__=lo),((po.prototype=Object.create(lo&&lo.prototype)).constructor=po).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},po.prototype.emplaceBack=function(t,e,i,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)},po.prototype.emplace=function(t,e,i,r,n){var o=12*t,a=3*t;return this.uint8[0+o]=e,this.uint8[1+o]=i,this.float32[1+a]=r,this.float32[2+a]=n,t},po);function po(){lo.apply(this,arguments)}co.prototype.bytesPerElement=12,Or("StructArrayLayout2ub2f12",co);var ho,fo=((ho=wn)&&(yo.__proto__=ho),((yo.prototype=Object.create(ho&&ho.prototype)).constructor=yo).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},yo.prototype.emplaceBack=function(t,e,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)},yo.prototype.emplace=function(t,e,i,r){var n=3*t;return this.uint16[0+n]=e,this.uint16[1+n]=i,this.uint16[2+n]=r,t},yo);function yo(){ho.apply(this,arguments)}fo.prototype.bytesPerElement=6,Or("StructArrayLayout3ui6",fo);var mo,go=((mo=wn)&&(vo.__proto__=mo),((vo.prototype=Object.create(mo&&mo.prototype)).constructor=vo).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},vo.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,u,l,c,p,h,d,f,y,m){var g=this.length;return this.resize(g+1),this.emplace(g,t,e,i,r,n,o,a,s,u,l,c,p,h,d,f,y,m)},vo.prototype.emplace=function(t,e,i,r,n,o,a,s,u,l,c,p,h,d,f,y,m,g){var v=24*t,_=12*t,x=48*t;return this.int16[0+v]=e,this.int16[1+v]=i,this.uint16[2+v]=r,this.uint16[3+v]=n,this.uint32[2+_]=o,this.uint32[3+_]=a,this.uint32[4+_]=s,this.uint16[10+v]=u,this.uint16[11+v]=l,this.uint16[12+v]=c,this.float32[7+_]=p,this.float32[8+_]=h,this.uint8[36+x]=d,this.uint8[37+x]=f,this.uint8[38+x]=y,this.uint32[10+_]=m,this.int16[22+v]=g,t},vo);function vo(){mo.apply(this,arguments)}go.prototype.bytesPerElement=48,Or("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",go);var _o,xo=((_o=wn)&&(bo.__proto__=_o),((bo.prototype=Object.create(_o&&_o.prototype)).constructor=bo).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},bo.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,u,l,c,p,h,d,f,y,m,g,v,_,x,b,M,w,I,T,L,z){var D=this.length;return this.resize(D+1),this.emplace(D,t,e,i,r,n,o,a,s,u,l,c,p,h,d,f,y,m,g,v,_,x,b,M,w,I,T,L,z)},bo.prototype.emplace=function(t,e,i,r,n,o,a,s,u,l,c,p,h,d,f,y,m,g,v,_,x,b,M,w,I,T,L,z,D){var A=34*t,S=17*t;return this.int16[0+A]=e,this.int16[1+A]=i,this.int16[2+A]=r,this.int16[3+A]=n,this.int16[4+A]=o,this.int16[5+A]=a,this.int16[6+A]=s,this.int16[7+A]=u,this.uint16[8+A]=l,this.uint16[9+A]=c,this.uint16[10+A]=p,this.uint16[11+A]=h,this.uint16[12+A]=d,this.uint16[13+A]=f,this.uint16[14+A]=y,this.uint16[15+A]=m,this.uint16[16+A]=g,this.uint16[17+A]=v,this.uint16[18+A]=_,this.uint16[19+A]=x,this.uint16[20+A]=b,this.uint16[21+A]=M,this.uint16[22+A]=w,this.uint32[12+S]=I,this.float32[13+S]=T,this.float32[14+S]=L,this.float32[15+S]=z,this.float32[16+S]=D,t},bo);function bo(){_o.apply(this,arguments)}xo.prototype.bytesPerElement=68,Or("StructArrayLayout8i15ui1ul4f68",xo);var Mo,wo=((Mo=wn)&&(Io.__proto__=Mo),((Io.prototype=Object.create(Mo&&Mo.prototype)).constructor=Io).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Io.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},Io.prototype.emplace=function(t,e){return this.float32[+t+0]=e,t},Io);function Io(){Mo.apply(this,arguments)}wo.prototype.bytesPerElement=4,Or("StructArrayLayout1f4",wo);var To,Lo=((To=wn)&&(zo.__proto__=To),((zo.prototype=Object.create(To&&To.prototype)).constructor=zo).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},zo.prototype.emplaceBack=function(t,e,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)},zo.prototype.emplace=function(t,e,i,r){var n=3*t;return this.int16[0+n]=e,this.int16[1+n]=i,this.int16[2+n]=r,t},zo);function zo(){To.apply(this,arguments)}Lo.prototype.bytesPerElement=6,Or("StructArrayLayout3i6",Lo);var Do,Ao=((Do=wn)&&(So.__proto__=Do),((So.prototype=Object.create(Do&&Do.prototype)).constructor=So).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},So.prototype.emplaceBack=function(t,e,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)},So.prototype.emplace=function(t,e,i,r){var n=4*t;return this.uint32[2*t+0]=e,this.uint16[2+n]=i,this.uint16[3+n]=r,t},So);function So(){Do.apply(this,arguments)}Ao.prototype.bytesPerElement=8,Or("StructArrayLayout1ul2ui8",Ao);var Eo,Co=((Eo=wn)&&(No.__proto__=Eo),((No.prototype=Object.create(Eo&&Eo.prototype)).constructor=No).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},No.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},No.prototype.emplace=function(t,e,i){var r=2*t;return this.uint16[0+r]=e,this.uint16[1+r]=i,t},No);function No(){Eo.apply(this,arguments)}Co.prototype.bytesPerElement=4,Or("StructArrayLayout2ui4",Co);var jo,ko=((jo=wn)&&(Po.__proto__=jo),((Po.prototype=Object.create(jo&&jo.prototype)).constructor=Po).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},Po.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},Po.prototype.emplace=function(t,e){return this.uint16[+t+0]=e,t},Po);function Po(){jo.apply(this,arguments)}ko.prototype.bytesPerElement=2,Or("StructArrayLayout1ui2",ko);var Oo,Bo=((Oo=wn)&&(Uo.__proto__=Oo),((Uo.prototype=Object.create(Oo&&Oo.prototype)).constructor=Uo).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Uo.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},Uo.prototype.emplace=function(t,e,i){var r=2*t;return this.float32[0+r]=e,this.float32[1+r]=i,t},Uo);function Uo(){Oo.apply(this,arguments)}Bo.prototype.bytesPerElement=8,Or("StructArrayLayout2f8",Bo);var Ro,Fo=((Ro=wn)&&(Zo.__proto__=Ro),((Zo.prototype=Object.create(Ro&&Ro.prototype)).constructor=Zo).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Zo.prototype.emplaceBack=function(t,e,i,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)},Zo.prototype.emplace=function(t,e,i,r,n){var o=4*t;return this.float32[0+o]=e,this.float32[1+o]=i,this.float32[2+o]=r,this.float32[3+o]=n,t},Zo);function Zo(){Ro.apply(this,arguments)}Fo.prototype.bytesPerElement=16,Or("StructArrayLayout4f16",Fo);var Vo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new pt(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,i),e}(Mn);Vo.prototype.size=20;var Go,Yo=((Go=eo)&&(Qo.__proto__=Go),((Qo.prototype=Object.create(Go&&Go.prototype)).constructor=Qo).prototype.get=function(t){return new Vo(this,t)},Qo);function Qo(){Go.apply(this,arguments)}Or("CollisionBoxArray",Yo);var Wo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,i),e}(Mn);Wo.prototype.size=48;var Ho,qo=((Ho=go)&&(Xo.__proto__=Ho),((Xo.prototype=Object.create(Ho&&Ho.prototype)).constructor=Xo).prototype.get=function(t){return new Wo(this,t)},Xo);function Xo(){Ho.apply(this,arguments)}Or("PlacedSymbolArray",qo);var Jo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(t){this._structArray.uint32[this._pos4+12]=t},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(e.prototype,i),e}(Mn);Jo.prototype.size=68;var Ko,$o=((Ko=xo)&&(ta.__proto__=Ko),((ta.prototype=Object.create(Ko&&Ko.prototype)).constructor=ta).prototype.get=function(t){return new Jo(this,t)},ta);function ta(){Ko.apply(this,arguments)}Or("SymbolInstanceArray",$o);var ea,ia=((ea=wo)&&(ra.__proto__=ea),((ra.prototype=Object.create(ea&&ea.prototype)).constructor=ra).prototype.getoffsetX=function(t){return this.float32[+t+0]},ra);function ra(){ea.apply(this,arguments)}Or("GlyphOffsetArray",ia);var na,oa=((na=Lo)&&(aa.__proto__=na),((aa.prototype=Object.create(na&&na.prototype)).constructor=aa).prototype.getx=function(t){return this.int16[3*t+0]},aa.prototype.gety=function(t){return this.int16[3*t+1]},aa.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},aa);function aa(){na.apply(this,arguments)}Or("SymbolLineVertexArray",oa);var sa=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,i),e}(Mn);sa.prototype.size=8;var ua,la=((ua=Ao)&&(ca.__proto__=ua),((ca.prototype=Object.create(ua&&ua.prototype)).constructor=ca).prototype.get=function(t){return new sa(this,t)},ca);function ca(){ua.apply(this,arguments)}Or("FeatureIndexArray",la);function pa(t){void 0===t&&(t=[]),this.segments=t}var ha=Dn([{name:"a_pos",components:2,type:"Int16"}],4).members;function da(t,e){return 256*(t=l(Math.floor(t),0,255))+l(Math.floor(e),0,255)}pa.prototype.prepareSegment=function(t,e,i,r){var n=this.segments[this.segments.length-1];return pa.MAX_VERTEX_ARRAY_LENGTH<t&&ht("Max vertices per segment is "+pa.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!n||n.vertexLength+t>pa.MAX_VERTEX_ARRAY_LENGTH||n.sortKey!==r)&&(n={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==r&&(n.sortKey=r),this.segments.push(n)),n},pa.prototype.get=function(){return this.segments},pa.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var i=e[t];for(var r in i.vaos)i.vaos[r].destroy()}},pa.simpleSegment=function(t,e,i,r){return new pa([{vertexOffset:t,primitiveOffset:e,vertexLength:i,primitiveLength:r,vaos:{},sortKey:0}])},pa.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Or("SegmentVector",pa);var fa=Dn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ya=e(function(t){t.exports=function(t,e){for(var i,r,n,o=t.length-(i=3&t.length),a=e,s=3432918353,u=461845907,l=0;l<o;)n=255&t.charCodeAt(l)|(255&t.charCodeAt(++l))<<8|(255&t.charCodeAt(++l))<<16|(255&t.charCodeAt(++l))<<24,++l,a=27492+(65535&(r=5*(65535&(a=(a^=n=(65535&(n=(n=(65535&n)*s+(((n>>>16)*s&65535)<<16)&4294967295)<<15|n>>>17))*u+(((n>>>16)*u&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(r>>>16)&65535)<<16);switch(n=0,i){case 3:n^=(255&t.charCodeAt(l+2))<<16;case 2:n^=(255&t.charCodeAt(l+1))<<8;case 1:a^=n=(65535&(n=(n=(65535&(n^=255&t.charCodeAt(l)))*s+(((n>>>16)*s&65535)<<16)&4294967295)<<15|n>>>17))*u+(((n>>>16)*u&65535)<<16)&4294967295}return a^=t.length,a=2246822507*(65535&(a^=a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295,(a^=a>>>16)>>>0}}),ma=e(function(t){t.exports=function(t,e){for(var i,r=t.length,n=e^r,o=0;4<=r;)i=1540483477*(65535&(i=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(i>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:n^=(255&t.charCodeAt(o+2))<<16;case 2:n^=(255&t.charCodeAt(o+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(o)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0}}),ga=ya,va=ma;ga.murmur3=ya,ga.murmur2=va;function _a(){this.ids=[],this.positions=[],this.indexed=!1}_a.prototype.add=function(t,e,i,r){this.ids.push(ba(t)),this.positions.push(e,i,r)},_a.prototype.getPositions=function(t){for(var e=ba(t),i=0,r=this.ids.length-1;i<r;){var n=i+r>>1;this.ids[n]>=e?r=n:i=1+n}for(var o=[];this.ids[i]===e;)o.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return o},_a.serialize=function(t,e){var i=new Float64Array(t.ids),r=new Uint32Array(t.positions);return function t(e,i,r,n){for(;r<n;){for(var o=e[r+n>>1],a=r-1,s=n+1;;){for(;e[++a]<o;);for(;e[--s]>o;);if(s<=a)break;Ma(e,a,s),Ma(i,3*a,3*s),Ma(i,3*a+1,3*s+1),Ma(i,3*a+2,3*s+2)}s-r<n-s?(t(e,i,r,s),r=s+1):(t(e,i,s+1,n),n=s)}}(i,r,0,i.length-1),e&&e.push(i.buffer,r.buffer),{ids:i,positions:r}},_a.deserialize=function(t){var e=new _a;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var xa=Math.pow(2,53)-1;function ba(t){var e=+t;return!isNaN(e)&&e<=xa?e:ga(String(t))}function Ma(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}Or("FeaturePositionMap",_a);function wa(t,e){this.gl=t.gl,this.location=e}var Ia,Ta,La,za,Da,Aa,Sa,Ea=((Sa=wa)&&(Ya.__proto__=Sa),((Ya.prototype=Object.create(Sa&&Sa.prototype)).constructor=Ya).prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},Ya),Ca=((Aa=wa)&&(Ga.__proto__=Aa),((Ga.prototype=Object.create(Aa&&Aa.prototype)).constructor=Ga).prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},Ga),Na=((Da=wa)&&(Va.__proto__=Da),((Va.prototype=Object.create(Da&&Da.prototype)).constructor=Va).prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},Va),ja=((za=wa)&&(Za.__proto__=za),((Za.prototype=Object.create(za&&za.prototype)).constructor=Za).prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},Za),ka=((La=wa)&&(Fa.__proto__=La),((Fa.prototype=Object.create(La&&La.prototype)).constructor=Fa).prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},Fa),Pa=((Ta=wa)&&(Ra.__proto__=Ta),((Ra.prototype=Object.create(Ta&&Ta.prototype)).constructor=Ra).prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},Ra),Oa=new Float32Array(16),Ba=((Ia=wa)&&(Ua.__proto__=Ia),((Ua.prototype=Object.create(Ia&&Ia.prototype)).constructor=Ua).prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},Ua);function Ua(t,e){Ia.call(this,t,e),this.current=Oa}function Ra(t,e){Ta.call(this,t,e),this.current=se.transparent}function Fa(t,e){La.call(this,t,e),this.current=[0,0,0,0]}function Za(t,e){za.call(this,t,e),this.current=[0,0,0]}function Va(t,e){Da.call(this,t,e),this.current=[0,0]}function Ga(t,e){Aa.call(this,t,e),this.current=0}function Ya(t,e){Sa.call(this,t,e),this.current=0}function Qa(t){return[da(255*t.r,255*t.g),da(255*t.b,255*t.a)]}function Wa(t,e,i){this.value=t,this.uniformNames=e.map(function(t){return"u_"+t}),this.type=i}Wa.prototype.setUniform=function(t,e,i){t.set(i.constantOr(this.value))},Wa.prototype.getBinding=function(t,e,i){return new("color"===this.type?Pa:Ca)(t,e)};function Ha(t,e){this.uniformNames=e.map(function(t){return"u_"+t}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}Ha.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},Ha.prototype.setUniform=function(t,e,i,r){var n="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;n&&t.set(n)},Ha.prototype.getBinding=function(t,e,i){return new("u_pattern"===i.substr(0,9)?ka:Ca)(t,e)};function qa(t,e,i,r){this.expression=t,this.type=i,this.maxValue=0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===i?2:1,offset:0}}),this.paintVertexArray=new r}qa.prototype.populatePaintArray=function(t,e,i,r,n){var o=this.paintVertexArray.length,a=this.expression.evaluate(new rn(0),e,{},r,[],n);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)},qa.prototype.updatePaintArray=function(t,e,i,r){var n=this.expression.evaluate({zoom:0},i,r);this._setPaintValue(t,e,n)},qa.prototype._setPaintValue=function(t,e,i){if("color"===this.type)for(var r=Qa(i),n=t;n<e;n++)this.paintVertexArray.emplace(n,r[0],r[1]);else{for(var o=t;o<e;o++)this.paintVertexArray.emplace(o,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},qa.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},qa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};function Xa(t,e,i,r,n,o){this.expression=t,this.uniformNames=e.map(function(t){return"u_"+t+"_t"}),this.type=i,this.useIntegerZoom=r,this.zoom=n,this.maxValue=0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===i?4:2,offset:0}}),this.paintVertexArray=new o}Xa.prototype.populatePaintArray=function(t,e,i,r,n){var o=this.expression.evaluate(new rn(this.zoom),e,{},r,[],n),a=this.expression.evaluate(new rn(this.zoom+1),e,{},r,[],n),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)},Xa.prototype.updatePaintArray=function(t,e,i,r){var n=this.expression.evaluate({zoom:this.zoom},i,r),o=this.expression.evaluate({zoom:this.zoom+1},i,r);this._setPaintValue(t,e,n,o)},Xa.prototype._setPaintValue=function(t,e,i,r){if("color"===this.type)for(var n=Qa(i),o=Qa(r),a=t;a<e;a++)this.paintVertexArray.emplace(a,n[0],n[1],o[0],o[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,i,r);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(r))}},Xa.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Xa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Xa.prototype.setUniform=function(t,e){var i=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=l(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);t.set(r)},Xa.prototype.getBinding=function(t,e,i){return new Ca(t,e)};function Ja(t,e,i,r,n,o){this.expression=t,this.type=e,this.useIntegerZoom=i,this.zoom=r,this.layerId=o,this.zoomInPaintVertexArray=new n,this.zoomOutPaintVertexArray=new n}Ja.prototype.populatePaintArray=function(t,e,i){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],i)},Ja.prototype.updatePaintArray=function(t,e,i,r,n){this._setPaintValues(t,e,i.patterns&&i.patterns[this.layerId],n)},Ja.prototype._setPaintValues=function(t,e,i,r){if(r&&i){var n=r[i.min],o=r[i.mid],a=r[i.max];if(n&&o&&a)for(var s=t;s<e;s++)this.zoomInPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],n.tl[0],n.tl[1],n.br[0],n.br[1],o.pixelRatio,n.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],o.pixelRatio,a.pixelRatio)}},Ja.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,fa.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,fa.members,this.expression.isStateDependent))},Ja.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};function Ka(t,e,i){this.binders={},this._buffers=[];var r,n,o,a,s,u,l,c,p,h,d,f=[];for(var y in t.paint._values){!i(y)||(r=t.paint.get(y))instanceof hn&&Ni(r.property.specification)&&(h=y,d=t.type,n={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(d+"-","").replace(/-/g,"_")],o=r.value,a=r.property.specification.type,s=r.property.useIntegerZoom,l="cross-faded"===(u=r.property.specification["property-type"])||"cross-faded-data-driven"===u,"constant"===o.kind?(this.binders[y]=l?new Ha(o.value,n):new Wa(o.value,n,a),f.push("/u_"+y)):"source"===o.kind||l?(c=ts(y,a,"source"),this.binders[y]=l?new Ja(o,a,s,e,c,t.id):new qa(o,n,a,c),f.push("/a_"+y)):(p=ts(y,a,"composite"),this.binders[y]=new Xa(o,n,a,s,e,p),f.push("/z_"+y)))}this.cacheKey=f.sort().join("")}Ka.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof qa||e instanceof Xa?e.maxValue:0},Ka.prototype.populatePaintArrays=function(t,e,i,r,n){for(var o in this.binders){var a=this.binders[o];(a instanceof qa||a instanceof Xa||a instanceof Ja)&&a.populatePaintArray(t,e,i,r,n)}},Ka.prototype.setConstantPatternPositions=function(t,e){for(var i in this.binders){var r=this.binders[i];r instanceof Ha&&r.setConstantPatternPositions(t,e)}},Ka.prototype.updatePaintArrays=function(t,e,i,r,n){var o=!1;for(var a in t)for(var s=0,u=e.getPositions(a);s<u.length;s+=1){var l=u[s],c=i.feature(l.index);for(var p in this.binders){var h,d=this.binders[p];(d instanceof qa||d instanceof Xa||d instanceof Ja)&&!0===d.expression.isStateDependent&&(h=r.paint.get(p),d.expression=h.value,d.updatePaintArray(l.start,l.end,c,t[a],n),o=!0)}}return o},Ka.prototype.defines=function(){var t=[];for(var e in this.binders){var i=this.binders[e];(i instanceof Wa||i instanceof Ha)&&t.push.apply(t,i.uniformNames.map(function(t){return"#define HAS_UNIFORM_"+t}))}return t},Ka.prototype.getBinderAttributes=function(){var t=[];for(var e in this.binders){var i=this.binders[e];if(i instanceof qa||i instanceof Xa)for(var r=0;r<i.paintVertexAttributes.length;r++)t.push(i.paintVertexAttributes[r].name);else if(i instanceof Ja)for(var n=0;n<fa.members.length;n++)t.push(fa.members[n].name)}return t},Ka.prototype.getBinderUniforms=function(){var t=[];for(var e in this.binders){var i=this.binders[e];if(i instanceof Wa||i instanceof Ha||i instanceof Xa)for(var r=0,n=i.uniformNames;r<n.length;r+=1)t.push(n[r])}return t},Ka.prototype.getPaintVertexBuffers=function(){return this._buffers},Ka.prototype.getUniforms=function(t,e){var i=[];for(var r in this.binders){var n=this.binders[r];if(n instanceof Wa||n instanceof Ha||n instanceof Xa)for(var o=0,a=n.uniformNames;o<a.length;o+=1){var s,u=a[o];e[u]&&(s=n.getBinding(t,e[u],u),i.push({name:u,property:r,binding:s}))}}return i},Ka.prototype.setUniforms=function(t,e,i,r){for(var n=0,o=e;n<o.length;n+=1){var a=o[n],s=a.name,u=a.property;this.binders[u].setUniform(a.binding,r,i.get(u),s)}},Ka.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var i,r=this.binders[e];t&&r instanceof Ja?(i=2===t.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer)&&this._buffers.push(i):(r instanceof qa||r instanceof Xa)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}},Ka.prototype.upload=function(t){for(var e in this.binders){var i=this.binders[e];(i instanceof qa||i instanceof Xa||i instanceof Ja)&&i.upload(t)}this.updatePaintBuffers()},Ka.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof qa||e instanceof Xa||e instanceof Ja)&&e.destroy()}};function $a(t,e,i){void 0===i&&(i=function(){return!0}),this.programConfigurations={};for(var r=0,n=t;r<n.length;r+=1){var o=n[r];this.programConfigurations[o.id]=new Ka(o,e,i)}this.needsUpload=!1,this._featureMap=new _a,this._bufferOffset=0}function ts(t,e,i){var r={color:{source:Bo,composite:Fo},number:{source:wo,composite:Bo}},n={"line-pattern":{source:Vn,composite:Vn},"fill-pattern":{source:Vn,composite:Vn},"fill-extrusion-pattern":{source:Vn,composite:Vn}}[t];return n&&n[i]||r[e][i]}$a.prototype.populatePaintArrays=function(t,e,i,r,n,o){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,r,n,o);void 0!==e.id&&this._featureMap.add(e.id,i,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},$a.prototype.updatePaintArrays=function(t,e,i,r){for(var n=0,o=i;n<o.length;n+=1){var a=o[n];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,r)||this.needsUpload}},$a.prototype.get=function(t){return this.programConfigurations[t]},$a.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},$a.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Or("ConstantBinder",Wa),Or("CrossFadedConstantBinder",Ha),Or("SourceExpressionBinder",qa),Or("CrossFadedCompositeBinder",Ja),Or("CompositeExpressionBinder",Xa),Or("ProgramConfiguration",Ka,{omit:["_buffers"]}),Or("ProgramConfigurationSet",$a);var es=Math.pow(2,14)-1,is=-es-1;function rs(t){for(var e=8192/t.extent,i=t.loadGeometry(),r=0;r<i.length;r++)for(var n=i[r],o=0;o<n.length;o++){var a=n[o],s=Math.round(a.x*e),u=Math.round(a.y*e);a.x=l(s,is,es),a.y=l(u,is,es),(s<a.x||s>a.x+1||u<a.y||u>a.y+1)&&ht("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function ns(t,e,i,r,n){t.emplaceBack(2*e+(r+1)/2,2*i+(n+1)/2)}function os(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new En,this.indexArray=new fo,this.segments=new pa,this.programConfigurations=new $a(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})}function as(t,e){for(var i=0;i<t.length;i++)if(hs(e,t[i]))return!0;for(var r=0;r<e.length;r++)if(hs(t,e[r]))return!0;return!!us(t,e)}function ss(t,e){if(1===t.length)return ps(e,t[0]);for(var i=0;i<e.length;i++)for(var r=e[i],n=0;n<r.length;n++)if(hs(t,r[n]))return!0;for(var o=0;o<t.length;o++)if(ps(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(us(t,e[a]))return!0;return!1}function us(t,e){if(0!==t.length&&0!==e.length)for(var i,r,n,o,a=0;a<t.length-1;a++)for(var s=t[a],u=t[a+1],l=0;l<e.length-1;l++)if(i=s,r=u,n=e[l],o=e[l+1],b(i,n,o)!==b(r,n,o)&&b(i,r,n)!==b(i,r,o))return 1}function ls(t,e,i){var r=i*i;if(1===e.length)return t.distSqr(e[0])<r;for(var n=1;n<e.length;n++)if(cs(t,e[n-1],e[n])<r)return 1}function cs(t,e,i){var r=e.distSqr(i);if(0===r)return t.distSqr(e);var n=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/r;return t.distSqr(n<0?e:1<n?i:i.sub(e)._mult(n)._add(e))}function ps(t,e){for(var i,r,n,o=!1,a=0;a<t.length;a++)for(var s=0,u=(i=t[a]).length-1;s<i.length;u=s++)(r=i[s]).y>e.y!=(n=i[u]).y>e.y&&e.x<(n.x-r.x)*(e.y-r.y)/(n.y-r.y)+r.x&&(o=!o);return o}function hs(t,e){for(var i=!1,r=0,n=t.length-1;r<t.length;n=r++){var o=t[r],a=t[n];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(i=!i)}return i}function ds(t,e,i){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:i.programConfigurations.get(e.id).getMaxValue(t)}function fs(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ys(t,e,i,r,n){if(!e[0]&&!e[1])return t;var o=pt.convert(e)._mult(n);"viewport"===i&&o._rotate(-r);for(var a=[],s=0;s<t.length;s++)a.push(t[s].sub(o));return a}os.prototype.populate=function(t,e,i){var r=this.layers[0],n=[],o=null;"circle"===r.type&&(o=r.layout.get("circle-sort-key"));for(var a=0,s=t;a<s.length;a+=1){var u,l=s[a],c=l.feature,p=l.id,h=l.index,d=l.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,y={type:c.type,id:p,properties:c.properties,geometry:f?rs(c):[]};this.layers[0]._featureFilter.filter(new rn(this.zoom),y,i)&&(f||(y.geometry=rs(c)),u=o?o.evaluate(y,{},i):void 0,n.push({id:p,properties:c.properties,type:c.type,sourceLayerIndex:d,index:h,geometry:y.geometry,patterns:{},sortKey:u}))}o&&n.sort(function(t,e){return t.sortKey-e.sortKey});for(var m=0,g=n;m<g.length;m+=1){var v=g[m],_=v.geometry,x=v.index,b=v.sourceLayerIndex,M=t[x].feature;this.addFeature(v,_,x,i),e.featureIndex.insert(M,_,x,b,this.index)}},os.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},os.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},os.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},os.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ha),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},os.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},os.prototype.addFeature=function(t,e,i,r){for(var n=0,o=e;n<o.length;n+=1)for(var a=0,s=o[n];a<s.length;a+=1){var u,l,c=s[a],p=c.x,h=c.y;p<0||8192<=p||h<0||8192<=h||(l=(u=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey)).vertexLength,ns(this.layoutVertexArray,p,h,-1,-1),ns(this.layoutVertexArray,p,h,1,-1),ns(this.layoutVertexArray,p,h,1,1),ns(this.layoutVertexArray,p,h,-1,1),this.indexArray.emplaceBack(l,l+1,l+2),this.indexArray.emplaceBack(l,l+3,l+2),u.vertexLength+=4,u.primitiveLength+=2)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,{},r)},Or("CircleBucket",os,{omit:["layers"]});var ms=new bn({"circle-sort-key":new yn(jt.layout_circle["circle-sort-key"])}),gs={paint:new bn({"circle-radius":new yn(jt.paint_circle["circle-radius"]),"circle-color":new yn(jt.paint_circle["circle-color"]),"circle-blur":new yn(jt.paint_circle["circle-blur"]),"circle-opacity":new yn(jt.paint_circle["circle-opacity"]),"circle-translate":new fn(jt.paint_circle["circle-translate"]),"circle-translate-anchor":new fn(jt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new fn(jt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new fn(jt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new yn(jt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new yn(jt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new yn(jt.paint_circle["circle-stroke-opacity"])}),layout:ms},vs="undefined"!=typeof Float32Array?Float32Array:Array;function _s(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function xs(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],d=e[10],f=e[11],y=e[12],m=e[13],g=e[14],v=e[15],_=i[0],x=i[1],b=i[2],M=i[3];return t[0]=_*r+x*s+b*p+M*y,t[1]=_*n+x*u+b*h+M*m,t[2]=_*o+x*l+b*d+M*g,t[3]=_*a+x*c+b*f+M*v,t[4]=(_=i[4])*r+(x=i[5])*s+(b=i[6])*p+(M=i[7])*y,t[5]=_*n+x*u+b*h+M*m,t[6]=_*o+x*l+b*d+M*g,t[7]=_*a+x*c+b*f+M*v,t[8]=(_=i[8])*r+(x=i[9])*s+(b=i[10])*p+(M=i[11])*y,t[9]=_*n+x*u+b*h+M*m,t[10]=_*o+x*l+b*d+M*g,t[11]=_*a+x*c+b*f+M*v,t[12]=(_=i[12])*r+(x=i[13])*s+(b=i[14])*p+(M=i[15])*y,t[13]=_*n+x*u+b*h+M*m,t[14]=_*o+x*l+b*d+M*g,t[15]=_*a+x*c+b*f+M*v,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,i=arguments.length;i--;)e+=t[i]*t[i];return Math.sqrt(e)});var bs,Ms,ws=xs;function Is(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*o+i[12]*a,t[1]=i[1]*r+i[5]*n+i[9]*o+i[13]*a,t[2]=i[2]*r+i[6]*n+i[10]*o+i[14]*a,t[3]=i[3]*r+i[7]*n+i[11]*o+i[15]*a,t}bs=new vs(3),vs!=Float32Array&&(bs[0]=0,bs[1]=0,bs[2]=0),Ms=new vs(4),vs!=Float32Array&&(Ms[0]=0,Ms[1]=0,Ms[2]=0,Ms[3]=0);var Ts,Ls,zs=(Ls=new vs(2),vs!=Float32Array&&(Ls[0]=0,Ls[1]=0),(Ts=Tn)&&(Ds.__proto__=Ts),((Ds.prototype=Object.create(Ts&&Ts.prototype)).constructor=Ds).prototype.createBucket=function(t){return new os(t)},Ds.prototype.queryRadius=function(t){var e=t;return ds("circle-radius",this,e)+ds("circle-stroke-width",this,e)+fs(this.paint.get("circle-translate"))},Ds.prototype.queryIntersectsFeature=function(t,e,i,r,n,o,a,s){for(var u,l,c,p,h=ys(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),d=this.paint.get("circle-radius").evaluate(e,i)+this.paint.get("circle-stroke-width").evaluate(e,i),f="map"===this.paint.get("circle-pitch-alignment"),y=f?h:(p=s,h.map(function(t){return As(t,p)})),m=f?d*a:d,g=0,v=r;g<v.length;g+=1)for(var _=0,x=v[g];_<x.length;_+=1){var b=x[_],M=f?b:As(b,s),w=m,I=Is([],[b.x,b.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?w*=I[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(w*=o.cameraToCenterDistance/I[3]),c=w,hs(u=y,l=M)||ls(l,u,c))return!0}return!1},Ds);function Ds(t){Ts.call(this,t,gs)}function As(t,e){var i=Is([],[t.x,t.y,0,1],e);return new pt(i[0]/i[3],i[1]/i[3])}var Ss,Es=((Ss=os)&&(Cs.__proto__=Ss),(Cs.prototype=Object.create(Ss&&Ss.prototype)).constructor=Cs);function Cs(){Ss.apply(this,arguments)}function Ns(t,e,i,r){var n=e.width,o=e.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==n*o*i)throw new RangeError("mismatched image size")}else r=new Uint8Array(n*o*i);return t.width=n,t.height=o,t.data=r,t}function js(t,e,i){var r,n=e.width,o=e.height;n===t.width&&o===t.height||(ks(t,r=Ns({},{width:n,height:o},i),{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,n),height:Math.min(t.height,o)},i),t.width=n,t.height=o,t.data=r.data)}function ks(t,e,i,r,n,o){if(0===n.width||0===n.height)return e;if(n.width>t.width||n.height>t.height||i.x>t.width-n.width||i.y>t.height-n.height)throw new RangeError("out of range source coordinates for image copy");if(n.width>e.width||n.height>e.height||r.x>e.width-n.width||r.y>e.height-n.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,u=0;u<n.height;u++)for(var l=((i.y+u)*t.width+i.x)*o,c=((r.y+u)*e.width+r.x)*o,p=0;p<n.width*o;p++)s[c+p]=a[l+p];return e}Or("HeatmapBucket",Es,{omit:["layers"]});var Ps=function(t,e){Ns(this,t,1,e)};Ps.prototype.resize=function(t){js(this,t,1)},Ps.prototype.clone=function(){return new Ps({width:this.width,height:this.height},new Uint8Array(this.data))},Ps.copy=function(t,e,i,r,n){ks(t,e,i,r,n,1)};function Os(t,e){Ns(this,t,4,e)}Os.prototype.resize=function(t){js(this,t,4)},Os.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},Os.prototype.clone=function(){return new Os({width:this.width,height:this.height},new Uint8Array(this.data))},Os.copy=function(t,e,i,r,n){ks(t,e,i,r,n,4)},Or("AlphaImage",Ps),Or("RGBAImage",Os);var Bs={paint:new bn({"heatmap-radius":new yn(jt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new yn(jt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new fn(jt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new xn(jt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new fn(jt.paint_heatmap["heatmap-opacity"])})};function Us(t,e){for(var i=new Uint8Array(1024),r={},n=0,o=0;n<256;n++,o+=4){r[e]=n/255;var a=t.evaluate(r);i[o+0]=Math.floor(255*a.r/a.a),i[o+1]=Math.floor(255*a.g/a.a),i[o+2]=Math.floor(255*a.b/a.a),i[o+3]=Math.floor(255*a.a)}return new Os({width:256,height:1},i)}var Rs,Fs,Zs=((Fs=Tn)&&(qs.__proto__=Fs),((qs.prototype=Object.create(Fs&&Fs.prototype)).constructor=qs).prototype.createBucket=function(t){return new Es(t)},qs.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},qs.prototype._updateColorRamp=function(){this.colorRamp=Us(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},qs.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},qs.prototype.queryRadius=function(){return 0},qs.prototype.queryIntersectsFeature=function(){return!1},qs.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},qs),Vs={paint:new bn({"hillshade-illumination-direction":new fn(jt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new fn(jt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new fn(jt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new fn(jt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new fn(jt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new fn(jt.paint_hillshade["hillshade-accent-color"])})},Gs=((Rs=Tn)&&(Hs.__proto__=Rs),((Hs.prototype=Object.create(Rs&&Rs.prototype)).constructor=Hs).prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},Hs),Ys=Dn([{name:"a_pos",components:2,type:"Int16"}],4).members,Qs=Xs,Ws=Xs;function Hs(t){Rs.call(this,t,Vs)}function qs(t){Fs.call(this,t,Bs),this._updateColorRamp()}function Xs(t,e,i){i=i||2;var r,n,o,a,s,u,l,c=e&&e.length,p=c?e[0]*i:t.length,h=Js(t,0,p,i,!0),d=[];if(!h||h.next===h.prev)return d;if(c&&(h=function(t,e,i,r){for(var n,o=[],a=0,s=e.length;a<s;a++)(n=Js(t,e[a]*r,a<s-1?e[a+1]*r:t.length,r,!1))===n.next&&(n.steiner=!0),o.push(function(t){var e=t,i=t;for(;(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next,e!==t;);return i}(n));for(o.sort(tu),a=0;a<o.length;a++)(function(t,e){{var i;(e=function(t,e){var i,r=e,n=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&a<s){if((a=s)===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===a)return i;for(var u,l,c,p=i,h=i.x,d=i.y,f=1/0,r=i;n>=r.x&&r.x>=h&&n!==r.x&&iu(o<d?n:a,o,h,d,o<d?a:n,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(n-r.x),uu(r,t)&&(u<f||u===f&&(r.x>i.x||r.x===i.x&&(c=r,ru((l=i).prev,l,c.prev)<0&&ru(c.next,l,l.next)<0)))&&(i=r,f=u)),(r=r.next)!==p;);return i}(t,e))&&(i=lu(e,t),Ks(e,e.next),Ks(i,i.next))}})(o[a],i),i=Ks(i,i.next);return i}(t,e,h,i)),t.length>80*i){r=o=t[0],n=a=t[1];for(var f=i;f<p;f+=i)(s=t[f])<r&&(r=s),(u=t[f+1])<n&&(n=u),o<s&&(o=s),a<u&&(a=u);l=0!==(l=Math.max(o-r,a-n))?1/l:0}return $s(h,d,i,r,n,l),d}function Js(t,e,i,r,n){var o,a;if(n===0<du(t,e,i,r))for(o=e;o<i;o+=r)a=cu(o,t[o],t[o+1],a);else for(o=i-r;e<=o;o-=r)a=cu(o,t[o],t[o+1],a);return a&&nu(a,a.next)&&(pu(a),a=a.next),a}function Ks(t,e){if(!t)return t;e=e||t;var i,r=t;do{if(i=!1,r.steiner||!nu(r,r.next)&&0!==ru(r.prev,r,r.next))r=r.next;else{if(pu(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function $s(t,e,i,r,n,o,a){if(t){!a&&o&&function(t,e,i,r){for(var n=t;null===n.z&&(n.z=eu(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,(n=n.next)!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,o,a,s,u,l=1;do{for(i=t,o=t=null,a=0;i;){for(a++,r=i,e=s=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;0<s||0<u&&r;)0!==s&&(0===u||!r||i.z<=r.z)?(i=(n=i).nextZ,s--):(r=(n=r).nextZ,u--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;i=r}o.nextZ=null,l*=2}while(1<a)}(n)}(t,r,n,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?function(t,e,i,r){var n=t.prev,o=t,a=t.next;if(0<=ru(n,o,a))return!1;for(var s=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x,u=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y,l=eu(n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x,n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y,e,i,r),c=eu(s,u,e,i,r),p=t.prevZ,h=t.nextZ;p&&p.z>=l&&h&&h.z<=c;){if(p!==t.prev&&p!==t.next&&iu(n.x,n.y,o.x,o.y,a.x,a.y,p.x,p.y)&&0<=ru(p.prev,p,p.next))return!1;if(p=p.prevZ,h!==t.prev&&h!==t.next&&iu(n.x,n.y,o.x,o.y,a.x,a.y,h.x,h.y)&&0<=ru(h.prev,h,h.next))return!1;h=h.nextZ}for(;p&&p.z>=l;){if(p!==t.prev&&p!==t.next&&iu(n.x,n.y,o.x,o.y,a.x,a.y,p.x,p.y)&&0<=ru(p.prev,p,p.next))return!1;p=p.prevZ}for(;h&&h.z<=c;){if(h!==t.prev&&h!==t.next&&iu(n.x,n.y,o.x,o.y,a.x,a.y,h.x,h.y)&&0<=ru(h.prev,h,h.next))return!1;h=h.nextZ}return!0}(t,r,n,o):function(t){var e=t.prev,i=t,r=t.next;if(0<=ru(e,i,r))return!1;for(var n=t.next.next;n!==t.prev;){if(iu(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&0<=ru(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(s.i/i),e.push(t.i/i),e.push(u.i/i),pu(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?$s(t=function(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!nu(n,o)&&ou(n,r,r.next,o)&&uu(n,o)&&uu(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),pu(r),pu(r.next),r=t=o),r=r.next}while(r!==t);return Ks(r)}(Ks(t),e,i),e,i,r,n,o,2):2===a&&function(t,e,i,r,n,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&function(t,o){return t.next.i!==o.i&&t.prev.i!==o.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&ou(i,i.next,t,e))return 1;i=i.next}while(i!==t)}(t,o)&&(uu(t,o)&&uu(o,t)&&function(t){for(var e=t,i=!1,r=(t.x+o.x)/2,n=(t.y+o.y)/2;e.y>n!=e.next.y>n&&e.next.y!==e.y&&r<(e.next.x-e.x)*(n-e.y)/(e.next.y-e.y)+e.x&&(i=!i),(e=e.next)!==t;);return i}(t)&&(ru(t.prev,t,o.prev)||ru(t,o.prev,o))||nu(t,o)&&0<ru(t.prev,t,t.next)&&0<ru(o.prev,o,o.next))}(a,s)){var u=lu(a,s);return a=Ks(a,a.next),u=Ks(u,u.next),$s(a,e,i,r,n,o),$s(u,e,i,r,n,o)}s=s.next}a=a.next}while(a!==t)}(t,e,i,r,n,o):$s(Ks(t),e,i,r,n,o,1);break}}}function tu(t,e){return t.x-e.x}function eu(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function iu(t,e,i,r,n,o,a,s){return 0<=(n-a)*(e-s)-(t-a)*(o-s)&&0<=(t-a)*(r-s)-(i-a)*(e-s)&&0<=(i-a)*(o-s)-(n-a)*(r-s)}function ru(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function nu(t,e){return t.x===e.x&&t.y===e.y}function ou(t,e,i,r){var n=su(ru(t,e,i)),o=su(ru(t,e,r)),a=su(ru(i,r,t)),s=su(ru(i,r,e));return n!==o&&a!==s||0===n&&au(t,i,e)||0===o&&au(t,r,e)||0===a&&au(i,t,r)||0===s&&au(i,e,r)}function au(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function su(t){return 0<t?1:t<0?-1:0}function uu(t,e){return ru(t.prev,t,t.next)<0?0<=ru(t,e,t.next)&&0<=ru(t,t.prev,e):ru(t,e,t.prev)<0||ru(t,t.next,e)<0}function lu(t,e){var i=new hu(t.i,t.x,t.y),r=new hu(e.i,e.x,e.y),n=t.next,o=e.prev;return(t.next=e).prev=t,(i.next=n).prev=i,(r.next=i).prev=r,(o.next=r).prev=o,r}function cu(t,e,i,r){var n=new hu(t,e,i);return r?(n.next=r.next,(n.prev=r).next.prev=n,r.next=n):(n.prev=n).next=n,n}function pu(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function hu(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function du(t,e,i,r){for(var n=0,o=e,a=i-r;o<i;o+=r)n+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return n}function fu(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function yu(t,e){return t<e?-1:e<t?1:0}function mu(t,e){var i=t.length;if(i<=1)return[t];for(var r,n,o,a,s,u,l,c=[],p=0;p<i;p++){var h=function(t){for(var e=0,i=0,r=t.length,n=r-1,o=void 0,a=void 0;i<r;n=i++)e+=((a=t[n]).x-(o=t[i]).x)*(o.y+a.y);return e}(t[p]);0!==h&&(t[p].area=Math.abs(h),void 0===n&&(n=h<0),n===h<0?(r&&c.push(r),r=[t[p]]):r.push(t[p]))}if(r&&c.push(r),1<e)for(var d=0;d<c.length;d++)c[d].length<=e||(o=c[d],a=e,s=1,u=c[d].length-1,l=gu,function t(e,i,r,n,o){for(;r<n;){var a,s,u,l,c;600<n-r&&(a=n-r+1,s=i-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1),t(e,i,Math.max(r,Math.floor(i-s*l/a+c)),Math.min(n,Math.floor(i+(a-s)*l/a+c)),o));var p=e[i],h=r,d=n;for(fu(e,r,i),0<o(e[n],p)&&fu(e,r,n);h<d;){for(fu(e,h,d),h++,d--;o(e[h],p)<0;)h++;for(;0<o(e[d],p);)d--}0===o(e[r],p)?fu(e,r,d):fu(e,++d,n),d<=i&&(r=d+1),i<=d&&(n=d-1)}}(o,a,s||0,u||o.length-1,l||yu),c[d]=c[d].slice(0,e));return c}function gu(t,e){return e.area-t.area}function vu(t,e,i){for(var r=i.patternDependencies,n=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(n=!0);var u=s.constantOr(null);u&&(n=!0,r[u.to]=!0,r[u.from]=!0)}return n}function _u(t,e,i,r,n){for(var o=n.patternDependencies,a=0,s=e;a<s.length;a+=1){var u,l,c,p=s[a],h=p.paint.get(t+"-pattern").value;"constant"!==h.kind&&(u=h.evaluate({zoom:r-1},i,{},n.availableImages),l=h.evaluate({zoom:r},i,{},n.availableImages),c=h.evaluate({zoom:r+1},i,{},n.availableImages),l=l&&l.name?l.name:l,c=c&&c.name?c.name:c,o[u=u&&u.name?u.name:u]=!0,o[l]=!0,o[c]=!0,i.patterns[p.id]={min:u,mid:l,max:c})}return i}Xs.deviation=function(t,e,i,r){var n=e&&e.length,o=Math.abs(du(t,0,n?e[0]*i:t.length,i));if(n)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(du(t,e[a]*i,a<s-1?e[a+1]*i:t.length,i));for(var u=0,a=0;a<r.length;a+=3){var l=r[a]*i,c=r[a+1]*i,p=r[a+2]*i;u+=Math.abs((t[l]-t[p])*(t[1+c]-t[1+l])-(t[l]-t[c])*(t[1+p]-t[1+l]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},Xs.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var a=0;a<e;a++)i.vertices.push(t[n][o][a]);0<n&&i.holes.push(r+=t[n-1].length)}return i},Qs.default=Ws;function xu(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new En,this.indexArray=new fo,this.indexArray2=new Co,this.programConfigurations=new $a(t.layers,t.zoom),this.segments=new pa,this.segments2=new pa,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})}xu.prototype.populate=function(t,e,i){this.hasPattern=vu("fill",this.layers,e);for(var r=this.layers[0].layout.get("fill-sort-key"),n=[],o=0,a=t;o<a.length;o+=1){var s,u=a[o],l=u.feature,c=u.id,p=u.index,h=u.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,f={type:l.type,id:c,properties:l.properties,geometry:d?rs(l):[]};this.layers[0]._featureFilter.filter(new rn(this.zoom),f,i)&&(d||(f.geometry=rs(l)),s=r?r.evaluate(f,{},i,e.availableImages):void 0,n.push({id:c,properties:l.properties,type:l.type,sourceLayerIndex:h,index:p,geometry:f.geometry,patterns:{},sortKey:s}))}r&&n.sort(function(t,e){return t.sortKey-e.sortKey});for(var y=0,m=n;y<m.length;y+=1){var g,v=m[y],_=v.geometry,x=v.index,b=v.sourceLayerIndex;this.hasPattern?(g=_u("fill",this.layers,v,this.zoom,e),this.patternFeatures.push(g)):this.addFeature(v,_,x,i,{}),e.featureIndex.insert(t[x].feature,_,x,b,this.index)}},xu.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},xu.prototype.addFeatures=function(t,e,i){for(var r=0,n=this.patternFeatures;r<n.length;r+=1){var o=n[r];this.addFeature(o,o.geometry,o.index,e,i)}},xu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},xu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},xu.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ys),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},xu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},xu.prototype.addFeature=function(t,e,i,r,n){for(var o=0,a=mu(e,500);o<a.length;o+=1){for(var s=a[o],u=0,l=0,c=s;l<c.length;l+=1)u+=c[l].length;for(var p=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray),h=p.vertexLength,d=[],f=[],y=0,m=s;y<m.length;y+=1){var g=m[y];if(0!==g.length){g!==s[0]&&f.push(d.length/2);var v=this.segments2.prepareSegment(g.length,this.layoutVertexArray,this.indexArray2),_=v.vertexLength;this.layoutVertexArray.emplaceBack(g[0].x,g[0].y),this.indexArray2.emplaceBack(_+g.length-1,_),d.push(g[0].x),d.push(g[0].y);for(var x=1;x<g.length;x++)this.layoutVertexArray.emplaceBack(g[x].x,g[x].y),this.indexArray2.emplaceBack(_+x-1,_+x),d.push(g[x].x),d.push(g[x].y);v.vertexLength+=g.length,v.primitiveLength+=g.length}}for(var b=Qs(d,f),M=0;M<b.length;M+=3)this.indexArray.emplaceBack(h+b[M],h+b[M+1],h+b[M+2]);p.vertexLength+=u,p.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)},Or("FillBucket",xu,{omit:["layers","patternFeatures"]});var bu,Mu=new bn({"fill-sort-key":new yn(jt.layout_fill["fill-sort-key"])}),wu={paint:new bn({"fill-antialias":new fn(jt.paint_fill["fill-antialias"]),"fill-opacity":new yn(jt.paint_fill["fill-opacity"]),"fill-color":new yn(jt.paint_fill["fill-color"]),"fill-outline-color":new yn(jt.paint_fill["fill-outline-color"]),"fill-translate":new fn(jt.paint_fill["fill-translate"]),"fill-translate-anchor":new fn(jt.paint_fill["fill-translate-anchor"]),"fill-pattern":new vn(jt.paint_fill["fill-pattern"])}),layout:Mu},Iu=((bu=Tn)&&(zu.__proto__=bu),((zu.prototype=Object.create(bu&&bu.prototype)).constructor=zu).prototype.recalculate=function(t,e){bu.prototype.recalculate.call(this,t,e);var i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},zu.prototype.createBucket=function(t){return new xu(t)},zu.prototype.queryRadius=function(){return fs(this.paint.get("fill-translate"))},zu.prototype.queryIntersectsFeature=function(t,e,i,r,n,o,a){return ss(ys(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},zu.prototype.isTileClipped=function(){return!0},zu),Tu=Dn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Lu=Du;function zu(t){bu.call(this,t,wu)}function Du(t,e,i,r,n){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=n,t.readFields(Au,this,e)}function Au(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var r=e._keys[t.readVarint()],n=e._values[t.readVarint()];e.properties[r]=n}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}Du.types=["Unknown","Point","LineString","Polygon"],Du.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i,r=t.readVarint()+t.pos,n=1,o=0,a=0,s=0,u=[];t.pos<r;){if(o<=0&&(n=7&(i=t.readVarint()),o=i>>3),o--,1===n||2===n)a+=t.readSVarint(),s+=t.readSVarint(),1===n&&(e&&u.push(e),e=[]),e.push(new pt(a,s));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&u.push(e),u},Du.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,r=1,n=0,o=0,a=0,s=1/0,u=-1/0,l=1/0,c=-1/0;t.pos<i;){if(n<=0&&(r=7&(e=t.readVarint()),n=e>>3),n--,1===r||2===r)(o+=t.readSVarint())<s&&(s=o),u<o&&(u=o),(a+=t.readSVarint())<l&&(l=a),c<a&&(c=a);else if(7!==r)throw new Error("unknown command "+r)}return[s,l,u,c]},Du.prototype.toGeoJSON=function(t,e,i){var r,n=this.extent*Math.pow(2,i),o=this.extent*t,a=this.extent*e,s=this.loadGeometry(),u=Du.types[this.type];function l(t){for(var e=0;e<t.length;e++){var i=t[e];t[e]=[360*(i.x+o)/n-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+a)/n)*Math.PI/180))-90]}}switch(this.type){case 1:for(var c=[],p=0;p<s.length;p++)c[p]=s[p][0];l(s=c);break;case 2:for(p=0;p<s.length;p++)l(s[p]);break;case 3:for(s=function(t){var e=t.length;if(e<=1)return[t];for(var i,r,n=[],o=0;o<e;o++){var a=function(t){for(var e,i,r=0,n=0,o=t.length,a=o-1;n<o;a=n++)r+=((i=t[a]).x-(e=t[n]).x)*(e.y+i.y);return r}(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(i&&n.push(i),i=[t[o]]):i.push(t[o]))}return i&&n.push(i),n}(s),p=0;p<s.length;p++)for(r=0;r<s[p].length;r++)l(s[p][r])}1===s.length?s=s[0]:u="Multi"+u;var h={type:"Feature",geometry:{type:u,coordinates:s},properties:this.properties};return"id"in this&&(h.id=this.id),h};var Su=Eu;function Eu(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Cu,this,e),this.length=this._features.length}function Cu(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;)var r=t.readVarint()>>3,e=1==r?t.readString():2==r?t.readFloat():3==r?t.readDouble():4==r?t.readVarint64():5==r?t.readVarint():6==r?t.readSVarint():7==r?t.readBoolean():null;return e}(i))}function Nu(t,e,i){var r;3!==t||(r=new Su(i,i.readVarint()+i.pos)).length&&(e[r.name]=r)}Eu.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Lu(this._pbf,e,this.extent,this._keys,this._values)};var ju={VectorTile:function(t,e){this.layers=t.readFields(Nu,{},e)},VectorTileFeature:Lu,VectorTileLayer:Su},ku=ju.VectorTileFeature.types,Pu=Math.pow(2,13);function Ou(t,e,i,r,n,o,a,s){t.emplaceBack(e,i,2*Math.floor(r*Pu)+a,n*Pu*2,o*Pu*2,Math.round(s))}function Bu(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new On,this.indexArray=new fo,this.programConfigurations=new $a(t.layers,t.zoom),this.segments=new pa,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})}Bu.prototype.populate=function(t,e,i){this.features=[],this.hasPattern=vu("fill-extrusion",this.layers,e);for(var r=0,n=t;r<n.length;r+=1){var o,a=n[r],s=a.feature,u=a.id,l=a.index,c=a.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,h={type:s.type,id:u,properties:s.properties,geometry:p?rs(s):[]};this.layers[0]._featureFilter.filter(new rn(this.zoom),h,i)&&(o={id:u,sourceLayerIndex:c,index:l,geometry:p?h.geometry:rs(s),properties:s.properties,type:s.type,patterns:{}},void 0!==s.id&&(o.id=s.id),this.hasPattern?this.features.push(_u("fill-extrusion",this.layers,o,this.zoom,e)):this.addFeature(o,o.geometry,l,i,{}),e.featureIndex.insert(s,o.geometry,l,c,this.index,!0))}},Bu.prototype.addFeatures=function(t,e,i){for(var r=0,n=this.features;r<n.length;r+=1){var o=n[r];this.addFeature(o,o.geometry,o.index,e,i)}},Bu.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},Bu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Bu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Bu.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Tu),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Bu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Bu.prototype.addFeature=function(t,e,i,r,n){for(var o,a,s,u=0,l=mu(e,500);u<l.length;u+=1){for(var c=l[u],p=0,h=0,d=c;h<d.length;h+=1)p+=d[h].length;for(var f=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),y=0,m=c;y<m.length;y+=1){var g=m[y];if(0!==g.length&&!((s=g).every(function(t){return t.x<0})||s.every(function(t){return 8192<t.x})||s.every(function(t){return t.y<0})||s.every(function(t){return 8192<t.y})))for(var v=0,_=0;_<g.length;_++){var x,b,M,w,I=g[_];1<=_&&(x=g[_-1],a=x,(o=I).x===a.x&&(o.x<0||8192<o.x)||o.y===a.y&&(o.y<0||8192<o.y)||(f.vertexLength+4>pa.MAX_VERTEX_ARRAY_LENGTH&&(f=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)),b=I.sub(x)._perp()._unit(),32768<v+(M=x.dist(I))&&(v=0),Ou(this.layoutVertexArray,I.x,I.y,b.x,b.y,0,0,v),Ou(this.layoutVertexArray,I.x,I.y,b.x,b.y,0,1,v),Ou(this.layoutVertexArray,x.x,x.y,b.x,b.y,0,0,v+=M),Ou(this.layoutVertexArray,x.x,x.y,b.x,b.y,0,1,v),w=f.vertexLength,this.indexArray.emplaceBack(w,w+2,w+1),this.indexArray.emplaceBack(w+1,w+2,w+3),f.vertexLength+=4,f.primitiveLength+=2))}}if(f.vertexLength+p>pa.MAX_VERTEX_ARRAY_LENGTH&&(f=this.segments.prepareSegment(p,this.layoutVertexArray,this.indexArray)),"Polygon"===ku[t.type]){for(var T=[],L=[],z=f.vertexLength,D=0,A=c;D<A.length;D+=1){var S=A[D];if(0!==S.length){S!==c[0]&&L.push(T.length/2);for(var E=0;E<S.length;E++){var C=S[E];Ou(this.layoutVertexArray,C.x,C.y,0,0,1,1,0),T.push(C.x),T.push(C.y)}}}for(var N=Qs(T,L),j=0;j<N.length;j+=3)this.indexArray.emplaceBack(z+N[j],z+N[j+2],z+N[j+1]);f.primitiveLength+=N.length/3,f.vertexLength+=p}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)},Or("FillExtrusionBucket",Bu,{omit:["layers","features"]});var Uu,Ru={paint:new bn({"fill-extrusion-opacity":new fn(jt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new yn(jt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new fn(jt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new fn(jt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new vn(jt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new yn(jt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new yn(jt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new fn(jt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Fu=((Uu=Tn)&&(Zu.__proto__=Uu),((Zu.prototype=Object.create(Uu&&Uu.prototype)).constructor=Zu).prototype.createBucket=function(t){return new Bu(t)},Zu.prototype.queryRadius=function(){return fs(this.paint.get("fill-extrusion-translate"))},Zu.prototype.is3D=function(){return!0},Zu.prototype.queryIntersectsFeature=function(t,e,i,C,r,n,o,a){var s=ys(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),n.angle,o),N=this.paint.get("fill-extrusion-height").evaluate(e,i),j=this.paint.get("fill-extrusion-base").evaluate(e,i),u=function(t){for(var e=[],i=0,r=s;i<r.length;i+=1){var n=r[i],o=[n.x,n.y,0,1];Is(o,o,t),e.push(new pt(o[0]/o[3],o[1]/o[3]))}return e}(a),l=function(t){for(var e=[],i=[],r=t[8]*j,n=t[9]*j,o=t[10]*j,a=t[11]*j,s=t[8]*N,u=t[9]*N,l=t[10]*N,c=t[11]*N,p=0,h=C;p<h.length;p+=1){for(var d=[],f=[],y=0,m=h[p];y<m.length;y+=1){var g=m[y],v=g.x,_=g.y,x=t[0]*v+t[4]*_+t[12],b=t[1]*v+t[5]*_+t[13],M=t[2]*v+t[6]*_+t[14],w=t[3]*v+t[7]*_+t[15],I=M+o,T=w+a,L=x+s,z=b+u,D=M+l,A=w+c,S=new pt((x+r)/T,(b+n)/T);S.z=I/T,d.push(S);var E=new pt(L/A,z/A);E.z=D/A,f.push(E)}e.push(d),i.push(f)}return[e,i]}(a);return function(t,e,i){var r=1/0;ss(i,e)&&(r=Gu(i,e[0]));for(var n=0;n<e.length;n++)for(var o=e[n],a=t[n],s=0;s<o.length-1;s++){var u=o[s],l=[u,o[s+1],a[s+1],a[s],u];as(i,l)&&(r=Math.min(r,Gu(i,l)))}return r!==1/0&&r}(l[0],l[1],u)},Zu);function Zu(t){Uu.call(this,t,Ru)}function Vu(t,e){return t.x*e.x+t.y*e.y}function Gu(t,e){if(1===t.length){for(var i,r=0,n=e[r++];!i||n.equals(i);)if(!(i=e[r++]))return 1/0;for(;r<e.length;r++){var o=e[r],a=t[0],s=i.sub(n),u=o.sub(n),l=a.sub(n),c=Vu(s,s),p=Vu(s,u),h=Vu(u,u),d=Vu(l,s),f=Vu(l,u),y=c*h-p*p,m=(h*d-p*f)/y,g=(c*f-p*d)/y,v=n.z*(1-m-g)+i.z*m+o.z*g;if(isFinite(v))return v}return 1/0}for(var _=1/0,x=0,b=e;x<b.length;x+=1)_=Math.min(_,b[x].z);return _}function Yu(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Rn,this.indexArray=new fo,this.programConfigurations=new $a(t.layers,t.zoom),this.segments=new pa,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})}var Qu=Dn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Wu=ju.VectorTileFeature.types,Hu=Math.cos(Math.PI/180*37.5),qu=Math.pow(2,14)/.5;Yu.prototype.populate=function(t,e,i){this.hasPattern=vu("line",this.layers,e);for(var r=this.layers[0].layout.get("line-sort-key"),n=[],o=0,a=t;o<a.length;o+=1){var s,u=a[o],l=u.feature,c=u.id,p=u.index,h=u.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,f={type:l.type,id:c,properties:l.properties,geometry:d?rs(l):[]};this.layers[0]._featureFilter.filter(new rn(this.zoom),f,i)&&(d||(f.geometry=rs(l)),s=r?r.evaluate(f,{},i):void 0,n.push({id:c,properties:l.properties,type:l.type,sourceLayerIndex:h,index:p,geometry:f.geometry,patterns:{},sortKey:s}))}r&&n.sort(function(t,e){return t.sortKey-e.sortKey});for(var y=0,m=n;y<m.length;y+=1){var g,v=m[y],_=v.geometry,x=v.index,b=v.sourceLayerIndex;this.hasPattern?(g=_u("line",this.layers,v,this.zoom,e),this.patternFeatures.push(g)):this.addFeature(v,_,x,i,{}),e.featureIndex.insert(t[x].feature,_,x,b,this.index)}},Yu.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},Yu.prototype.addFeatures=function(t,e,i){for(var r=0,n=this.patternFeatures;r<n.length;r+=1){var o=n[r];this.addFeature(o,o.geometry,o.index,e,i)}},Yu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Yu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Yu.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Qu),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Yu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Yu.prototype.addFeature=function(t,e,i,r,n){for(var o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),u=o.get("line-miter-limit"),l=o.get("line-round-limit"),c=0,p=e;c<p.length;c+=1)this.addLine(p[c],t,a,s,u,l);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)},Yu.prototype.addLine=function(t,e,i,r,n,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+e.properties.mapbox_clip_start,this.clipEnd=+e.properties.mapbox_clip_end;for(var a=0;a<t.length-1;a++)this.totalDistance+=t[a].dist(t[a+1]);this.updateScaledDistance()}for(var s="Polygon"===Wu[e.type],u=t.length;2<=u&&t[u-1].equals(t[u-2]);)u--;for(var l=0;l<u-1&&t[l].equals(t[l+1]);)l++;if(!(u<(s?3:2))){"bevel"===i&&(n=1.05);var c,p=this.overscaling<=16?122880/(512*this.overscaling):0,h=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray),d=void 0,f=void 0,y=void 0,m=void 0;this.e1=this.e2=-1,s&&(m=t[l].sub(c=t[u-2])._unit()._perp());for(var g=l;g<u;g++)if(!(f=g===u-1?s?t[l+1]:void 0:t[g+1])||!t[g].equals(f)){m&&(y=m),c&&(d=c),c=t[g],m=f?f.sub(c)._unit()._perp():y;var v=(y=y||m).add(m);0===v.x&&0===v.y||v._unit();var _,x,b=y.x*m.x+y.y*m.y,M=v.x*m.x+v.y*m.y,w=0!=M?1/M:1/0,I=2*Math.sqrt(2-2*M),T=M<Hu&&d&&f,L=0<y.x*m.y-y.y*m.x;T&&l<g&&(2*p<(_=c.dist(d))&&(x=c.sub(c.sub(d)._mult(p/_)._round()),this.updateDistance(d,x),this.addCurrentVertex(x,y,0,0,h),d=x));var z,D,A,S,E=d&&f,C=E?i:s?"butt":r;if(E&&"round"===C&&(w<o?C="miter":w<=2&&(C="fakeround")),"miter"===C&&n<w&&(C="bevel"),"bevel"===C&&(2<w&&(C="flipbevel"),w<n&&(C="miter")),d&&this.updateDistance(d,c),"miter"===C)v._mult(w),this.addCurrentVertex(c,v,0,0,h);else if("flipbevel"===C){100<w?v=m.mult(-1):(z=w*y.add(m).mag()/y.sub(m).mag(),v._perp()._mult(z*(L?-1:1))),this.addCurrentVertex(c,v,0,0,h),this.addCurrentVertex(c,v.mult(-1),0,0,h)}else if("bevel"===C||"fakeround"===C){var N=-Math.sqrt(w*w-1),j=L?N:0,k=L?0:N;if(d&&this.addCurrentVertex(c,y,j,k,h),"fakeround"===C)for(var P=Math.round(180*I/Math.PI/20),O=1;O<P;O++){var B,U=O/P;.5!==U&&(U+=U*(B=U-.5)*(U-1)*((1.0904+b*(b*(3.55645-1.43519*b)-3.2452))*B*B+(.848013+b*(.215638*b-1.06021))));var R=m.sub(y)._mult(U)._add(y)._unit()._mult(L?-1:1);this.addHalfVertex(c,R.x,R.y,!1,L,0,h)}f&&this.addCurrentVertex(c,m,-j,-k,h)}else{"butt"===C?this.addCurrentVertex(c,v,0,0,h):"square"===C?(D=d?1:-1,this.addCurrentVertex(c,v,D,D,h)):"round"===C&&(d&&(this.addCurrentVertex(c,y,0,0,h),this.addCurrentVertex(c,y,1,1,h,!0)),f&&(this.addCurrentVertex(c,m,-1,-1,h,!0),this.addCurrentVertex(c,m,0,0,h)))}T&&g<u-1&&(2*p<(A=c.dist(f))&&(S=c.add(f.sub(c)._mult(p/A)._round()),this.updateDistance(c,S),this.addCurrentVertex(S,m,0,0,h),c=S))}}},Yu.prototype.addCurrentVertex=function(t,e,i,r,n,o){void 0===o&&(o=!1);var a=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*i,e.y-e.x*i,o,!1,i,n),this.addHalfVertex(t,a,s,o,!0,-r,n),this.distance>qu/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,i,r,n,o))},Yu.prototype.addHalfVertex=function(t,e,i,r,n,o,a){var s=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((t.x<<1)+(r?1:0),(t.y<<1)+(n?1:0),Math.round(63*e)+128,Math.round(63*i)+128,1+(0===o?0:o<0?-1:1)|(63&s)<<2,s>>6);var u=a.vertexLength++;0<=this.e1&&0<=this.e2&&(this.indexArray.emplaceBack(this.e1,this.e2,u),a.primitiveLength++),n?this.e2=u:this.e1=u},Yu.prototype.updateScaledDistance=function(){this.scaledDistance=0<this.totalDistance?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(qu-1):this.distance},Yu.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},Or("LineBucket",Yu,{omit:["layers","patternFeatures"]});var Xu,Ju=new bn({"line-cap":new fn(jt.layout_line["line-cap"]),"line-join":new yn(jt.layout_line["line-join"]),"line-miter-limit":new fn(jt.layout_line["line-miter-limit"]),"line-round-limit":new fn(jt.layout_line["line-round-limit"]),"line-sort-key":new yn(jt.layout_line["line-sort-key"])}),Ku={paint:new bn({"line-opacity":new yn(jt.paint_line["line-opacity"]),"line-color":new yn(jt.paint_line["line-color"]),"line-translate":new fn(jt.paint_line["line-translate"]),"line-translate-anchor":new fn(jt.paint_line["line-translate-anchor"]),"line-width":new yn(jt.paint_line["line-width"]),"line-gap-width":new yn(jt.paint_line["line-gap-width"]),"line-offset":new yn(jt.paint_line["line-offset"]),"line-blur":new yn(jt.paint_line["line-blur"]),"line-dasharray":new mn(jt.paint_line["line-dasharray"]),"line-pattern":new vn(jt.paint_line["line-pattern"]),"line-gradient":new xn(jt.paint_line["line-gradient"])}),layout:Ju},$u=((Xu=yn)&&(tl.__proto__=Xu),((tl.prototype=Object.create(Xu&&Xu.prototype)).constructor=tl).prototype.possiblyEvaluate=function(t,e){return e=new rn(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),Xu.prototype.possiblyEvaluate.call(this,t,e)},tl.prototype.evaluate=function(t,e,i,r){return e=f({},e,{zoom:Math.floor(e.zoom)}),Xu.prototype.evaluate.call(this,t,e,i,r)},new tl(Ku.paint.properties["line-width"].specification));function tl(){Xu.apply(this,arguments)}$u.useIntegerZoom=!0;var el,il=((el=Tn)&&(rl.__proto__=el),((rl.prototype=Object.create(el&&el.prototype)).constructor=rl).prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},rl.prototype._updateGradient=function(){this.gradient=Us(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},rl.prototype.recalculate=function(t,e){el.prototype.recalculate.call(this,t,e),this.paint._values["line-floorwidth"]=$u.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)},rl.prototype.createBucket=function(t){return new Yu(t)},rl.prototype.queryRadius=function(t){var e=t,i=nl(ds("line-width",this,e),ds("line-gap-width",this,e)),r=ds("line-offset",this,e);return i/2+Math.abs(r)+fs(this.paint.get("line-translate"))},rl.prototype.queryIntersectsFeature=function(t,e,i,r,n,o,a){var s=ys(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),u=a/2*nl(this.paint.get("line-width").evaluate(e,i),this.paint.get("line-gap-width").evaluate(e,i)),l=this.paint.get("line-offset").evaluate(e,i);return l&&(r=function(t,e){for(var i=[],r=new pt(0,0),n=0;n<t.length;n++){for(var o=t[n],a=[],s=0;s<o.length;s++){var u=o[s],l=o[s+1],c=0===s?r:u.sub(o[s-1])._unit()._perp(),p=s===o.length-1?r:l.sub(u)._unit()._perp(),h=c._add(p)._unit();h._mult(1/(h.x*p.x+h.y*p.y)),a.push(h._mult(e)._add(u))}i.push(a)}return i}(r,l*a)),function(t,e,i){for(var r=0;r<e.length;r++){var n=e[r];if(3<=t.length)for(var o=0;o<n.length;o++)if(hs(t,n[o]))return!0;if(function(t,e,i){if(1<t.length){if(us(t,e))return 1;for(var r=0;r<e.length;r++)if(ls(e[r],t,i))return 1}for(var n=0;n<t.length;n++)if(ls(t[n],e,i))return 1}(t,n,i))return!0}return!1}(s,r,u)},rl.prototype.isTileClipped=function(){return!0},rl);function rl(t){el.call(this,t,Ku)}function nl(t,e){return 0<e?e+2*t:t}var ol=Dn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),al=Dn([{name:"a_projected_pos",components:3,type:"Float32"}],4),sl=(Dn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Dn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),ul=(Dn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Dn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ll=Dn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function cl(t,n,o){return t.sections.forEach(function(t){var e,i,r;t.text=(e=t.text,i=o,"uppercase"===(r=n.layout.get("text-transform").evaluate(i,{}))?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),on.applyArabicShaping&&(e=on.applyArabicShaping(e)),e)}),t}Dn([{name:"triangle",components:3,type:"Uint16"}]),Dn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Dn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Dn([{type:"Float32",name:"offsetX"}]),Dn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function pl(t,e,i,r,n){var o,a,s=8*n-r-1,u=(1<<s)-1,l=u>>1,c=-7,p=i?n-1:0,h=i?-1:1,d=t[e+p];for(p+=h,o=d&(1<<-c)-1,d>>=-c,c+=s;0<c;o=256*o+t[e+p],p+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;0<c;a=256*a+t[e+p],p+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=l}return(d?-1:1)*a*Math.pow(2,o-r)}function hl(t,e,i,r,n,o){var a,s,u,l=8*o-n-1,c=(1<<l)-1,p=c>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,f=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),2<=(e+=1<=a+p?h/u:h*Math.pow(2,1-p))*u&&(a++,u/=2),c<=a+p?(s=0,a=c):1<=a+p?(s=(e*u-1)*Math.pow(2,n),a+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,n),a=0));8<=n;t[i+d]=255&s,d+=f,s/=256,n-=8);for(a=a<<n|s,l+=n;0<l;t[i+d]=255&a,d+=f,a/=256,l-=8);t[i+d-f]|=128*y}var dl={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":" ","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":" ","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""," ":"","":"","":"","":""},fl=yl;function yl(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}yl.Varint=0,yl.Fixed64=1,yl.Bytes=2,yl.Fixed32=5;var ml="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function gl(t){return t.type===yl.Bytes?t.readVarint()+t.pos:t.pos+1}function vl(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function _l(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;t<=n;n--)i.buf[n+r]=i.buf[n]}function xl(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function bl(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function Ml(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function wl(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function Il(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function Tl(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function Ll(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function zl(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function Dl(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function Al(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Sl(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function El(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Cl(t,e,i){1===t&&i.readMessage(Nl,e)}function Nl(t,e,i){var r,n,o,a,s,u;3===t&&(n=(r=i.readMessage(jl,{})).width,o=r.height,a=r.left,s=r.top,u=r.advance,e.push({id:r.id,bitmap:new Ps({width:n+6,height:o+6},r.bitmap),metrics:{width:n,height:o,left:a,top:s,advance:u}}))}function jl(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}function kl(t){for(var e=0,i=0,r=0,n=t;r<n.length;r+=1){var o=n[r];e+=o.w*o.h,i=Math.max(i,o.w)}t.sort(function(t,e){return e.h-t.h});for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}],s=0,u=0,l=0,c=t;l<c.length;l+=1)for(var p=c[l],h=a.length-1;0<=h;h--){var d,f=a[h];if(!(p.w>f.w||p.h>f.h)){p.x=f.x,p.y=f.y,u=Math.max(u,p.y+p.h),s=Math.max(s,p.x+p.w),p.w===f.w&&p.h===f.h?(d=a.pop(),h<a.length&&(a[h]=d)):p.h===f.h?(f.x+=p.w,f.w-=p.w):(p.w===f.w||a.push({x:f.x+p.w,y:f.y,w:f.w-p.w,h:p.h}),f.y+=p.h,f.h-=p.h);break}}return{w:s,h:u,fill:e/(s*u)||0}}yl.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,o=this.pos;this.type=7&r,t(n,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Al(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=El(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Al(this.buf,this.pos)+4294967296*Al(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=Al(this.buf,this.pos)+4294967296*El(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=pl(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=pl(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i=this.buf,r=127&(e=i[this.pos++]);return e<128?r:(r|=(127&(e=i[this.pos++]))<<7,e<128?r:(r|=(127&(e=i[this.pos++]))<<14,e<128?r:(r|=(127&(e=i[this.pos++]))<<21,e<128?r:function(t,e,i){var r,n=i.buf,o=(112&(r=n[i.pos++]))>>4;if(r<128)return vl(t,o,e);if(o|=(127&(r=n[i.pos++]))<<3,r<128)return vl(t,o,e);if(o|=(127&(r=n[i.pos++]))<<10,r<128)return vl(t,o,e);if(o|=(127&(r=n[i.pos++]))<<17,r<128)return vl(t,o,e);if(o|=(127&(r=n[i.pos++]))<<24,r<128)return vl(t,o,e);if(o|=(1&(r=n[i.pos++]))<<31,r<128)return vl(t,o,e);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(e=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t,e=this.readVarint()+this.pos,c=this.pos;return 12<=(this.pos=e)-c&&ml?(t=this.buf,ml.decode(t.subarray(c,e))):function(t,e){for(var i="",r=c;r<e;){var n,o,a,s=t[r],u=null,l=239<s?4:223<s?3:191<s?2:1;if(e<r+l)break;1===l?s<128&&(u=s):2===l?128==(192&(n=t[r+1]))&&(u=(31&s)<<6|63&n)<=127&&(u=null):3===l?(o=t[r+2],128==(192&(n=t[r+1]))&&128==(192&o)&&((u=(15&s)<<12|(63&n)<<6|63&o)<=2047||55296<=u&&u<=57343)&&(u=null)):4===l&&(o=t[r+2],a=t[r+3],128==(192&(n=t[r+1]))&&128==(192&o)&&128==(192&a)&&((u=(15&s)<<18|(63&n)<<12|(63&o)<<6|63&a)<=65535||1114112<=u)&&(u=null)),null===u?(u=65533,l=1):65535<u&&(u-=65536,i+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),i+=String.fromCharCode(u),r+=l}return i}(this.buf,e)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==yl.Bytes)return t.push(this.readVarint(e));var i=gl(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==yl.Bytes)return t.push(this.readSVarint());var e=gl(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==yl.Bytes)return t.push(this.readBoolean());var e=gl(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==yl.Bytes)return t.push(this.readFloat());var e=gl(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==yl.Bytes)return t.push(this.readDouble());var e=gl(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==yl.Bytes)return t.push(this.readFixed32());var e=gl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==yl.Bytes)return t.push(this.readSFixed32());var e=gl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==yl.Bytes)return t.push(this.readFixed64());var e=gl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==yl.Bytes)return t.push(this.readSFixed64());var e=gl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===yl.Varint)for(;127<this.buf[this.pos++];);else if(e===yl.Bytes)this.pos=this.readVarint()+this.pos;else if(e===yl.Fixed32)this.pos+=4;else{if(e!==yl.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e,i=this.length||16;i<this.pos+t;)i*=2;i!==this.length&&((e=new Uint8Array(i)).set(this.buf),this.buf=e,this.length=i)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Sl(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Sl(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Sl(this.buf,-1&t,this.pos),Sl(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Sl(this.buf,-1&t,this.pos),Sl(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(u){268435455<(u=+u||0)||u<0?function(t){var e,i,r,n,o,a,s;if(0<=u?(e=u%4294967296|0,i=u/4294967296|0):(i=~(-u/4294967296),4294967295^(e=~(-u%4294967296))?e=e+1|0:i=i+1|(e=0)),0x10000000000000000<=u||u<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),a=e,(s=t).buf[s.pos++]=127&a|128,a>>>=7,s.buf[s.pos++]=127&a|128,a>>>=7,s.buf[s.pos++]=127&a|128,a>>>=7,s.buf[s.pos++]=127&a|128,s.buf[s.pos]=127&(a>>>=7),o=(7&(r=i))<<4,(n=t).buf[n.pos++]|=o|((r>>>=3)?128:0),r&&(n.buf[n.pos++]=127&r|((r>>>=7)?128:0),r&&(n.buf[n.pos++]=127&r|((r>>>=7)?128:0),r&&(n.buf[n.pos++]=127&r|((r>>>=7)?128:0),r&&(n.buf[n.pos++]=127&r|((r>>>=7)?128:0),r&&(n.buf[n.pos++]=127&r)))))}(this):(this.realloc(4),this.buf[this.pos++]=127&u|(127<u?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(127<u?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(127<u?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,n,o=0;o<e.length;o++){if(55295<(r=e.charCodeAt(o))&&r<57344){if(!n){56319<r||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):n=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(t[i++]=239,t[i++]=191,t[i++]=189,n=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;128<=i&&_l(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),hl(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),hl(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;128<=r&&_l(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,yl.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,xl,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,bl,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Il,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Ml,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,wl,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Tl,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Ll,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,zl,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Dl,e)},writeBytesField:function(t,e){this.writeTag(t,yl.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,yl.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,yl.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,yl.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,yl.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,yl.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,yl.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,yl.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,yl.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,yl.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};function Pl(t,e){var i=e.pixelRatio,r=e.version,n=e.stretchX,o=e.stretchY,a=e.content;this.paddedRect=t,this.pixelRatio=i,this.stretchX=n,this.stretchY=o,this.content=a,this.version=r}var Ol={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Ol.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Ol.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Ol.tlbr.get=function(){return this.tl.concat(this.br)},Ol.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Pl.prototype,Ol);function Bl(t,e){var i={},r={};this.haveRenderCallbacks=[];var n=[];this.addImages(t,i,n),this.addImages(e,r,n);var o=kl(n),a=new Os({width:o.w||1,height:o.h||1});for(var s in t){var u=t[s],l=i[s].paddedRect;Os.copy(u.data,a,{x:0,y:0},{x:l.x+1,y:l.y+1},u.data)}for(var c in e){var p=e[c],h=r[c].paddedRect,d=h.x+1,f=h.y+1,y=p.data.width,m=p.data.height;Os.copy(p.data,a,{x:0,y:0},{x:d,y:f},p.data),Os.copy(p.data,a,{x:0,y:m-1},{x:d,y:f-1},{width:y,height:1}),Os.copy(p.data,a,{x:0,y:0},{x:d,y:f+m},{width:y,height:1}),Os.copy(p.data,a,{x:y-1,y:0},{x:d-1,y:f},{width:1,height:m}),Os.copy(p.data,a,{x:0,y:0},{x:d+y,y:f},{width:1,height:m})}this.image=a,this.iconPositions=i,this.patternPositions=r}Bl.prototype.addImages=function(t,e,i){for(var r in t){var n=t[r],o={x:0,y:0,w:n.data.width+2,h:n.data.height+2};i.push(o),e[r]=new Pl(o,n),n.hasRenderCallback&&this.haveRenderCallbacks.push(r)}},Bl.prototype.patchUpdatedImages=function(t,e){for(var i in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[i],t.getImage(i),e),this.patchUpdatedImage(this.patternPositions[i],t.getImage(i),e)},Bl.prototype.patchUpdatedImage=function(t,e,i){var r;t&&e&&t.version!==e.version&&(t.version=e.version,r=t.tl,i.update(e.data,void 0,{x:r[0],y:r[1]}))},Or("ImagePosition",Pl),Or("ImageAtlas",Bl);function Ul(){this.scale=1,this.fontStack="",this.imageName=null}var Rl={horizontal:1,vertical:2,horizontalOnly:3};Ul.forText=function(t,e){var i=new Ul;return i.scale=t||1,i.fontStack=e,i},Ul.forImage=function(t){var e=new Ul;return e.imageName=t,e};function Fl(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}function Zl(t,e,i,r,n,o,a,s,H,u,l,c,p,h,d,f){var y,m=Fl.fromFeature(t,n);c===Rl.vertical&&m.verticalizePunctuation();var g=on.processBidirectionalText,v=on.processStyledBidirectionalText;if(g&&1===m.sections.length){y=[];for(var _=0,x=g(m.toString(),Hl(m,u,o,e,r,h,d));_<x.length;_+=1){var b=x[_],M=new Fl;M.text=b,M.sections=m.sections;for(var w=0;w<b.length;w++)M.sectionIndex.push(0);y.push(M)}}else if(v){y=[];for(var I=0,T=v(m.text,m.sectionIndex,Hl(m,u,o,e,r,h,d));I<T.length;I+=1){var L=T[I],z=new Fl;z.text=L[0],z.sectionIndex=L[1],z.sections=m.sections,y.push(z)}}else y=function(t,e){for(var i=[],r=t.text,n=0,o=0,a=e;o<a.length;o+=1){var s=a[o];i.push(t.substring(n,s)),n=s}return n<r.length&&i.push(t.substring(n,r.length)),i}(m,Hl(m,u,o,e,r,h,d));var D=[],A={positionedLines:D,text:m.toString(),top:l[1],bottom:l[1],left:l[0],right:l[0],writingMode:c,iconsInText:!1,verticalizable:!1};return function(t,e,i,r,n,l,o,a,s,u,c){for(var p=0,h=-17,d=0,f=0,y="right"===H?1:"left"===H?0:.5,m=0,g=0,v=n;g<v.length;g+=1){var _=v[g];_.trim();var x=_.getMaxScale(),b=24*(x-1),M={positionedGlyphs:[],lineOffset:0},w=(t.positionedLines[m]=M).positionedGlyphs,I=0;if(_.length()){for(var T=0;T<_.length();T++){var L=_.getSection(T),z=_.getSectionIndex(T),D=_.getCharCode(T),A=0,S=null,E=null,C=null,N=24,j=!(a===Rl.horizontal||!u&&!Qr(D)||u&&(Vl[D]||(V=D,Gr.Arabic(V)||Gr["Arabic Supplement"](V)||Gr["Arabic Extended-A"](V)||Gr["Arabic Presentation Forms-A"](V)||Gr["Arabic Presentation Forms-B"](V))));if(L.imageName){var k=r[L.imageName];if(!k)continue;C=L.imageName,t.iconsInText=t.iconsInText||!0,E=k.paddedRect;var P=k.displaySize;L.scale=24*L.scale/c,A=b+(24-P[1]*L.scale),N=(S={width:P[0],height:P[1],left:1,top:-3,advance:j?P[1]:P[0]}).advance;var O=j?P[0]*L.scale-24*x:P[1]*L.scale-24*x;0<O&&I<O&&(I=O)}else{var B=i[L.fontStack],U=B&&B[D];if(U&&U.rect)E=U.rect,S=U.metrics;else{var R=e[L.fontStack],F=R&&R[D];if(!F)continue;S=F.metrics}A=24*(x-L.scale)}j?(t.verticalizable=!0,w.push({glyph:D,imageName:C,x:p,y:h+A,vertical:j,scale:L.scale,fontStack:L.fontStack,sectionIndex:z,metrics:S,rect:E}),p+=N*L.scale+s):(w.push({glyph:D,imageName:C,x:p,y:h+A,vertical:j,scale:L.scale,fontStack:L.fontStack,sectionIndex:z,metrics:S,rect:E}),p+=S.advance*L.scale+s)}0!==w.length&&(d=Math.max(p-s,d),function(t,e,i,r,n){if(r||n)for(var o=t[i],a=(t[i].x+o.metrics.advance*o.scale)*r,s=e;s<=i;s++)t[s].x-=a,t[s].y+=n}(w,0,w.length-1,y,I)),p=0;var Z=l*x+I;M.lineOffset=Math.max(I,b),h+=Z,f=Math.max(Z,f),++m}else h+=l,++m}var V,G=h- -17,Y=ql(o),Q=Y.horizontalAlign,W=Y.verticalAlign;(function(t,e){for(var i=(y-Q)*d,r=f!==l?-G*W+17:(-W*e+.5)*l,n=0,o=t;n<o.length;n+=1)for(var a=0,s=o[n].positionedGlyphs;a<s.length;a+=1){var u=s[a];u.x+=i,u.y+=r}})(t.positionedLines,n.length),t.top+=-W*G,t.bottom=t.top+G,t.left+=-Q*d,t.right=t.left+d}(A,e,i,r,y,a,s,c,u,p,f),!function(){for(var t=0,e=D;t<e.length;t+=1)if(0!==e[t].positionedGlyphs.length)return;return 1}()&&A}Fl.fromFeature=function(t,e){for(var i=new Fl,r=0;r<t.sections.length;r++){var n=t.sections[r];n.image?i.addImageSection(n):i.addTextSection(n,e)}return i},Fl.prototype.length=function(){return this.text.length},Fl.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},Fl.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},Fl.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},Fl.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",i=0;i<t.length;i++){var r=t.charCodeAt(i+1)||null,n=t.charCodeAt(i-1)||null;e+=r&&Wr(r)&&!dl[t[i+1]]||n&&Wr(n)&&!dl[t[i-1]]||!dl[t[i]]?t[i]:dl[t[i]]}return e}(this.text)},Fl.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&Vl[this.text.charCodeAt(e)];e++)t++;for(var i=this.text.length,r=this.text.length-1;0<=r&&t<=r&&Vl[this.text.charCodeAt(r)];r--)i--;this.text=this.text.substring(t,i),this.sectionIndex=this.sectionIndex.slice(t,i)},Fl.prototype.substring=function(t,e){var i=new Fl;return i.text=this.text.substring(t,e),i.sectionIndex=this.sectionIndex.slice(t,e),i.sections=this.sections,i},Fl.prototype.toString=function(){return this.text},Fl.prototype.getMaxScale=function(){var i=this;return this.sectionIndex.reduce(function(t,e){return Math.max(t,i.sections[e].scale)},0)},Fl.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(Ul.forText(t.scale,t.fontStack||e));for(var i=this.sections.length-1,r=0;r<t.text.length;++r)this.sectionIndex.push(i)},Fl.prototype.addImageSection=function(t){var e,i=t.image?t.image.name:"";0!==i.length?(e=this.getNextImageSectionCharCode())?(this.text+=String.fromCharCode(e),this.sections.push(Ul.forImage(i)),this.sectionIndex.push(this.sections.length-1)):ht("Reached maximum number of images 6401"):ht("Can't add FormattedSection with an empty image.")},Fl.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?63743<=this.imageSectionID?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Vl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Gl={};function Yl(t,e,i,r,n,o){if(e.imageName){var a=r[e.imageName];return a?a.displaySize[0]*e.scale*24/o+n:0}var s=i[e.fontStack],u=s&&s[t];return u?u.metrics.advance*e.scale+n:0}function Ql(t,e,i,r){var n=Math.pow(t-e,2);return r?t<e?n/2:2*n:n+Math.abs(i)*i}function Wl(t,e,i,r,n,o){for(var a=null,s=Ql(e,i,n,o),u=0,l=r;u<l.length;u+=1){var c=l[u],p=Ql(e-c.x,i,n,o)+c.badness;p<=s&&(a=c,s=p)}return{index:t,x:e,priorBreak:a,badness:s}}function Hl(t,e,i,r,n,o,a){if("point"!==o)return[];if(!t)return[];for(var s,u,l,c,p=[],h=function(t,e,i,r,n,o){for(var a=0,s=0;s<t.length();s++){var u=t.getSection(s);a+=Yl(t.getCharCode(s),u,r,n,e,o)}return a/Math.max(1,Math.ceil(a/i))}(t,e,i,r,n,a),d=0<=t.text.indexOf(""),f=0,y=0;y<t.length();y++){var m,g=t.getSection(y),v=t.getCharCode(y);Vl[v]||(f+=Yl(v,g,r,n,e,a)),y<t.length()-1&&(m=!((s=v)<11904||!(Gr["Bopomofo Extended"](s)||Gr.Bopomofo(s)||Gr["CJK Compatibility Forms"](s)||Gr["CJK Compatibility Ideographs"](s)||Gr["CJK Compatibility"](s)||Gr["CJK Radicals Supplement"](s)||Gr["CJK Strokes"](s)||Gr["CJK Symbols and Punctuation"](s)||Gr["CJK Unified Ideographs Extension A"](s)||Gr["CJK Unified Ideographs"](s)||Gr["Enclosed CJK Letters and Months"](s)||Gr["Halfwidth and Fullwidth Forms"](s)||Gr.Hiragana(s)||Gr["Ideographic Description Characters"](s)||Gr["Kangxi Radicals"](s)||Gr["Katakana Phonetic Extensions"](s)||Gr.Katakana(s)||Gr["Vertical Forms"](s)||Gr["Yi Radicals"](s)||Gr["Yi Syllables"](s))),(Gl[v]||m||g.imageName)&&p.push(Wl(y+1,f,h,p,(u=v,l=t.getCharCode(y+1),c=void 0,c=0,10===u&&(c-=1e4),m&&d&&(c+=150),40!==u&&65288!==u||(c+=50),41!==l&&65289!==l||(c+=50),c),!1)))}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Wl(t.length(),f,h,p,0,!0))}function ql(t){var e=.5,i=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function Xl(t,e,i,r,n,o){var a,s,u,l=t.image;l.content&&(a=l.content,s=l.pixelRatio||1,u=[a[0]/s,a[1]/s,l.displaySize[0]-a[2]/s,l.displaySize[1]-a[3]/s]);var c,p,h=e.left*o,d=e.right*o,f="width"===i||"both"===i?(p=n[0]+h-r[3],n[0]+d+r[1]):(p=n[0]+(h+d-l.displaySize[0])/2)+l.displaySize[0],y=e.top*o,m=e.bottom*o,g="height"===i||"both"===i?(c=n[1]+y-r[0],n[1]+m+r[2]):(c=n[1]+(y+m-l.displaySize[1])/2)+l.displaySize[1];return{image:l,top:c,right:f,bottom:g,left:p,collisionPadding:u}}Gl[10]=!0,Gl[32]=!0,Gl[38]=!0,Gl[40]=!0,Gl[41]=!0,Gl[43]=!0,Gl[45]=!0,Gl[47]=!0,Gl[173]=!0,Gl[183]=!0,Gl[8203]=!0,Gl[8208]=!0,Gl[8211]=!0,Gl[8231]=!0;var Jl,Kl=((Jl=pt)&&($l.__proto__=Jl),(($l.prototype=Object.create(Jl&&Jl.prototype)).constructor=$l).prototype.clone=function(){return new $l(this.x,this.y,this.angle,this.segment)},$l);function $l(t,e,i,r){Jl.call(this,t,e),this.angle=i,void 0!==r&&(this.segment=r)}function tc(t,e){var i=e.expression;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new rn(t+1))};if("source"===i.kind)return{kind:"source"};for(var r=i.zoomStops,n=i.interpolationType,o=0;o<r.length&&r[o]<=t;)o++;for(var a=o=Math.max(0,o-1);a<r.length&&r[a]<t+1;)a++;a=Math.min(r.length-1,a);var s=r[o],u=r[a];return"composite"===i.kind?{kind:"composite",minZoom:s,maxZoom:u,interpolationType:n}:{kind:"camera",minZoom:s,maxZoom:u,minSize:i.evaluate(new rn(s)),maxSize:i.evaluate(new rn(u)),interpolationType:n}}function ec(t,e,i){var r=e.uSize,n=i.lowerSize;return"source"===t.kind?n/128:"composite"===t.kind?Qe(n/128,i.upperSize/128,e.uSizeT):r}function ic(t,e){var i,r,n=0,o=0;return"constant"===t.kind?o=t.layoutSize:"source"!==t.kind&&(r=(i=t.interpolationType)?l(ai.interpolationFactor(i,e,t.minZoom,t.maxZoom),0,1):0,"camera"===t.kind?o=Qe(t.minSize,t.maxSize,r):n=r),{uSizeT:n,uSize:o}}Or("Anchor",Kl);var rc=Object.freeze({__proto__:null,getSizeData:tc,evaluateSizeForFeature:ec,evaluateSizeForZoom:ic,SIZE_PACK_FACTOR:128});function nc(t,e,i,r,n){if(void 0===e.segment)return 1;for(var o=e,a=e.segment+1,s=0;-i/2<s;){if(--a<0)return;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],l=0;s<i/2;){var c=t[a],p=t[a+1];if(!p)return;var h=t[a-1].angleTo(c)-c.angleTo(p),h=Math.abs((h+3*Math.PI)%(2*Math.PI)-Math.PI);for(u.push({distance:s,angleDelta:h}),l+=h;s-u[0].distance>r;)l-=u.shift().angleDelta;if(n<l)return;a++,s+=c.dist(p)}return 1}function oc(t){for(var e=0,i=0;i<t.length-1;i++)e+=t[i].dist(t[i+1]);return e}function ac(t,e,i){return t?.6*e*i:0}function sc(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function uc(t,e,i,r,n){for(var o=[],a=0;a<t.length;a++)for(var s=t[a],u=void 0,l=0;l<s.length-1;l++){var c=s[l],p=s[l+1];c.x<e&&p.x<e||(c.x<e?c=new pt(e,c.y+(e-c.x)/(p.x-c.x)*(p.y-c.y))._round():p.x<e&&(p=new pt(e,c.y+(e-c.x)/(p.x-c.x)*(p.y-c.y))._round()),c.y<i&&p.y<i||(c.y<i?c=new pt(c.x+(i-c.y)/(p.y-c.y)*(p.x-c.x),i)._round():p.y<i&&(p=new pt(c.x+(i-c.y)/(p.y-c.y)*(p.x-c.x),i)._round()),c.x>=r&&p.x>=r||(c.x>=r?c=new pt(r,c.y+(r-c.x)/(p.x-c.x)*(p.y-c.y))._round():p.x>=r&&(p=new pt(r,c.y+(r-c.x)/(p.x-c.x)*(p.y-c.y))._round()),c.y>=n&&p.y>=n||(c.y>=n?c=new pt(c.x+(n-c.y)/(p.y-c.y)*(p.x-c.x),n)._round():p.y>=n&&(p=new pt(c.x+(n-c.y)/(p.y-c.y)*(p.x-c.x),n)._round()),u&&c.equals(u[u.length-1])||o.push(u=[c]),u.push(p)))))}return o}function lc(I,T,L,t){function e(t,e){return t+e[1]-e[0]}var i,r=[],z=I.image,D=z.pixelRatio,n=z.paddedRect.w-2,o=z.paddedRect.h-2,A=I.right-I.left,S=I.bottom-I.top,a=z.stretchX||[[0,n]],s=z.stretchY||[[0,o]],E=a.reduce(e,0),C=s.reduce(e,0),u=n-E,l=o-C,N=0,j=E,k=0,P=C,O=0,B=u,U=0,R=l;z.content&&t&&(i=z.content,N=cc(a,0,i[0]),k=cc(s,0,i[1]),j=cc(a,i[0],i[2]),P=cc(s,i[1],i[3]),O=i[0]-N,U=i[1]-k,B=i[2]-i[0]-j,R=i[3]-i[1]-P);function c(t,e,i,r){var n,o,a,s=(t.stretch-N)/j*A+I.left,u=t.fixed-O-B*t.stretch/E,l=(e.stretch-k)/P*S+I.top,c=e.fixed-U-R*e.stretch/C,p=(i.stretch-N)/j*A+I.left,h=i.fixed-O-B*i.stretch/E,d=(r.stretch-k)/P*S+I.top,f=r.fixed-U-R*r.stretch/C,y=new pt(s,l),m=new pt(p,l),g=new pt(p,d),v=new pt(s,d),_=new pt(u/D,c/D),x=new pt(h/D,f/D),b=T*Math.PI/180;b&&(n=Math.sin(b),a=[o=Math.cos(b),-n,n,o],y._matMult(a),m._matMult(a),v._matMult(a),g._matMult(a));var M=t.stretch+t.fixed,w=e.stretch+e.fixed;return{tl:y,tr:m,bl:v,br:g,tex:{x:z.paddedRect.x+1+M,y:z.paddedRect.y+1+w,w:i.stretch+i.fixed-M,h:r.stretch+r.fixed-w},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:_,pixelOffsetBR:x,minFontScaleX:B/D/A,minFontScaleY:R/D/S,isSDF:L}}if(t&&(z.stretchX||z.stretchY))for(var p=pc(a,u,E),h=pc(s,l,C),d=0;d<p.length-1;d++)for(var f=p[d],y=p[d+1],m=0;m<h.length-1;m++)r.push(c(f,h[m],y,h[m+1]));else r.push(c({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:1+n},{fixed:0,stretch:1+o}));return r}function cc(t,e,i){for(var r=0,n=0,o=t;n<o.length;n+=1){var a=o[n];r+=Math.max(e,Math.min(i,a[1]))-Math.max(e,Math.min(i,a[0]))}return r}function pc(t,e,i){for(var r=[{fixed:-1,stretch:0}],n=0,o=t;n<o.length;n+=1){var a=o[n],s=a[0],u=a[1],l=r[r.length-1];r.push({fixed:s-l.stretch,stretch:l.stretch}),r.push({fixed:s-l.stretch,stretch:l.stretch+(u-s)})}return r.push({fixed:e+1,stretch:i}),r}function hc(t,e,i,r,n,o,a,s,u,l){var c,p,h,d,f,y,m,g,v,_,x,b,M,w;this.boxStartIndex=t.length,u?(c=o.top,p=o.bottom,(h=o.collisionPadding)&&(c-=h[1],p+=h[3]),0<(d=p-c)&&(d=Math.max(10,d),this.circleDiameter=d)):(f=o.top*a-s,y=o.bottom*a+s,m=o.left*a-s,g=o.right*a+s,(v=o.collisionPadding)&&(m-=v[0]*a,f-=v[1]*a,g+=v[2]*a,y+=v[3]*a),l&&(_=new pt(m,f),x=new pt(g,f),b=new pt(m,y),M=new pt(g,y),w=l*Math.PI/180,_._rotate(w),x._rotate(w),b._rotate(w),M._rotate(w),m=Math.min(_.x,x.x,b.x,M.x),g=Math.max(_.x,x.x,b.x,M.x),f=Math.min(_.y,x.y,b.y,M.y),y=Math.max(_.y,x.y,b.y,M.y)),t.emplaceBack(e.x,e.y,m,f,g,y,i,r,n)),this.boxEndIndex=t.length}var dc=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=fc),this.data=t,this.length=this.data.length,this.compare=e,0<this.length)for(var i=(this.length>>1)-1;0<=i;i--)this._down(i)};function fc(t,e){return t<e?-1:e<t?1:0}function yc(t,e){return e.max-t.max}function mc(t,e,i,r){this.p=new pt(t,e),this.h=i,this.d=function(t,e){for(var i=!1,r=1/0,n=0;n<e.length;n++)for(var o=e[n],a=0,s=o.length,u=s-1;a<s;u=a++){var l=o[a],c=o[u];l.y>t.y!=c.y>t.y&&t.x<(c.x-l.x)*(t.y-l.y)/(c.y-l.y)+l.x&&(i=!i),r=Math.min(r,cs(t,l,c))}return(i?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}dc.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},dc.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,0<this.length&&(this.data[0]=e,this._down(0)),t}},dc.prototype.peek=function(){return this.data[0]},dc.prototype._up=function(t){for(var e=this.data,i=this.compare,r=e[t];0<t;){var n=t-1>>1,o=e[n];if(0<=i(r,o))break;e[t]=o,t=n}e[t]=r},dc.prototype._down=function(t){for(var e=this.data,i=this.compare,r=this.length>>1,n=e[t];t<r;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&i(e[s],a)<0&&(a=e[o=s]),0<=i(a,n))break;e[t]=a,t=o}e[t]=n};var gc=Number.POSITIVE_INFINITY;function vc(t,e){return e[1]!==gc?function(t,e,i){var r=0,n=0;switch(e=Math.abs(e),i=Math.abs(i),t){case"top-right":case"top-left":case"top":n=i-7;break;case"bottom-right":case"bottom-left":case"bottom":n=7-i}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,n]}(t,e[0],e[1]):function(t,e){var i=0,r=0;e<0&&(e=0);var n=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":r=n-7;break;case"bottom-right":case"bottom-left":r=7-n;break;case"bottom":r=7-e;break;case"top":r=e-7}switch(t){case"top-right":case"bottom-right":i=-n;break;case"top-left":case"bottom-left":i=n;break;case"left":i=e;break;case"right":i=-e}return[i,r]}(t,e[0])}function _c(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function xc(t,e,i,r,V,n,o,a,s,u,l,c,p,h,d){var f=function(t,e,i,r,n,o){for(var a=V.layout.get("text-rotate").evaluate(r,{})*Math.PI/180,s=[],u=0,l=t.positionedLines;u<l.length;u+=1)for(var c=l[u],p=0,h=c.positionedGlyphs;p<h.length;p+=1){var d,f,y,m,g,v,_,x,b,M,w,I,T,L,z,D,A,S,E,C,N,j,k,P,O,B,U,R,F,Z=h[p];Z.rect&&(d=Z.rect||{},x=4,_=!0,f=1,y=0,m=(i||o)&&Z.vertical,g=Z.metrics.advance*Z.scale/2,o&&t.verticalizable&&(y=c.lineOffset/2-(Z.imageName?-(24-Z.metrics.width*Z.scale)/2:24*(Z.scale-1))),Z.imageName&&(_=(v=n[Z.imageName]).sdf,x=1/(f=v.pixelRatio)),b=i?[Z.x+g,Z.y]:[0,0],M=i?[0,0]:[Z.x+g+e[0],Z.y+e[1]-y],w=[0,0],m&&(w=M,M=[0,0]),I=(Z.metrics.left-x)*Z.scale-g+M[0],T=(-Z.metrics.top-x)*Z.scale+M[1],L=I+d.w*Z.scale/f,z=T+d.h*Z.scale/f,D=new pt(I,T),A=new pt(L,T),S=new pt(I,z),E=new pt(L,z),m&&(C=new pt(-g,g+17),N=-Math.PI/2,k=new pt(22-(j=12-g),-(Z.imageName?j:0)),P=new(Function.prototype.bind.apply(pt,[null].concat(w))),D._rotateAround(N,C)._add(k)._add(P),A._rotateAround(N,C)._add(k)._add(P),S._rotateAround(N,C)._add(k)._add(P),E._rotateAround(N,C)._add(k)._add(P)),a&&(O=Math.sin(a),U=[B=Math.cos(a),-O,O,B],D._matMult(U),A._matMult(U),S._matMult(U),E._matMult(U)),R=new pt(0,0),F=new pt(0,0),s.push({tl:D,tr:A,bl:S,br:E,tex:d,writingMode:t.writingMode,glyphOffset:b,sectionIndex:Z.sectionIndex,isSDF:_,pixelOffsetTL:R,pixelOffsetBR:F,minFontScaleX:0,minFontScaleY:0}))}return s}(i,a,n,o,r,t.allowVerticalPlacement),y=t.textSizeData,m=null;"source"===y.kind?32640<(m=[128*V.layout.get("text-size").evaluate(o,{})])[0]&&ht(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===y.kind&&(32640<(m=[128*h.compositeTextSizes[0].evaluate(o,{},d),128*h.compositeTextSizes[1].evaluate(o,{},d)])[0]||32640<m[1])&&ht(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,f,m,a,n,o,u,e,s.lineStartIndex,s.lineLength,p,d);for(var g=0,v=l;g<v.length;g+=1)c[v[g]]=t.text.placedSymbolArray.length-1;return 4*f.length}function bc(t){for(var e in t)return t[e];return null}var Mc=ju.VectorTileFeature.types,wc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ic(t,e,i,r,n,o,a,s,u,l,c,p,h){var d=s?Math.min(32640,Math.round(s[0])):0,f=s?Math.min(32640,Math.round(s[1])):0;t.emplaceBack(e,i,Math.round(32*r),Math.round(32*n),o,a,(d<<1)+(u?1:0),f,16*l,16*c,256*p,256*h)}function Tc(t,e,i){t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i)}function Lc(t){for(var e=0,i=t.sections;e<i.length;e+=1)if(function(t){for(var e=0,i=t;e<i.length;e+=1)if(Hr(i[e].charCodeAt(0)))return 1}(i[e].text))return 1}function zc(t){this.layoutVertexArray=new Qn,this.indexArray=new fo,this.programConfigurations=t,this.segments=new pa,this.dynamicLayoutVertexArray=new qn,this.opacityVertexArray=new Kn,this.placedSymbolArray=new qo}zc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},zc.prototype.upload=function(t,e,i,r){this.isEmpty()||(i&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ol.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,al.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,wc,!0),this.opacityVertexBuffer.itemSize=1),(i||r)&&this.programConfigurations.upload(t))},zc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Or("SymbolBuffers",zc);function Dc(t,e,i){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new i,this.segments=new pa,this.collisionVertexArray=new co}Dc.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,sl.members,!0)},Dc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Or("CollisionBuffers",Dc);function Ac(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=_s([]),this.placementViewportMatrix=_s([]);var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=tc(this.zoom,e["text-size"]),this.iconSizeData=tc(this.zoom,e["icon-size"]);var i=this.layers[0].layout,r=i.get("symbol-sort-key"),n=i.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==n&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===n||"auto"===n&&!this.sortFeaturesByKey)&&(i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement")),"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map(function(t){return Rl[t]})),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id}),this.sourceID=t.sourceID}Ac.prototype.createArrays=function(){this.text=new zc(new $a(this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new zc(new $a(this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.glyphOffsetArray=new ia,this.lineVertexArray=new oa,this.symbolInstances=new $o},Ac.prototype.calculateGlyphDependencies=function(t,e,i,r,n){for(var o,a=0;a<t.length;a++){e[t.charCodeAt(a)]=!0,(i||r)&&n&&(o=dl[t.charAt(a)])&&(e[o.charCodeAt(0)]=!0)}},Ac.prototype.populate=function(t,e,i){var r=this.layers[0],n=r.layout,o=n.get("text-font"),a=n.get("text-field"),s=n.get("icon-image"),u=("constant"!==a.value.kind||a.value.value instanceof ce&&!a.value.value.isEmpty()||0<a.value.value.toString().length)&&("constant"!==o.value.kind||0<o.value.value.length),l="constant"!==s.value.kind||!!s.value.value||0<Object.keys(s.parameters).length,c=n.get("symbol-sort-key");if(this.features=[],u||l){for(var p=e.iconDependencies,h=e.glyphDependencies,d=e.availableImages,f=new rn(this.zoom),y=0,m=t;y<m.length;y+=1){var g=m[y],v=g.feature,_=g.id,x=g.index,b=g.sourceLayerIndex,M=r._featureFilter.needGeometry,w={type:v.type,id:_,properties:v.properties,geometry:M?rs(v):[]};if(r._featureFilter.filter(f,w,i)){M||(w.geometry=rs(v));var I,T,L=void 0;u&&(I=r.getValueAndResolveTokens("text-field",w,i,d),Lc(T=ce.factory(I))&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Jr||this.hasRTLText&&on.isParsed())&&(L=cl(T,r,w)));var z,D=void 0;if(l&&(D=(z=r.getValueAndResolveTokens("icon-image",w,i,d))instanceof pe?z:pe.fromString(z)),L||D){var A=this.sortFeaturesByKey?c.evaluate(w,{},i):void 0,S={id:_,text:L,icon:D,index:x,sourceLayerIndex:b,geometry:rs(v),properties:v.properties,type:Mc[v.type],sortKey:A};if(this.features.push(S),D&&(p[D.name]=!0),L){var E=o.evaluate(w,{},i).join(","),C="map"===n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&0<=this.writingModes.indexOf(Rl.vertical);for(var N=0,j=L.sections;N<j.length;N+=1){var k,P,O,B=j[N];B.image?p[B.image.name]=!0:(k=Yr(L.toString()),O=h[P=B.fontStack||E]=h[P]||{},this.calculateGlyphDependencies(B.text,O,C,this.allowVerticalPlacement,k))}}}}}"line"===n.get("symbol-placement")&&(this.features=function(e){var n={},o={},a=[],i=0;function t(t){a.push(e[t]),i++}function r(t,e,i){var r=o[t];return delete o[t],o[e]=r,a[r].geometry[0].pop(),a[r].geometry[0]=a[r].geometry[0].concat(i[0]),r}function s(t,e,i){var r=n[e];return delete n[e],n[t]=r,a[r].geometry[0].shift(),a[r].geometry[0]=i[0].concat(a[r].geometry[0]),r}function u(t,e,i){var r=i?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var l=0;l<e.length;l++){var c,p,h,d,f=e[l],y=f.geometry,m=f.text?f.text.toString():null;m?(c=u(m,y),p=u(m,y,!0),c in o&&p in n&&o[c]!==n[p]?(h=s(c,p,y),d=r(c,p,a[h].geometry),delete n[c],delete o[p],o[u(m,a[d].geometry,!0)]=d,a[h].geometry=null):c in o?r(c,p,y):p in n?s(c,p,y):(t(l),n[c]=i-1,o[p]=i-1)):t(l)}return a.filter(function(t){return t.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(t,e){return t.sortKey-e.sortKey})}},Ac.prototype.update=function(t,e,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,i))},Ac.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},Ac.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ac.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ac.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Ac.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Ac.prototype.addToLineVertexArray=function(t,e){var i=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),n=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:r},a<e.length-1&&(r+=e[a+1].dist(e[a]));for(var s=t.segment||0;0<=s;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:n},0<s&&(n+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=o[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},Ac.prototype.addSymbols=function(t,e,i,r,n,o,a,s,u,l,c,p){for(var h=t.indexArray,d=t.layoutVertexArray,f=t.segments.prepareSegment(4*e.length,d,h,o.sortKey),y=this.glyphOffsetArray.length,m=f.vertexLength,g=this.allowVerticalPlacement&&a===Rl.vertical?Math.PI/2:0,v=o.text&&o.text.sections,_=0;_<e.length;_++){var x=e[_],b=x.tl,M=x.tr,w=x.bl,I=x.br,T=x.tex,L=x.pixelOffsetTL,z=x.pixelOffsetBR,D=x.minFontScaleX,A=x.minFontScaleY,S=x.glyphOffset,E=x.isSDF,C=x.sectionIndex,N=f.vertexLength,j=S[1];Ic(d,s.x,s.y,b.x,j+b.y,T.x,T.y,i,E,L.x,L.y,D,A),Ic(d,s.x,s.y,M.x,j+M.y,T.x+T.w,T.y,i,E,z.x,L.y,D,A),Ic(d,s.x,s.y,w.x,j+w.y,T.x,T.y+T.h,i,E,L.x,z.y,D,A),Ic(d,s.x,s.y,I.x,j+I.y,T.x+T.w,T.y+T.h,i,E,z.x,z.y,D,A),Tc(t.dynamicLayoutVertexArray,s,g),h.emplaceBack(N,N+1,N+2),h.emplaceBack(N+1,N+2,N+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(S[0]),_!==e.length-1&&C===e[_+1].sectionIndex||t.programConfigurations.populatePaintArrays(d.length,o,o.index,{},p,v&&v[C])}t.placedSymbolArray.emplaceBack(s.x,s.y,y,this.glyphOffsetArray.length-y,m,u,l,s.segment,i?i[0]:0,i?i[1]:0,r[0],r[1],a,0,!1,0,c)},Ac.prototype._addCollisionDebugVertex=function(t,e,i,r,n,o){return e.emplaceBack(0,0),t.emplaceBack(i.x,i.y,r,n,Math.round(o.x),Math.round(o.y))},Ac.prototype.addCollisionDebugVertices=function(t,e,i,r,n,o,a){var s=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),u=s.vertexLength,l=n.layoutVertexArray,c=n.collisionVertexArray,p=a.anchorX,h=a.anchorY;this._addCollisionDebugVertex(l,c,o,p,h,new pt(t,e)),this._addCollisionDebugVertex(l,c,o,p,h,new pt(i,e)),this._addCollisionDebugVertex(l,c,o,p,h,new pt(i,r)),this._addCollisionDebugVertex(l,c,o,p,h,new pt(t,r)),s.vertexLength+=4;var d=n.indexArray;d.emplaceBack(u,u+1),d.emplaceBack(u+1,u+2),d.emplaceBack(u+2,u+3),d.emplaceBack(u+3,u),s.primitiveLength+=4},Ac.prototype.addDebugCollisionBoxes=function(t,e,i,r){for(var n=t;n<e;n++){var o=this.collisionBoxArray.get(n);this.addCollisionDebugVertices(o.x1,o.y1,o.x2,o.y2,r?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,i)}},Ac.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Dc(no,ul.members,Co),this.iconCollisionBox=new Dc(no,ul.members,Co);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},Ac.prototype._deserializeCollisionBoxesForSymbol=function(t,e,i,r,n,o,a,s,u){for(var l={},c=e;c<i;c++){var p=t.get(c);l.textBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},l.textFeatureIndex=p.featureIndex;break}for(var h=r;h<n;h++){var d=t.get(h);l.verticalTextBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},l.verticalTextFeatureIndex=d.featureIndex;break}for(var f=o;f<a;f++){var y=t.get(f);l.iconBox={x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,anchorPointX:y.anchorPointX,anchorPointY:y.anchorPointY},l.iconFeatureIndex=y.featureIndex;break}for(var m=s;m<u;m++){var g=t.get(m);l.verticalIconBox={x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2,anchorPointX:g.anchorPointX,anchorPointY:g.anchorPointY},l.verticalIconFeatureIndex=g.featureIndex;break}return l},Ac.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var i=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},Ac.prototype.hasTextData=function(){return 0<this.text.segments.get().length},Ac.prototype.hasIconData=function(){return 0<this.icon.segments.get().length},Ac.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Ac.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&0<this.textCollisionBox.segments.get().length},Ac.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&0<this.iconCollisionBox.segments.get().length},Ac.prototype.addIndicesForPlacedSymbol=function(t,e){for(var i=t.placedSymbolArray.get(e),r=i.vertexStartIndex+4*i.numGlyphs,n=i.vertexStartIndex;n<r;n+=4)t.indexArray.emplaceBack(n,n+1,n+2),t.indexArray.emplaceBack(n+1,n+2,n+3)},Ac.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),i=Math.cos(t),r=[],n=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);r.push(0|Math.round(e*s.anchorX+i*s.anchorY)),n.push(s.featureIndex)}return o.sort(function(t,e){return r[t]-r[e]||n[e]-n[t]}),o},Ac.prototype.addToSortKeyRanges=function(t,e){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===e?i.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},Ac.prototype.sortFeatures=function(t){var r=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(1<this.text.segments.get().length||1<this.icon.segments.get().length)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var e=0,i=this.symbolInstanceIndexes;e<i.length;e+=1){var n=this.symbolInstances.get(i[e]);this.featureSortOrder.push(n.featureIndex),[n.rightJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.leftJustifiedTextSymbolIndex].forEach(function(t,e,i){0<=t&&i.indexOf(t)===e&&r.addIndicesForPlacedSymbol(r.text,t)}),0<=n.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedSymbol(this.text,n.verticalPlacedTextSymbolIndex),0<=n.placedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,n.placedIconSymbolIndex),0<=n.verticalPlacedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,n.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Or("SymbolBucket",Ac,{omit:["layers","collisionBoxArray","features","compareText"]}),Ac.MAX_GLYPHS=65535,Ac.addDynamicAttributes=Tc;function Sc(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Gt,this.defaultValue=t}var Ec=new bn({"symbol-placement":new fn(jt.layout_symbol["symbol-placement"]),"symbol-spacing":new fn(jt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new fn(jt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new yn(jt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new fn(jt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new fn(jt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new fn(jt.layout_symbol["icon-ignore-placement"]),"icon-optional":new fn(jt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new fn(jt.layout_symbol["icon-rotation-alignment"]),"icon-size":new yn(jt.layout_symbol["icon-size"]),"icon-text-fit":new fn(jt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new fn(jt.layout_symbol["icon-text-fit-padding"]),"icon-image":new yn(jt.layout_symbol["icon-image"]),"icon-rotate":new yn(jt.layout_symbol["icon-rotate"]),"icon-padding":new fn(jt.layout_symbol["icon-padding"]),"icon-keep-upright":new fn(jt.layout_symbol["icon-keep-upright"]),"icon-offset":new yn(jt.layout_symbol["icon-offset"]),"icon-anchor":new yn(jt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new fn(jt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new fn(jt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new fn(jt.layout_symbol["text-rotation-alignment"]),"text-field":new yn(jt.layout_symbol["text-field"]),"text-font":new yn(jt.layout_symbol["text-font"]),"text-size":new yn(jt.layout_symbol["text-size"]),"text-max-width":new yn(jt.layout_symbol["text-max-width"]),"text-line-height":new fn(jt.layout_symbol["text-line-height"]),"text-letter-spacing":new yn(jt.layout_symbol["text-letter-spacing"]),"text-justify":new yn(jt.layout_symbol["text-justify"]),"text-radial-offset":new yn(jt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new fn(jt.layout_symbol["text-variable-anchor"]),"text-anchor":new yn(jt.layout_symbol["text-anchor"]),"text-max-angle":new fn(jt.layout_symbol["text-max-angle"]),"text-writing-mode":new fn(jt.layout_symbol["text-writing-mode"]),"text-rotate":new yn(jt.layout_symbol["text-rotate"]),"text-padding":new fn(jt.layout_symbol["text-padding"]),"text-keep-upright":new fn(jt.layout_symbol["text-keep-upright"]),"text-transform":new yn(jt.layout_symbol["text-transform"]),"text-offset":new yn(jt.layout_symbol["text-offset"]),"text-allow-overlap":new fn(jt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new fn(jt.layout_symbol["text-ignore-placement"]),"text-optional":new fn(jt.layout_symbol["text-optional"])}),Cc={paint:new bn({"icon-opacity":new yn(jt.paint_symbol["icon-opacity"]),"icon-color":new yn(jt.paint_symbol["icon-color"]),"icon-halo-color":new yn(jt.paint_symbol["icon-halo-color"]),"icon-halo-width":new yn(jt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new yn(jt.paint_symbol["icon-halo-blur"]),"icon-translate":new fn(jt.paint_symbol["icon-translate"]),"icon-translate-anchor":new fn(jt.paint_symbol["icon-translate-anchor"]),"text-opacity":new yn(jt.paint_symbol["text-opacity"]),"text-color":new yn(jt.paint_symbol["text-color"],{runtimeType:Ht,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new yn(jt.paint_symbol["text-halo-color"]),"text-halo-width":new yn(jt.paint_symbol["text-halo-width"]),"text-halo-blur":new yn(jt.paint_symbol["text-halo-blur"]),"text-translate":new fn(jt.paint_symbol["text-translate"]),"text-translate-anchor":new fn(jt.paint_symbol["text-translate-anchor"])}),layout:Ec};Sc.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},Sc.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},Sc.prototype.outputDefined=function(){return!1},Sc.prototype.serialize=function(){return null},Or("FormatSectionOverride",Sc,{omit:["defaultValue"]});function Nc(t,e,i,r){this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(e,r)}var jc,kc,Pc,Oc,Bc=((Oc=Tn)&&($c.__proto__=Oc),(($c.prototype=Object.create(Oc&&Oc.prototype)).constructor=$c).prototype.recalculate=function(t,e){if(Oc.prototype.recalculate.call(this,t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var i=this.layout.get("text-writing-mode");if(i){for(var r=[],n=0,o=i;n<o.length;n+=1){var a=o[n];r.indexOf(a)<0&&r.push(a)}this.layout._values["text-writing-mode"]=r}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},$c.prototype.getValueAndResolveTokens=function(t,e,i,r){var n,o=this.layout.get(t).evaluate(e,{},i,r),a=this._unevaluatedLayout._values[t];return a.isDataDriven()||Yi(a.value)||!o?o:(n=e.properties,o.replace(/{([^{}]+)}/g,function(t,e){return e in n?String(n[e]):""}))},$c.prototype.createBucket=function(t){return new Ac(t)},$c.prototype.queryRadius=function(){return 0},$c.prototype.queryIntersectsFeature=function(){return!1},$c.prototype._setPaintOverrides=function(){for(var t=0,e=Cc.paint.overridableProperties;t<e.length;t+=1){var i,r,n,o,a=e[t];$c.hasPaintOverride(this.layout,a)&&(i=this.paint.get(a),r=new Sc(i),n=new Gi(r,i.property.specification),o="constant"===i.value.kind||"source"===i.value.kind?new Wi("source",n):new Hi("composite",n,i.value.zoomStops,i.value._interpolationType),this.paint._values[a]=new hn(i.property,o,i.parameters))}},$c.prototype._handleOverridablePaintPropertyUpdate=function(t,e,i){return!(!this.layout||e.isDataDriven()||i.isDataDriven())&&$c.hasPaintOverride(this.layout,t)},$c.hasPaintOverride=function(t,e){function i(t){for(var e=0,i=t;e<i.length;e+=1)if(a.overrides&&a.overrides.hasOverride(i[e]))return s=!0,0}var r,n,o=t.get("text-field"),a=Cc.paint.properties[e],s=!1;return"constant"===o.value.kind&&o.value.value instanceof ce?i(o.value.value.sections):"source"===o.value.kind&&(r=function(t){s||(t instanceof me&&fe(t.value)===Kt?i(t.value.sections):t instanceof xe?i(t.sections):t.eachChild(r))},(n=o.value)._styleExpression&&r(n._styleExpression.expression)),s},$c),Uc={paint:new bn({"background-color":new fn(jt.paint_background["background-color"]),"background-pattern":new mn(jt.paint_background["background-pattern"]),"background-opacity":new fn(jt.paint_background["background-opacity"])})},Rc=((Pc=Tn)&&(Kc.__proto__=Pc),(Kc.prototype=Object.create(Pc&&Pc.prototype)).constructor=Kc),Fc={paint:new bn({"raster-opacity":new fn(jt.paint_raster["raster-opacity"]),"raster-hue-rotate":new fn(jt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new fn(jt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new fn(jt.paint_raster["raster-brightness-max"]),"raster-saturation":new fn(jt.paint_raster["raster-saturation"]),"raster-contrast":new fn(jt.paint_raster["raster-contrast"]),"raster-resampling":new fn(jt.paint_raster["raster-resampling"]),"raster-fade-duration":new fn(jt.paint_raster["raster-fade-duration"])})},Zc=((kc=Tn)&&(Jc.__proto__=kc),(Jc.prototype=Object.create(kc&&kc.prototype)).constructor=Jc),Vc=((jc=Tn)&&(Xc.__proto__=jc),((Xc.prototype=Object.create(jc&&jc.prototype)).constructor=Xc).prototype.is3D=function(){return"3d"===this.implementation.renderingMode},Xc.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},Xc.prototype.recalculate=function(){},Xc.prototype.updateTransitions=function(){},Xc.prototype.hasTransition=function(){},Xc.prototype.serialize=function(){},Xc.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},Xc.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},Xc),Gc={circle:zs,heatmap:Zs,hillshade:Gs,fill:Iu,"fill-extrusion":Fu,line:il,symbol:Bc,background:Rc,raster:Zc},Yc=d.HTMLImageElement,Qc=d.HTMLCanvasElement,Wc=d.HTMLVideoElement,Hc=d.ImageData,qc=d.ImageBitmap;function Xc(t){jc.call(this,t,{}),this.implementation=t}function Jc(t){kc.call(this,t,Fc)}function Kc(t){Pc.call(this,t,Uc)}function $c(t){Oc.call(this,t,Cc)}Nc.prototype.update=function(t,e,i){var r,n,o,a=t.width,s=t.height,u=!(this.size&&this.size[0]===a&&this.size[1]===s||i),l=this.context,c=l.gl;this.useMipmap=Boolean(e&&e.useMipmap),c.bindTexture(c.TEXTURE_2D,this.texture),l.pixelStoreUnpackFlipY.set(!1),l.pixelStoreUnpack.set(1),l.pixelStoreUnpackPremultiplyAlpha.set(this.format===c.RGBA&&(!e||!1!==e.premultiply)),u?(this.size=[a,s],t instanceof Yc||t instanceof Qc||t instanceof Wc||t instanceof Hc||qc&&t instanceof qc?c.texImage2D(c.TEXTURE_2D,0,this.format,this.format,c.UNSIGNED_BYTE,t):c.texImage2D(c.TEXTURE_2D,0,this.format,a,s,0,this.format,c.UNSIGNED_BYTE,t.data)):(n=(r=i||{x:0,y:0}).x,o=r.y,t instanceof Yc||t instanceof Qc||t instanceof Wc||t instanceof Hc||qc&&t instanceof qc?c.texSubImage2D(c.TEXTURE_2D,0,n,o,c.RGBA,c.UNSIGNED_BYTE,t):c.texSubImage2D(c.TEXTURE_2D,0,n,o,a,s,c.RGBA,c.UNSIGNED_BYTE,t.data)),this.useMipmap&&this.isSizePowerOfTwo()&&c.generateMipmap(c.TEXTURE_2D)},Nc.prototype.bind=function(t,e,i){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),i!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,i||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)},Nc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Nc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};function tp(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})}tp.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){t._triggered=!1,t._callback()},0))},tp.prototype.remove=function(){delete this._channel,this._callback=function(){}};function ep(t,e,i){this.target=t,this.parent=e,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},y(["receive","process"],this),this.invoker=new tp(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=M()?t:d}function ip(t,e,i){var r=2*Math.PI*6378137/256/Math.pow(2,i);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}ep.prototype.send=function(t,e,i,r,n){var o=this;void 0===n&&(n=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[a]=i);var s=T(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!i,targetMapId:r,mustQueue:n,sourceMapId:this.mapId,data:Fr(e,s)},s),{cancel:function(){i&&delete o.callbacks[a],o.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:o.mapId})}}},ep.prototype.receive=function(t){var e,i=t.data,r=i.id;!r||i.targetMapId&&this.mapId!==i.targetMapId||("<cancel>"===i.type?(delete this.tasks[r],e=this.cancelCallbacks[r],delete this.cancelCallbacks[r],e&&e()):M()||i.mustQueue?(this.tasks[r]=i,this.taskQueue.push(r),this.invoker.trigger()):this.processTask(r,i))},ep.prototype.process=function(){var t,e;this.taskQueue.length&&(t=this.taskQueue.shift(),e=this.tasks[t],delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e))},ep.prototype.processTask=function(i,t){var e,r,n,o,a,s,u,l=this;"<response>"===t.type?(e=this.callbacks[i],delete this.callbacks[i],e&&(t.error?e(Zr(t.error)):e(null,Zr(t.data)))):(r=!1,n=T(this.globalScope)?void 0:[],o=t.hasCallback?function(t,e){r=!0,delete l.cancelCallbacks[i],l.target.postMessage({id:i,type:"<response>",sourceMapId:l.mapId,error:t?Fr(t):null,data:Fr(e,n)},n)}:function(t){r=!0},u=null,a=Zr(t.data),this.parent[t.type]?u=this.parent[t.type](t.sourceMapId,a,o):this.parent.getWorkerSource?(s=t.type.split("."),u=this.parent.getWorkerSource(t.sourceMapId,s[0],a.source)[s[1]](a,o)):o(new Error("Could not find function "+t.type)),!r&&u&&u.cancel&&(this.cancelCallbacks[i]=u.cancel))},ep.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function rp(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}rp.prototype.setNorthEast=function(t){return this._ne=t instanceof np?new np(t.lng,t.lat):np.convert(t),this},rp.prototype.setSouthWest=function(t){return this._sw=t instanceof np?new np(t.lng,t.lat):np.convert(t),this},rp.prototype.extend=function(t){var e,i,r=this._sw,n=this._ne;if(t instanceof np)i=e=t;else{if(!(t instanceof rp))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(rp.convert(t)):this.extend(np.convert(t)):this;if(i=t._ne,!(e=t._sw)||!i)return this}return r||n?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new np(e.lng,e.lat),this._ne=new np(i.lng,i.lat)),this},rp.prototype.getCenter=function(){return new np((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},rp.prototype.getSouthWest=function(){return this._sw},rp.prototype.getNorthEast=function(){return this._ne},rp.prototype.getNorthWest=function(){return new np(this.getWest(),this.getNorth())},rp.prototype.getSouthEast=function(){return new np(this.getEast(),this.getSouth())},rp.prototype.getWest=function(){return this._sw.lng},rp.prototype.getSouth=function(){return this._sw.lat},rp.prototype.getEast=function(){return this._ne.lng},rp.prototype.getNorth=function(){return this._ne.lat},rp.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},rp.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},rp.prototype.isEmpty=function(){return!(this._sw&&this._ne)},rp.prototype.contains=function(t){var e=np.convert(t),i=e.lng,r=e.lat,n=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&n},rp.convert=function(t){return!t||t instanceof rp?t:new rp(t)};var np=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,90<this.lat||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};np.prototype.wrap=function(){return new np(s(this.lng,-180,180),this.lat)},np.prototype.toArray=function(){return[this.lng,this.lat]},np.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},np.prototype.distanceTo=function(t){var e=Math.PI/180,i=this.lat*e,r=t.lat*e,n=Math.sin(i)*Math.sin(r)+Math.cos(i)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(n,1))},np.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return new rp(new np(this.lng-i,this.lat-e),new np(this.lng+i,this.lat+e))},np.convert=function(t){if(t instanceof np)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new np(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new np(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var op=2*Math.PI*6371008.8;function ap(t){return op*Math.cos(t*Math.PI/180)}function sp(t){return(180+t)/360}function up(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function lp(t,e){return t/ap(e)}function cp(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function pp(t,e,i){void 0===i&&(i=0),this.x=+t,this.y=+e,this.z=+i}pp.fromLngLat=function(t,e){void 0===e&&(e=0);var i=np.convert(t);return new pp(sp(i.lng),up(i.lat),lp(e,i.lat))},pp.prototype.toLngLat=function(){return new np(360*this.x-180,cp(this.y))},pp.prototype.toAltitude=function(){return this.z*ap(cp(this.y))},pp.prototype.meterInMercatorCoordinateUnits=function(){return 1/op*(t=cp(this.y),1/Math.cos(t*Math.PI/180));var t};function hp(t,e,i){this.z=t,this.x=e,this.y=i,this.key=yp(0,t,t,e,i)}hp.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},hp.prototype.url=function(t,e){var i,r,n,o,a,s=(r=this.y,n=this.z,o=ip(256*(i=this.x),256*(r=Math.pow(2,n)-r-1),n),a=ip(256*(i+1),256*(r+1),n),o[0]+","+o[1]+","+a[0]+","+a[1]),u=function(t,e,i){for(var r,n="",o=t;0<o;o--)n+=(e&(r=1<<o-1)?1:0)+(i&r?2:0);return n}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},hp.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new pt(8192*(t.x*e-this.x),8192*(t.y*e-this.y))},hp.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};function dp(t,e){this.wrap=t,this.canonical=e,this.key=yp(t,e.z,e.z,e.x,e.y)}function fp(t,e,i,r,n){this.overscaledZ=t,this.wrap=e,this.canonical=new hp(i,+r,+n),this.key=yp(e,t,i,r,n)}function yp(t,e,i,r,n){(t*=2)<0&&(t=-1*t-1);var o=1<<i;return(o*o*t+o*n+r).toString(36)+i.toString(36)+e.toString(36)}fp.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},fp.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new fp(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new fp(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},fp.prototype.calculateScaledKey=function(t,e){var i=this.canonical.z-t;return t>this.canonical.z?yp(this.wrap*e,t,this.canonical.z,this.canonical.x,this.canonical.y):yp(this.wrap*e,t,t,this.canonical.x>>i,this.canonical.y>>i)},fp.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},fp.prototype.children=function(t){if(this.overscaledZ>=t)return[new fp(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,i=2*this.canonical.x,r=2*this.canonical.y;return[new fp(e,this.wrap,e,i,r),new fp(e,this.wrap,e,1+i,r),new fp(e,this.wrap,e,i,1+r),new fp(e,this.wrap,e,1+i,1+r)]},fp.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},fp.prototype.wrapped=function(){return new fp(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},fp.prototype.unwrapTo=function(t){return new fp(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},fp.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},fp.prototype.toUnwrapped=function(){return new dp(this.wrap,this.canonical)},fp.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},fp.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new pp(t.x-this.wrap,t.y))},Or("CanonicalTileID",hp),Or("OverscaledTileID",fp,{omit:["posMatrix"]});function mp(t,e,i){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return ht('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var r=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=i||"mapbox";for(var n=0;n<r;n++)this.data[this._idx(-1,n)]=this.data[this._idx(0,n)],this.data[this._idx(r,n)]=this.data[this._idx(r-1,n)],this.data[this._idx(n,-1)]=this.data[this._idx(n,0)],this.data[this._idx(n,r)]=this.data[this._idx(n,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)]}mp.prototype.get=function(t,e){var i=new Uint8Array(this.data.buffer),r=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[r],i[1+r],i[2+r])},mp.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},mp.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},mp.prototype._unpackMapbox=function(t,e,i){return(256*t*256+256*e+i)/10-1e4},mp.prototype._unpackTerrarium=function(t,e,i){return 256*t+e+i/256-32768},mp.prototype.getPixels=function(){return new Os({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},mp.prototype.backfillBorder=function(t,e,i){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var r=e*this.dim,n=e*this.dim+this.dim,o=i*this.dim,a=i*this.dim+this.dim;switch(e){case-1:r=n-1;break;case 1:n=r+1}switch(i){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,u=-i*this.dim,l=o;l<a;l++)for(var c=r;c<n;c++)this.data[this._idx(c,l)]=t.data[this._idx(c+s,l+u)]},Or("DEMData",mp);function gp(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}}gp.prototype.encode=function(t){return this._stringToNumber[t]},gp.prototype.decode=function(t){return this._numberToString[t]};function vp(t,e,i,r,n){this.type="Feature",(this._vectorTileFeature=t)._z=e,t._x=i,t._y=r,this.properties=t.properties,this.id=n}var _p={geometry:{configurable:!0}};_p.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},_p.geometry.set=function(t){this._geometry=t},vp.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(vp.prototype,_p);function xp(){this.state={},this.stateChanges={},this.deletedStates={}}xp.prototype.updateState=function(t,e,i){var r=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},f(this.stateChanges[t][r],i),null===this.deletedStates[t])for(var n in this.deletedStates[t]={},this.state[t])n!==r&&(this.deletedStates[t][n]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][r])for(var o in this.deletedStates[t][r]={},this.state[t][r])i[o]||(this.deletedStates[t][r][o]=null);else for(var a in i)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][a]&&delete this.deletedStates[t][r][a]},xp.prototype.removeFeatureState=function(t,e,i){if(null!==this.deletedStates[t]){var r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},i&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][i]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(i in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][i]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}},xp.prototype.getState=function(t,e){var i=String(e),r=f({},(this.state[t]||{})[i],(this.stateChanges[t]||{})[i]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var n=this.deletedStates[t][e];if(null===n)return{};for(var o in n)delete r[o]}return r},xp.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},xp.prototype.coalesceChanges=function(t,e){var i={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var n={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),f(this.state[r][o],this.stateChanges[r][o]),n[o]=this.state[r][o];i[r]=n}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var u in this.state[a])s[u]={},this.state[a][u]={};else for(var l in this.deletedStates[a]){if(null===this.deletedStates[a][l])this.state[a][l]={};else for(var c=0,p=Object.keys(this.deletedStates[a][l]);c<p.length;c+=1)delete this.state[a][l][p[c]];s[l]=this.state[a][l]}i[a]=i[a]||{},f(i[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(var h in t)t[h].setFeatureState(i,e)};function bp(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Cr(8192,16,0),this.grid3D=new Cr(8192,16,0),this.featureIndexArray=new la,this.promoteId=e}function Mp(t,r,n,o,a){return g(t,function(t,e){var i=r instanceof dn?r.get(e):null;return i&&i.evaluate?i.evaluate(n,o,a):i})}function wp(t){for(var e=1/0,i=1/0,r=-1/0,n=-1/0,o=0,a=t;o<a.length;o+=1)var s=a[o],e=Math.min(e,s.x),i=Math.min(i,s.y),r=Math.max(r,s.x),n=Math.max(n,s.y);return{minX:e,minY:i,maxX:r,maxY:n}}function Ip(t,e){return e-t}bp.prototype.insert=function(t,e,i,r,n,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,r,n);for(var s=o?this.grid3D:this.grid,u=0;u<e.length;u++){for(var l=e[u],c=[1/0,1/0,-1/0,-1/0],p=0;p<l.length;p++){var h=l[p];c[0]=Math.min(c[0],h.x),c[1]=Math.min(c[1],h.y),c[2]=Math.max(c[2],h.x),c[3]=Math.max(c[3],h.y)}c[0]<8192&&c[1]<8192&&0<=c[2]&&0<=c[3]&&s.insert(a,c[0],c[1],c[2],c[3])}},bp.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new ju.VectorTile(new fl(this.rawTileData)).layers,this.sourceLayerCoder=new gp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},bp.prototype.query=function(n,o,a,s){var u=this;this.loadVTLayers();for(var l=n.params||{},c=8192/n.tileSize/n.scale,p=or(l.filter),h=n.queryGeometry,d=n.queryPadding*c,t=wp(h),f=this.grid.query(t.minX-d,t.minY-d,t.maxX+d,t.maxY+d),e=wp(n.cameraQueryGeometry),i=0,r=this.grid3D.query(e.minX-d,e.minY-d,e.maxX+d,e.maxY+d,function(t,e,i,r){return function(t,e,i,r,n){for(var o=0,a=t;o<a.length;o+=1){var s=a[o];if(e<=s.x&&i<=s.y&&r>=s.x&&n>=s.y)return!0}var u=[new pt(e,i),new pt(e,n),new pt(r,n),new pt(r,i)];if(2<t.length)for(var l=0,c=u;l<c.length;l+=1)if(hs(t,c[l]))return!0;for(var p=0;p<t.length-1;p++)if(function(t,e,i){var r=i[0],n=i[2];if(!(t.x<r.x&&e.x<r.x||t.x>n.x&&e.x>n.x||t.y<r.y&&e.y<r.y||t.y>n.y&&e.y>n.y)){var o=b(t,e,i[0]);return o!==b(t,e,i[1])||o!==b(t,e,i[2])||o!==b(t,e,i[3])}}(t[p],t[p+1],u))return!0;return!1}(n.cameraQueryGeometry,t-d,e-d,i+d,r+d)});i<r.length;i+=1)f.push(r[i]);f.sort(Ip);for(var y,m={},g=0;g<f.length;g++)!function(t){var e,r,i=f[t];i!==y&&(y=i,e=u.featureIndexArray.get(i),r=null,u.loadMatchingFeature(m,e.bucketIndex,e.sourceLayerIndex,e.featureIndex,p,l.layers,l.availableImages,o,a,s,function(t,e,i){return r=r||rs(t),e.queryIntersectsFeature(h,t,i,r,u.z,n.transform,c,n.pixelPosMatrix)}))}(g);return m},bp.prototype.loadMatchingFeature=function(t,e,i,r,n,o,a,s,u,l,c){var p=this.bucketLayerIDs[e];if(!o||function(t,e){for(var i=0;i<t.length;i++)if(0<=e.indexOf(t[i]))return 1}(o,p)){var h=this.sourceLayerCoder.decode(i),d=this.vtLayers[h].feature(r);if(n.filter(new rn(this.tileID.overscaledZ),d))for(var f=this.getId(d,h),y=0;y<p.length;y++){var m,g,v,_,x,b,M=p[y];o&&o.indexOf(M)<0||(m=s[M])&&(g={},void 0!==f&&l&&(g=l.getState(m.sourceLayer||"_geojsonTileLayer",f)),(v=u[M]).paint=Mp(v.paint,m.paint,d,g,a),v.layout=Mp(v.layout,m.layout,d,g,a),(_=!c||c(d,m,g))&&((x=new vp(d,this.z,this.x,this.y,f)).layer=v,void 0===(b=t[M])&&(b=t[M]=[]),b.push({featureIndex:r,feature:x,intersectionZ:_})))}}},bp.prototype.lookupSymbolFeatures=function(t,e,i,r,n,o,a,s){var u={};this.loadVTLayers();for(var l=or(n),c=0,p=t;c<p.length;c+=1)this.loadMatchingFeature(u,i,r,p[c],l,o,a,s,e);return u},bp.prototype.hasLayer=function(t){for(var e=0,i=this.bucketLayerIDs;e<i.length;e+=1)for(var r=0,n=i[e];r<n.length;r+=1)if(t===n[r])return!0;return!1},bp.prototype.getId=function(t,e){var i=t.id;return this.promoteId&&"boolean"==typeof(i=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(i=Number(i)),i},Or("FeatureIndex",bp,{omit:["rawTileData","sourceLayerCoder"]});function Tp(t,e){this.tileID=t,this.uid=c(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}Tp.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<j.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},Tp.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Tp.prototype.loadVectorData=function(t,e,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var r in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,n){var o={};if(!n)return o;for(var a=0,s=t;a<s.length;a+=1)!function(){var t=s[a],i=t.layerIds.map(function(t){return n.getLayer(t)}).filter(Boolean);if(0!==i.length){t.layers=i,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map(function(e){return i.filter(function(t){return t.id===e})[0]}));for(var e=0,r=i;e<r.length;e+=1)o[r[e].id]=t}}();return o}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var n=this.buckets[r];if(n instanceof Ac){if(this.hasSymbolBuckets=!0,!i)break;n.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof Ac&&a.hasRTLText){this.hasRTLText=!0,on.isLoading()||on.isLoaded()||"deferred"!==Jr||en();break}}for(var s in this.queryPadding=0,this.buckets){var u=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(u))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new Yo},Tp.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Tp.prototype.getBucket=function(t){return this.buckets[t.id]},Tp.prototype.upload=function(t){for(var e in this.buckets){var i=this.buckets[e];i.uploadPending()&&i.upload(t)}var r=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Nc(t,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Nc(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},Tp.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},Tp.prototype.queryRenderedFeatures=function(t,e,i,r,n,o,a,s,u,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:n,scale:o,tileSize:this.tileSize,pixelPosMatrix:l,transform:s,params:a,queryPadding:this.queryPadding*u},t,e,i):{}},Tp.prototype.querySourceFeatures=function(t,e){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var r=i.loadVTLayers(),n=e?e.sourceLayer:"",o=r._geojsonTileLayer||r[n];if(o)for(var a=or(e&&e.filter),s=this.tileID.canonical,u=s.z,l=s.x,c=s.y,p={z:u,x:l,y:c},h=0;h<o.length;h++){var d,f,y=o.feature(h);a.filter(new rn(this.tileID.overscaledZ),y)&&(d=i.getId(y,n),(f=new vp(y,u,l,c,d)).tile=p,t.push(f))}}},Tp.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Tp.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Tp.prototype.setExpiryData=function(t){var e,i,r,n,o=this.expirationTime;t.cacheControl?(e=w(t.cacheControl))["max-age"]&&(this.expirationTime=Date.now()+1e3*e["max-age"]):t.expires&&(this.expirationTime=new Date(t.expires).getTime()),this.expirationTime&&(i=Date.now(),r=!1,this.expirationTime>i?r=!1:o&&!(this.expirationTime<o)&&(n=this.expirationTime-o)?this.expirationTime=i+Math.max(n,3e4):r=!0,r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0)},Tp.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Tp.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var i,r,n,o,a,s=this.latestFeatureIndex.loadVTLayers();for(var u in this.buckets){e.style.hasLayer(u)&&(n=s[r=(i=this.buckets[u]).layers[0].sourceLayer||"_geojsonTileLayer"],o=t[r],n&&o&&0!==Object.keys(o).length&&(i.update(o,n,this.imageAtlas&&this.imageAtlas.patternPositions||{}),(a=e&&e.style&&e.style.getLayer(u))&&(this.queryPadding=Math.max(this.queryPadding,a.queryRadius(i)))))}}},Tp.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Tp.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<j.now()},Tp.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Tp.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=j.now()+t},Tp.prototype.setDependencies=function(t,e){for(var i={},r=0,n=e;r<n.length;r+=1)i[n[r]]=!0;this.dependencies[t]=i},Tp.prototype.hasDependency=function(t,e){for(var i=0,r=t;i<r.length;i+=1){var n=this.dependencies[r[i]];if(n)for(var o=0,a=e;o<a.length;o+=1)if(n[a[o]])return!0}return!1};function Lp(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},zp.mark(this._marks.start)}var zp=d.performance;Lp.prototype.finish=function(){zp.mark(this._marks.end);var t=zp.getEntriesByName(this._marks.measure);return 0===t.length&&(zp.measure(this._marks.measure,this._marks.start,this._marks.end),t=zp.getEntriesByName(this._marks.measure),zp.clearMarks(this._marks.start),zp.clearMarks(this._marks.end),zp.clearMeasures(this._marks.measure)),t},t.Actor=ep,t.AlphaImage=Ps,t.CanonicalTileID=hp,t.CollisionBoxArray=Yo,t.Color=se,t.DEMData=mp,t.DataConstantProperty=fn,t.DictionaryCoder=gp,t.EXTENT=8192,t.ErrorEvent=Ct,t.EvaluationParameters=rn,t.Event=At,t.Evented=St,t.FeatureIndex=bp,t.FillBucket=xu,t.FillExtrusionBucket=Bu,t.ImageAtlas=Bl,t.ImagePosition=Pl,t.LineBucket=Yu,t.LngLat=np,t.LngLatBounds=rp,t.MercatorCoordinate=pp,t.ONE_EM=24,t.OverscaledTileID=fp,t.Point=pt,t.Point$1=pt,t.Properties=bn,t.Protobuf=fl,t.RGBAImage=Os,t.RequestManager=R,t.RequestPerformance=Lp,t.ResourceType=mt,t.SegmentVector=pa,t.SourceFeatureState=xp,t.StructArrayLayout1ui2=ko,t.StructArrayLayout2f1f2i16=so,t.StructArrayLayout2i4=En,t.StructArrayLayout3ui6=fo,t.StructArrayLayout4i8=jn,t.SymbolBucket=Ac,t.Texture=Nc,t.Tile=Tp,t.Transitionable=un,t.Uniform1f=Ca,t.Uniform1i=Ea,t.Uniform2f=Na,t.Uniform3f=ja,t.Uniform4f=ka,t.UniformColor=Pa,t.UniformMatrix4f=Ba,t.UnwrappedTileID=dp,t.ValidationError=kt,t.WritingMode=Rl,t.ZoomHistory=Vr,t.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},t.addDynamicAttributes=Tc,t.asyncAll=function(t,e,r){if(!t.length)return r(null,[]);var n=t.length,o=new Array(t.length),a=null;t.forEach(function(t,i){e(t,function(t,e){t&&(a=t),o[i]=e,0==--n&&r(a,o)})})},t.bezier=n,t.bindAll=y,t.browser=j,t.cacheEntryPossiblyAdded=function(t){++ft>at&&(t.getActor().send("enforceCacheSizeLimit",ot),ft=0)},t.clamp=l,t.clearTileCache=function(t){var e=d.caches.delete("mapbox-tiles");t&&e.catch(t).then(function(){return t()})},t.clipLine=uc,t.clone=function(t){var e=new vs(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=_,t.clone$2=function(t){var e=new vs(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.collisionCircleLayout=ll,t.config=k,t.create=function(){var t=new vs(16);return vs!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new vs(9);return vs!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new vs(4);return vs!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Qi,t.createLayout=Dn,t.createStyleLayer=function(t){return"custom"===t.type?new Vc(t):new Gc[t.type](t)},t.cross=function(t,e,i){var r=e[0],n=e[1],o=e[2],a=i[0],s=i[1],u=i[2];return t[0]=n*u-o*s,t[1]=o*a-r*u,t[2]=r*s-n*a,t},t.deepEqual=function t(e,i){if(Array.isArray(e)){if(!Array.isArray(i)||e.length!==i.length)return!1;for(var r=0;r<e.length;r++)if(!t(e[r],i[r]))return!1;return!0}if("object"!=typeof e||null===e||null===i)return e===i;if("object"!=typeof i)return!1;if(Object.keys(e).length!==Object.keys(i).length)return!1;for(var n in e)if(!t(e[n],i[n]))return!1;return!0},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=o,t.emitValidationErrors=Er,t.endsWith=m,t.enforceCacheSizeLimit=function(r){lt(),X&&X.then(function(i){i.keys().then(function(t){for(var e=0;e<t.length-r;e++)i.delete(t[e])})})},t.evaluateSizeForFeature=ec,t.evaluateSizeForZoom=ic,t.evaluateVariableOffset=vc,t.evented=nn,t.extend=f,t.featureFilter=or,t.filterObject=v,t.fromRotation=function(t,e){var i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=ql,t.getAnchorJustification=_c,t.getArrayBuffer=Mt,t.getImage=Lt,t.getJSON=function(t,e){return bt(f(t,{type:"json"}),e)},t.getRTLTextPluginStatus=tn,t.getReferrer=_t,t.getVideo=function(t,e){var i=d.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(var r=0;r<t.length;r++){var n=d.document.createElement("source"),o=t[r],a=void 0;(a=d.document.createElement("a")).href=o,a.protocol===d.document.location.protocol&&a.host===d.document.location.host||(i.crossOrigin="Anonymous"),n.src=t[r],i.appendChild(n)}return{cancel:function(){}}},t.identity=_s,t.invert=function(t,e){var i=e[0],r=e[1],n=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],p=e[9],h=e[10],d=e[11],f=e[12],y=e[13],m=e[14],g=e[15],v=i*s-r*a,_=i*u-n*a,x=i*l-o*a,b=r*u-n*s,M=r*l-o*s,w=n*l-o*u,I=c*y-p*f,T=c*m-h*f,L=c*g-d*f,z=p*m-h*y,D=p*g-d*y,A=h*g-d*m,S=v*A-_*D+x*z+b*L-M*T+w*I;return S?(t[0]=(s*A-u*D+l*z)*(S=1/S),t[1]=(n*D-r*A-o*z)*S,t[2]=(y*w-m*M+g*b)*S,t[3]=(h*M-p*w-d*b)*S,t[4]=(u*L-a*A-l*T)*S,t[5]=(i*A-n*L+o*T)*S,t[6]=(m*x-f*w-g*_)*S,t[7]=(c*w-h*x+d*_)*S,t[8]=(a*D-s*L+l*I)*S,t[9]=(r*L-i*D-o*I)*S,t[10]=(f*M-y*x+g*v)*S,t[11]=(p*x-c*M-d*v)*S,t[12]=(s*T-a*z-u*I)*S,t[13]=(i*z-r*T+n*I)*S,t[14]=(y*_-f*b-m*v)*S,t[15]=(c*b-p*_+h*v)*S,t):null},t.isChar=Gr,t.isMapboxURL=Z,t.keysDifference=function(t,e){var i=[];for(var r in t)r in e||i.push(r);return i},t.makeRequest=bt,t.mapObject=g,t.mercatorXfromLng=sp,t.mercatorYfromLat=up,t.mercatorZfromAltitude=lp,t.mul=ws,t.multiply=xs,t.mvt=ju,t.normalize=function(t,e){var i=e[0],r=e[1],n=e[2],o=i*i+r*r+n*n;return 0<o&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t},t.number=Qe,t.offscreenCanvasSupported=yt,t.ortho=function(t,e,i,r,n,o,a){var s=1/(e-i),u=1/(r-n),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+i)*s,t[13]=(n+r)*u,t[14]=(a+o)*l,t[15]=1,t},t.parseGlyphPBF=function(t){return new fl(t).readFields(Cl,[])},t.pbf=fl,t.performSymbolLayout=function(N,j,k,P,O,t,B){N.createArrays(),N.tilePixelRatio=8192/(512*N.overscaling),N.compareText={},N.iconsNeedLinear=!1;var e,i,r,n,U=N.layers[0].layout,o=N.layers[0]._unevaluatedLayout._values,R={};"composite"===N.textSizeData.kind&&(i=(e=N.textSizeData).maxZoom,R.compositeTextSizes=[o["text-size"].possiblyEvaluate(new rn(e.minZoom),B),o["text-size"].possiblyEvaluate(new rn(i),B)]),"composite"===N.iconSizeData.kind&&(n=(r=N.iconSizeData).maxZoom,R.compositeIconSizes=[o["icon-size"].possiblyEvaluate(new rn(r.minZoom),B),o["icon-size"].possiblyEvaluate(new rn(n),B)]),R.layoutTextSize=o["text-size"].possiblyEvaluate(new rn(N.zoom+1),B),R.layoutIconSize=o["icon-size"].possiblyEvaluate(new rn(N.zoom+1),B),R.textMaxSize=o["text-size"].possiblyEvaluate(new rn(18));for(var F=24*U.get("text-line-height"),Z="map"===U.get("text-rotation-alignment")&&"point"!==U.get("symbol-placement"),V=U.get("text-keep-upright"),G=U.get("text-size"),a=function(){var t=Q[Y],e=U.get("text-font").evaluate(t,{},B).join(","),i=G.evaluate(t,{},B),r=R.layoutTextSize.evaluate(t,{},B),n=R.layoutIconSize.evaluate(t,{},B),o={horizontal:{},vertical:void 0},a=t.text,s=[0,0];if(a){var u,l=a.toString(),c=24*U.get("text-letter-spacing").evaluate(t,{},B),p=function(){for(var t,e=0,i=l;e<i.length;e+=1)if(t=i[e].charCodeAt(0),Gr.Arabic(t)||Gr["Arabic Supplement"](t)||Gr["Arabic Extended-A"](t)||Gr["Arabic Presentation Forms-A"](t)||Gr["Arabic Presentation Forms-B"](t))return;return 1}()?c:0,h=U.get("text-anchor").evaluate(t,{},B),d=U.get("text-variable-anchor");d||(u=U.get("text-radial-offset").evaluate(t,{},B),s=u?vc(h,[24*u,gc]):U.get("text-offset").evaluate(t,{},B).map(function(t){return 24*t}));var f=Z?"center":U.get("text-justify").evaluate(t,{},B),y=U.get("symbol-placement"),m="point"===y?24*U.get("text-max-width").evaluate(t,{},B):0,g=function(){N.allowVerticalPlacement&&Yr(l)&&(o.vertical=Zl(a,j,k,O,e,m,F,h,"left",p,s,Rl.vertical,!0,y,r,i))};if(!Z&&d){for(var v="auto"===f?d.map(_c):[f],_=!1,x=0;x<v.length;x++){var b,M=v[x];o.horizontal[M]||(_?o.horizontal[M]=o.horizontal[0]:(b=Zl(a,j,k,O,e,m,F,"center",M,p,s,Rl.horizontal,!1,y,r,i))&&(_=1===(o.horizontal[M]=b).positionedLines.length))}g()}else{"auto"===f&&(f=_c(h));var w=Zl(a,j,k,O,e,m,F,h,f,p,s,Rl.horizontal,!1,y,r,i);w&&(o.horizontal[f]=w),g(),Yr(l)&&Z&&V&&(o.vertical=Zl(a,j,k,O,e,m,F,h,f,p,s,Rl.vertical,!1,y,r,i))}}var I,T,L,z,D,A,S=void 0,E=!1;t.icon&&t.icon.name&&((I=P[t.icon.name])&&(T=O[t.icon.name],L=U.get("icon-offset").evaluate(t,{},B),z=ql(U.get("icon-anchor").evaluate(t,{},B)),D=L[0]-T.displaySize[0]*z.horizontalAlign,A=L[1]-T.displaySize[1]*z.verticalAlign,S={image:T,top:A,bottom:A+T.displaySize[1],left:D,right:D+T.displaySize[0]},E=I.sdf,void 0===N.sdfIcons?N.sdfIcons=I.sdf:N.sdfIcons!==I.sdf&&ht("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),I.pixelRatio===N.pixelRatio&&0===U.get("icon-rotate").constantOr(1)||(N.iconsNeedLinear=!0)));var C=bc(o.horizontal)||o.vertical;N.iconsInText=!!C&&C.iconsInText,(C||S)&&function(e,i,r,n,o,a,s,t,u,l,c){var p=a.textMaxSize.evaluate(i,{});void 0===p&&(p=s);var h,d=e.layers[0].layout,f=d.get("icon-offset").evaluate(i,{},c),y=bc(r.horizontal),m=s/24,g=e.tilePixelRatio*m,v=e.tilePixelRatio*p/24,_=e.tilePixelRatio*t,x=e.tilePixelRatio*d.get("symbol-spacing"),b=d.get("text-padding")*e.tilePixelRatio,M=d.get("icon-padding")*e.tilePixelRatio,w=d.get("text-max-angle")/180*Math.PI,I="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),T="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),L=d.get("symbol-placement"),z=x/2,D=d.get("icon-text-fit");n&&"none"!==D&&(e.allowVerticalPlacement&&r.vertical&&(h=Xl(n,r.vertical,D,d.get("icon-text-fit-padding"),f,m)),y&&(n=Xl(n,y,D,d.get("icon-text-fit-padding"),f,m)));function A(ut,t){t.x<0||8192<=t.x||t.y<0||8192<=t.y||function(t,e,i,r,n,o,a,s,u,l,c,p,h,d,f,y,m,g,v,_,x,b,M,w){var I,T,L,z,D,A,S,E,C,N,j,k=t.addToLineVertexArray(e,ut),P=0,O=0,B=0,U=0,R=-1,F=-1,Z={},V=ga(""),G=0,Y=0,Y=void 0===a._unevaluatedLayout.getValue("text-radial-offset")?(G=(I=a.layout.get("text-offset").evaluate(_,{},M).map(function(t){return 24*t}))[0],I[1]):(G=24*a.layout.get("text-radial-offset").evaluate(_,{},M),gc);for(var Q in t.allowVerticalPlacement&&i.vertical&&(L=a.layout.get("text-rotate").evaluate(_,{},M)+90,z=new hc(s,e,u,l,c,i.vertical,p,h,d,L),o&&(T=new hc(s,e,u,l,c,o,y,m,d,L))),r&&(S=lc(r,D=a.layout.get("icon-rotate").evaluate(_,{}),b,A="none"!==a.layout.get("icon-text-fit")),E=o?lc(o,D,b,A):void 0,C=new hc(s,e,u,l,c,r,y,m,!1,D),P=4*S.length,j=null,"source"===(N=t.iconSizeData).kind?32640<(j=[128*a.layout.get("icon-size").evaluate(_,{})])[0]&&ht(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===N.kind&&(32640<(j=[128*x.compositeIconSizes[0].evaluate(_,{},M),128*x.compositeIconSizes[1].evaluate(_,{},M)])[0]||32640<j[1])&&ht(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),t.addSymbols(t.icon,S,j,v,g,_,!1,e,k.lineStartIndex,k.lineLength,-1,M),R=t.icon.placedSymbolArray.length-1,E&&(O=4*E.length,t.addSymbols(t.icon,E,j,v,g,_,Rl.vertical,e,k.lineStartIndex,k.lineLength,-1,M),F=t.icon.placedSymbolArray.length-1)),i.horizontal){var W,H,q=i.horizontal[Q];H||(V=ga(q.text),W=a.layout.get("text-rotate").evaluate(_,{},M),H=new hc(s,e,u,l,c,q,p,h,d,W));var X=1===q.positionedLines.length;if(B+=xc(t,e,q,n,a,d,_,f,k,i.vertical?Rl.horizontal:Rl.horizontalOnly,X?Object.keys(i.horizontal):[Q],Z,R,x,M),X)break}i.vertical&&(U+=xc(t,e,i.vertical,n,a,d,_,f,k,Rl.vertical,["vertical"],Z,F,x,M));function J(t,e){return t&&t.circleDiameter?Math.max(t.circleDiameter,e):e}var K=H?H.boxStartIndex:t.collisionBoxArray.length,$=H?H.boxEndIndex:t.collisionBoxArray.length,tt=z?z.boxStartIndex:t.collisionBoxArray.length,et=z?z.boxEndIndex:t.collisionBoxArray.length,it=C?C.boxStartIndex:t.collisionBoxArray.length,rt=C?C.boxEndIndex:t.collisionBoxArray.length,nt=T?T.boxStartIndex:t.collisionBoxArray.length,ot=T?T.boxEndIndex:t.collisionBoxArray.length,at=-1,st=-1<(at=J(T,at=J(C,at=J(z,at=J(H,at)))))?1:0;st&&(at*=w/24),t.glyphOffsetArray.length>=Ac.MAX_GLYPHS&&ht("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==_.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,_.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,0<=Z.right?Z.right:-1,0<=Z.center?Z.center:-1,0<=Z.left?Z.left:-1,Z.vertical||-1,R,F,V,K,$,tt,et,it,rt,nt,ot,u,B,U,P,O,st,0,p,G,Y,at)}(e,t,r,n,o,h,e.layers[0],e.collisionBoxArray,i.index,i.sourceLayerIndex,e.index,g,b,I,u,_,M,T,f,i,a,l,c,s)}var S,E,C,N,j,k,P,O,B,U,R,F,Z;if("line"===L)for(var V=0,G=uc(i.geometry,0,0,8192,8192);V<G.length;V+=1)for(var Y=G[V],Q=0,W=(S=Y,E=x,C=w,N=r.vertical||y,j=n,k=24,P=v,O=e.overscaling,B=8192,0,U=ac(N,k,P),R=sc(N,j),F=R*P,Z=0===S[0].x||S[0].x===B||0===S[0].y||S[0].y===B,E-F<E/4&&(E=F+E/4),function t(e,i,r,n,o,a,s,u,l){for(var c=a/2,p=oc(e),h=0,d=i-r,f=[],y=0;y<e.length-1;y++){for(var m=e[y],g=e[y+1],v=m.dist(g),_=g.angleTo(m);d+r<h+v;){var x,b=((d+=r)-h)/v,M=Qe(m.x,g.x,b),w=Qe(m.y,g.y,b);0<=M&&M<l&&0<=w&&w<l&&0<=d-c&&d+c<=p&&((x=new Kl(M,w,_,y))._round(),n&&!nc(e,x,a,n,o)||f.push(x))}h+=v}return u||f.length||s||(f=t(e,h/2,r,n,o,a,s,!0,l)),f}(S,Z?E/2*O%E:(R/2+2*k)*P*O%E,E,U,C,F,Z,!1,B));Q<W.length;Q+=1){var H=W[Q];y&&function(t,e,i,r){var n=t.compareText;if(e in n){for(var o=n[e],a=o.length-1;0<=a;a--)if(r.dist(o[a])<i)return 1}else n[e]=[];return n[e].push(r),0}(e,y.text,z,H)||A(Y,H)}else if("line-center"===L)for(var q=0,X=i.geometry;q<X.length;q+=1){var J,K=X[q];1<K.length&&((J=function(t,e,i,r,n,o){for(var a=ac(i,n,o),s=sc(i,r)*o,u=0,l=oc(t)/2,c=0;c<t.length-1;c++){var p=t[c],h=t[c+1],d=p.dist(h);if(l<u+d){var f=(l-u)/d,y=Qe(p.x,h.x,f),m=Qe(p.y,h.y,f),g=new Kl(y,m,h.angleTo(p),c);return g._round(),!a||nc(t,g,s,a,e)?g:void 0}u+=d}}(K,w,r.vertical||y,n,24,v))&&A(K,J))}else if("Polygon"===i.type)for(var $=0,tt=mu(i.geometry,0);$<tt.length;$+=1){var et=tt[$],it=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1);for(var r=1/0,n=1/0,o=-1/0,a=-1/0,s=t[0],u=0;u<s.length;u++){var l=s[u];(!u||l.x<r)&&(r=l.x),(!u||l.y<n)&&(n=l.y),(!u||l.x>o)&&(o=l.x),(!u||l.y>a)&&(a=l.y)}var c=Math.min(o-r,a-n),p=c/2,h=new dc([],yc);if(0===c)return new pt(r,n);for(var d=r;d<o;d+=c)for(var f=n;f<a;f+=c)h.push(new mc(d+p,f+p,p,t));for(var y=function(t){for(var e=0,i=0,r=0,n=t[0],o=0,a=n.length,s=a-1;o<a;s=o++){var u=n[o],l=n[s],c=u.x*l.y-l.x*u.y;i+=(u.x+l.x)*c,r+=(u.y+l.y)*c,e+=3*c}return new mc(i/e,r/e,0,t)}(t),m=h.length;h.length;){var g=h.pop();(g.d>y.d||!y.d)&&(y=g,i&&console.log("found best %d after %d probes",Math.round(1e4*g.d)/1e4,m)),g.max-y.d<=e||(h.push(new mc(g.p.x-(p=g.h/2),g.p.y-p,p,t)),h.push(new mc(g.p.x+p,g.p.y-p,p,t)),h.push(new mc(g.p.x-p,g.p.y+p,p,t)),h.push(new mc(g.p.x+p,g.p.y+p,p,t)),m+=4)}return i&&(console.log("num probes: "+m),console.log("best distance: "+y.d)),y.p}(et,16);A(et[0],new Kl(it.x,it.y,0))}else if("LineString"===i.type)for(var rt=0,nt=i.geometry;rt<nt.length;rt+=1){var ot=nt[rt];A(ot,new Kl(ot[0].x,ot[0].y,0))}else if("Point"===i.type)for(var at=0,st=i.geometry;at<st.length;at+=1)for(var ut=0,lt=st[at];ut<lt.length;ut+=1){var ct=lt[ut];A([ct],new Kl(ct.x,ct.y,0))}}(N,t,o,S,P,R,r,n,s,E,B)},Y=0,Q=N.features;Y<Q.length;Y+=1)a();t&&N.generateCollisionDebugBuffers()},t.perspective=function(t,e,i,r,n){var o,a=1/Math.tan(e/2);return t[0]=a/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=(n+r)*(o=1/(r-n)),t[14]=2*n*r*o):(t[10]=-1,t[14]=-2*r),t},t.pick=function(t,e){for(var i={},r=0;r<e.length;r++){var n=e[r];n in t&&(i[n]=t[n])}return i},t.plugin=on,t.polygonIntersectsPolygon=as,t.postMapLoadEvent=nt,t.postTurnstileEvent=it,t.potpack=kl,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Or,t.registerForPluginStateChange=function(t){return t({pluginStatus:Jr,pluginURL:Kr}),nn.on("pluginStateChange",t),t},t.rotate=function(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3],s=Math.sin(i),u=Math.cos(i);return t[0]=r*u+o*s,t[1]=n*u+a*s,t[2]=r*-s+o*u,t[3]=n*-s+a*u,t},t.rotateX=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],p=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*n+l*r,t[5]=a*n+c*r,t[6]=s*n+p*r,t[7]=u*n+h*r,t[8]=l*n-o*r,t[9]=c*n-a*r,t[10]=p*n-s*r,t[11]=h*n-u*r,t},t.rotateZ=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],p=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n+l*r,t[1]=a*n+c*r,t[2]=s*n+p*r,t[3]=u*n+h*r,t[4]=l*n-o*r,t[5]=c*n-a*r,t[6]=p*n-s*r,t[7]=h*n-u*r,t},t.scale=function(t,e,i){var r=i[0],n=i[1],o=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},t.scale$2=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},t.setCacheLimits=function(t,e){ot=t,at=e},t.setRTLTextPlugin=function(t,e,i){if(void 0===i&&(i=!1),"deferred"===Jr||"loading"===Jr||"loaded"===Jr)throw new Error("setRTLTextPlugin cannot be called multiple times.");Kr=j.resolveURL(t),Jr="deferred",Xr=e,$r(),i||en()},t.sphericalToCartesian=function(t){var e=t[0],i=t[1],r=t[2];return i+=90,i*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(i)*Math.sin(r),y:e*Math.sin(i)*Math.sin(r),z:e*Math.cos(r)}},t.sqrLen=function(t){var e=t[0],i=t[1];return e*e+i*i},t.styleSpec=jt,t.sub=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},t.symbolSize=rc,t.transformMat3=function(t,e,i){var r=e[0],n=e[1],o=e[2];return t[0]=r*i[0]+n*i[3]+o*i[6],t[1]=r*i[1]+n*i[4]+o*i[7],t[2]=r*i[2]+n*i[5]+o*i[8],t},t.transformMat4=Is,t.translate=function(t,e,i){var r,n,o,a,s,u,l,c,p,h,d,f,y=i[0],m=i[1],g=i[2];return e===t?(t[12]=e[0]*y+e[4]*m+e[8]*g+e[12],t[13]=e[1]*y+e[5]*m+e[9]*g+e[13],t[14]=e[2]*y+e[6]*m+e[10]*g+e[14],t[15]=e[3]*y+e[7]*m+e[11]*g+e[15]):(n=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],d=e[10],f=e[11],t[0]=r=e[0],t[1]=n,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=p,t[9]=h,t[10]=d,t[11]=f,t[12]=r*y+s*m+p*g+e[12],t[13]=n*y+u*m+h*g+e[13],t[14]=o*y+l*m+d*g+e[14],t[15]=a*y+c*m+f*g+e[15]),t},t.triggerPluginCompletionEvent=qr,t.uniqueId=c,t.validateCustomStyleLayer=function(t){var e=[],i=t.id;return void 0===i&&e.push({message:"layers."+i+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+i+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=Dr,t.validateStyle=zr,t.values=function(t){var e=[];for(var i in t)e.push(t[i]);return e},t.vectorTile=ju,t.version="1.11.0",t.warnOnce=ht,t.webpSupported=P,t.window=d,t.wrap=s}),t(["./shared"],function(S){"use strict";function g(t){for(var e="",i=0,r=S.refProperties;i<r.length;i+=1)e+="/"+function t(e){var i=typeof e;if("number"==i||"boolean"==i||"string"==i||null==e)return JSON.stringify(e);if(Array.isArray(e)){for(var r="[",n=0,o=e;n<o.length;n+=1)r+=t(o[n])+",";return r+"]"}for(var a=Object.keys(e).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+t(e[a[u]])+",";return s+"}"}(t[r[i]]);return e}function e(t){this.keyCache={},t&&this.replace(t)}e.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},e.prototype.update=function(t,e){for(var i=this,r=0,n=t;r<n.length;r+=1){var o=n[r];this._layerConfigs[o.id]=o;var a=this._layers[o.id]=S.createStyleLayer(o);a._featureFilter=S.featureFilter(a.filter),this.keyCache[o.id]&&delete this.keyCache[o.id]}for(var s=0,u=e;s<u.length;s+=1){var l=u[s];delete this.keyCache[l],delete this._layerConfigs[l],delete this._layers[l]}this.familiesBySource={};for(var c=0,p=function(t,e){for(var i={},r=0;r<t.length;r++){var n=e&&e[t[r].id]||g(t[r]);e&&(e[t[r].id]=n),(i[n]||(i[n]=[])).push(t[r])}var o=[];for(var a in i)o.push(i[a]);return o}(S.values(this._layerConfigs),this.keyCache);c<p.length;c+=1){var h,d,f,y=p[c].map(function(t){return i._layers[t.id]}),m=y[0];"none"!==m.visibility&&(h=m.source||"",((d=(d=this.familiesBySource[h])||(this.familiesBySource[h]={}))[f=m.sourceLayer||"_geojsonTileLayer"]||(d[f]=[])).push(y))}};function E(t){var e={},i=[];for(var r in t){var n=t[r],o=e[r]={};for(var a in n){var s,u=n[+a];u&&0!==u.bitmap.width&&0!==u.bitmap.height&&(s={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2},i.push(s),o[a]={rect:s,metrics:u.metrics})}}var l=S.potpack(i),c=new S.AlphaImage({width:l.w||1,height:l.h||1});for(var p in t){var h=t[p];for(var d in h){var f,y=h[+d];y&&0!==y.bitmap.width&&0!==y.bitmap.height&&(f=e[p][d].rect,S.AlphaImage.copy(y.bitmap,c,{x:0,y:0},{x:f.x+1,y:f.y+1},y.bitmap))}}this.image=c,this.positions=e}S.register("GlyphAtlas",E);function i(t){this.tileID=new S.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId}function C(t,e,i){for(var r=new S.EvaluationParameters(e),n=0,o=t;n<o.length;n+=1)o[n].recalculate(r,i)}function n(t,n){var e=S.getArrayBuffer(t.request,function(t,e,i,r){t?n(t):e&&n(null,{vectorTile:new S.vectorTile.VectorTile(new S.pbf(e)),rawData:e,cacheControl:i,expires:r})});return function(){e.cancel(),n()}}i.prototype.parse=function(t,e,n,i,o){var r=this;this.status="parsing",this.data=t,this.collisionBoxArray=new S.CollisionBoxArray;var a=new S.DictionaryCoder(Object.keys(t.layers).sort()),s=new S.FeatureIndex(this.tileID,this.promoteId);s.bucketLayerIDs=[];var u,l,c,p,h={},d={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:n},f=e.familiesBySource[this.source];for(var y in f){var m=t.layers[y];if(m){1===m.version&&S.warnOnce('Vector tile source "'+this.source+'" layer "'+y+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var g=a.encode(y),v=[],_=0;_<m.length;_++){var x=m.feature(_),b=s.getId(x,y);v.push({feature:x,id:b,index:_,sourceLayerIndex:g})}for(var M=0,w=f[y];M<w.length;M+=1){var I=w[M],T=I[0];T.minzoom&&this.zoom<Math.floor(T.minzoom)||T.maxzoom&&this.zoom>=T.maxzoom||"none"!==T.visibility&&(C(I,this.zoom,n),(h[T.id]=T.createBucket({index:s.bucketLayerIDs.length,layers:I,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:g,sourceID:this.source})).populate(v,d,this.tileID.canonical),s.bucketLayerIDs.push(I.map(function(t){return t.id})))}}}var L=S.mapObject(d.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(L).length?i.send("getGlyphs",{uid:this.uid,stacks:L},function(t,e){u||(u=t,l=e,A.call(r))}):l={};var z=Object.keys(d.iconDependencies);z.length?i.send("getImages",{icons:z,source:this.source,tileID:this.tileID,type:"icons"},function(t,e){u||(u=t,c=e,A.call(r))}):c={};var D=Object.keys(d.patternDependencies);function A(){if(u)return o(u);if(l&&c&&p){var t=new E(l),e=new S.ImageAtlas(c,p);for(var i in h){var r=h[i];r instanceof S.SymbolBucket?(C(r.layers,this.zoom,n),S.performSymbolLayout(r,l,t.positions,c,e.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):r.hasPattern&&(r instanceof S.LineBucket||r instanceof S.FillBucket||r instanceof S.FillExtrusionBucket)&&(C(r.layers,this.zoom,n),r.addFeatures(d,this.tileID.canonical,e.patternPositions))}this.status="done",o(null,{buckets:S.values(h).filter(function(t){return!t.isEmpty()}),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:e,glyphMap:this.returnDependencies?l:null,iconMap:this.returnDependencies?c:null,glyphPositions:this.returnDependencies?t.positions:null})}}D.length?i.send("getImages",{icons:D,source:this.source,tileID:this.tileID,type:"patterns"},function(t,e){u||(u=t,p=e,A.call(r))}):p={},A.call(this)};function r(t,e,i,r){this.actor=t,this.layerIndex=e,this.availableImages=i,this.loadVectorData=r||n,this.loading={},this.loaded={}}r.prototype.loadTile=function(t,a){var s=this,u=t.uid;this.loading||(this.loading={});var l=!!(t&&t.request&&t.request.collectResourceTiming)&&new S.RequestPerformance(t.request),c=this.loading[u]=new i(t);c.abort=this.loadVectorData(t,function(t,e){if(delete s.loading[u],t||!e)return c.status="done",s.loaded[u]=c,a(t);var i=e.rawData,r={};e.expires&&(r.expires=e.expires),e.cacheControl&&(r.cacheControl=e.cacheControl);var n,o={};!l||(n=l.finish())&&(o.resourceTiming=JSON.parse(JSON.stringify(n))),c.vectorTile=e.vectorTile,c.parse(e.vectorTile,s.layerIndex,s.availableImages,s.actor,function(t,e){return t||!e?a(t):void a(null,S.extend({rawTileData:i.slice(0)},e,r,o))}),s.loaded=s.loaded||{},s.loaded[u]=c})},r.prototype.reloadTile=function(t,r){var n,e,o=this,i=this.loaded,a=t.uid,s=this;i&&i[a]&&((n=i[a]).showCollisionBoxes=t.showCollisionBoxes,e=function(t,e){var i=n.reloadCallback;i&&(delete n.reloadCallback,n.parse(n.vectorTile,s.layerIndex,o.availableImages,s.actor,i)),r(t,e)},"parsing"===n.status?n.reloadCallback=e:"done"===n.status&&(n.vectorTile?n.parse(n.vectorTile,this.layerIndex,this.availableImages,this.actor,e):e()))},r.prototype.abortTile=function(t,e){var i=this.loading,r=t.uid;i&&i[r]&&i[r].abort&&(i[r].abort(),delete i[r]),e()},r.prototype.removeTile=function(t,e){var i=this.loaded,r=t.uid;i&&i[r]&&delete i[r],e()};function o(){this.loaded={}}var s=S.window.ImageBitmap;function u(t,e){if(0!==t.length){a(t[0],e);for(var i=1;i<t.length;i++)a(t[i],!e)}}function a(t,e){for(var i=0,r=0,n=t.length,o=n-1;r<n;o=r++)i+=(t[r][0]-t[o][0])*(t[o][1]+t[r][1]);0<=i!=!!e&&t.reverse()}o.prototype.loadTile=function(t,e){var i=t.uid,r=t.encoding,n=t.rawImageData,o=s&&n instanceof s?this.getImageData(n):n,a=new S.DEMData(i,o,r);this.loaded=this.loaded||{},e(null,this.loaded[i]=a)},o.prototype.getImageData=function(t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);var e=this.offscreenCanvasContext.getImageData(-1,-1,t.width+2,t.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new S.RGBAImage({width:e.width,height:e.height},e.data)},o.prototype.removeTile=function(t){var e=this.loaded,i=t.uid;e&&e[i]&&delete e[i]};function l(t){this._feature=t,this.extent=S.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}var c=S.vectorTile.VectorTileFeature.prototype.toGeoJSON;l.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],e=0,i=this._feature.geometry;e<i.length;e+=1){var r=i[e];t.push([new S.Point$1(r[0],r[1])])}return t}for(var n=[],o=0,a=this._feature.geometry;o<a.length;o+=1){for(var s=[],u=0,l=a[o];u<l.length;u+=1){var c=l[u];s.push(new S.Point$1(c[0],c[1]))}n.push(s)}return n},l.prototype.toGeoJSON=function(t,e,i){return c.call(this,t,e,i)};var p=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=S.EXTENT,this.length=t.length,this._features=t};p.prototype.feature=function(t){return new l(this._features[t])};var t=S.vectorTile.VectorTileFeature,h=d;function d(t,e){this.options=e||{},this.features=t,this.length=t.length}function f(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}d.prototype.feature=function(t){return new f(this.features[t],this.options.extent)},f.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var i=t[e],r=[],n=0;n<i.length;n++)r.push(new S.Point$1(i[n][0],i[n][1]));this.geometry.push(r)}return this.geometry},f.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,i=-1/0,r=1/0,n=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++)var u=a[s],e=Math.min(e,u.x),i=Math.max(i,u.x),r=Math.min(r,u.y),n=Math.max(n,u.y);return[e,r,i,n]},f.prototype.toGeoJSON=t.prototype.toGeoJSON;var y=v,m=h;function v(t){var e=new S.pbf;return function(t,e){for(var i in t.layers)e.writeMessage(3,_,t.layers[i])}(t,e),e.finish()}function _(t,e){e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);for(var i={keys:[],values:[],keycache:{},valuecache:{}},r=0;r<t.length;r++)i.feature=t.feature(r),e.writeMessage(2,x,i);var n=i.keys;for(r=0;r<n.length;r++)e.writeStringField(3,n[r]);var o=i.values;for(r=0;r<o.length;r++)e.writeMessage(4,T,o[r])}function x(t,e){var i=t.feature;void 0!==i.id&&e.writeVarintField(1,i.id),e.writeMessage(2,b,t),e.writeVarintField(3,i.type),e.writeMessage(4,I,i)}function b(t,e){var i=t.feature,r=t.keys,n=t.values,o=t.keycache,a=t.valuecache;for(var s in i.properties){var u=o[s];void 0===u&&(r.push(s),o[s]=u=r.length-1),e.writeVarint(u);var l=i.properties[s],c=typeof l;"string"!=c&&"boolean"!=c&&"number"!=c&&(l=JSON.stringify(l));var p=c+":"+l,h=a[p];void 0===h&&(n.push(l),a[p]=h=n.length-1),e.writeVarint(h)}}function M(t,e){return(e<<3)+(7&t)}function w(t){return t<<1^t>>31}function I(t,e){for(var i=t.loadGeometry(),r=t.type,n=0,o=0,a=i.length,s=0;s<a;s++){var u=i[s],l=1;1===r&&(l=u.length),e.writeVarint(M(1,l));for(var c=3===r?u.length-1:u.length,p=0;p<c;p++){1===p&&1!==r&&e.writeVarint(M(2,c-1));var h=u[p].x-n,d=u[p].y-o;e.writeVarint(w(h)),e.writeVarint(w(d)),n+=h,o+=d}3===r&&e.writeVarint(15)}}function T(t,e){var i=typeof t;"string"==i?e.writeStringField(1,t):"boolean"==i?e.writeBooleanField(7,t):"number"==i&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function L(t,e,i,r){z(t,i,r),z(e,2*i,2*r),z(e,2*i+1,2*r+1)}function z(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function D(t,e,i,r){var n=t-i,o=e-r;return n*n+o*o}y.fromVectorTileJs=v,y.fromGeojsonVt=function(t,e){e=e||{};var i={};for(var r in t)i[r]=new h(t[r].features,e),i[r].name=r,i[r].version=e.version,i[r].extent=e.extent;return v({layers:i})},y.GeoJSONWrapper=m;function A(t){return t[0]}function N(t){return t[1]}function j(t,e,i,r,n){void 0===e&&(e=A),void 0===i&&(i=N),void 0===r&&(r=64),void 0===n&&(n=Float64Array),this.nodeSize=r;for(var o=(this.points=t).length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new n(2*t.length),u=0;u<t.length;u++)s[2*(a[u]=u)]=e(t[u]),s[2*u+1]=i(t[u]);!function t(e,i,r,n,o,a){var s;o-n<=r||(function t(e,i,r,n,o,a){for(;n<o;){var s,u,l,c,p;600<o-n&&(s=o-n+1,u=r-n+1,l=Math.log(s),c=.5*Math.exp(2*l/3),p=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1),t(e,i,r,Math.max(n,Math.floor(r-u*c/s+p)),Math.min(o,Math.floor(r+(s-u)*c/s+p)),a));var h=i[2*r+a],d=n,f=o;for(L(e,i,n,r),i[2*o+a]>h&&L(e,i,n,o);d<f;){for(L(e,i,d,f),d++,f--;i[2*d+a]<h;)d++;for(;i[2*f+a]>h;)f--}i[2*n+a]===h?L(e,i,n,f):L(e,i,++f,o),f<=r&&(n=f+1),r<=f&&(o=f-1)}}(e,i,s=n+o>>1,n,o,a%2),t(e,i,r,n,s-1,a+1),t(e,i,r,1+s,o,a+1))}(a,s,r,0,a.length-1,0)}j.prototype.range=function(t,e,i,r){return function(t,e,i,r,n,o,a){for(var s,u=[0,t.length-1,0],l=[];u.length;){var c=u.pop(),p=u.pop(),h=u.pop();if(p-h<=a)for(var d=h;d<=p;d++)y=e[2*d+1],(s=e[2*d])>=i&&s<=n&&r<=y&&y<=o&&l.push(t[d]);else{var f=Math.floor((h+p)/2),y=e[2*f+1];(s=e[2*f])>=i&&s<=n&&r<=y&&y<=o&&l.push(t[f]);var m=(c+1)%2;(0===c?i<=s:r<=y)&&(u.push(h),u.push(f-1),u.push(m)),(0===c?s<=n:y<=o)&&(u.push(f+1),u.push(p),u.push(m))}}return l}(this.ids,this.coords,t,e,i,r,this.nodeSize)};function k(t){this.options=F(Object.create(P),t),this.trees=new Array(this.options.maxZoom+1)}var P={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!(j.prototype.within=function(t,e,i){return function(t,e,i,r,n,o){for(var a=[0,t.length-1,0],s=[],u=n*n;a.length;){var l=a.pop(),c=a.pop(),p=a.pop();if(c-p<=o)for(var h=p;h<=c;h++)D(e[2*h],e[2*h+1],i,r)<=u&&s.push(t[h]);else{var d=Math.floor((p+c)/2),f=e[2*d],y=e[2*d+1];D(f,y,i,r)<=u&&s.push(t[d]);var m=(l+1)%2;(0===l?i-n<=f:r-n<=y)&&(a.push(p),a.push(d-1),a.push(m)),(0===l?f<=i+n:y<=r+n)&&(a.push(d+1),a.push(c),a.push(m))}}return s}(this.ids,this.coords,t,e,i,this.nodeSize)}),generateId:!1,reduce:null,map:function(t){return t}};function O(t){return{type:"Feature",id:t.id,properties:B(t),geometry:{type:"Point",coordinates:[360*(t.x-.5),(e=(180-360*t.y)*Math.PI/180,360*Math.atan(Math.exp(e))/Math.PI-90)]}};var e}function B(t){var e=t.numPoints,i=1e4<=e?Math.round(e/1e3)+"k":1e3<=e?Math.round(e/100)/10+"k":e;return F(F({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:i})}function U(t){return t/360+.5}function R(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:1<i?1:i}function F(t,e){for(var i in e)t[i]=e[i];return t}function Z(t){return t.x}function V(t){return t.y}function G(t,e,i,r){var n={id:void 0===t?null:t,type:e,geometry:i,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,i=t.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)Y(t,e);else if("Polygon"===i||"MultiLineString"===i)for(var r=0;r<e.length;r++)Y(t,e[r]);else if("MultiPolygon"===i)for(r=0;r<e.length;r++)for(var n=0;n<e[r].length;n++)Y(t,e[r][n])}(n),n}function Y(t,e){for(var i=0;i<e.length;i+=3)t.minX=Math.min(t.minX,e[i]),t.minY=Math.min(t.minY,e[i+1]),t.maxX=Math.max(t.maxX,e[i]),t.maxY=Math.max(t.maxY,e[i+1])}function Q(t,e,i,r){if(e.geometry){var n=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),s=[],u=e.id;if(i.promoteId?u=e.properties[i.promoteId]:i.generateId&&(u=r||0),"Point"===o)W(n,s);else if("MultiPoint"===o)for(var l=0;l<n.length;l++)W(n[l],s);else if("LineString"===o)H(n,s,a,!1);else if("MultiLineString"===o){if(i.lineMetrics){for(l=0;l<n.length;l++)H(n[l],s=[],a,!1),t.push(G(u,"LineString",s,e.properties));return}q(n,s,a,!1)}else if("Polygon"===o)q(n,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"!==o)throw new Error("Input data is not a valid GeoJSON object.");for(l=0;l<e.geometry.geometries.length;l++)Q(t,{id:u,geometry:e.geometry.geometries[l],properties:e.properties},i,r);return}for(l=0;l<n.length;l++){var c=[];q(n[l],c,a,!0),s.push(c)}}t.push(G(u,o,s,e.properties))}}function W(t,e){e.push(X(t[0])),e.push(J(t[1])),e.push(0)}function H(t,e,i,r){for(var n,o,a=0,s=0;s<t.length;s++){var u=X(t[s][0]),l=J(t[s][1]);e.push(u),e.push(l),e.push(0),0<s&&(a+=r?(n*l-u*o)/2:Math.sqrt(Math.pow(u-n,2)+Math.pow(l-o,2))),n=u,o=l}var c=e.length-3;e[2]=1,function t(e,i,r,n){for(var o,a,s,u,l,c,p,h,d,f,y=n,m=r-i>>1,g=r-i,v=e[i],_=e[i+1],x=e[r],b=e[r+1],M=i+3;M<r;M+=3){var w,I=(a=e[M],s=e[M+1],f=d=h=void 0,f=(p=b)-(l=_),0===(d=(c=x)-(u=v))&&0===f||(1<(h=((a-u)*d+(s-l)*f)/(d*d+f*f))?(u=c,l=p):0<h&&(u+=d*h,l+=f*h)),(d=a-u)*d+(f=s-l)*f);y<I?(o=M,y=I):I!==y||(w=Math.abs(M-m))<g&&(o=M,g=w)}n<y&&(3<o-i&&t(e,i,o,n),e[o+2]=y,3<r-o&&t(e,o,r,n))}(e,0,c,i),e[2+c]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function q(t,e,i,r){for(var n=0;n<t.length;n++){var o=[];H(t[n],o,i,r),e.push(o)}}function X(t){return t/360+.5}function J(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:1<i?1:i}function K(t,e,i,r,n,o,a,s){if(r/=e,o>=(i/=e)&&a<r)return t;if(a<i||r<=o)return null;for(var u=[],l=0;l<t.length;l++){var c=t[l],p=c.geometry,h=c.type,d=0===n?c.minX:c.minY,f=0===n?c.maxX:c.maxY;if(i<=d&&f<r)u.push(c);else if(!(f<i||r<=d)){var y=[];if("Point"===h||"MultiPoint"===h)!function(t,e,i,r,n){for(var o=0;o<t.length;o+=3){var a=t[o+n];i<=a&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}(p,y,i,r,n);else if("LineString"===h)$(p,y,i,r,n,!1,s.lineMetrics);else if("MultiLineString"===h)et(p,y,i,r,n,!1);else if("Polygon"===h)et(p,y,i,r,n,!0);else if("MultiPolygon"===h)for(var m=0;m<p.length;m++){var g=[];et(p[m],g,i,r,n,!0),g.length&&y.push(g)}if(y.length){if(s.lineMetrics&&"LineString"===h){for(m=0;m<y.length;m++)u.push(G(c.id,h,y[m],c.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===y.length?(h="LineString",y=y[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===y.length?"Point":"MultiPoint"),u.push(G(c.id,h,y,c.tags))}}}return u.length?u:null}function $(t,e,i,r,n,o,a){for(var s,u,l=tt(t),c=0===n?rt:nt,p=t.start,h=0;h<t.length-3;h+=3){var d=t[h],f=t[h+1],y=t[h+2],m=t[h+3],g=t[h+4],v=0===n?d:f,_=0===n?m:g,x=!1;a&&(s=Math.sqrt(Math.pow(d-m,2)+Math.pow(f-g,2))),v<i?i<_&&(u=c(l,d,f,m,g,i),a&&(l.start=p+s*u)):r<v?_<r&&(u=c(l,d,f,m,g,r),a&&(l.start=p+s*u)):it(l,d,f,y),_<i&&i<=v&&(u=c(l,d,f,m,g,i),x=!0),r<_&&v<=r&&(u=c(l,d,f,m,g,r),x=!0),!o&&x&&(a&&(l.end=p+s*u),e.push(l),l=tt(t)),a&&(p+=s)}var b=t.length-3,d=t[b],f=t[b+1],y=t[b+2];(v=0===n?d:f)>=i&&v<=r&&it(l,d,f,y),b=l.length-3,o&&3<=b&&(l[b]!==l[0]||l[b+1]!==l[1])&&it(l,l[0],l[1],l[2]),l.length&&e.push(l)}function tt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function et(t,e,i,r,n,o){for(var a=0;a<t.length;a++)$(t[a],e,i,r,n,o,!1)}function it(t,e,i,r){t.push(e),t.push(i),t.push(r)}function rt(t,e,i,r,n,o){var a=(o-e)/(r-e);return t.push(o),t.push(i+(n-i)*a),t.push(1),a}function nt(t,e,i,r,n,o){var a=(o-i)/(n-i);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function ot(t,e){for(var i=[],r=0;r<t.length;r++){var n,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)n=at(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){n=[];for(var s=0;s<o.geometry.length;s++)n.push(at(o.geometry[s],e))}else if("MultiPolygon"===a)for(n=[],s=0;s<o.geometry.length;s++){for(var u=[],l=0;l<o.geometry[s].length;l++)u.push(at(o.geometry[s][l],e));n.push(u)}i.push(G(o.id,a,n,o.tags))}return i}function at(t,e){var i=[];i.size=t.size,void 0!==t.start&&(i.start=t.start,i.end=t.end);for(var r=0;r<t.length;r+=3)i.push(t[r]+e,t[r+1],t[r+2]);return i}function st(t,e){if(t.transformed)return t;for(var i,r=1<<t.z,n=t.x,o=t.y,a=0;a<t.features.length;a++){var s=t.features[a],u=s.geometry,l=s.type;if(s.geometry=[],1===l)for(i=0;i<u.length;i+=2)s.geometry.push(ut(u[i],u[i+1],e,r,n,o));else for(i=0;i<u.length;i++){for(var c=[],p=0;p<u[i].length;p+=2)c.push(ut(u[i][p],u[i][p+1],e,r,n,o));s.geometry.push(c)}}return t.transformed=!0,t}function ut(t,e,i,r,n,o){return[Math.round(i*(t*r-n)),Math.round(i*(e*r-o))]}function lt(t,e,i,r,n){for(var o=e===n.maxZoom?0:n.tolerance/((1<<e)*n.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,function(t,e,i,r){var n=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<n.length;s+=3)a.push(n[s]),a.push(n[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)ct(a,n,t,i,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<n.length;s++)ct(a,n[s],t,i,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<n.length;u++){var l=n[u];for(s=0;s<l.length;s++)ct(a,l[s],t,i,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var p in c={},e.tags)c[p]=e.tags[p];c.mapbox_clip_start=n.start/n.size,c.mapbox_clip_end=n.end/n.size}var h={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(h.id=e.id),t.features.push(h)}}(a,t[s],o,n);var u=t[s].minX,l=t[s].minY,c=t[s].maxX,p=t[s].maxY;u<a.minX&&(a.minX=u),l<a.minY&&(a.minY=l),c>a.maxX&&(a.maxX=c),p>a.maxY&&(a.maxY=p)}return a}function ct(t,e,i,r,n,o){var a=r*r;if(0<r&&e.size<(n?a:r))i.numPoints+=e.length/3;else{for(var s=[],u=0;u<e.length;u+=3)(0===r||e[u+2]>a)&&(i.numSimplified++,s.push(e[u]),s.push(e[u+1])),i.numPoints++;n&&function(t,e){for(var i=0,r=0,n=t.length,o=n-2;r<n;o=r,r+=2)i+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(0<i===e)for(r=0,n=t.length;r<n/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[n-2-r],t[r+1]=t[n-1-r],t[n-2-r]=a,t[n-1-r]=s}}(s,o),t.push(s)}}function pt(t,e){var i=(e=this.options=function(t,e){for(var i in e)t[i]=e[i];return t}(Object.create(this.options),e)).debug;if(i&&console.time("preprocess data"),e.maxZoom<0||24<e.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r,n,o,a,s,u,l=function(t,e){var i=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)Q(i,t.features[r],e,r);else Q(i,"Feature"===t.type?t:{geometry:t},e);return i}(t,e);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=l,o=(n=e).buffer/n.extent,s=K(a=r,1,-1-o,o,0,-1,2,n),u=K(r,1,1-o,2+o,0,-1,2,n),(s||u)&&(a=K(r,1,-o,1+o,0,-1,2,n)||[],s&&(a=ot(s,1).concat(a)),u&&(a=a.concat(ot(u,-1)))),(l=a).length&&this.splitTile(l,0,0,0),i&&(l.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ht(t,e,i){return 32*((1<<t)*i+e)+t}function dt(t,e){var i=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var r=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!r)return e(null,null);var n=new p(r.features),o=y(n);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:n,rawData:o.buffer})}k.prototype.load=function(t){var e=this.options,i=e.log,r=e.minZoom,n=e.maxZoom,o=e.nodeSize;i&&console.time("total time");var a="prepare "+t.length+" points";i&&console.time(a),this.points=t;for(var s,u,l,c,p=[],h=0;h<t.length;h++)t[h].geometry&&p.push((s=t[h],u=h,0,l=s.geometry.coordinates,c=l[1],{x:U(l[0]),y:R(c),zoom:1/0,index:u,parentId:-1}));this.trees[n+1]=new j(p,Z,V,o,Float32Array),i&&console.timeEnd(a);for(var d=n;r<=d;d--){var f=+Date.now(),p=this._cluster(p,d);this.trees[d]=new j(p,Z,V,o,Float32Array),i&&console.log("z%d: %d clusters in %dms",d,p.length,Date.now()-f)}return i&&console.timeEnd("total time"),this},k.prototype.getClusters=function(t,e){var i=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),n=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(360<=t[2]-t[0])i=-180,n=180;else if(n<i){var a=this.getClusters([i,r,180,o],e),s=this.getClusters([-180,r,n,o],e);return a.concat(s)}for(var u=this.trees[this._limitZoom(e)],l=[],c=0,p=u.range(U(i),R(o),U(n),R(r));c<p.length;c+=1){var h=u.points[p[c]];l.push(h.numPoints?O(h):this.points[h.index])}return l},k.prototype.getChildren=function(t){var e=this._getOriginId(t),i=this._getOriginZoom(t),r="No cluster with the specified id.",n=this.trees[i];if(!n)throw new Error(r);var o=n.points[e];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,i-1)),s=[],u=0,l=n.within(o.x,o.y,a);u<l.length;u+=1){var c=n.points[l[u]];c.parentId===t&&s.push(c.numPoints?O(c):this.points[c.index])}if(0===s.length)throw new Error(r);return s},k.prototype.getLeaves=function(t,e,i){var r=[];return this._appendLeaves(r,t,e=e||10,i=i||0,0),r},k.prototype.getTile=function(t,e,i){var r=this.trees[this._limitZoom(t)],n=Math.pow(2,t),o=this.options,a=o.radius/o.extent,s=(i-a)/n,u=(i+1+a)/n,l={features:[]};return this._addTileFeatures(r.range((e-a)/n,s,(e+1+a)/n,u),r.points,e,i,n,l),0===e&&this._addTileFeatures(r.range(1-a/n,s,1,u),r.points,n,i,n,l),e===n-1&&this._addTileFeatures(r.range(0,s,a/n,u),r.points,-1,i,n,l),l.features.length?l:null},k.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var i=this.getChildren(t);if(e++,1!==i.length)break;t=i[0].properties.cluster_id}return e},k.prototype._appendLeaves=function(t,e,i,r,n){for(var o=0,a=this.getChildren(e);o<a.length;o+=1){var s=a[o],u=s.properties;if(u&&u.cluster?n+u.point_count<=r?n+=u.point_count:n=this._appendLeaves(t,u.cluster_id,i,r,n):n<r?n++:t.push(s),t.length===i)break}return n},k.prototype._addTileFeatures=function(t,e,i,r,n,o){for(var a=0,s=t;a<s.length;a+=1){var u=e[s[a]],l=u.numPoints,c={type:1,geometry:[[Math.round(this.options.extent*(u.x*n-i)),Math.round(this.options.extent*(u.y*n-r))]],tags:l?B(u):this.points[u.index].properties},p=void 0;l?p=u.id:this.options.generateId?p=u.index:this.points[u.index].id&&(p=this.points[u.index].id),void 0!==p&&(c.id=p),o.features.push(c)}},k.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))},k.prototype._cluster=function(t,e){for(var i=[],r=this.options,n=r.reduce,o=r.minPoints,a=r.radius/(r.extent*Math.pow(2,e)),s=0;s<t.length;s++){var u=t[s];if(!(u.zoom<=e)){u.zoom=e;for(var l=this.trees[e+1],c=l.within(u.x,u.y,a),p=u.numPoints||1,h=p,d=0,f=c;d<f.length;d+=1){var y=l.points[f[d]];y.zoom>e&&(h+=y.numPoints||1)}if(o<=h){for(var m=u.x*p,g=u.y*p,v=n&&1<p?this._map(u,!0):null,_=(s<<5)+(e+1)+this.points.length,x=0,b=c;x<b.length;x+=1){var M,w=l.points[b[x]];w.zoom<=e||(w.zoom=e,M=w.numPoints||1,m+=w.x*M,g+=w.y*M,w.parentId=_,n&&n(v=v||this._map(u,!0),this._map(w)))}u.parentId=_,i.push({x:m/h,y:g/h,zoom:1/0,id:_,parentId:-1,numPoints:h,properties:v})}else if(i.push(u),1<h)for(var I=0,T=c;I<T.length;I+=1){var L=l.points[T[I]];L.zoom<=e||(L.zoom=e,i.push(L))}}}return i},k.prototype._getOriginId=function(t){return t-this.points.length>>5},k.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},pt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!(k.prototype._map=function(t,e){if(t.numPoints)return e?F({},t.properties):t.properties;var i=this.points[t.index].properties,r=this.options.map(i);return e&&r===i?F({},r):r}),promoteId:null,generateId:!1,debug:0},pt.prototype.splitTile=function(t,e,i,r,n,o,a){for(var s=[t,e,i,r],u=this.options,l=u.debug;s.length;){r=s.pop(),i=s.pop(),e=s.pop(),t=s.pop();var c,p,h,d,f,y,m,g,v,_,x,b=1<<e,M=ht(e,i,r),w=this.tiles[M];if(!w&&(1<l&&console.time("creation"),w=this.tiles[M]=lt(t,e,i,r,u),this.tileCoords.push({z:e,x:i,y:r}),l)&&(1<l&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,i,r,w.numFeatures,w.numPoints,w.numSimplified),console.timeEnd("creation")),c="z"+e,this.stats[c]=(this.stats[c]||0)+1,this.total++),w.source=t,n){if(e===u.maxZoom||e===n)continue;var I=1<<n-e;if(i!==Math.floor(o/I)||r!==Math.floor(a/I))continue}else if(e===u.indexMaxZoom||w.numPoints<=u.indexMaxPoints)continue;w.source=null,0!==t.length&&(1<l&&console.time("clipping"),y=.5-(f=.5*u.buffer/u.extent),g=1+f,v=p=h=d=null,_=K(t,b,i-f,i+(m=.5+f),0,w.minX,w.maxX,u),x=K(t,b,i+y,i+g,0,w.minX,w.maxX,u),t=null,_&&(v=K(_,b,r-f,r+m,1,w.minY,w.maxY,u),p=K(_,b,r+y,r+g,1,w.minY,w.maxY,u),_=null),x&&(h=K(x,b,r-f,r+m,1,w.minY,w.maxY,u),d=K(x,b,r+y,r+g,1,w.minY,w.maxY,u),x=null),1<l&&console.timeEnd("clipping"),s.push(v||[],e+1,2*i,2*r),s.push(p||[],e+1,2*i,2*r+1),s.push(h||[],e+1,2*i+1,2*r),s.push(d||[],e+1,2*i+1,2*r+1))}},pt.prototype.getTile=function(t,e,i){var r=this.options,n=r.extent,o=r.debug;if(t<0||24<t)return null;var a=1<<t,s=ht(t,e=(e%a+a)%a,i);if(this.tiles[s])return st(this.tiles[s],n);1<o&&console.log("drilling down to z%d-%d-%d",t,e,i);for(var u,l=t,c=e,p=i;!u&&0<l;)l--,c=Math.floor(c/2),p=Math.floor(p/2),u=this.tiles[ht(l,c,p)];return u&&u.source?(1<o&&console.log("found parent tile z%d-%d-%d",l,c,p),1<o&&console.time("drilling down"),this.splitTile(u.source,l,c,p,t,e,i),1<o&&console.timeEnd("drilling down"),this.tiles[s]?st(this.tiles[s],n):null):null};function ft(t){var i=this;this.self=t,this.actor=new S.Actor(t,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:r,geojson:mt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(i.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');i.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(t){if(S.plugin.isParsed())throw new Error("RTL text plugin already registered.");S.plugin.applyArabicShaping=t.applyArabicShaping,S.plugin.processBidirectionalText=t.processBidirectionalText,S.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}var yt,mt=((yt=r)&&(gt.__proto__=yt),((gt.prototype=Object.create(yt&&yt.prototype)).constructor=gt).prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},gt.prototype._loadData=function(){var n,f,o,a=this;this._pendingCallback&&this._pendingLoadDataParams&&(n=this._pendingCallback,f=this._pendingLoadDataParams,delete this._pendingCallback,delete this._pendingLoadDataParams,o=!!(f&&f.request&&f.request.collectResourceTiming)&&new S.RequestPerformance(f.request),this.loadGeoJSON(f,function(t,e){if(t||!e)return n(t);if("object"!=typeof e)return n(new Error("Input data given to '"+f.source+"' is not a valid GeoJSON object."));!function t(e,i){var r,n=e&&e.type;if("FeatureCollection"===n)for(r=0;r<e.features.length;r++)t(e.features[r],i);else if("GeometryCollection"===n)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],i);else if("Feature"===n)t(e.geometry,i);else if("Polygon"===n)u(e.coordinates,i);else if("MultiPolygon"===n)for(r=0;r<e.coordinates.length;r++)u(e.coordinates[r],i);return e}(e,!0);try{a._geoJSONIndex=f.cluster?new k(function(){var t=f.superclusterOptions,e=f.clusterProperties;if(!e||!t)return t;for(var o={},a={},s={accumulated:null,zoom:0},u={properties:null},l=Object.keys(e),i=0,r=l;i<r.length;i+=1){var n=r[i],c=e[n],p=c[0],h=S.createExpression(c[1]),d=S.createExpression("string"==typeof p?[p,["accumulated"],["get",n]]:p);o[n]=h.value,a[n]=d.value}return t.map=function(t){u.properties=t;for(var e={},i=0,r=l;i<r.length;i+=1){var n=r[i];e[n]=o[n].evaluate(s,u)}return e},t.reduce=function(t,e){u.properties=e;for(var i=0,r=l;i<r.length;i+=1){var n=r[i];s.accumulated=t[n],t[n]=a[n].evaluate(s,u)}},t}()).load(e.features):new pt(e,f.geojsonVtOptions)}catch(t){return n(t)}a.loaded={};var i,r={};!o||(i=o.finish())&&(r.resourceTiming={},r.resourceTiming[f.source]=JSON.parse(JSON.stringify(i))),n(null,r)}))},gt.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},gt.prototype.reloadTile=function(t,e){var i=this.loaded;return i&&i[t.uid]?yt.prototype.reloadTile.call(this,t,e):this.loadTile(t,e)},gt.prototype.loadGeoJSON=function(e,i){if(e.request)S.getJSON(e.request,i);else{if("string"!=typeof e.data)return i(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return i(null,JSON.parse(e.data))}catch(t){return i(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},gt.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},gt.prototype.getClusterExpansionZoom=function(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}},gt.prototype.getClusterChildren=function(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}},gt.prototype.getClusterLeaves=function(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}},gt);function gt(t,e,i,r){yt.call(this,t,e,i,dt),r&&(this.loadGeoJSON=r)}return ft.prototype.setReferrer=function(t,e){this.referrer=e},ft.prototype.setImages=function(t,e,i){for(var r in this.availableImages[t]=e,this.workerSources[t]){var n=this.workerSources[t][r];for(var o in n)n[o].availableImages=e}i()},ft.prototype.setLayers=function(t,e,i){this.getLayerIndex(t).replace(e),i()},ft.prototype.updateLayers=function(t,e,i){this.getLayerIndex(t).update(e.layers,e.removedIds),i()},ft.prototype.loadTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).loadTile(e,i)},ft.prototype.loadDEMTile=function(t,e,i){this.getDEMWorkerSource(t,e.source).loadTile(e,i)},ft.prototype.reloadTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).reloadTile(e,i)},ft.prototype.abortTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).abortTile(e,i)},ft.prototype.removeTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).removeTile(e,i)},ft.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},ft.prototype.removeSource=function(t,e,i){var r;this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]&&(r=this.workerSources[t][e.type][e.source],delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,i):i())},ft.prototype.loadWorkerSource=function(t,e,i){try{this.self.importScripts(e.url),i()}catch(t){i(t.toString())}},ft.prototype.syncRTLPluginState=function(t,e,i){try{S.plugin.setState(e);var r,n=S.plugin.getPluginURL();S.plugin.isLoaded()&&!S.plugin.isParsed()&&null!=n&&(this.self.importScripts(n),i((r=S.plugin.isParsed())?void 0:new Error("RTL Text Plugin failed to import scripts from "+n),r))}catch(t){i(t.toString())}},ft.prototype.getAvailableImages=function(t){return this.availableImages[t]||[]},ft.prototype.getLayerIndex=function(t){return this.layerIndexes[t]||(this.layerIndexes[t]=new e)},ft.prototype.getWorkerSource=function(r,t,e){var n=this;return this.workerSources[r]||(this.workerSources[r]={}),this.workerSources[r][t]||(this.workerSources[r][t]={}),this.workerSources[r][t][e]||(this.workerSources[r][t][e]=new this.workerSourceTypes[t]({send:function(t,e,i){n.actor.send(t,e,i,r)}},this.getLayerIndex(r),this.getAvailableImages(r))),this.workerSources[r][t][e]},ft.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new o),this.demWorkerSources[t][e]},ft.prototype.enforceCacheSizeLimit=function(t,e){S.enforceCacheSizeLimit(e)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new ft(self)),ft}),t(["./shared"],function(vt){"use strict";var i=vt.createCommonjsModule(function(t){function a(t){return!e(t)}function e(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if("Worker"in window&&"Blob"in window&&"URL"in window){var t,e,i=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(i);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(e){var i=e.getImageData(0,0,1,1);return i&&i.width===t.width}}()?(void 0===i[o=t&&t.failIfMajorPerformanceCaveat]&&(i[o]=function(){var t,e,i,r=(t=o,e=document.createElement("canvas"),(i=Object.create(a.webGLContextAttributes)).failIfMajorPerformanceCaveat=t,e.probablySupportsContext?e.probablySupportsContext("webgl",i)||e.probablySupportsContext("experimental-webgl",i):e.supportsContext?e.supportsContext("webgl",i)||e.supportsContext("experimental-webgl",i):e.getContext("webgl",i)||e.getContext("experimental-webgl",i));if(!r)return!1;var n=r.createShader(r.VERTEX_SHADER);return!(!n||r.isContextLost())&&(r.shaderSource(n,"void main() {}"),r.compileShader(n),!0===r.getShaderParameter(n,r.COMPILE_STATUS))}()),i[o]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var o}t.exports?t.exports=a:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=a,window.mapboxgl.notSupportedReason=e);var i={};a.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),_={create:function(t,e,i){var r=vt.window.document.createElement(t);return void 0!==e&&(r.className=e),i&&i.appendChild(r),r},createNS:function(t,e){return vt.window.document.createElementNS(t,e)}},r=vt.window.document&&vt.window.document.documentElement.style;function t(t){if(!r)return t[0];for(var e=0;e<t.length;e++)if(t[e]in r)return t[e];return t[0]}var e,n=t(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);_.disableDrag=function(){r&&n&&(e=r[n],r[n]="none")},_.enableDrag=function(){r&&n&&(r[n]=e)};var o=t(["transform","WebkitTransform"]),a=!(_.setTransform=function(t,e){t.style[o]=e});try{var s=Object.defineProperty({},"passive",{get:function(){a=!0}});vt.window.addEventListener("test",s,s),vt.window.removeEventListener("test",s,s)}catch(vt){a=!1}_.addEventListener=function(t,e,i,r){void 0===r&&(r={}),t.addEventListener(e,i,"passive"in r&&a?r:r.capture)},_.removeEventListener=function(t,e,i,r){void 0===r&&(r={}),t.removeEventListener(e,i,"passive"in r&&a?r:r.capture)};var u=function(t){t.preventDefault(),t.stopPropagation(),vt.window.removeEventListener("click",u,!0)};_.suppressClick=function(){vt.window.addEventListener("click",u,!0),vt.window.setTimeout(function(){vt.window.removeEventListener("click",u,!0)},0)},_.mousePos=function(t,e){var i=t.getBoundingClientRect();return new vt.Point(e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop)},_.touchPos=function(t,e){for(var i=t.getBoundingClientRect(),r=[],n=0;n<e.length;n++)r.push(new vt.Point(e[n].clientX-i.left-t.clientLeft,e[n].clientY-i.top-t.clientTop));return r},_.mouseButton=function(t){return void 0!==vt.window.InstallTrigger&&2===t.button&&t.ctrlKey&&0<=vt.window.navigator.platform.toUpperCase().indexOf("MAC")?0:t.button},_.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var l,c=((l=vt.Evented)&&(f.__proto__=l),((f.prototype=Object.create(l&&l.prototype)).constructor=f).prototype.isLoaded=function(){return this.loaded},f.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t)){for(var e=0,i=this.requestors;e<i.length;e+=1){var r=i[e];this._notify(r.ids,r.callback)}this.requestors=[]}},f.prototype.getImage=function(t){return this.images[t]},f.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},f.prototype._validate=function(t,e){var i=!0;return this._validateStretch(e.stretchX,e.data&&e.data.width)||(this.fire(new vt.ErrorEvent(new Error('Image "'+t+'" has invalid "stretchX" value'))),i=!1),this._validateStretch(e.stretchY,e.data&&e.data.height)||(this.fire(new vt.ErrorEvent(new Error('Image "'+t+'" has invalid "stretchY" value'))),i=!1),this._validateContent(e.content,e)||(this.fire(new vt.ErrorEvent(new Error('Image "'+t+'" has invalid "content" value'))),i=!1),i},f.prototype._validateStretch=function(t,e){if(!t)return!0;for(var i=0,r=0,n=t;r<n.length;r+=1){var o=n[r];if(o[0]<i||o[1]<o[0]||e<o[1])return!1;i=o[1]}return!0},f.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},f.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},f.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},f.prototype.listImages=function(){return Object.keys(this.images)},f.prototype.getImages=function(t,e){var i=!0;if(!this.isLoaded())for(var r=0,n=t;r<n.length;r+=1)this.images[n[r]]||(i=!1);this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})},f.prototype._notify=function(t,e){for(var i={},r=0,n=t;r<n.length;r+=1){var o=n[r];this.images[o]||this.fire(new vt.Event("styleimagemissing",{id:o}));var a=this.images[o];a?i[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf,version:a.version,stretchX:a.stretchX,stretchY:a.stretchY,content:a.content,hasRenderCallback:Boolean(a.userImage&&a.userImage.render)}:vt.warnOnce('Image "'+o+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}e(null,i)},f.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},f.prototype.getPattern=function(t){var e,i,r=this.patterns[t],n=this.getImage(t);return n?r&&r.position.version===n.version?r.position:(r?r.position.version=n.version:(e={w:n.data.width+2,h:n.data.height+2,x:0,y:0},i=new vt.ImagePosition(e,n),this.patterns[t]={bin:e,position:i}),this._updatePatternAtlas(),this.patterns[t].position):null},f.prototype.bind=function(t){var e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new vt.Texture(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)},f.prototype._updatePatternAtlas=function(){var t=[];for(var e in this.patterns)t.push(this.patterns[e].bin);var i=vt.potpack(t),r=i.w,n=i.h,o=this.atlasImage;for(var a in o.resize({width:r||1,height:n||1}),this.patterns){var s=this.patterns[a].bin,u=s.x+1,l=s.y+1,c=this.images[a].data,p=c.width,h=c.height;vt.RGBAImage.copy(c,o,{x:0,y:0},{x:u,y:l},{width:p,height:h}),vt.RGBAImage.copy(c,o,{x:0,y:h-1},{x:u,y:l-1},{width:p,height:1}),vt.RGBAImage.copy(c,o,{x:0,y:0},{x:u,y:l+h},{width:p,height:1}),vt.RGBAImage.copy(c,o,{x:p-1,y:0},{x:u-1,y:l},{width:1,height:h}),vt.RGBAImage.copy(c,o,{x:0,y:0},{x:u+p,y:l},{width:1,height:h})}this.dirty=!0},f.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},f.prototype.dispatchRenderCallbacks=function(t){for(var e,i,r=0,n=t;r<n.length;r+=1){var o,a=n[r];this.callbackDispatchedThisFrame[a]||(this.callbackDispatchedThisFrame[a]=!0,o=this.images[a],i=void 0,(i=(e=o).userImage)&&i.render&&i.render()&&(e.data.replace(new Uint8Array(i.data.buffer)),1)&&this.updateImage(a,o))}},f),p=y,h=y,d=1e20;function f(){l.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new vt.RGBAImage({width:1,height:1}),this.dirty=!0}function y(t,e,i,r,n,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=n||"sans-serif",this.fontWeight=o||"normal",this.radius=i||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function m(t,e,i,r,n,o,a){for(var s=0;s<e;s++){for(var u=0;u<i;u++)r[u]=t[u*e+s];for(g(r,n,o,a,i),u=0;u<i;u++)t[u*e+s]=n[u]}for(u=0;u<i;u++){for(s=0;s<e;s++)r[s]=t[u*e+s];for(g(r,n,o,a,e),s=0;s<e;s++)t[u*e+s]=Math.sqrt(n[s])}}function g(t,e,i,r,n){r[i[0]=0]=-d,r[1]=+d;for(var o=1,a=0;o<n;o++){for(var s=(t[o]+o*o-(t[i[a]]+i[a]*i[a]))/(2*o-2*i[a]);s<=r[a];)a--,s=(t[o]+o*o-(t[i[a]]+i[a]*i[a]))/(2*o-2*i[a]);i[++a]=o,r[a]=s,r[a+1]=+d}for(a=o=0;o<n;o++){for(;r[a+1]<o;)a++;e[o]=(o-i[a])*(o-i[a])+t[i[a]]}}y.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var n=e.data[4*r+3]/255;this.gridOuter[r]=1==n?0:0==n?d:Math.pow(Math.max(0,.5-n),2),this.gridInner[r]=1==n?d:0==n?0:Math.pow(Math.max(0,n-.5),2)}for(m(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),m(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++)i[r]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[r]-this.gridInner[r])/this.radius+this.cutoff))));return i},p.default=h;var v=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};v.prototype.setURL=function(t){this.url=t},v.prototype.getGlyphs=function(t,l){var u=this,e=[];for(var i in t)for(var r=0,n=t[i];r<n.length;r+=1)e.push({stack:i,id:n[r]});vt.asyncAll(e,function(t,i){var r=t.stack,n=t.id,o=u.entries[r],e=(o=o||(u.entries[r]={glyphs:{},requests:{},ranges:{}})).glyphs[n];if(void 0===e){if(e=u._tinySDF(o,r,n))return o.glyphs[n]=e,void i(null,{stack:r,id:n,glyph:e});var a,s=Math.floor(n/256);65535<256*s?i(new Error("glyphs > 65535 not supported")):o.ranges[s]?i(null,{stack:r,id:n,glyph:e}):((a=o.requests[s])||(a=o.requests[s]=[],v.loadGlyphRange(r,s,u.url,u.requestManager,function(t,e){if(e){for(var i in e)u._doesCharSupportLocalGlyph(+i)||(o.glyphs[+i]=e[+i]);o.ranges[s]=!0}for(var r=0,n=a;r<n.length;r+=1)(0,n[r])(t,e);delete o.requests[s]})),a.push(function(t,e){t?i(t):e&&i(null,{stack:r,id:n,glyph:e[n]||null})}))}else i(null,{stack:r,id:n,glyph:e})},function(t,e){if(t)l(t);else if(e){for(var i={},r=0,n=e;r<n.length;r+=1){var o=n[r],a=o.stack,s=o.id,u=o.glyph;(i[a]||(i[a]={}))[s]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}l(null,i)}})},v.prototype._doesCharSupportLocalGlyph=function(t){return!!this.localIdeographFontFamily&&(vt.isChar["CJK Unified Ideographs"](t)||vt.isChar["Hangul Syllables"](t)||vt.isChar.Hiragana(t)||vt.isChar.Katakana(t))},v.prototype._tinySDF=function(t,e,i){var r=this.localIdeographFontFamily;if(r&&this._doesCharSupportLocalGlyph(i)){var n,o=t.tinySDF;return o||(n="400",/bold/i.test(e)?n="900":/medium/i.test(e)?n="500":/light/i.test(e)&&(n="200"),o=t.tinySDF=new v.TinySDF(24,3,8,.25,r,n)),{id:i,bitmap:new vt.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(i))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},v.loadGlyphRange=function(t,e,i,r,a){var n=256*e,o=255+n,s=r.transformRequest(r.normalizeGlyphsURL(i).replace("{fontstack}",t).replace("{range}",n+"-"+o),vt.ResourceType.Glyphs);vt.getArrayBuffer(s,function(t,e){if(t)a(t);else if(e){for(var i={},r=0,n=vt.parseGlyphPBF(e);r<n.length;r+=1){var o=n[r];i[o.id]=o}a(null,i)}})},v.TinySDF=p;function x(){this.specification=vt.styleSpec.light.position}x.prototype.possiblyEvaluate=function(t,e){return vt.sphericalToCartesian(t.expression.evaluate(e))},x.prototype.interpolate=function(t,e,i){return{x:vt.number(t.x,e.x,i),y:vt.number(t.y,e.y,i),z:vt.number(t.z,e.z,i)}};var b,M=new vt.Properties({anchor:new vt.DataConstantProperty(vt.styleSpec.light.anchor),position:new x,color:new vt.DataConstantProperty(vt.styleSpec.light.color),intensity:new vt.DataConstantProperty(vt.styleSpec.light.intensity)}),w=((b=vt.Evented)&&(T.__proto__=b),((T.prototype=Object.create(b&&b.prototype)).constructor=T).prototype.getLight=function(){return this._transitionable.serialize()},T.prototype.setLight=function(t,e){if(void 0===e&&(e={}),!this._validate(vt.validateLight,t,e))for(var i in t){var r=t[i];vt.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-"-transition".length),r):this._transitionable.setValue(i,r)}},T.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},T.prototype.hasTransition=function(){return this._transitioning.hasTransition()},T.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},T.prototype._validate=function(t,e,i){return(!i||!1!==i.validate)&&vt.emitValidationErrors(this,t.call(vt.validateStyle,vt.extend({value:e,style:{glyphs:!0,sprite:!0},styleSpec:vt.styleSpec})))},T),I=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};function T(t){b.call(this),this._transitionable=new vt.Transitionable(M),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}I.prototype.getDash=function(t,e){var i=t.join(",")+String(e);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(t,e)),this.dashEntry[i]},I.prototype.getDashRanges=function(t,e,i){var r=[],n=t.length%2==1?-t[t.length-1]*i:0,o=t[0]*i,a=!0;r.push({left:n,right:o,isDash:a,zeroLength:0===t[0]});for(var s=t[0],u=1;u<t.length;u++){var l=t[u];r.push({left:n=s*i,right:o=(s+=l)*i,isDash:a=!a,zeroLength:0===l})}return r},I.prototype.addRoundDash=function(t,e,i){for(var r=e/2,n=-i;n<=i;n++)for(var o=this.width*(this.nextRow+i+n),a=0,s=t[a],u=0;u<this.width;u++){1<u/s.right&&(s=t[++a]);var l,c=Math.abs(u-s.left),p=Math.abs(u-s.right),h=Math.min(c,p),d=void 0,f=n/i*(1+r);d=s.isDash?(l=r-Math.abs(f),Math.sqrt(h*h+l*l)):r-Math.sqrt(h*h+f*f),this.data[o+u]=Math.max(0,Math.min(255,d+128))}},I.prototype.addRegularDash=function(t){for(var e=t.length-1;0<=e;--e){var i=t[e],r=t[e+1];i.zeroLength?t.splice(e,1):r&&r.isDash===i.isDash&&(r.left=i.left,t.splice(e,1))}var n=t[0],o=t[t.length-1];n.isDash===o.isDash&&(n.left=o.left-this.width,o.right=n.right+this.width);for(var a=this.width*this.nextRow,s=0,u=t[s],l=0;l<this.width;l++){1<l/u.right&&(u=t[++s]);var c=Math.abs(l-u.left),p=Math.abs(l-u.right),h=Math.min(c,p);this.data[a+l]=Math.max(0,Math.min(255,(u.isDash?h:-h)+128))}},I.prototype.addDash=function(t,e){var i=e?7:0,r=2*i+1;if(this.nextRow+r>this.height)return vt.warnOnce("LineAtlas out of space"),null;for(var n,o,a=0,s=0;s<t.length;s++)a+=t[s];0!==a&&(n=this.width/a,o=this.getDashRanges(t,this.width,n),e?this.addRoundDash(o,n,i):this.addRegularDash(o));var u={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:a};return this.nextRow+=r,this.dirty=!0,u},I.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var L=function t(e,i){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=vt.uniqueId();for(var r=this.workerPool.acquire(this.id),n=0;n<r.length;n++){var o=new t.Actor(r[n],i,this.id);o.name="Worker "+n,this.actors.push(o)}};function z(r,n,o){function t(t,e){if(t)return o(t);var i;e&&(i=vt.pick(vt.extend(e,r),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]),e.vector_layers&&(i.vectorLayers=e.vector_layers,i.vectorLayerIds=i.vectorLayers.map(function(t){return t.id})),i.tiles=n.canonicalizeTileset(i,r.url),o(null,i))}return r.url?vt.getJSON(n.transformRequest(n.normalizeSourceURL(r.url),vt.ResourceType.Source),t):vt.browser.frame(function(){return t(null,r)})}L.prototype.broadcast=function(i,r,t){vt.asyncAll(this.actors,function(t,e){t.send(i,r,e)},t=t||function(){})},L.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},L.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},L.Actor=vt.Actor;function D(t,e,i){this.bounds=vt.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=i||24}D.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},D.prototype.contains=function(t){var e=Math.pow(2,t.z),i=Math.floor(vt.mercatorXfromLng(this.bounds.getWest())*e),r=Math.floor(vt.mercatorYfromLat(this.bounds.getNorth())*e),n=Math.ceil(vt.mercatorXfromLng(this.bounds.getEast())*e),o=Math.ceil(vt.mercatorYfromLat(this.bounds.getSouth())*e);return t.x>=i&&t.x<n&&t.y>=r&&t.y<o};var A,S,E,C,N,j,k,P=((k=vt.Evented)&&(J.__proto__=k),((J.prototype=Object.create(k&&k.prototype)).constructor=J).prototype.load=function(){var i=this;this._loaded=!1,this.fire(new vt.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=z(this._options,this.map._requestManager,function(t,e){i._tileJSONRequest=null,i._loaded=!0,t?i.fire(new vt.ErrorEvent(t)):e&&(vt.extend(i,e),e.bounds&&(i.tileBounds=new D(e.bounds,i.minzoom,i.maxzoom)),vt.postTurnstileEvent(e.tiles,i.map._requestManager._customAccessToken),vt.postMapLoadEvent(e.tiles,i.map._getMapId(),i.map._requestManager._skuToken,i.map._requestManager._customAccessToken),i.fire(new vt.Event("data",{dataType:"source",sourceDataType:"metadata"})),i.fire(new vt.Event("data",{dataType:"source",sourceDataType:"content"})))})},J.prototype.loaded=function(){return this._loaded},J.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},J.prototype.onAdd=function(t){this.map=t,this.load()},J.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},J.prototype.serialize=function(){return vt.extend({},this._options)},J.prototype.loadTile=function(i,r){var t=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme)),e={request:this.map._requestManager.transformRequest(t,vt.ResourceType.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:vt.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function n(t,e){return delete i.request,i.aborted?r(null):t&&404!==t.status?r(t):(e&&e.resourceTiming&&(i.resourceTiming=e.resourceTiming),this.map._refreshExpiredTiles&&e&&i.setExpiryData(e),i.loadVectorData(e,this.map.painter),vt.cacheEntryPossiblyAdded(this.dispatcher),r(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}e.request.collectResourceTiming=this._collectResourceTiming,i.actor&&"expired"!==i.state?"loading"===i.state?i.reloadCallback=r:i.request=i.actor.send("reloadTile",e,n.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",e,n.bind(this)))},J.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},J.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},J.prototype.hasTransition=function(){return!1},J),O=((j=vt.Evented)&&(X.__proto__=j),((X.prototype=Object.create(j&&j.prototype)).constructor=X).prototype.load=function(){var i=this;this._loaded=!1,this.fire(new vt.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=z(this._options,this.map._requestManager,function(t,e){i._tileJSONRequest=null,i._loaded=!0,t?i.fire(new vt.ErrorEvent(t)):e&&(vt.extend(i,e),e.bounds&&(i.tileBounds=new D(e.bounds,i.minzoom,i.maxzoom)),vt.postTurnstileEvent(e.tiles),vt.postMapLoadEvent(e.tiles,i.map._getMapId(),i.map._requestManager._skuToken),i.fire(new vt.Event("data",{dataType:"source",sourceDataType:"metadata"})),i.fire(new vt.Event("data",{dataType:"source",sourceDataType:"content"})))})},X.prototype.loaded=function(){return this._loaded},X.prototype.onAdd=function(t){this.map=t,this.load()},X.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},X.prototype.serialize=function(){return vt.extend({},this._options)},X.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},X.prototype.loadTile=function(n,o){var a=this,t=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);n.request=vt.getImage(this.map._requestManager.transformRequest(t,vt.ResourceType.Tile),function(t,e){var i,r;delete n.request,n.aborted?(n.state="unloaded",o(null)):t?(n.state="errored",o(t)):e&&(a.map._refreshExpiredTiles&&n.setExpiryData(e),delete e.cacheControl,delete e.expires,r=(i=a.map.painter.context).gl,n.texture=a.map.painter.getTileTexture(e.width),n.texture?n.texture.update(e,{useMipmap:!0}):(n.texture=new vt.Texture(i,e,r.RGBA,{useMipmap:!0}),n.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE,r.LINEAR_MIPMAP_NEAREST),i.extTextureFilterAnisotropic&&r.texParameterf(r.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax)),n.state="loaded",vt.cacheEntryPossiblyAdded(a.dispatcher),o(null))})},X.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},X.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},X.prototype.hasTransition=function(){return!1},X),B=((N=O)&&(q.__proto__=N),((q.prototype=Object.create(N&&N.prototype)).constructor=q).prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},q.prototype.loadTile=function(n,o){var t=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);n.request=vt.getImage(this.map._requestManager.transformRequest(t,vt.ResourceType.Tile),function(t,e){var i,r;delete n.request,n.aborted?(n.state="unloaded",o(null)):t?(n.state="errored",o(t)):e&&(this.map._refreshExpiredTiles&&n.setExpiryData(e),delete e.cacheControl,delete e.expires,i=vt.window.ImageBitmap&&e instanceof vt.window.ImageBitmap&&vt.offscreenCanvasSupported()?e:vt.browser.getImageData(e,1),r={uid:n.uid,coord:n.tileID,source:this.id,rawImageData:i,encoding:this.encoding},n.actor&&"expired"!==n.state||(n.actor=this.dispatcher.getActor(),n.actor.send("loadDEMTile",r,function(t,e){t&&(n.state="errored",o(t)),e&&(n.dem=e,n.needsHillshadePrepare=!0,n.state="loaded",o(null))}.bind(this))))}.bind(this)),n.neighboringTiles=this._getNeighboringTiles(n.tileID)},q.prototype._getNeighboringTiles=function(t){var e=t.canonical,i=Math.pow(2,e.z),r=(e.x-1+i)%i,n=0===e.x?t.wrap-1:t.wrap,o=(e.x+1+i)%i,a=e.x+1===i?t.wrap+1:t.wrap,s={};return s[new vt.OverscaledTileID(t.overscaledZ,n,e.z,r,e.y).key]={backfilled:!1},s[new vt.OverscaledTileID(t.overscaledZ,a,e.z,o,e.y).key]={backfilled:!1},0<e.y&&(s[new vt.OverscaledTileID(t.overscaledZ,n,e.z,r,e.y-1).key]={backfilled:!1},s[new vt.OverscaledTileID(t.overscaledZ,t.wrap,e.z,e.x,e.y-1).key]={backfilled:!1},s[new vt.OverscaledTileID(t.overscaledZ,a,e.z,o,e.y-1).key]={backfilled:!1}),e.y+1<i&&(s[new vt.OverscaledTileID(t.overscaledZ,n,e.z,r,e.y+1).key]={backfilled:!1},s[new vt.OverscaledTileID(t.overscaledZ,t.wrap,e.z,e.x,e.y+1).key]={backfilled:!1},s[new vt.OverscaledTileID(t.overscaledZ,a,e.z,o,e.y+1).key]={backfilled:!1}),s},q.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},q),U=((C=vt.Evented)&&(H.__proto__=C),((H.prototype=Object.create(C&&C.prototype)).constructor=H).prototype.load=function(){var i=this;this.fire(new vt.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(t){var e;t?i.fire(new vt.ErrorEvent(t)):(e={dataType:"source",sourceDataType:"metadata"},i._collectResourceTiming&&i._resourceTiming&&0<i._resourceTiming.length&&(e.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire(new vt.Event("data",e)))})},H.prototype.onAdd=function(t){this.map=t,this.load()},H.prototype.setData=function(t){var i=this;return this._data=t,this.fire(new vt.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(t){var e;t?i.fire(new vt.ErrorEvent(t)):(e={dataType:"source",sourceDataType:"content"},i._collectResourceTiming&&i._resourceTiming&&0<i._resourceTiming.length&&(e.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire(new vt.Event("data",e)))}),this},H.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},H.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},H.prototype.getClusterLeaves=function(t,e,i,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:i},r),this},H.prototype._updateWorkerData=function(i){var r=this;this._loaded=!1;var n=vt.extend({},this.workerOptions),t=this._data;"string"==typeof t?(n.request=this.map._requestManager.transformRequest(vt.browser.resolveURL(t),vt.ResourceType.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(t),this.actor.send(this.type+".loadData",n,function(t,e){r._removed||e&&e.abandoned||(r._loaded=!0,e&&e.resourceTiming&&e.resourceTiming[r.id]&&(r._resourceTiming=e.resourceTiming[r.id].slice(0)),r.actor.send(r.type+".coalesce",{source:n.source},null),i(t))})},H.prototype.loaded=function(){return this._loaded},H.prototype.loadTile=function(i,r){var n=this,o=i.actor?"reloadTile":"loadTile";i.actor=this.actor,i.request=this.actor.send(o,{type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:vt.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(t,e){return delete i.request,i.unloadVectorData(),i.aborted?r(null):t?r(t):(i.loadVectorData(e,n.map.painter,"reloadTile"==o),r(null))})},H.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},H.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},H.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},H.prototype.serialize=function(){return vt.extend({},this._options,{type:this.type,data:this._data})},H.prototype.hasTransition=function(){return!1},H),R=vt.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),F=((E=vt.Evented)&&(W.__proto__=E),((W.prototype=Object.create(E&&E.prototype)).constructor=W).prototype.load=function(i,r){var n=this;this._loaded=!1,this.fire(new vt.Event("dataloading",{dataType:"source"})),this.url=this.options.url,vt.getImage(this.map._requestManager.transformRequest(this.url,vt.ResourceType.Image),function(t,e){n._loaded=!0,t?n.fire(new vt.ErrorEvent(t)):e&&(n.image=e,i&&(n.coordinates=i),r&&r(),n._finishLoading())})},W.prototype.loaded=function(){return this._loaded},W.prototype.updateImage=function(t){var e=this;return this.image&&t.url&&(this.options.url=t.url,this.load(t.coordinates,function(){e.texture=null})),this},W.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new vt.Event("data",{dataType:"source",sourceDataType:"metadata"})))},W.prototype.onAdd=function(t){this.map=t,this.load()},W.prototype.setCoordinates=function(t){var e=this,c=(this.coordinates=t).map(vt.MercatorCoordinate.fromLngLat);this.tileID=function(){for(var t=1/0,e=1/0,i=-1/0,r=-1/0,n=0,o=c;n<o.length;n+=1)var a=o[n],t=Math.min(t,a.x),e=Math.min(e,a.y),i=Math.max(i,a.x),r=Math.max(r,a.y);var s=Math.max(i-t,r-e),u=Math.max(0,Math.floor(-Math.log(s)/Math.LN2)),l=Math.pow(2,u);return new vt.CanonicalTileID(u,Math.floor((t+i)/2*l),Math.floor((e+r)/2*l))}(),this.minzoom=this.maxzoom=this.tileID.z;var i=c.map(function(t){return e.tileID.getTilePoint(t)._round()});return this._boundsArray=new vt.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,vt.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,vt.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,vt.EXTENT,vt.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new vt.Event("data",{dataType:"source",sourceDataType:"content"})),this},W.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,e=t.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,R.members)),this.boundsSegments||(this.boundsSegments=vt.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new vt.Texture(t,this.image,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},W.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t).buckets={}:t.state="errored",e(null)},W.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return!1},W),Z=((S=F)&&(Q.__proto__=S),((Q.prototype=Object.create(S&&S.prototype)).constructor=Q).prototype.load=function(){var i=this;this._loaded=!1;var t=this.options;this.urls=[];for(var e=0,r=t.urls;e<r.length;e+=1)this.urls.push(this.map._requestManager.transformRequest(r[e],vt.ResourceType.Source).url);vt.getVideo(this.urls,function(t,e){i._loaded=!0,t?i.fire(new vt.ErrorEvent(t)):e&&(i.video=e,i.video.loop=!0,i.video.addEventListener("playing",function(){i.map.triggerRepaint()}),i.map&&i.video.play(),i._finishLoading())})},Q.prototype.pause=function(){this.video&&this.video.pause()},Q.prototype.play=function(){this.video&&this.video.play()},Q.prototype.seek=function(t){var e;this.video&&(t<(e=this.video.seekable).start(0)||t>e.end(0)?this.fire(new vt.ErrorEvent(new vt.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+e.start(0)+" and "+e.end(0)+"-second mark."))):this.video.currentTime=t)},Q.prototype.getVideo=function(){return this.video},Q.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},Q.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,e=t.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,R.members)),this.boundsSegments||(this.boundsSegments=vt.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,this.video)):(this.texture=new vt.Texture(t,this.video,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},Q.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},Q.prototype.hasTransition=function(){return this.video&&!this.video.paused},Q),V=((A=F)&&(Y.__proto__=A),((Y.prototype=Object.create(A&&A.prototype)).constructor=Y).prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof vt.window.HTMLCanvasElement?this.options.canvas:vt.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new vt.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},Y.prototype.getCanvas=function(){return this.canvas},Y.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},Y.prototype.onRemove=function(){this.pause()},Y.prototype.prepare=function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var e=this.map.painter.context,i=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,R.members)),this.boundsSegments||(this.boundsSegments=vt.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new vt.Texture(e,this.canvas,i.RGBA,{premultiply:!0}),this.tiles){var n=this.tiles[r];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this._playing},Y.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var i=e[t];if(isNaN(i)||i<=0)return!0}return!1},Y),G={vector:P,raster:O,"raster-dem":B,geojson:U,video:Z,image:F,canvas:V};function Y(t,e,i,r){A.call(this,t,e,i,r),e.coordinates?Array.isArray(e.coordinates)&&4===e.coordinates.length&&!e.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new vt.ErrorEvent(new vt.ValidationError("sources."+t,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new vt.ErrorEvent(new vt.ValidationError("sources."+t,null,'missing required property "coordinates"'))),e.animate&&"boolean"!=typeof e.animate&&this.fire(new vt.ErrorEvent(new vt.ValidationError("sources."+t,null,'optional "animate" property must be a boolean value'))),e.canvas?"string"==typeof e.canvas||e.canvas instanceof vt.window.HTMLCanvasElement||this.fire(new vt.ErrorEvent(new vt.ValidationError("sources."+t,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new vt.ErrorEvent(new vt.ValidationError("sources."+t,null,'missing required property "canvas"'))),this.options=e,this.animate=void 0===e.animate||e.animate}function Q(t,e,i,r){S.call(this,t,e,i,r),this.roundZoom=!0,this.type="video",this.options=e}function W(t,e,i,r){E.call(this),this.id=t,this.dispatcher=i,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=e}function H(t,e,i,r){C.call(this),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=i.getActor(),this.setEventedParent(r),this._data=e.data,this._options=vt.extend({},e),this._collectResourceTiming=e.collectResourceTiming,this._resourceTiming=[],void 0!==e.maxzoom&&(this.maxzoom=e.maxzoom),e.type&&(this.type=e.type),e.attribution&&(this.attribution=e.attribution),this.promoteId=e.promoteId;var n=vt.EXTENT/this.tileSize;this.workerOptions=vt.extend({source:this.id,cluster:e.cluster||!1,geojsonVtOptions:{buffer:(void 0!==e.buffer?e.buffer:128)*n,tolerance:(void 0!==e.tolerance?e.tolerance:.375)*n,extent:vt.EXTENT,maxZoom:this.maxzoom,lineMetrics:e.lineMetrics||!1,generateId:e.generateId||!1},superclusterOptions:{maxZoom:void 0!==e.clusterMaxZoom?Math.min(e.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,e.clusterMinPoints||2),extent:vt.EXTENT,radius:(e.clusterRadius||50)*n,log:!1,generateId:e.generateId||!1},clusterProperties:e.clusterProperties},e.workerOptions)}function q(t,e,i,r){N.call(this,t,e,i,r),this.type="raster-dem",this.maxzoom=22,this._options=vt.extend({type:"raster-dem"},e),this.encoding=e.encoding||"mapbox"}function X(t,e,i,r){j.call(this),this.id=t,this.dispatcher=i,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=vt.extend({type:"raster"},e),vt.extend(this,vt.pick(e,["url","scheme","tileSize"]))}function J(t,e,i,r){if(k.call(this),this.id=t,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,vt.extend(this,vt.pick(e,["url","scheme","tileSize","promoteId"])),this._options=vt.extend({type:"vector"},e),this._collectResourceTiming=e.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r)}function K(r,t,e,i,n,o){var a=function(t,e,i){if(t)for(var r=0,n=t;r<n.length;r+=1){var o=e[n[r]];if(o&&o.source===i&&"fill-extrusion"===o.type)return!0}else for(var a in e){var s=e[a];if(s.source===i&&"fill-extrusion"===s.type)return!0}return!1}(n&&n.layers,t,r.id),s=o.maxPitchScaleFactor(),u=r.tilesIn(i,s,a);u.sort($);for(var l,c,p,y=[],h=0,d=u;h<d.length;h+=1){var f=d[h];y.push({wrappedTileID:f.tileID.wrapped().key,queryResults:f.tile.queryRenderedFeatures(t,e,r._state,f.queryGeometry,f.cameraQueryGeometry,f.scale,n,o,s,(l=r.transform,c=f.tileID,p=vt.identity([]),vt.translate(p,p,[1,1,0]),vt.scale(p,p,[.5*l.width,.5*l.height,1]),vt.multiply(p,p,l.calculatePosMatrix(c.toUnwrapped()))))})}var m=function(){for(var t={},e={},i=0,r=y;i<r.length;i+=1){var n=r[i],o=n.queryResults,a=n.wrappedTileID,s=e[a]=e[a]||{};for(var u in o)for(var l=o[u],c=s[u]=s[u]||{},p=t[u]=t[u]||[],h=0,d=l;h<d.length;h+=1){var f=d[h];c[f.featureIndex]||(c[f.featureIndex]=!0,p.push(f))}}return t}();for(var g in m)m[g].forEach(function(t){var e=t.feature,i=r.getFeatureState(e.layer["source-layer"],e.id);e.source=e.layer.source,e.layer["source-layer"]&&(e.sourceLayer=e.layer["source-layer"]),e.state=i});return m}function $(t,e){var i=t.tileID,r=e.tileID;return i.overscaledZ-r.overscaledZ||i.canonical.y-r.canonical.y||i.wrap-r.wrap||i.canonical.x-r.canonical.x}function tt(t,e){this.max=t,this.onRemove=e,this.reset()}tt.prototype.reset=function(){for(var t in this.data)for(var e=0,i=this.data[t];e<i.length;e+=1){var r=i[e];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},tt.prototype.add=function(t,e,i){var r=this,n=t.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);var o,a={value:e,timeout:void 0};return void 0!==i&&(a.timeout=setTimeout(function(){r.remove(t,a)},i)),this.data[n].push(a),this.order.push(n),this.order.length>this.max&&(o=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(o),this},tt.prototype.has=function(t){return t.wrapped().key in this.data},tt.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},tt.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},tt.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},tt.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},tt.prototype.remove=function(t,e){if(!this.has(t))return this;var i=t.wrapped().key,r=void 0===e?0:this.data[i].indexOf(e),n=this.data[i][r];return this.data[i].splice(r,1),n.timeout&&clearTimeout(n.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(n.value),this.order.splice(this.order.indexOf(i),1),this},tt.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},tt.prototype.filter=function(t){var e=[];for(var i in this.data)for(var r=0,n=this.data[i];r<n.length;r+=1){var o=n[r];t(o.value)||e.push(o)}for(var a=0,s=e;a<s.length;a+=1){var u=s[a];this.remove(u.value.tileID,u)}};function et(t,e,i){var r=(this.context=t).gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}et.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},et.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},et.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};function it(t,e,i,r){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=r;var n=(this.context=t).gl;this.buffer=n.createBuffer(),t.bindVertexBuffer.set(this.buffer),n.bufferData(n.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}var rt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};it.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},it.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},it.prototype.enableAttributes=function(t,e){for(var i=0;i<this.attributes.length;i++){var r=e.attributes[this.attributes[i].name];void 0!==r&&t.enableVertexAttribArray(r)}},it.prototype.setVertexAttribPointers=function(t,e,i){for(var r=0;r<this.attributes.length;r++){var n=this.attributes[r],o=e.attributes[n.name];void 0!==o&&t.vertexAttribPointer(o,n.components,t[rt[n.type]],!1,this.itemSize,n.offset+this.itemSize*(i||0))}},it.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};function nt(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}nt.prototype.get=function(){return this.current},nt.prototype.set=function(t){},nt.prototype.getDefault=function(){return this.default},nt.prototype.setDefault=function(){this.set(this.default)};function ot(t,e,i,r){this.context=t,this.width=e,this.height=i;var n=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new _e(t,n),r&&(this.depthAttachment=new xe(t,n))}var at,st,ut,lt,ct,pt,ht,dt,ft,yt,mt,gt,_t,xt,bt,Mt,wt,It,Tt,Lt,zt,Dt,At,St,Et,Ct,Nt,jt,kt,Pt,Ot,Bt,Ut,Rt,Ft=((Rt=nt)&&(ti.__proto__=Rt),((ti.prototype=Object.create(Rt&&Rt.prototype)).constructor=ti).prototype.getDefault=function(){return vt.Color.transparent},ti.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a&&!this.dirty||(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},ti),Zt=((Ut=nt)&&($e.__proto__=Ut),(($e.prototype=Object.create(Ut&&Ut.prototype)).constructor=$e).prototype.getDefault=function(){return 1},$e.prototype.set=function(t){t===this.current&&!this.dirty||(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},$e),Vt=((Bt=nt)&&(Ke.__proto__=Bt),((Ke.prototype=Object.create(Bt&&Bt.prototype)).constructor=Ke).prototype.getDefault=function(){return 0},Ke.prototype.set=function(t){t===this.current&&!this.dirty||(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},Ke),Gt=((Ot=nt)&&(Je.__proto__=Ot),((Je.prototype=Object.create(Ot&&Ot.prototype)).constructor=Je).prototype.getDefault=function(){return[!0,!0,!0,!0]},Je.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&!this.dirty||(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},Je),Yt=((Pt=nt)&&(Xe.__proto__=Pt),((Xe.prototype=Object.create(Pt&&Pt.prototype)).constructor=Xe).prototype.getDefault=function(){return!0},Xe.prototype.set=function(t){t===this.current&&!this.dirty||(this.gl.depthMask(t),this.current=t,this.dirty=!1)},Xe),Qt=((kt=nt)&&(qe.__proto__=kt),((qe.prototype=Object.create(kt&&kt.prototype)).constructor=qe).prototype.getDefault=function(){return 255},qe.prototype.set=function(t){t===this.current&&!this.dirty||(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},qe),Wt=((jt=nt)&&(He.__proto__=jt),((He.prototype=Object.create(jt&&jt.prototype)).constructor=He).prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},He.prototype.set=function(t){var e=this.current;t.func===e.func&&t.ref===e.ref&&t.mask===e.mask&&!this.dirty||(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},He),Ht=((Nt=nt)&&(We.__proto__=Nt),((We.prototype=Object.create(Nt&&Nt.prototype)).constructor=We).prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},We.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&!this.dirty||(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},We),qt=((Ct=nt)&&(Qe.__proto__=Ct),((Qe.prototype=Object.create(Ct&&Ct.prototype)).constructor=Qe).prototype.getDefault=function(){return!1},Qe.prototype.set=function(t){var e;t===this.current&&!this.dirty||(e=this.gl,t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1)},Qe),Xt=((Et=nt)&&(Ye.__proto__=Et),((Ye.prototype=Object.create(Et&&Et.prototype)).constructor=Ye).prototype.getDefault=function(){return[0,1]},Ye.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&!this.dirty||(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},Ye),Jt=((St=nt)&&(Ge.__proto__=St),((Ge.prototype=Object.create(St&&St.prototype)).constructor=Ge).prototype.getDefault=function(){return!1},Ge.prototype.set=function(t){var e;t===this.current&&!this.dirty||(e=this.gl,t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1)},Ge),Kt=((At=nt)&&(Ve.__proto__=At),((Ve.prototype=Object.create(At&&At.prototype)).constructor=Ve).prototype.getDefault=function(){return this.gl.LESS},Ve.prototype.set=function(t){t===this.current&&!this.dirty||(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},Ve),$t=((Dt=nt)&&(Ze.__proto__=Dt),((Ze.prototype=Object.create(Dt&&Dt.prototype)).constructor=Ze).prototype.getDefault=function(){return!1},Ze.prototype.set=function(t){var e;t===this.current&&!this.dirty||(e=this.gl,t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1)},Ze),te=((zt=nt)&&(Fe.__proto__=zt),((Fe.prototype=Object.create(zt&&zt.prototype)).constructor=Fe).prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},Fe.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&!this.dirty||(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},Fe),ee=((Lt=nt)&&(Re.__proto__=Lt),((Re.prototype=Object.create(Lt&&Lt.prototype)).constructor=Re).prototype.getDefault=function(){return vt.Color.transparent},Re.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a&&!this.dirty||(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},Re),ie=((Tt=nt)&&(Ue.__proto__=Tt),((Ue.prototype=Object.create(Tt&&Tt.prototype)).constructor=Ue).prototype.getDefault=function(){return this.gl.FUNC_ADD},Ue.prototype.set=function(t){t===this.current&&!this.dirty||(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},Ue),re=((It=nt)&&(Be.__proto__=It),((Be.prototype=Object.create(It&&It.prototype)).constructor=Be).prototype.getDefault=function(){return!1},Be.prototype.set=function(t){var e;t===this.current&&!this.dirty||(e=this.gl,t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1)},Be),ne=((wt=nt)&&(Oe.__proto__=wt),((Oe.prototype=Object.create(wt&&wt.prototype)).constructor=Oe).prototype.getDefault=function(){return this.gl.BACK},Oe.prototype.set=function(t){t===this.current&&!this.dirty||(this.gl.cullFace(t),this.current=t,this.dirty=!1)},Oe),oe=((Mt=nt)&&(Pe.__proto__=Mt),((Pe.prototype=Object.create(Mt&&Mt.prototype)).constructor=Pe).prototype.getDefault=function(){return this.gl.CCW},Pe.prototype.set=function(t){t===this.current&&!this.dirty||(this.gl.frontFace(t),this.current=t,this.dirty=!1)},Pe),ae=((bt=nt)&&(ke.__proto__=bt),((ke.prototype=Object.create(bt&&bt.prototype)).constructor=ke).prototype.getDefault=function(){return null},ke.prototype.set=function(t){t===this.current&&!this.dirty||(this.gl.useProgram(t),this.current=t,this.dirty=!1)},ke),se=((xt=nt)&&(je.__proto__=xt),((je.prototype=Object.create(xt&&xt.prototype)).constructor=je).prototype.getDefault=function(){return this.gl.TEXTURE0},je.prototype.set=function(t){t===this.current&&!this.dirty||(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},je),ue=((_t=nt)&&(Ne.__proto__=_t),((Ne.prototype=Object.create(_t&&_t.prototype)).constructor=Ne).prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},Ne.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&!this.dirty||(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},Ne),le=((gt=nt)&&(Ce.__proto__=gt),((Ce.prototype=Object.create(gt&&gt.prototype)).constructor=Ce).prototype.getDefault=function(){return null},Ce.prototype.set=function(t){var e;t===this.current&&!this.dirty||((e=this.gl).bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1)},Ce),ce=((mt=nt)&&(Ee.__proto__=mt),((Ee.prototype=Object.create(mt&&mt.prototype)).constructor=Ee).prototype.getDefault=function(){return null},Ee.prototype.set=function(t){var e;t===this.current&&!this.dirty||((e=this.gl).bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1)},Ee),pe=((yt=nt)&&(Se.__proto__=yt),((Se.prototype=Object.create(yt&&yt.prototype)).constructor=Se).prototype.getDefault=function(){return null},Se.prototype.set=function(t){var e;t===this.current&&!this.dirty||((e=this.gl).bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1)},Se),he=((ft=nt)&&(Ae.__proto__=ft),((Ae.prototype=Object.create(ft&&ft.prototype)).constructor=Ae).prototype.getDefault=function(){return null},Ae.prototype.set=function(t){var e;t===this.current&&!this.dirty||((e=this.gl).bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1)},Ae),de=((dt=nt)&&(De.__proto__=dt),((De.prototype=Object.create(dt&&dt.prototype)).constructor=De).prototype.getDefault=function(){return null},De.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},De),fe=((ht=nt)&&(ze.__proto__=ht),((ze.prototype=Object.create(ht&&ht.prototype)).constructor=ze).prototype.getDefault=function(){return null},ze.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},ze),ye=((pt=nt)&&(Le.__proto__=pt),((Le.prototype=Object.create(pt&&pt.prototype)).constructor=Le).prototype.getDefault=function(){return 4},Le.prototype.set=function(t){var e;t===this.current&&!this.dirty||((e=this.gl).pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1)},Le),me=((ct=nt)&&(Te.__proto__=ct),((Te.prototype=Object.create(ct&&ct.prototype)).constructor=Te).prototype.getDefault=function(){return!1},Te.prototype.set=function(t){var e;t===this.current&&!this.dirty||((e=this.gl).pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1)},Te),ge=((lt=nt)&&(Ie.__proto__=lt),((Ie.prototype=Object.create(lt&&lt.prototype)).constructor=Ie).prototype.getDefault=function(){return!1},Ie.prototype.set=function(t){var e;t===this.current&&!this.dirty||((e=this.gl).pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1)},Ie),ve=((ut=nt)&&(we.__proto__=ut),((we.prototype=Object.create(ut&&ut.prototype)).constructor=we).prototype.getDefault=function(){return null},we),_e=((st=ve)&&(Me.__proto__=st),((Me.prototype=Object.create(st&&st.prototype)).constructor=Me).prototype.setDirty=function(){this.dirty=!0},Me.prototype.set=function(t){var e;t===this.current&&!this.dirty||(this.context.bindFramebuffer.set(this.parent),(e=this.gl).framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1)},Me),xe=((at=ve)&&(be.__proto__=at),((be.prototype=Object.create(at&&at.prototype)).constructor=be).prototype.set=function(t){var e;t===this.current&&!this.dirty||(this.context.bindFramebuffer.set(this.parent),(e=this.gl).framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1)},be);function be(){at.apply(this,arguments)}function Me(){st.apply(this,arguments)}function we(t,e){ut.call(this,t),this.context=t,this.parent=e}function Ie(){lt.apply(this,arguments)}function Te(){ct.apply(this,arguments)}function Le(){pt.apply(this,arguments)}function ze(t){ht.call(this,t),this.vao=t.extVertexArrayObject}function De(){dt.apply(this,arguments)}function Ae(){ft.apply(this,arguments)}function Se(){yt.apply(this,arguments)}function Ee(){mt.apply(this,arguments)}function Ce(){gt.apply(this,arguments)}function Ne(){_t.apply(this,arguments)}function je(){xt.apply(this,arguments)}function ke(){bt.apply(this,arguments)}function Pe(){Mt.apply(this,arguments)}function Oe(){wt.apply(this,arguments)}function Be(){It.apply(this,arguments)}function Ue(){Tt.apply(this,arguments)}function Re(){Lt.apply(this,arguments)}function Fe(){zt.apply(this,arguments)}function Ze(){Dt.apply(this,arguments)}function Ve(){At.apply(this,arguments)}function Ge(){St.apply(this,arguments)}function Ye(){Et.apply(this,arguments)}function Qe(){Ct.apply(this,arguments)}function We(){Nt.apply(this,arguments)}function He(){jt.apply(this,arguments)}function qe(){kt.apply(this,arguments)}function Xe(){Pt.apply(this,arguments)}function Je(){Ot.apply(this,arguments)}function Ke(){Bt.apply(this,arguments)}function $e(){Ut.apply(this,arguments)}function ti(){Rt.apply(this,arguments)}ot.prototype.destroy=function(){var t,e=this.context.gl,i=this.colorAttachment.get();i&&e.deleteTexture(i),this.depthAttachment&&(t=this.depthAttachment.get())&&e.deleteRenderbuffer(t),e.deleteFramebuffer(this.framebuffer)};var ei=function(t,e,i){this.func=t,this.mask=e,this.range=i};ei.ReadOnly=!1,ei.ReadWrite=!0,ei.disabled=new ei(519,ei.ReadOnly,[0,1]);var ii=function(t,e,i,r,n,o){this.test=t,this.ref=e,this.mask=i,this.fail=r,this.depthFail=n,this.pass=o};ii.disabled=new ii({func:519,mask:0},0,0,7680,7680,7680);var ri=function(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i};ri.disabled=new ri(ri.Replace=[1,0],vt.Color.transparent,[!1,!1,!1,!1]),ri.unblended=new ri(ri.Replace,vt.Color.transparent,[!0,!0,!0,!0]),ri.alphaBlended=new ri([1,771],vt.Color.transparent,[!0,!0,!0,!0]);var ni=function(t,e,i){this.enable=t,this.mode=e,this.frontFace=i};ni.disabled=new ni(!1,1029,2305),ni.backCCW=new ni(!0,1029,2305);function oi(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ft(this),this.clearDepth=new Zt(this),this.clearStencil=new Vt(this),this.colorMask=new Gt(this),this.depthMask=new Yt(this),this.stencilMask=new Qt(this),this.stencilFunc=new Wt(this),this.stencilOp=new Ht(this),this.stencilTest=new qt(this),this.depthRange=new Xt(this),this.depthTest=new Jt(this),this.depthFunc=new Kt(this),this.blend=new $t(this),this.blendFunc=new te(this),this.blendColor=new ee(this),this.blendEquation=new ie(this),this.cullFace=new re(this),this.cullFaceSide=new ne(this),this.frontFace=new oe(this),this.program=new ae(this),this.activeTexture=new se(this),this.viewport=new ue(this),this.bindFramebuffer=new le(this),this.bindRenderbuffer=new ce(this),this.bindTexture=new pe(this),this.bindVertexBuffer=new he(this),this.bindElementBuffer=new de(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new fe(this),this.pixelStoreUnpack=new ye(this),this.pixelStoreUnpackPremultiplyAlpha=new me(this),this.pixelStoreUnpackFlipY=new ge(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query")}oi.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},oi.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},oi.prototype.createIndexBuffer=function(t,e){return new et(this,t,e)},oi.prototype.createVertexBuffer=function(t,e,i){return new it(this,t,e,i)},oi.prototype.createRenderbuffer=function(t,e,i){var r=this.gl,n=r.createRenderbuffer();return this.bindRenderbuffer.set(n),r.renderbufferStorage(r.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),n},oi.prototype.createFramebuffer=function(t,e,i){return new ot(this,t,e,i)},oi.prototype.clear=function(t){var e=t.color,i=t.depth,r=this.gl,n=0;e&&(n|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(n|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),r.clear(n)},oi.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},oi.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},oi.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},oi.prototype.setColorMode=function(t){vt.deepEqual(t.blendFunction,ri.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)},oi.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ai,si=((ai=vt.Evented)&&(ui.__proto__=ai),((ui.prototype=Object.create(ai&&ai.prototype)).constructor=ui).prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},ui.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},ui.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},ui.prototype.getSource=function(){return this._source},ui.prototype.pause=function(){this._paused=!0},ui.prototype.resume=function(){var t;this._paused&&(t=this._shouldReloadOnResume,this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform))},ui.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},ui.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},ui.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},ui.prototype.serialize=function(){return this._source.serialize()},ui.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var i=this._tiles[e];i.upload(t),i.prepare(this.map.style.imageManager)}},ui.prototype.getIds=function(){return vt.values(this._tiles).map(function(t){return t.tileID}).sort(li).map(function(t){return t.key})},ui.prototype.getRenderableIds=function(t){var a=this,e=[];for(var i in this._tiles)this._isIdRenderable(i,t)&&e.push(this._tiles[i]);return t?e.sort(function(t,e){var i=t.tileID,r=e.tileID,n=new vt.Point(i.canonical.x,i.canonical.y)._rotate(a.transform.angle),o=new vt.Point(r.canonical.x,r.canonical.y)._rotate(a.transform.angle);return i.overscaledZ-r.overscaledZ||o.y-n.y||o.x-n.x}).map(function(t){return t.tileID.key}):e.map(function(t){return t.tileID}).sort(li).map(function(t){return t.key})},ui.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},ui.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},ui.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},ui.prototype._reloadTile=function(t,e){var i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))},ui.prototype._tileLoaded=function(t,e,i,r){if(r)return t.state="errored",void(404!==r.status?this._source.fire(new vt.ErrorEvent(r,{tile:t})):this.update(this.transform));t.timeAdded=vt.browser.now(),"expired"===i&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new vt.Event("data",{dataType:"source",tile:t,coord:t.tileID}))},ui.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),i=0;i<e.length;i++){var r,n=e[i];t.neighboringTiles&&t.neighboringTiles[n]&&(o(t,r=this.getTileByID(n)),o(r,t))}function o(t,e){t.needsHillshadePrepare=!0;var i=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,n=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===i&&0==r||1<Math.abs(r)||(1<Math.abs(i)&&(1===Math.abs(i+n)?i+=n:1===Math.abs(i-n)&&(i-=n)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},ui.prototype.getTile=function(t){return this.getTileByID(t.key)},ui.prototype.getTileByID=function(t){return this._tiles[t]},ui.prototype._retainLoadedChildren=function(t,e,i,r){for(var n in this._tiles){var o=this._tiles[n];if(!(r[n]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>i)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var u=a;u.overscaledZ>e;)if(t[(u=u.scaledTo(u.overscaledZ-1)).key]){r[a.key]=a;break}}}},ui.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var i=this._loadedParentTiles[t.key];return i&&i.tileID.overscaledZ>=e?i:null}for(var r=t.overscaledZ-1;e<=r;r--){var n=t.scaledTo(r),o=this._getLoadedTile(n);if(o)return o}},ui.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},ui.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,i=Math.ceil(t.height/this._source.tileSize)+1,r=Math.floor(e*i*5),n="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(n)},ui.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var i={};for(var r in this._tiles){var n=this._tiles[r];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),i[n.tileID.key]=n}for(var o in this._tiles=i,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},ui.prototype.update=function(t){var e,i=this;if(this.transform=t,this._sourceLoaded&&!this._paused){this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?e=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(t){return new vt.OverscaledTileID(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)}):(e=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(e=e.filter(function(t){return i._source.hasTile(t)}))):e=[];var r=t.coveringZoomLevel(this._source),n=Math.max(r-ui.maxOverzooming,this._source.minzoom),o=Math.max(r+ui.maxUnderzooming,this._source.minzoom),a=this._updateRetainedTiles(e,r);if(ci(this._source.type)){for(var s={},u={},l=0,c=Object.keys(a);l<c.length;l+=1){var p,h=c[l],d=a[h],f=this._tiles[h];!f||f.fadeEndTime&&f.fadeEndTime<=vt.browser.now()||((p=this.findLoadedParent(d,n))&&(this._addTile(p.tileID),s[p.tileID.key]=p.tileID),u[h]=d)}for(var y in this._retainLoadedChildren(u,r,o,a),s)a[y]||(this._coveredTiles[y]=!0,a[y]=s[y])}for(var m in a)this._tiles[m].clearFadeHold();for(var g=0,v=vt.keysDifference(this._tiles,a);g<v.length;g+=1){var _=v[g],x=this._tiles[_];x.hasSymbolBuckets&&!x.holdingForFade()?x.setHoldDuration(this.map._fadeDuration):x.hasSymbolBuckets&&!x.symbolFadeFinished()||this._removeTile(_)}this._updateLoadedParentTileCache()}},ui.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},ui.prototype._updateRetainedTiles=function(t,e){for(var i={},r={},n=Math.max(e-ui.maxOverzooming,this._source.minzoom),o=Math.max(e+ui.maxUnderzooming,this._source.minzoom),a={},s=0,u=t;s<u.length;s+=1){var l=u[s],c=this._addTile(l);i[l.key]=l,c.hasData()||e<this._source.maxzoom&&(a[l.key]=l)}this._retainLoadedChildren(a,e,o,i);for(var p=0,h=t;p<h.length;p+=1){var d=h[p],f=this._tiles[d.key];if(!f.hasData()){if(e+1>this._source.maxzoom){var y=d.children(this._source.maxzoom)[0],m=this.getTile(y);if(m&&m.hasData()){i[y.key]=y;continue}}else{var g=d.children(this._source.maxzoom);if(i[g[0].key]&&i[g[1].key]&&i[g[2].key]&&i[g[3].key])continue}for(var v=f.wasRequested(),_=d.overscaledZ-1;n<=_;--_){var x=d.scaledTo(_);if(r[x.key])break;if(r[x.key]=!0,!(f=this.getTile(x))&&v&&(f=this._addTile(x)),f&&(i[x.key]=x,v=f.wasRequested(),f.hasData()))break}}}return i},ui.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],i=void 0,r=this._tiles[t].tileID;0<r.overscaledZ;){if(r.key in this._loadedParentTiles){i=this._loadedParentTiles[r.key];break}e.push(r.key);var n=r.scaledTo(r.overscaledZ-1);if(i=this._getLoadedTile(n))break;r=n}for(var o=0,a=e;o<a.length;o+=1)this._loadedParentTiles[a[o]]=i}},ui.prototype._addTile=function(t){var e=this._tiles[t.key];if(e)return e;(e=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));var i=Boolean(e);return i||(e=new vt.Tile(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))),e?(e.uses++,this._tiles[t.key]=e,i||this._source.fire(new vt.Event("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null},ui.prototype._setTileReloadTimer=function(t,e){var i=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout(function(){i._reloadTile(t,"expired"),delete i._timers[t]},r))},ui.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),0<e.uses||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},ui.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},ui.prototype.tilesIn=function(t,u,e){var l=this,c=[],p=this.transform;if(!p)return c;for(var i=e?p.getCameraQueryGeometry(t):t,h=t.map(function(t){return p.pointCoordinate(t)}),d=i.map(function(t){return p.pointCoordinate(t)}),f=this.getIds(),y=1/0,m=1/0,g=-1/0,v=-1/0,r=0,n=d;r<n.length;r+=1)var o=n[r],y=Math.min(y,o.x),m=Math.min(m,o.y),g=Math.max(g,o.x),v=Math.max(v,o.y);for(var a=0;a<f.length;a++)!function(t){var e,i,r,n,o,a,s=l._tiles[f[t]];s.holdingForFade()||(e=s.tileID,i=Math.pow(2,p.zoom-s.tileID.overscaledZ),r=u*s.queryPadding*vt.EXTENT/s.tileSize/i,(n=[e.getTilePoint(new vt.MercatorCoordinate(y,m)),e.getTilePoint(new vt.MercatorCoordinate(g,v))])[0].x-r<vt.EXTENT&&n[0].y-r<vt.EXTENT&&0<=n[1].x+r&&0<=n[1].y+r&&(o=h.map(function(t){return e.getTilePoint(t)}),a=d.map(function(t){return e.getTilePoint(t)}),c.push({tile:s,tileID:e,queryGeometry:o,cameraQueryGeometry:a,scale:i})))}(a);return c},ui.prototype.getVisibleCoordinates=function(t){for(var e=this,i=this.getRenderableIds(t).map(function(t){return e._tiles[t].tileID}),r=0,n=i;r<n.length;r+=1){var o=n[r];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return i},ui.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(ci(this._source.type))for(var t in this._tiles){var e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=vt.browser.now())return!0}return!1},ui.prototype.setFeatureState=function(t,e,i){this._state.updateState(t=t||"_geojsonTileLayer",e,i)},ui.prototype.removeFeatureState=function(t,e,i){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,i)},ui.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},ui.prototype.setDependencies=function(t,e,i){var r=this._tiles[t];r&&r.setDependencies(e,i)},ui.prototype.reloadTilesForDependencies=function(e,i){for(var t in this._tiles)this._tiles[t].hasDependency(e,i)&&this._reloadTile(t,"reloading");this._cache.filter(function(t){return!t.hasDependency(e,i)})},ui);function ui(t,r,n){var e=this;ai.call(this),this.id=t,this.dispatcher=n,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(e._sourceLoaded=!0),e._sourceLoaded&&!e._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(e.reload(),e.transform&&e.update(e.transform))}),this.on("error",function(){e._sourceErrored=!0}),this._source=function(t,e){var i=new G[r.type](t,r,n,e);if(i.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+i.id);return vt.bindAll(["load","abort","unload","serialize","prepare"],i),i}(t,this),this._tiles={},this._cache=new tt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new vt.SourceFeatureState}function li(t,e){var i=Math.abs(2*t.wrap)-(t.wrap<0),r=Math.abs(2*e.wrap)-(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-i||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function ci(t){return"raster"===t||"image"===t||"video"===t}function pi(){return new vt.window.Worker(Ta.workerUrl)}si.maxOverzooming=10,si.maxUnderzooming=3;var hi="mapboxgl_preloaded_worker_pool",di=function(){this.active={}};di.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<di.workerCount;)this.workers.push(new pi);return this.active[t]=!0,this.workers.slice()},di.prototype.release=function(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)},di.prototype.isPreloaded=function(){return!!this.active[hi]},di.prototype.numActive=function(){return Object.keys(this.active).length};var fi,yi=Math.floor(vt.browser.hardwareConcurrency/2);function mi(){return fi=fi||new di}function gi(t){t=t.slice();for(var e=Object.create(null),i=0;i<t.length;i++)e[t[i].id]=t[i];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=function(t,e){var i={};for(var r in t)"ref"!==r&&(i[r]=t[r]);return vt.refProperties.forEach(function(t){t in e&&(i[t]=e[t])}),i}(t[r],e[t[r].ref]));return t}di.workerCount=Math.max(Math.min(yi,6),1);var vi={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function _i(t,e,i){i.push({command:vi.addSource,args:[t,e[t]]})}function xi(t,e,i){e.push({command:vi.removeSource,args:[t]}),i[t]=!0}function bi(t,e,i,r,n,o){var a;for(a in e=e||{},t=t||{})t.hasOwnProperty(a)&&(vt.deepEqual(t[a],e[a])||i.push({command:o,args:[r,a,e[a],n]}));for(a in e)e.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(vt.deepEqual(t[a],e[a])||i.push({command:o,args:[r,a,e[a],n]}))}function Mi(t){return t.id}function wi(t,e){return t[e.id]=e,t}function Ii(t,e){this.reset(t,e)}Ii.prototype.reset=function(t,e){this.points=t||[],this._distances=[0];for(var i=1;i<this.points.length;i++)this._distances[i]=this._distances[i-1]+this.points[i].dist(this.points[i-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Ii.prototype.lerp=function(t){if(1===this.points.length)return this.points[0];t=vt.clamp(t,0,1);for(var e=1,i=this._distances[e],r=t*this.paddedLength+this.padding;i<r&&e<this._distances.length;)i=this._distances[++e];var n=e-1,o=this._distances[n],a=i-o,s=0<a?(r-o)/a:0;return this.points[n].mult(1-s).add(this.points[e].mult(s))};function Ti(t,e,i){var r=this.boxCells=[],n=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),n.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}function Li(t,e,i,r,n){var o=vt.create();return e?(vt.scale(o,o,[1/n,1/n,1]),i||vt.rotateZ(o,o,r.angle)):vt.multiply(o,r.labelPlaneMatrix,t),o}function zi(t,e,i,r,n){if(e){var o=vt.clone(t);return vt.scale(o,o,[n,n,1]),i||vt.rotateZ(o,o,-r.angle),o}return r.glCoordMatrix}function Di(t,e){var i=[t.x,t.y,0,1];Oi(i,i,e);var r=i[3];return{point:new vt.Point(i[0]/r,i[1]/r),signedDistanceFromCamera:r}}function Ai(t,e){return.5+t/e*.5}function Si(t,e,i,r,n,o,a,s,u,l,c){var p=s.glyphStartIndex+s.numGlyphs,h=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,f=e.getoffsetX(s.glyphStartIndex),y=e.getoffsetX(p-1),m=ji(t*f,i,r,n,o,a,s.segment,h,d,u,l,c);if(!m)return null;var g=ji(t*y,i,r,n,o,a,s.segment,h,d,u,l,c);return g?{first:m,last:g}:null}function Ei(t,e,i,r){return t===vt.WritingMode.horizontal&&Math.abs(i.y-e.y)>Math.abs(i.x-e.x)*r?{useVertical:!0}:(t===vt.WritingMode.vertical?e.y<i.y:e.x>i.x)?{needsFlipping:!0}:null}function Ci(t,e,i,r,n,o,a,s,u,l,c,p,h,d){var f,y=e/24,m=t.lineOffsetX*y,g=t.lineOffsetY*y;if(1<t.numGlyphs){var v=t.glyphStartIndex+t.numGlyphs,_=t.lineStartIndex,x=t.lineStartIndex+t.lineLength,b=Si(y,s,m,g,i,c,p,t,u,o,h);if(!b)return{notEnoughRoom:!0};var M=Di(b.first.point,a).point,w=Di(b.last.point,a).point;if(r&&!i){var I=Ei(t.writingMode,M,w,d);if(I)return I}f=[b.first];for(var T=t.glyphStartIndex+1;T<v-1;T++)f.push(ji(y*s.getoffsetX(T),m,g,i,c,p,t.segment,_,x,u,o,h));f.push(b.last)}else{if(r&&!i){var L=Di(p,n).point,z=t.lineStartIndex+t.segment+1,D=new vt.Point(u.getx(z),u.gety(z)),A=Di(D,n),S=0<A.signedDistanceFromCamera?A.point:Ni(p,D,L,1,n),E=Ei(t.writingMode,L,S,d);if(E)return E}var C=ji(y*s.getoffsetX(t.glyphStartIndex),m,g,i,c,p,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,u,o,h);if(!C)return{notEnoughRoom:!0};f=[C]}for(var N=0,j=f;N<j.length;N+=1){var k=j[N];vt.addDynamicAttributes(l,k.point,k.angle)}return{}}function Ni(t,e,i,r,n){var o=Di(t.add(t.sub(e)._unit()),n).point,a=i.sub(o);return i.add(a._mult(r/a.mag()))}function ji(t,e,i,r,n,o,a,s,u,l,c,p){var h=r?t-e:t+e,d=0<h?1:-1,f=0;r&&(d*=-1,f=Math.PI),d<0&&(f+=Math.PI);for(var y=0<d?s+a:s+a+1,m=n,g=n,v=0,_=0,x=Math.abs(h),b=[];v+_<=x;){if((y+=d)<s||u<=y)return null;var M,w,I,g=m;b.push(m),void 0===(m=p[y])&&(m=0<(w=Di(M=new vt.Point(l.getx(y),l.gety(y)),c)).signedDistanceFromCamera?p[y]=w.point:(I=y-d,Ni(0===v?o:new vt.Point(l.getx(I),l.gety(I)),M,g,x-v+1,c))),v+=_,_=g.dist(m)}var T=(x-v)/_,L=m.sub(g),z=L.mult(T)._add(g);z._add(L._unit()._perp()._mult(i*d));var D=f+Math.atan2(m.y-g.y,m.x-g.x);return b.push(z),{point:z,angle:D,path:b}}Ti.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ti.prototype.insert=function(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)},Ti.prototype.insertCircle=function(t,e,i,r){this._forEachCell(e-r,i-r,e+r,i+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(r)},Ti.prototype._insertBoxCell=function(t,e,i,r,n,o){this.boxCells[n].push(o)},Ti.prototype._insertCircleCell=function(t,e,i,r,n,o){this.circleCells[n].push(o)},Ti.prototype._query=function(t,e,i,r,n,o){if(i<0||t>this.width||r<0||e>this.height)return!n&&[];var a=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=r){if(n)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],p=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:l-p,y1:c-p,x2:l+p,y2:c+p})}return o?a.filter(o):a}return this._forEachCell(t,e,i,r,this._queryCell,a,{hitTest:n,seenUids:{box:{},circle:{}}},o),n?0<a.length:a},Ti.prototype._queryCircle=function(t,e,i,r,n){var o=t-i,a=t+i,s=e-i,u=e+i;if(a<0||o>this.width||u<0||s>this.height)return!r&&[];var l=[];return this._forEachCell(o,s,a,u,this._queryCellCircle,l,{hitTest:r,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}},n),r?0<l.length:l},Ti.prototype.query=function(t,e,i,r,n){return this._query(t,e,i,r,!1,n)},Ti.prototype.hitTest=function(t,e,i,r,n){return this._query(t,e,i,r,!0,n)},Ti.prototype.hitTestCircle=function(t,e,i,r){return this._queryCircle(t,e,i,!0,r)},Ti.prototype._queryCell=function(t,e,i,r,n,o,a,s){var u=a.seenUids,l=this.boxCells[n];if(null!==l)for(var c=this.bboxes,p=0,h=l;p<h.length;p+=1){var d=h[p];if(!u.box[d]){u.box[d]=!0;var f=4*d;if(t<=c[2+f]&&e<=c[3+f]&&i>=c[0+f]&&r>=c[1+f]&&(!s||s(this.boxKeys[d]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[d],x1:c[f],y1:c[1+f],x2:c[2+f],y2:c[3+f]})}}}var y=this.circleCells[n];if(null!==y)for(var m=this.circles,g=0,v=y;g<v.length;g+=1){var _=v[g];if(!u.circle[_]){u.circle[_]=!0;var x=3*_;if(this._circleAndRectCollide(m[x],m[1+x],m[2+x],t,e,i,r)&&(!s||s(this.circleKeys[_]))){if(a.hitTest)return o.push(!0),!0;var b=m[x],M=m[1+x],w=m[2+x];o.push({key:this.circleKeys[_],x1:b-w,y1:M-w,x2:b+w,y2:M+w})}}}},Ti.prototype._queryCellCircle=function(t,e,i,r,n,o,a,s){var u=a.circle,l=a.seenUids,c=this.boxCells[n];if(null!==c)for(var p=this.bboxes,h=0,d=c;h<d.length;h+=1){var f=d[h];if(!l.box[f]){l.box[f]=!0;var y=4*f;if(this._circleAndRectCollide(u.x,u.y,u.radius,p[0+y],p[1+y],p[2+y],p[3+y])&&(!s||s(this.boxKeys[f])))return o.push(!0),!0}}var m=this.circleCells[n];if(null!==m)for(var g=this.circles,v=0,_=m;v<_.length;v+=1){var x=_[v];if(!l.circle[x]){l.circle[x]=!0;var b=3*x;if(this._circlesCollide(g[b],g[1+b],g[2+b],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[x])))return o.push(!0),!0}}},Ti.prototype._forEachCell=function(t,e,i,r,n,o,a,s){for(var u=this._convertToXCellCoord(t),l=this._convertToYCellCoord(e),c=this._convertToXCellCoord(i),p=this._convertToYCellCoord(r),h=u;h<=c;h++)for(var d=l;d<=p;d++)if(n.call(this,t,e,i,r,this.xCellCount*d+h,o,a,s))return},Ti.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Ti.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Ti.prototype._circlesCollide=function(t,e,i,r,n,o){var a=r-t,s=n-e,u=i+o;return a*a+s*s<u*u},Ti.prototype._circleAndRectCollide=function(t,e,i,r,n,o,a){var s=(o-r)/2,u=Math.abs(t-(r+s));if(s+i<u)return!1;var l=(a-n)/2,c=Math.abs(e-(n+l));if(l+i<c)return!1;if(u<=s||c<=l)return!0;var p=u-s,h=c-l;return p*p+h*h<=i*i};var ki=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Pi(t,e){for(var i=0;i<t;i++){var r=e.length;e.resize(r+4),e.float32.set(ki,3*r)}}function Oi(t,e,i){var r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t[3]=i[3]*r+i[7]*n+i[15],t}function Bi(t,e,i){void 0===e&&(e=new Ti(t.width+200,t.height+200,25)),void 0===i&&(i=new Ti(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200}function Ui(t,e,i){return e*(vt.EXTENT/(t.tileSize*Math.pow(2,i-t.tileID.overscaledZ)))}Bi.prototype.placeCollisionBox=function(t,e,i,r,n){var o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),a=i*o.perspectiveRatio,s=t.x1*a+o.point.x,u=t.y1*a+o.point.y,l=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,u,l,c)||!e&&this.grid.hitTest(s,u,l,c,n)?{box:[],offscreen:!1}:{box:[s,u,l,c],offscreen:this.isOffscreen(s,u,l,c)}},Bi.prototype.placeCollisionCircles=function(t,e,i,r,n,o,a,s,u,l,c,p,h){var d=[],f=new vt.Point(e.anchorX,e.anchorY),y=Di(f,o),m=Ai(this.transform.cameraToCenterDistance,y.signedDistanceFromCamera),g=(l?n/m:n*m)/vt.ONE_EM,v=Di(f,a).point,_=Si(g,r,e.lineOffsetX*g,e.lineOffsetY*g,!1,v,f,e,i,a,{}),x=!1,b=!1,M=!0;if(_){for(var w=.5*p*m+h,I=new vt.Point(-100,-100),T=new vt.Point(this.screenRightBoundary,this.screenBottomBoundary),L=new Ii,z=_.first,D=_.last,A=[],S=z.path.length-1;1<=S;S--)A.push(z.path[S]);for(var E=1;E<D.path.length;E++)A.push(D.path[E]);var C,N=2.5*w;s&&(A=(C=A.map(function(t){return Di(t,s)})).some(function(t){return t.signedDistanceFromCamera<=0})?[]:C.map(function(t){return t.point}));var j=[];if(0<A.length){for(var k=A[0].clone(),P=A[0].clone(),O=1;O<A.length;O++)k.x=Math.min(k.x,A[O].x),k.y=Math.min(k.y,A[O].y),P.x=Math.max(P.x,A[O].x),P.y=Math.max(P.y,A[O].y);j=k.x>=I.x&&P.x<=T.x&&k.y>=I.y&&P.y<=T.y?[A]:P.x<I.x||k.x>T.x||P.y<I.y||k.y>T.y?[]:vt.clipLine([A],I.x,I.y,T.x,T.y)}for(var B,U=0,R=j;U<R.length;U+=1){L.reset(R[U],.25*w),B=L.length<=.5*w?1:Math.ceil(L.paddedLength/N)+1;for(var F=0;F<B;F++){var Z=F/Math.max(B-1,1),V=L.lerp(Z),G=V.x+100,Y=V.y+100;d.push(G,Y,w,0);var Q=G-w,W=Y-w,H=G+w,q=Y+w,M=M&&this.isOffscreen(Q,W,H,q),b=b||this.isInsideGrid(Q,W,H,q);if(!t&&this.grid.hitTestCircle(G,Y,w,c)&&(x=!0,!u))return{circles:[],offscreen:!1,collisionDetected:x}}}}return{circles:!u&&x||!b?[]:d,offscreen:M,collisionDetected:x}},Bi.prototype.queryRenderedSymbols=function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var e=[],i=1/0,r=1/0,n=-1/0,o=-1/0,a=0,s=t;a<s.length;a+=1){var u=s[a],l=new vt.Point(u.x+100,u.y+100),i=Math.min(i,l.x),r=Math.min(r,l.y),n=Math.max(n,l.x),o=Math.max(o,l.y);e.push(l)}for(var c={},p={},h=0,d=this.grid.query(i,r,n,o).concat(this.ignoredGrid.query(i,r,n,o));h<d.length;h+=1){var f,y=d[h],m=y.key;void 0===c[m.bucketInstanceId]&&(c[m.bucketInstanceId]={}),c[m.bucketInstanceId][m.featureIndex]||(f=[new vt.Point(y.x1,y.y1),new vt.Point(y.x2,y.y1),new vt.Point(y.x2,y.y2),new vt.Point(y.x1,y.y2)],vt.polygonIntersectsPolygon(e,f)&&(c[m.bucketInstanceId][m.featureIndex]=!0,void 0===p[m.bucketInstanceId]&&(p[m.bucketInstanceId]=[]),p[m.bucketInstanceId].push(m.featureIndex)))}return p},Bi.prototype.insertCollisionBox=function(t,e,i,r,n){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:r,collisionGroupID:n},t[0],t[1],t[2],t[3])},Bi.prototype.insertCollisionCircles=function(t,e,i,r,n){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:i,featureIndex:r,collisionGroupID:n},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},Bi.prototype.projectAndGetPerspectiveRatio=function(t,e,i){var r=[e,i,0,1];return Oi(r,r,t),{point:new vt.Point((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},Bi.prototype.isOffscreen=function(t,e,i,r){return i<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary},Bi.prototype.isInsideGrid=function(t,e,i,r){return 0<=i&&t<this.gridRightBoundary&&0<=r&&e<this.gridBottomBoundary},Bi.prototype.getViewportMatrix=function(){var t=vt.identity([]);return vt.translate(t,t,[-100,-100,0]),t};function Ri(t,e,i,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&i?1:0,this.placed=i}Ri.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};function Fi(t,e,i,r,n){this.text=new Ri(t?t.text:null,e,i,n),this.icon=new Ri(t?t.icon:null,e,r,n)}Fi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};function Zi(t,e,i){this.text=t,this.icon=e,this.skipFade=i}function Vi(){this.invProjMatrix=vt.create(),this.viewportMatrix=vt.create(),this.circles=[]}function Gi(t,e,i,r,n){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=r,this.tileID=n}function Yi(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}function Qi(t,e,i,r,n){var o=vt.getAnchorAlignment(t),a=-(o.horizontalAlign-.5)*e,s=-(o.verticalAlign-.5)*i,u=vt.evaluateVariableOffset(t,r);return new vt.Point(a+u[0]*n,s+u[1]*n)}function Wi(t,e,i,r,n,o){var a=t.x1,s=t.x2,u=t.y1,l=t.y2,c=t.anchorPointX,p=t.anchorPointY,h=new vt.Point(e,i);return r&&h._rotate(n?o:-o),{x1:a+h.x,y1:u+h.y,x2:s+h.x,y2:l+h.y,anchorPointX:c,anchorPointY:p}}Yi.prototype.get=function(t){return this.crossSourceCollisions?{ID:0,predicate:null}:(this.collisionGroups[t]||(e=++this.maxGroupID,this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}),this.collisionGroups[t]);var e};function Hi(t,e,i,r){this.transform=t.clone(),this.collisionIndex=new Bi(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new Yi(i),this.collisionCircleArrays={},(this.prevPlacement=r)&&(r.prevPlacement=void 0),this.placedOrientations={}}function qi(t,e,i,r,n){t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0)}Hi.prototype.getBucketParts=function(t,e,i,r){var n=i.getBucket(e),o=i.latestFeatureIndex;if(n&&o&&e.id===n.layerIds[0]){var a,s=i.collisionBoxArray,u=n.layers[0].layout,l=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),c=i.tileSize/vt.EXTENT,p=this.transform.calculatePosMatrix(i.tileID.toUnwrapped()),h="map"===u.get("text-pitch-alignment"),d="map"===u.get("text-rotation-alignment"),f=Ui(i,1,this.transform.zoom),y=Li(p,h,d,this.transform,f),m=null;h&&(a=zi(p,h,d,this.transform,f),m=vt.multiply([],this.transform.labelPlaneMatrix,a)),this.retainedQueryData[n.bucketInstanceId]=new Gi(n.bucketInstanceId,o,n.sourceLayerIndex,n.index,i.tileID);var g={bucket:n,layout:u,posMatrix:p,textLabelPlaneMatrix:y,labelToScreenMatrix:m,scale:l,textPixelRatio:c,holdingForFade:i.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:vt.evaluateSizeForZoom(n.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(n.sourceID)};if(r)for(var v=0,_=n.sortKeyRanges;v<_.length;v+=1){var x=_[v];t.push({sortKey:x.sortKey,symbolInstanceStart:x.symbolInstanceStart,symbolInstanceEnd:x.symbolInstanceEnd,parameters:g})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:n.symbolInstances.length,parameters:g})}},Hi.prototype.attemptAnchorPlacement=function(t,e,i,r,n,o,a,s,u,l,c,p,h,d,f){var y,m=[p.textOffset0,p.textOffset1],g=Qi(t,i,r,m,n),v=this.collisionIndex.placeCollisionBox(Wi(e,g.x,g.y,o,a,this.transform.angle),c,s,u,l.predicate);if(!f||0!==this.collisionIndex.placeCollisionBox(Wi(f,g.x,g.y,o,a,this.transform.angle),c,s,u,l.predicate).box.length)return 0<v.box.length?(this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(y=this.prevPlacement.variableOffsets[p.crossTileID].anchor),this.variableOffsets[p.crossTileID]={textOffset:m,width:i,height:r,anchor:t,textBoxScale:n,prevAnchor:y},this.markUsedJustification(h,t,p,d),h.allowVerticalPlacement&&(this.markUsedOrientation(h,d,p),this.placedOrientations[p.crossTileID]=d),{shift:g,placedGlyphBoxes:v}):void 0},Hi.prototype.placeLayerBucketPart=function(t,C,N){var j=this,e=t.parameters,k=e.bucket,P=e.layout,O=e.posMatrix,B=e.textLabelPlaneMatrix,U=e.labelToScreenMatrix,R=e.textPixelRatio,F=e.holdingForFade,i=e.collisionBoxArray,Z=e.partiallyEvaluatedTextSize,V=e.collisionGroup,G=P.get("text-optional"),Y=P.get("icon-optional"),Q=P.get("text-allow-overlap"),W=P.get("icon-allow-overlap"),H="map"===P.get("text-rotation-alignment"),q="map"===P.get("text-pitch-alignment"),X="none"!==P.get("icon-text-fit"),r="viewport-y"===P.get("symbol-z-order"),J=Q&&(W||!k.hasIconData()||Y),K=W&&(Q||!k.hasTextData()||G);!k.collisionArrays&&i&&k.deserializeCollisionBoxes(i);function n(p,n){if(!C[p.crossTileID])if(F)j.placements[p.crossTileID]=new Zi(!1,!1,!1);else{var t,h=!1,e=!1,i=!0,d=null,o={box:null,offscreen:null},a={box:null,offscreen:null},r=null,s=null,u=0,l=0,c=0;n.textFeatureIndex?u=n.textFeatureIndex:p.useRuntimeCollisionCircles&&(u=p.featureIndex),n.verticalTextFeatureIndex&&(l=n.verticalTextFeatureIndex);var f,y,m,g,v,_,x,b,M,w,I,T,L=n.textBox;L&&(f=function(t){var e,i=vt.WritingMode.horizontal;return!k.allowVerticalPlacement||t||!j.prevPlacement||(e=j.prevPlacement.placedOrientations[p.crossTileID])&&(j.placedOrientations[p.crossTileID]=e,j.markUsedOrientation(k,i=e,p)),i},y=function(t,e){if(k.allowVerticalPlacement&&0<p.numVerticalGlyphVertices&&n.verticalTextBox)for(var i=0,r=k.writingModes;i<r.length&&(r[i]===vt.WritingMode.vertical?(o=e(),a=o):o=t(),!(o&&o.box&&o.box.length));i+=1);else o=t()},P.get("text-variable-anchor")?(m=P.get("text-variable-anchor"),j.prevPlacement&&j.prevPlacement.variableOffsets[p.crossTileID]&&(g=j.prevPlacement.variableOffsets[p.crossTileID],0<m.indexOf(g.anchor)&&(m=m.filter(function(t){return t!==g.anchor})).unshift(g.anchor)),v=function(t,e,i){for(var r=t.x2-t.x1,n=t.y2-t.y1,o=p.textBoxScale,a=X&&!W?e:null,s={box:[],offscreen:!1},u=Q?2*m.length:m.length,l=0;l<u;++l){var c=j.attemptAnchorPlacement(m[l%m.length],t,r,n,o,H,q,R,O,V,l>=m.length,p,k,i,a);if(c&&(s=c.placedGlyphBoxes)&&s.box&&s.box.length){h=!0,d=c.shift;break}}return s},y(function(){return v(L,n.iconBox,vt.WritingMode.horizontal)},function(){var t=n.verticalTextBox;return k.allowVerticalPlacement&&!(o&&o.box&&o.box.length)&&0<p.numVerticalGlyphVertices&&t?v(t,n.verticalIconBox,vt.WritingMode.vertical):{box:null,offscreen:null}}),o&&(h=o.box,i=o.offscreen),_=f(o&&o.box),h||!j.prevPlacement||(x=j.prevPlacement.variableOffsets[p.crossTileID])&&(j.variableOffsets[p.crossTileID]=x,j.markUsedJustification(k,x.anchor,p,_))):(b=function(t,e){var i=j.collisionIndex.placeCollisionBox(t,Q,R,O,V.predicate);return i&&i.box&&i.box.length&&(j.markUsedOrientation(k,e,p),j.placedOrientations[p.crossTileID]=e),i},y(function(){return b(L,vt.WritingMode.horizontal)},function(){var t=n.verticalTextBox;return k.allowVerticalPlacement&&0<p.numVerticalGlyphVertices&&t?b(t,vt.WritingMode.vertical):{box:null,offscreen:null}}),f(o&&o.box&&o.box.length))),h=(t=o)&&t.box&&0<t.box.length,i=t&&t.offscreen,p.useRuntimeCollisionCircles&&(M=k.text.placedSymbolArray.get(p.centerJustifiedTextSymbolIndex),w=vt.evaluateSizeForFeature(k.textSizeData,Z,M),I=P.get("text-padding"),r=j.collisionIndex.placeCollisionCircles(Q,M,k.lineVertexArray,k.glyphOffsetArray,w,O,B,U,N,q,V.predicate,p.collisionCircleDiameter,I),h=Q||0<r.circles.length&&!r.collisionDetected,i=i&&r.offscreen),n.iconFeatureIndex&&(c=n.iconFeatureIndex),n.iconBox&&(T=function(t){var e=X&&d?Wi(t,d.x,d.y,H,q,j.transform.angle):t;return j.collisionIndex.placeCollisionBox(e,W,R,O,V.predicate)},e=a&&a.box&&a.box.length&&n.verticalIconBox?0<(s=T(n.verticalIconBox)).box.length:0<(s=T(n.iconBox)).box.length,i=i&&s.offscreen);var z=G||0===p.numHorizontalGlyphVertices&&0===p.numVerticalGlyphVertices,D=Y||0===p.numIconVertices;if(z||D?D?z||(e=e&&h):h=e&&h:e=h=e&&h,h&&t&&t.box&&j.collisionIndex.insertCollisionBox(t.box,P.get("text-ignore-placement"),k.bucketInstanceId,a&&a.box&&l?l:u,V.ID),e&&s&&j.collisionIndex.insertCollisionBox(s.box,P.get("icon-ignore-placement"),k.bucketInstanceId,c,V.ID),r&&(h&&j.collisionIndex.insertCollisionCircles(r.circles,P.get("text-ignore-placement"),k.bucketInstanceId,u,V.ID),N)){var A=k.bucketInstanceId,S=j.collisionCircleArrays[A];void 0===S&&(S=j.collisionCircleArrays[A]=new Vi);for(var E=0;E<r.circles.length;E+=4)S.circles.push(r.circles[E+0]),S.circles.push(r.circles[E+1]),S.circles.push(r.circles[E+2]),S.circles.push(r.collisionDetected?1:0)}j.placements[p.crossTileID]=new Zi(h||J,e||K,i||k.justReloaded),C[p.crossTileID]=!0}}var o;if(r)for(var a=k.getSortedSymbolIndexes(this.transform.angle),s=a.length-1;0<=s;--s){var u=a[s];n(k.symbolInstances.get(u),k.collisionArrays[u])}else for(var l=t.symbolInstanceStart;l<t.symbolInstanceEnd;l++)n(k.symbolInstances.get(l),k.collisionArrays[l]);N&&k.bucketInstanceId in this.collisionCircleArrays&&(o=this.collisionCircleArrays[k.bucketInstanceId],vt.invert(o.invProjMatrix,O),o.viewportMatrix=this.collisionIndex.getViewportMatrix()),k.justReloaded=!1},Hi.prototype.markUsedJustification=function(t,e,i,r){for(var n=r===vt.WritingMode.vertical?i.verticalPlacedTextSymbolIndex:{left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex}[vt.getAnchorJustification(e)],o=0,a=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex];o<a.length;o+=1){var s=a[o];0<=s&&(t.text.placedSymbolArray.get(s).crossTileID=0<=n&&s!==n?0:i.crossTileID)}},Hi.prototype.markUsedOrientation=function(t,e,i){for(var r=e===vt.WritingMode.horizontal||e===vt.WritingMode.horizontalOnly?e:0,n=e===vt.WritingMode.vertical?e:0,o=0,a=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];o<a.length;o+=1)t.text.placedSymbolArray.get(a[o]).placedOrientation=r;i.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=n)},Hi.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,i=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var r=e?e.symbolFadeChange(t):1,n=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(var s in this.placements)var u=this.placements[s],l=n[s],i=l?(this.opacities[s]=new Fi(l,r,u.text,u.icon),i||u.text!==l.text.placed||u.icon!==l.icon.placed):(this.opacities[s]=new Fi(null,r,u.text,u.icon,u.skipFade),i||u.text||u.icon);for(var c in n){var p,h=n[c];this.opacities[c]||((p=new Fi(h,r,!1,!1)).isHidden()||(this.opacities[c]=p,i=i||h.text.placed||h.icon.placed))}for(var d in o)this.variableOffsets[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.variableOffsets[d]=o[d]);for(var f in a)this.placedOrientations[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.placedOrientations[f]=a[f]);i?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},Hi.prototype.updateLayerOpacities=function(t,e){for(var i={},r=0,n=e;r<n.length;r+=1){var o=n[r],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,i,o.collisionBoxArray)}},Hi.prototype.updateBucketOpacities=function(b,M,t){var w=this;b.hasTextData()&&b.text.opacityVertexArray.clear(),b.hasIconData()&&b.icon.opacityVertexArray.clear(),b.hasIconCollisionBoxData()&&b.iconCollisionBox.collisionVertexArray.clear(),b.hasTextCollisionBoxData()&&b.textCollisionBox.collisionVertexArray.clear();var e=b.layers[0].layout,I=new Fi(null,0,!1,!1,!0),i=e.get("text-allow-overlap"),r=e.get("icon-allow-overlap"),T=e.get("text-variable-anchor"),L="map"===e.get("text-rotation-alignment"),z="map"===e.get("text-pitch-alignment"),D="none"!==e.get("icon-text-fit"),A=new Fi(null,0,i&&(r||!b.hasIconData()||e.get("icon-optional")),r&&(i||!b.hasTextData()||e.get("text-optional")),!0);!b.collisionArrays&&t&&(b.hasIconCollisionBoxData()||b.hasTextCollisionBoxData())&&b.deserializeCollisionBoxes(t);for(var n,S=function(t,e,i){for(var r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(i)},o=0;o<b.symbolInstances.length;o++)!function(t){var e=b.symbolInstances.get(t),i=e.numHorizontalGlyphVertices,r=e.numVerticalGlyphVertices,n=e.crossTileID,o=w.opacities[n];M[n]?o=I:o||(w.opacities[n]=o=A),M[n]=!0;var a,s,u,l,c,p,h,d,f,y,m,g=0<e.numIconVertices,v=w.placedOrientations[e.crossTileID],_=v===vt.WritingMode.vertical,x=v===vt.WritingMode.horizontal||v===vt.WritingMode.horizontalOnly;(0<i||0<r)&&(a=rr(o.text),S(b.text,i,_?or:a),S(b.text,r,x?or:a),s=o.text.isHidden(),[e.rightJustifiedTextSymbolIndex,e.centerJustifiedTextSymbolIndex,e.leftJustifiedTextSymbolIndex].forEach(function(t){0<=t&&(b.text.placedSymbolArray.get(t).hidden=s||_?1:0)}),0<=e.verticalPlacedTextSymbolIndex&&(b.text.placedSymbolArray.get(e.verticalPlacedTextSymbolIndex).hidden=s||x?1:0),(u=w.variableOffsets[e.crossTileID])&&w.markUsedJustification(b,u.anchor,e,v),(l=w.placedOrientations[e.crossTileID])&&(w.markUsedJustification(b,"left",e,l),w.markUsedOrientation(b,l,e))),g&&(c=rr(o.icon),p=!(D&&e.verticalPlacedIconSymbolIndex&&_),0<=e.placedIconSymbolIndex&&(S(b.icon,e.numIconVertices,p?c:or),b.icon.placedSymbolArray.get(e.placedIconSymbolIndex).hidden=o.icon.isHidden()),0<=e.verticalPlacedIconSymbolIndex&&(S(b.icon,e.numVerticalIconVertices,p?or:c),b.icon.placedSymbolArray.get(e.verticalPlacedIconSymbolIndex).hidden=o.icon.isHidden())),!b.hasIconCollisionBoxData()&&!b.hasTextCollisionBoxData()||(h=b.collisionArrays[t])&&(d=new vt.Point(0,0),(h.textBox||h.verticalTextBox)&&(f=!0,T&&((y=w.variableOffsets[n])?(d=Qi(y.anchor,y.width,y.height,y.textOffset,y.textBoxScale),L&&d._rotate(z?w.transform.angle:-w.transform.angle)):f=!1),h.textBox&&qi(b.textCollisionBox.collisionVertexArray,o.text.placed,!f||_,d.x,d.y),h.verticalTextBox&&qi(b.textCollisionBox.collisionVertexArray,o.text.placed,!f||x,d.x,d.y)),m=Boolean(!x&&h.verticalIconBox),h.iconBox&&qi(b.iconCollisionBox.collisionVertexArray,o.icon.placed,m,D?d.x:0,D?d.y:0),h.verticalIconBox&&qi(b.iconCollisionBox.collisionVertexArray,o.icon.placed,!m,D?d.x:0,D?d.y:0))}(o);b.sortFeatures(this.transform.angle),this.retainedQueryData[b.bucketInstanceId]&&(this.retainedQueryData[b.bucketInstanceId].featureSortOrder=b.featureSortOrder),b.hasTextData()&&b.text.opacityVertexBuffer&&b.text.opacityVertexBuffer.updateData(b.text.opacityVertexArray),b.hasIconData()&&b.icon.opacityVertexBuffer&&b.icon.opacityVertexBuffer.updateData(b.icon.opacityVertexArray),b.hasIconCollisionBoxData()&&b.iconCollisionBox.collisionVertexBuffer&&b.iconCollisionBox.collisionVertexBuffer.updateData(b.iconCollisionBox.collisionVertexArray),b.hasTextCollisionBoxData()&&b.textCollisionBox.collisionVertexBuffer&&b.textCollisionBox.collisionVertexBuffer.updateData(b.textCollisionBox.collisionVertexArray),b.bucketInstanceId in this.collisionCircleArrays&&(n=this.collisionCircleArrays[b.bucketInstanceId],b.placementInvProjMatrix=n.invProjMatrix,b.placementViewportMatrix=n.viewportMatrix,b.collisionCircleArray=n.circles,delete this.collisionCircleArrays[b.bucketInstanceId])},Hi.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Hi.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},Hi.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},Hi.prototype.stillRecent=function(t,e){var i=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*i>t},Hi.prototype.setStale=function(){this.stale=!0};var Xi=Math.pow(2,25),Ji=Math.pow(2,24),Ki=Math.pow(2,17),$i=Math.pow(2,16),tr=Math.pow(2,9),er=Math.pow(2,8),ir=Math.pow(2,1);function rr(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*Xi+e*Ji+i*Ki+e*$i+i*tr+e*er+i*ir+e}function nr(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}var or=0;nr.prototype.continuePlacement=function(t,e,i,r,n){for(var o=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,n())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(function(t,e){return t.sortKey-e.sortKey}));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,n())return!0;return!1};function ar(t,e,i,r,n,o,a){this.placement=new Hi(t,n,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=r,this._done=!1}ar.prototype.isDone=function(){return this._done},ar.prototype.continuePlacement=function(t,e,i){for(var r=this,n=vt.browser.now(),o=function(){var t=vt.browser.now()-n;return!r._forceFullPlacement&&2<t};0<=this._currentPlacementIndex;){var a=e[t[this._currentPlacementIndex]],s=this.placement.collisionIndex.transform.zoom;if("symbol"===a.type&&(!a.minzoom||a.minzoom<=s)&&(!a.maxzoom||a.maxzoom>s)){if(this._inProgressLayer||(this._inProgressLayer=new nr(a)),this._inProgressLayer.continuePlacement(i[a.source],this.placement,this._showCollisionBoxes,a,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ar.prototype.commit=function(t){return this.placement.commit(t),this.placement};function sr(t,e,i){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var r=0;r<e.length;r++){var n=e.get(r),o=n.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,t)})}}var ur=512/vt.EXTENT/2;sr.prototype.getScaledCoordinates=function(t,e){var i=ur/Math.pow(2,e.canonical.z-this.tileID.canonical.z);return{x:Math.floor((e.canonical.x*vt.EXTENT+t.anchorX)*i),y:Math.floor((e.canonical.y*vt.EXTENT+t.anchorY)*i)}},sr.prototype.findMatches=function(t,e,i){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),n=0;n<t.length;n++){var o=t.get(n);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),u=0,l=a;u<l.length;u+=1){var c=l[u];if(Math.abs(c.coord.x-s.x)<=r&&Math.abs(c.coord.y-s.y)<=r&&!i[c.crossTileID]){i[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};function lr(){this.maxCrossTileID=0}lr.prototype.generate=function(){return++this.maxCrossTileID};function cr(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}cr.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var i in this.indexes){var r=this.indexes[i],n={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),n[a.tileID.key]=a}this.indexes[i]=n}this.lng=t},cr.prototype.addBucket=function(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var n=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var u=a[s];u.tileID.isChildOf(t)&&u.findMatches(e.symbolInstances,t,n)}else{var l=a[t.scaledTo(Number(o)).key];l&&l.findMatches(e.symbolInstances,t,n)}}for(var c=0;c<e.symbolInstances.length;c++){var p=e.symbolInstances.get(c);p.crossTileID||(p.crossTileID=i.generate(),n[p.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new sr(t,e.symbolInstances,e.bucketInstanceId),!0},cr.prototype.removeBucketCrossTileIDs=function(t,e){for(var i in e.indexedSymbolInstances)for(var r=0,n=e.indexedSymbolInstances[i];r<n.length;r+=1)delete this.usedCrossTileIDs[t][n[r].crossTileID]},cr.prototype.removeStaleBuckets=function(t){var e=!1;for(var i in this.indexes){var r=this.indexes[i];for(var n in r)t[r[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,r[n]),delete r[n],e=!0)}return e};var pr=function(){this.layerIndexes={},this.crossTileIDs=new lr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};pr.prototype.addLayer=function(t,e,i){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new cr);var n=!1,o={};r.handleWrapJump(i);for(var a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.getBucket(t);l&&t.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,l,this.crossTileIDs)&&(n=!0),o[l.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(n=!0),n},pr.prototype.pruneUnusedLayers=function(t){var e={};for(var i in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[i]||delete this.layerIndexes[i]};function hr(t,e){return vt.emitValidationErrors(t,e&&e.filter(function(t){return"source.canvas"!==t.identifier}))}var dr,fr=vt.pick(vi,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),yr=vt.pick(vi,["setCenter","setZoom","setBearing","setPitch"]),mr=function(){var t={},e=vt.styleSpec.$version;for(var i in vt.styleSpec.$root){var r,n=vt.styleSpec.$root[i];n.required&&null!=(r="version"===i?e:"array"===n.type?[]:{})&&(t[i]=r)}return t}(),gr=((dr=vt.Evented)&&(vr.__proto__=dr),((vr.prototype=Object.create(dr&&dr.prototype)).constructor=vr).prototype.loadURL=function(t,e){var i=this;void 0===e&&(e={}),this.fire(new vt.Event("dataloading",{dataType:"style"}));var r="boolean"==typeof e.validate?e.validate:!vt.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,e.accessToken);var n=this.map._requestManager.transformRequest(t,vt.ResourceType.Style);this._request=vt.getJSON(n,function(t,e){i._request=null,t?i.fire(new vt.ErrorEvent(t)):e&&i._load(e,r)})},vr.prototype.loadJSON=function(t,e){var i=this;void 0===e&&(e={}),this.fire(new vt.Event("dataloading",{dataType:"style"})),this._request=vt.browser.frame(function(){i._request=null,i._load(t,!1!==e.validate)})},vr.prototype.loadEmpty=function(){this.fire(new vt.Event("dataloading",{dataType:"style"})),this._load(mr,!1)},vr.prototype._load=function(t,e){if(!e||!hr(this,vt.validateStyle(t))){for(var i in this._loaded=!0,(this.stylesheet=t).sources)this.addSource(i,t.sources[i],{validate:!1});t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var r=gi(this.stylesheet.layers);this._order=r.map(function(t){return t.id}),this._layers={},this._serializedLayers={};for(var n=0,o=r;n<o.length;n+=1){var a=o[n];(a=vt.createStyleLayer(a)).setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=a,this._serializedLayers[a.id]=a.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new vt.Event("data",{dataType:"style"})),this.fire(new vt.Event("style.load"))}},vr.prototype._loadSprite=function(t){var e,i,f,y,m,g,r,n,o,a=this;function s(){if(g)f(g);else if(y&&m){var t=vt.browser.getImageData(m),e={};for(var i in y){var r=y[i],n=r.width,o=r.height,a=r.x,s=r.y,u=r.sdf,l=r.pixelRatio,c=r.stretchX,p=r.stretchY,h=r.content,d=new vt.RGBAImage({width:n,height:o});vt.RGBAImage.copy(t,d,{x:a,y:s},{x:0,y:0},{width:n,height:o}),e[i]={data:d,pixelRatio:l,sdf:u,stretchX:c,stretchY:p,content:h}}f(null,e)}}this._spriteRequest=(e=t,i=this.map._requestManager,f=function(t,e){if(a._spriteRequest=null,t)a.fire(new vt.ErrorEvent(t));else if(e)for(var i in e)a.imageManager.addImage(i,e[i]);a.imageManager.setLoaded(!0),a._availableImages=a.imageManager.listImages(),a.dispatcher.broadcast("setImages",a._availableImages),a.fire(new vt.Event("data",{dataType:"style"}))},r=1<vt.browser.devicePixelRatio?"@2x":"",n=vt.getJSON(i.transformRequest(i.normalizeSpriteURL(e,r,".json"),vt.ResourceType.SpriteJSON),function(t,e){n=null,g||(g=t,y=e,s())}),o=vt.getImage(i.transformRequest(i.normalizeSpriteURL(e,r,".png"),vt.ResourceType.SpriteImage),function(t,e){o=null,g||(g=t,m=e,s())}),{cancel:function(){n&&(n.cancel(),n=null),o&&(o.cancel(),o=null)}})},vr.prototype._validateLayer=function(t){var e,i,r=this.sourceCaches[t.source];r&&(!(e=t.sourceLayer)||("geojson"===(i=r.getSource()).type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(e))&&this.fire(new vt.ErrorEvent(new Error('Source layer "'+e+'" does not exist on source "'+i.id+'" as specified by style layer "'+t.id+'"'))))},vr.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},vr.prototype._serializeLayers=function(t){for(var e=[],i=0,r=t;i<r.length;i+=1){var n=this._layers[r[i]];"custom"!==n.type&&e.push(n.serialize())}return e},vr.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},vr.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},vr.prototype.update=function(t){if(this._loaded){var e=this._changed;if(this._changed){var i=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var n in(i.length||r.length)&&this._updateWorkerLayers(i,r),this._updatedSources){var o=this._updatedSources[n];"reload"===o?this._reloadSource(n):"clear"===o&&this._clearSource(n)}for(var a in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[a].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}for(var s in this.sourceCaches)this.sourceCaches[s].used=!1;for(var u=0,l=this._order;u<l.length;u+=1){var c=this._layers[l[u]];c.recalculate(t,this._availableImages),!c.isHidden(t.zoom)&&c.source&&(this.sourceCaches[c.source].used=!0)}this.light.recalculate(t),this.z=t.zoom,e&&this.fire(new vt.Event("data",{dataType:"style"}))}},vr.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},vr.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},vr.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},vr.prototype.setState=function(t){var e=this;if(this._checkLoaded(),hr(this,vt.validateStyle(t)))return!1;(t=vt.clone$1(t)).layers=gi(t.layers);var i=function(t,e){if(!t)return[{command:vi.setStyle,args:[e]}];var i=[];try{if(!vt.deepEqual(t.version,e.version))return[{command:vi.setStyle,args:[e]}];vt.deepEqual(t.center,e.center)||i.push({command:vi.setCenter,args:[e.center]}),vt.deepEqual(t.zoom,e.zoom)||i.push({command:vi.setZoom,args:[e.zoom]}),vt.deepEqual(t.bearing,e.bearing)||i.push({command:vi.setBearing,args:[e.bearing]}),vt.deepEqual(t.pitch,e.pitch)||i.push({command:vi.setPitch,args:[e.pitch]}),vt.deepEqual(t.sprite,e.sprite)||i.push({command:vi.setSprite,args:[e.sprite]}),vt.deepEqual(t.glyphs,e.glyphs)||i.push({command:vi.setGlyphs,args:[e.glyphs]}),vt.deepEqual(t.transition,e.transition)||i.push({command:vi.setTransition,args:[e.transition]}),vt.deepEqual(t.light,e.light)||i.push({command:vi.setLight,args:[e.light]});var r={},n=[];!function(t,e,i,r){var n,o,a,s;for(n in e=e||{},t=t||{})t.hasOwnProperty(n)&&(e.hasOwnProperty(n)||xi(n,i,r));for(n in e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)?vt.deepEqual(t[n],e[n])||("geojson"===t[n].type&&"geojson"===e[n].type&&function(t,e,i){var r;for(r in t[i])if(t[i].hasOwnProperty(r)&&"data"!==r&&!vt.deepEqual(t[i][r],e[i][r]))return;for(r in e[i])if(e[i].hasOwnProperty(r)&&"data"!==r&&!vt.deepEqual(t[i][r],e[i][r]))return;return 1}(t,e,n)?i.push({command:vi.setGeoJSONSourceData,args:[n,e[n].data]}):(a=e,xi(o=n,s=i,r),_i(o,a,s))):_i(n,e,i))}(t.sources,e.sources,n,r);var o=[];t.layers&&t.layers.forEach(function(t){r[t.source]?i.push({command:vi.removeLayer,args:[t.id]}):o.push(t)}),i=i.concat(n),function(t,e,i){e=e||[];for(var r,n,o,a,s,u=(t=t||[]).map(Mi),l=e.map(Mi),c=t.reduce(wi,{}),p=e.reduce(wi,{}),h=u.slice(),d=Object.create(null),f=0,y=0;f<u.length;f++)p.hasOwnProperty(r=u[f])?y++:(i.push({command:vi.removeLayer,args:[r]}),h.splice(h.indexOf(r,y),1));for(y=f=0;f<l.length;f++)h[h.length-1-f]!==(r=l[l.length-1-f])&&(c.hasOwnProperty(r)?(i.push({command:vi.removeLayer,args:[r]}),h.splice(h.lastIndexOf(r,h.length-y),1)):y++,i.push({command:vi.addLayer,args:[p[r],a=h[h.length-f]]}),h.splice(h.length-f,0,r),d[r]=!0);for(f=0;f<l.length;f++)if(n=c[r=l[f]],o=p[r],!d[r]&&!vt.deepEqual(n,o))if(vt.deepEqual(n.source,o.source)&&vt.deepEqual(n["source-layer"],o["source-layer"])&&vt.deepEqual(n.type,o.type)){for(s in bi(n.layout,o.layout,i,r,null,vi.setLayoutProperty),bi(n.paint,o.paint,i,r,null,vi.setPaintProperty),vt.deepEqual(n.filter,o.filter)||i.push({command:vi.setFilter,args:[r,o.filter]}),vt.deepEqual(n.minzoom,o.minzoom)&&vt.deepEqual(n.maxzoom,o.maxzoom)||i.push({command:vi.setLayerZoomRange,args:[r,o.minzoom,o.maxzoom]}),n)n.hasOwnProperty(s)&&"layout"!==s&&"paint"!==s&&"filter"!==s&&"metadata"!==s&&"minzoom"!==s&&"maxzoom"!==s&&(0===s.indexOf("paint.")?bi(n[s],o[s],i,r,s.slice(6),vi.setPaintProperty):vt.deepEqual(n[s],o[s])||i.push({command:vi.setLayerProperty,args:[r,s,o[s]]}));for(s in o)o.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&"layout"!==s&&"paint"!==s&&"filter"!==s&&"metadata"!==s&&"minzoom"!==s&&"maxzoom"!==s&&(0===s.indexOf("paint.")?bi(n[s],o[s],i,r,s.slice(6),vi.setPaintProperty):vt.deepEqual(n[s],o[s])||i.push({command:vi.setLayerProperty,args:[r,s,o[s]]}))}else i.push({command:vi.removeLayer,args:[r]}),a=h[h.lastIndexOf(r)+1],i.push({command:vi.addLayer,args:[o,a]})}(o,e.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:vi.setStyle,args:[e]}]}return i}(this.serialize(),t).filter(function(t){return!(t.command in yr)});if(0===i.length)return!1;var r=i.filter(function(t){return!(t.command in fr)});if(0<r.length)throw new Error("Unimplemented: "+r.map(function(t){return t.command}).join(", ")+".");return i.forEach(function(t){"setTransition"!==t.command&&e[t.command].apply(e,t.args)}),this.stylesheet=t,!0},vr.prototype.addImage=function(t,e){if(this.getImage(t))return this.fire(new vt.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,e),this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.fire(new vt.Event("data",{dataType:"style"}))},vr.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},vr.prototype.getImage=function(t){return this.imageManager.getImage(t)},vr.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire(new vt.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.fire(new vt.Event("data",{dataType:"style"}))},vr.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},vr.prototype.addSource=function(t,e,i){var r,n=this;if(void 0===i&&(i={}),this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!e.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(e).join(", ")+".");0<=["vector","raster","geojson","video","image"].indexOf(e.type)&&this._validate(vt.validateStyle.source,"sources."+t,e,null,i)||(this.map&&this.map._collectResourceTiming&&(e.collectResourceTiming=!0),(r=this.sourceCaches[t]=new si(t,e,this.dispatcher)).style=this,r.setEventedParent(this,function(){return{isSourceLoaded:n.loaded(),source:r.serialize(),sourceId:t}}),r.onAdd(this.map),this._changed=!0)},vr.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(var e in this._layers)if(this._layers[e].source===t)return this.fire(new vt.ErrorEvent(new Error('Source "'+t+'" cannot be removed while layer "'+e+'" is using it.')));var i=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],i.fire(new vt.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),i.setEventedParent(null),i.clearTiles(),i.onRemove&&i.onRemove(this.map),this._changed=!0},vr.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},vr.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},vr.prototype.addLayer=function(t,e,i){void 0===i&&(i={}),this._checkLoaded();var r,n=t.id;if(this.getLayer(n))this.fire(new vt.ErrorEvent(new Error('Layer with id "'+n+'" already exists on this map')));else{if("custom"===t.type){if(hr(this,vt.validateCustomStyleLayer(t)))return;r=vt.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(n,t.source),t=vt.clone$1(t),t=vt.extend(t,{source:n})),this._validate(vt.validateStyle.layer,"layers."+n,t,{arrayIndex:-1},i))return;r=vt.createStyleLayer(t),this._validateLayer(r),r.setEventedParent(this,{layer:{id:n}}),this._serializedLayers[r.id]=r.serialize()}var o,a=e?this._order.indexOf(e):this._order.length;e&&-1===a?this.fire(new vt.ErrorEvent(new Error('Layer with id "'+e+'" does not exist on this map.'))):(this._order.splice(a,0,n),this._layerOrderChanged=!0,this._layers[n]=r,this._removedLayers[n]&&r.source&&"custom"!==r.type&&(o=this._removedLayers[n],delete this._removedLayers[n],o.type!==r.type?this._updatedSources[r.source]="clear":(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause())),this._updateLayer(r),r.onAdd&&r.onAdd(this.map))}},vr.prototype.moveLayer=function(t,e){var i,r;this._checkLoaded(),this._changed=!0,this._layers[t]?t!==e&&(i=this._order.indexOf(t),this._order.splice(i,1),r=e?this._order.indexOf(e):this._order.length,e&&-1===r?this.fire(new vt.ErrorEvent(new Error('Layer with id "'+e+'" does not exist on this map.'))):(this._order.splice(r,0,t),this._layerOrderChanged=!0)):this.fire(new vt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")))},vr.prototype.removeLayer=function(t){this._checkLoaded();var e,i=this._layers[t];i?(i.setEventedParent(null),e=this._order.indexOf(t),this._order.splice(e,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=i,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],i.onRemove&&i.onRemove(this.map)):this.fire(new vt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")))},vr.prototype.getLayer=function(t){return this._layers[t]},vr.prototype.hasLayer=function(t){return t in this._layers},vr.prototype.setLayerZoomRange=function(t,e,i){this._checkLoaded();var r=this.getLayer(t);r?r.minzoom===e&&r.maxzoom===i||(null!=e&&(r.minzoom=e),null!=i&&(r.maxzoom=i),this._updateLayer(r)):this.fire(new vt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")))},vr.prototype.setFilter=function(t,e,i){void 0===i&&(i={}),this._checkLoaded();var r=this.getLayer(t);if(r){if(!vt.deepEqual(r.filter,e))return null==e?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(vt.validateStyle.filter,"layers."+r.id+".filter",e,null,i)||(r.filter=vt.clone$1(e),this._updateLayer(r)))}else this.fire(new vt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")))},vr.prototype.getFilter=function(t){return vt.clone$1(this.getLayer(t).filter)},vr.prototype.setLayoutProperty=function(t,e,i,r){void 0===r&&(r={}),this._checkLoaded();var n=this.getLayer(t);n?vt.deepEqual(n.getLayoutProperty(e),i)||(n.setLayoutProperty(e,i,r),this._updateLayer(n)):this.fire(new vt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},vr.prototype.getLayoutProperty=function(t,e){var i=this.getLayer(t);if(i)return i.getLayoutProperty(e);this.fire(new vt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style.")))},vr.prototype.setPaintProperty=function(t,e,i,r){void 0===r&&(r={}),this._checkLoaded();var n=this.getLayer(t);n?vt.deepEqual(n.getPaintProperty(e),i)||(n.setPaintProperty(e,i,r)&&this._updateLayer(n),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new vt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},vr.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},vr.prototype.setFeatureState=function(t,e){this._checkLoaded();var i,r=t.source,n=t.sourceLayer,o=this.sourceCaches[r];void 0!==o?"geojson"===(i=o.getSource().type)&&n?this.fire(new vt.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==i||n?(void 0===t.id&&this.fire(new vt.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(n,t.id,e)):this.fire(new vt.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types."))):this.fire(new vt.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},vr.prototype.removeFeatureState=function(t,e){this._checkLoaded();var i,r,n=t.source,o=this.sourceCaches[n];void 0!==o?(r="vector"===(i=o.getSource().type)?t.sourceLayer:void 0,"vector"!==i||r?e&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new vt.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):o.removeFeatureState(r,t.id,e):this.fire(new vt.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))):this.fire(new vt.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},vr.prototype.getFeatureState=function(t){this._checkLoaded();var e=t.source,i=t.sourceLayer,r=this.sourceCaches[e];if(void 0!==r){if("vector"!==r.getSource().type||i)return void 0===t.id&&this.fire(new vt.ErrorEvent(new Error("The feature id parameter must be provided."))),r.getFeatureState(i,t.id);this.fire(new vt.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new vt.ErrorEvent(new Error("The source '"+e+"' does not exist in the map's style.")))},vr.prototype.getTransition=function(){return vt.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},vr.prototype.serialize=function(){return vt.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:vt.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._serializeLayers(this._order)},function(t){return void 0!==t})},vr.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},vr.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,i=function(t){return"fill-extrusion"===e._layers[t].type},r={},n=[],o=this._order.length-1;0<=o;o--){var a=this._order[o];if(i(a)){r[a]=o;for(var s=0,u=t;s<u.length;s+=1){var l=u[s][a];if(l)for(var c=0,p=l;c<p.length;c+=1)n.push(p[c])}}}n.sort(function(t,e){return e.intersectionZ-t.intersectionZ});for(var h=[],d=this._order.length-1;0<=d;d--){var f=this._order[d];if(i(f))for(var y=n.length-1;0<=y;y--){var m=n[y].feature;if(r[m.layer.id]<d)break;h.push(m),n.pop()}else for(var g=0,v=t;g<v.length;g+=1){var _=v[g][f];if(_)for(var x=0,b=_;x<b.length;x+=1)h.push(b[x].feature)}}return h},vr.prototype.queryRenderedFeatures=function(f,t,e){t&&t.filter&&this._validate(vt.validateStyle.filter,"queryRenderedFeatures.filter",t.filter,null,t);var i={};if(t&&t.layers){if(!Array.isArray(t.layers))return this.fire(new vt.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var r=0,n=t.layers;r<n.length;r+=1){var o=n[r],a=this._layers[o];if(!a)return this.fire(new vt.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be queried for features."))),[];i[a.source]=!0}}var s=[];for(var u in t.availableImages=this._availableImages,this.sourceCaches)t.layers&&!i[u]||s.push(K(this.sourceCaches[u],this._layers,this._serializedLayers,f,t,e));return this.placement&&s.push(function(s,u,n,l,t,e){for(var c={},p=t.queryRenderedSymbols(f),i=[],r=0,o=Object.keys(p).map(Number);r<o.length;r+=1)i.push(e[o[r]]);i.sort($);for(var h=0,d=i;h<d.length;h+=1)!function(){var n=d[h],t=n.featureIndex.lookupSymbolFeatures(p[n.bucketInstanceId],u,n.bucketIndex,n.sourceLayerIndex,l.filter,l.layers,l.availableImages,s);for(var e in t){var i=c[e]=c[e]||[],r=t[e];r.sort(function(t,e){var i=n.featureSortOrder;if(i){var r=i.indexOf(t.featureIndex);return i.indexOf(e.featureIndex)-r}return e.featureIndex-t.featureIndex});for(var o=0,a=r;o<a.length;o+=1)i.push(a[o])}}();for(var a in c)!function(r){c[r].forEach(function(t){var e=t.feature,i=n[s[r].source].getFeatureState(e.layer["source-layer"],e.id);e.source=e.layer.source,e.layer["source-layer"]&&(e.sourceLayer=e.layer["source-layer"]),e.state=i})}(a);return c}(this._layers,this._serializedLayers,this.sourceCaches,t,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(s)},vr.prototype.querySourceFeatures=function(t,e){e&&e.filter&&this._validate(vt.validateStyle.filter,"querySourceFeatures.filter",e.filter,null,e);var i=this.sourceCaches[t];return i?function(e,t){for(var i=e.getRenderableIds().map(function(t){return e.getTileByID(t)}),r=[],n={},o=0;o<i.length;o++){var a=i[o],s=a.tileID.canonical.key;n[s]||(n[s]=!0,a.querySourceFeatures(r,t))}return r}(i,e):[]},vr.prototype.addSourceType=function(t,e,i){return vr.getSourceType(t)?i(new Error('A source type called "'+t+'" already exists.')):(vr.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},i):i(null,null))},vr.prototype.getLight=function(){return this.light.getLight()},vr.prototype.setLight=function(t,e){void 0===e&&(e={}),this._checkLoaded();var i,r=this.light.getLight(),n=!1;for(var o in t)if(!vt.deepEqual(t[o],r[o])){n=!0;break}n&&(i={now:vt.browser.now(),transition:vt.extend({duration:300,delay:0},this.stylesheet.transition)},this.light.setLight(t,e),this.light.updateTransitions(i))},vr.prototype._validate=function(t,e,i,r,n){return void 0===n&&(n={}),(!n||!1!==n.validate)&&hr(this,t.call(vt.validateStyle,vt.extend({key:e,style:this.serialize(),value:i,styleSpec:vt.styleSpec},r)))},vr.prototype._remove=function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),vt.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[t].setEventedParent(null);for(var e in this.sourceCaches)this.sourceCaches[e].clearTiles(),this.sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},vr.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},vr.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},vr.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},vr.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},vr.prototype._updatePlacement=function(t,e,i,r,n){void 0===n&&(n=!1);for(var o=!1,a=!1,s={},u=0,l=this._order;u<l.length;u+=1){var c,p,h=this._layers[l[u]];"symbol"===h.type&&(s[h.source]||(c=this.sourceCaches[h.source],s[h.source]=c.getRenderableIds(!0).map(function(t){return c.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})),p=this.crossTileSymbolIndex.addLayer(h,s[h.source],t.center.lng),o=o||p)}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((n=n||this._layerOrderChanged||0===i)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(vt.browser.now(),t.zoom))&&(this.pauseablePlacement=new ar(t,this._order,n,e,i,r,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(vt.browser.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(var d=0,f=this._order;d<f.length;d+=1){var y=this._layers[f[d]];"symbol"===y.type&&this.placement.updateLayerOpacities(y,s[y.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(vt.browser.now())},vr.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},vr.prototype.getImages=function(t,e,i){this.imageManager.getImages(e.icons,i),this._updateTilesForChangedImages();var r=this.sourceCaches[e.source];r&&r.setDependencies(e.tileID.key,e.type,e.icons)},vr.prototype.getGlyphs=function(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)},vr.prototype.getResource=function(t,e,i){return vt.makeRequest(e,i)},vr);function vr(t,e){var o=this;void 0===e&&(e={}),dr.call(this),this.map=t,this.dispatcher=new L(mi(),this),this.imageManager=new c,this.imageManager.setEventedParent(this),this.glyphManager=new v(t._requestManager,e.localIdeographFontFamily),this.lineAtlas=new I(256,512),this.crossTileSymbolIndex=new pr,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new vt.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",vt.getReferrer());var r=this;this._rtlTextPluginCallback=vr.registerForPluginStateChange(function(t){r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},function(t,e){if(vt.triggerPluginCompletionEvent(t),e&&e.every(function(t){return t}))for(var i in r.sourceCaches)r.sourceCaches[i].reload()})}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var i=e.getSource();if(i&&i.vectorLayerIds)for(var r in o._layers){var n=o._layers[r];n.source===i.id&&o._validateLayer(n)}}}})}gr.getSourceType=function(t){return G[t]},gr.setSourceType=function(t,e){G[t]=e},gr.registerForPluginStateChange=vt.registerForPluginStateChange;var _r=vt.createLayout([{name:"a_pos",type:"Int16",components:2}]),xr=Qr("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),br=Qr("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Mr=Qr("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),wr=Qr("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Ir=Qr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Tr=Qr("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Lr=Qr("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),zr=Qr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Dr=Qr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Ar=Qr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Sr=Qr("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Er=Qr("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Cr=Qr("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Nr=Qr("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),jr=Qr("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),kr=Qr("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Pr=Qr("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Or=Qr("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Br=Qr("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Ur=Qr("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Rr=Qr("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Fr=Qr("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),Zr=Qr("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Vr=Qr("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Gr=Qr("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),Yr=Qr("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function Qr(t,e){var i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute ([\w]+) ([\w]+)/g),n=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(n):n,s={};return{fragmentSource:t=t.replace(i,function(t,e,i,r,n){return s[n]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+n+"\nvarying "+i+" "+r+" "+n+";\n#else\nuniform "+i+" "+r+" u_"+n+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+n+"\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n"}),vertexSource:e=e.replace(i,function(t,e,i,r,n){var o="float"===r?"vec2":"vec4",a=n.match(/color/)?"color":o;return s[n]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+n+"\nuniform lowp float u_"+n+"_t;\nattribute "+i+" "+o+" a_"+n+";\nvarying "+i+" "+r+" "+n+";\n#else\nuniform "+i+" "+r+" u_"+n+";\n#endif\n":"vec4"==a?"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+n+" = a_"+n+";\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+n+" = unpack_mix_"+a+"(a_"+n+", u_"+n+"_t);\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+n+"\nuniform lowp float u_"+n+"_t;\nattribute "+i+" "+o+" a_"+n+";\n#else\nuniform "+i+" "+r+" u_"+n+";\n#endif\n":"vec4"==a?"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+i+" "+r+" "+n+" = a_"+n+";\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+i+" "+r+" "+n+" = unpack_mix_"+a+"(a_"+n+", u_"+n+"_t);\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n"}),staticAttributes:r,staticUniforms:a}}function Wr(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}var Hr=Object.freeze({__proto__:null,prelude:xr,background:br,backgroundPattern:Mr,circle:wr,clippingMask:Ir,heatmap:Tr,heatmapTexture:Lr,collisionBox:zr,collisionCircle:Dr,debug:Ar,fill:Sr,fillOutline:Er,fillOutlinePattern:Cr,fillPattern:Nr,fillExtrusion:jr,fillExtrusionPattern:kr,hillshadePrepare:Pr,hillshade:Or,line:Br,lineGradient:Ur,linePattern:Rr,lineSDF:Fr,raster:Zr,symbolIcon:Vr,symbolSDF:Gr,symbolTextAndIcon:Yr});function qr(t){for(var e,i=[],r=0;r<t.length;r++){null!==t[r]&&(e=t[r].split(" "),i.push(e.pop()))}return i}Wr.prototype.bind=function(t,e,i,r,n,o,a,s){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==r.length,l=0;!u&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(u=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===i&&!u&&this.boundIndexBuffer===n&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),n&&n.dynamicDraw&&n.bind(),s&&s.bind()):this.freshBind(e,i,r,n,o,a,s)},Wr.prototype.freshBind=function(t,e,i,r,n,o,a){var s,u=t.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=r,this.boundVertexOffset=n,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var p=u;p<s;p++)c.disableVertexAttribArray(p)}e.enableAttributes(c,t);for(var h=0,d=i;h<d.length;h+=1)d[h].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,n);for(var f=0,y=i;f<y.length;f+=1){var m=y[f];m.bind(),m.setVertexAttribPointers(c,t,n)}o&&(o.bind(),o.setVertexAttribPointers(c,t,n)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,n)),l.currentNumAttributes=u},Wr.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};function Xr(t,e,i,r,n,o){var a=t.gl;this.program=a.createProgram();for(var s=qr(i.staticAttributes),u=r?r.getBinderAttributes():[],l=s.concat(u),c=i.staticUniforms?qr(i.staticUniforms):[],p=r?r.getBinderUniforms():[],h=[],d=0,f=c.concat(p);d<f.length;d+=1){var y=f[d];h.indexOf(y)<0&&h.push(y)}var m=r?r.defines():[];o&&m.push("#define OVERDRAW_INSPECTOR;");var g=m.concat(xr.fragmentSource,i.fragmentSource).join("\n"),v=m.concat(xr.vertexSource,i.vertexSource).join("\n"),_=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(_,g),a.compileShader(_),a.attachShader(this.program,_);var x=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(x,v),a.compileShader(x),a.attachShader(this.program,x),this.attributes={};var b={};this.numAttributes=l.length;for(var M=0;M<this.numAttributes;M++)l[M]&&(a.bindAttribLocation(this.program,M,l[M]),this.attributes[l[M]]=M);a.linkProgram(this.program),a.deleteShader(x),a.deleteShader(_);for(var w=0;w<h.length;w++){var I,T=h[w];!T||b[T]||(I=a.getUniformLocation(this.program,T))&&(b[T]=I)}this.fixedUniforms=n(t,b),this.binderUniforms=r?r.getUniforms(t,b):[]}}}function Jr(t,e,i){var r=1/Ui(i,1,e.transform.tileZoom),n=Math.pow(2,i.tileID.overscaledZ),o=i.tileSize*Math.pow(2,e.transform.tileZoom)/n,a=o*(i.tileID.canonical.x+i.tileID.wrap*n),s=o*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}Xr.prototype.draw=function(t,e,i,r,n,o,a,s,u,l,c,p,h,d,f,y){var m,g=t.gl;if(!this.failedToCreate){for(var v in t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(r),t.setColorMode(n),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[v].set(a[v]);d&&d.setUniforms(t,this.binderUniforms,p,{zoom:h});for(var _=((m={})[g.LINES]=2,m[g.TRIANGLES]=3,m[g.LINE_STRIP]=1,m[e]),x=0,b=c.get();x<b.length;x+=1){var M=b[x],w=M.vaos||(M.vaos={});(w[s]||(w[s]=new Wr)).bind(t,this,u,d?d.getPaintVertexBuffers():[],l,M.vertexOffset,f,y),g.drawElements(e,M.primitiveLength*_,g.UNSIGNED_SHORT,M.primitiveOffset*_*2)}}};function Kr(t,e,i,r){var n=e.style.light,o=n.properties.get("position"),a=[o.x,o.y,o.z],s=vt.create$1();"viewport"===n.properties.get("anchor")&&vt.fromRotation(s,-e.transform.angle),vt.transformMat3(a,a,s);var u=n.properties.get("color");return{u_matrix:t,u_lightpos:a,u_lightintensity:n.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+i,u_opacity:r}}function $r(t){return{u_matrix:t}}function tn(t,e,i,r){return vt.extend($r(t),Jr(i,e,r))}function en(t){return{u_matrix:t}}function rn(t,e,i){var r=t.transform;return{u_matrix:an(t,e,i),u_ratio:1/Ui(e,1,r.zoom),u_device_pixel_ratio:vt.browser.devicePixelRatio,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}}var nn=function(t,e,i){return void 0===i&&(i=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:i}};function on(t,e){return 1/Ui(t,1,e.tileZoom)}function an(t,e,i){return t.translatePosMatrix(e.tileID.posMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}function sn(t,e,i,r,n){return{u_matrix:t,u_tl_parent:e,u_scale_parent:i,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*n.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:n.paint.get("raster-brightness-min"),u_brightness_high:n.paint.get("raster-brightness-max"),u_saturation_factor:0<(a=n.paint.get("raster-saturation"))?1-1/(1.001-a):-a,u_contrast_factor:0<(o=n.paint.get("raster-contrast"))?1/(1-o):1+o,u_spin_weights:function(t){t*=Math.PI/180;var e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}(n.paint.get("raster-hue-rotate"))};var o,a}function un(t,e,i,r,n,o,a,s,u,l){var c=n.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:c.width/c.height,u_fade_change:n.options.fadeDuration?n.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+r,u_texsize:l,u_texture:0}}function ln(t,e,i,r,n,o,a,s,u,l,c){var p=n.transform;return vt.extend(un(t,e,i,r,n,o,a,s,u,l),{u_gamma_scale:r?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_device_pixel_ratio:vt.browser.devicePixelRatio,u_is_halo:+c})}var cn,pn={fillExtrusion:function(t,e){return{u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_lightpos:new vt.Uniform3f(t,e.u_lightpos),u_lightintensity:new vt.Uniform1f(t,e.u_lightintensity),u_lightcolor:new vt.Uniform3f(t,e.u_lightcolor),u_vertical_gradient:new vt.Uniform1f(t,e.u_vertical_gradient),u_opacity:new vt.Uniform1f(t,e.u_opacity)}},fillExtrusionPattern:function(t,e){return{u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_lightpos:new vt.Uniform3f(t,e.u_lightpos),u_lightintensity:new vt.Uniform1f(t,e.u_lightintensity),u_lightcolor:new vt.Uniform3f(t,e.u_lightcolor),u_vertical_gradient:new vt.Uniform1f(t,e.u_vertical_gradient),u_height_factor:new vt.Uniform1f(t,e.u_height_factor),u_image:new vt.Uniform1i(t,e.u_image),u_texsize:new vt.Uniform2f(t,e.u_texsize),u_pixel_coord_upper:new vt.Uniform2f(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new vt.Uniform2f(t,e.u_pixel_coord_lower),u_scale:new vt.Uniform3f(t,e.u_scale),u_fade:new vt.Uniform1f(t,e.u_fade),u_opacity:new vt.Uniform1f(t,e.u_opacity)}},fill:function(t,e){return{u_matrix:new vt.UniformMatrix4f(t,e.u_matrix)}},fillPattern:function(t,e){return{u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_image:new vt.Uniform1i(t,e.u_image),u_texsize:new vt.Uniform2f(t,e.u_texsize),u_pixel_coord_upper:new vt.Uniform2f(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new vt.Uniform2f(t,e.u_pixel_coord_lower),u_scale:new vt.Uniform3f(t,e.u_scale),u_fade:new vt.Uniform1f(t,e.u_fade)}},fillOutline:function(t,e){return{u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_world:new vt.Uniform2f(t,e.u_world)}},fillOutlinePattern:function(t,e){return{u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_world:new vt.Uniform2f(t,e.u_world),u_image:new vt.Uniform1i(t,e.u_image),u_texsize:new vt.Uniform2f(t,e.u_texsize),u_pixel_coord_upper:new vt.Uniform2f(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new vt.Uniform2f(t,e.u_pixel_coord_lower),u_scale:new vt.Uniform3f(t,e.u_scale),u_fade:new vt.Uniform1f(t,e.u_fade)}},circle:function(t,e){return{u_camera_to_center_distance:new vt.Uniform1f(t,e.u_camera_to_center_distance),u_scale_with_map:new vt.Uniform1i(t,e.u_scale_with_map),u_pitch_with_map:new vt.Uniform1i(t,e.u_pitch_with_map),u_extrude_scale:new vt.Uniform2f(t,e.u_extrude_scale),u_device_pixel_ratio:new vt.Uniform1f(t,e.u_device_pixel_ratio),u_matrix:new vt.UniformMatrix4f(t,e.u_matrix)}},collisionBox:function(t,e){return{u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_camera_to_center_distance:new vt.Uniform1f(t,e.u_camera_to_center_distance),u_pixels_to_tile_units:new vt.Uniform1f(t,e.u_pixels_to_tile_units),u_extrude_scale:new vt.Uniform2f(t,e.u_extrude_scale),u_overscale_factor:new vt.Uniform1f(t,e.u_overscale_factor)}},collisionCircle:function(t,e){return{u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_inv_matrix:new vt.UniformMatrix4f(t,e.u_inv_matrix),u_camera_to_center_distance:new vt.Uniform1f(t,e.u_camera_to_center_distance),u_viewport_size:new vt.Uniform2f(t,e.u_viewport_size)}},debug:function(t,e){return{u_color:new vt.UniformColor(t,e.u_color),u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_overlay:new vt.Uniform1i(t,e.u_overlay),u_overlay_scale:new vt.Uniform1f(t,e.u_overlay_scale)}},clippingMask:function(t,e){return{u_matrix:new vt.UniformMatrix4f(t,e.u_matrix)}},heatmap:function(t,e){return{u_extrude_scale:new vt.Uniform1f(t,e.u_extrude_scale),u_intensity:new vt.Uniform1f(t,e.u_intensity),u_matrix:new vt.UniformMatrix4f(t,e.u_matrix)}},heatmapTexture:function(t,e){return{u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_world:new vt.Uniform2f(t,e.u_world),u_image:new vt.Uniform1i(t,e.u_image),u_color_ramp:new vt.Uniform1i(t,e.u_color_ramp),u_opacity:new vt.Uniform1f(t,e.u_opacity)}},hillshade:function(t,e){return{u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_image:new vt.Uniform1i(t,e.u_image),u_latrange:new vt.Uniform2f(t,e.u_latrange),u_light:new vt.Uniform2f(t,e.u_light),u_shadow:new vt.UniformColor(t,e.u_shadow),u_highlight:new vt.UniformColor(t,e.u_highlight),u_accent:new vt.UniformColor(t,e.u_accent)}},hillshadePrepare:function(t,e){return{u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_image:new vt.Uniform1i(t,e.u_image),u_dimension:new vt.Uniform2f(t,e.u_dimension),u_zoom:new vt.Uniform1f(t,e.u_zoom),u_maxzoom:new vt.Uniform1f(t,e.u_maxzoom),u_unpack:new vt.Uniform4f(t,e.u_unpack)}},line:function(t,e){return{u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_ratio:new vt.Uniform1f(t,e.u_ratio),u_device_pixel_ratio:new vt.Uniform1f(t,e.u_device_pixel_ratio),u_units_to_pixels:new vt.Uniform2f(t,e.u_units_to_pixels)}},lineGradient:function(t,e){return{u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_ratio:new vt.Uniform1f(t,e.u_ratio),u_device_pixel_ratio:new vt.Uniform1f(t,e.u_device_pixel_ratio),u_units_to_pixels:new vt.Uniform2f(t,e.u_units_to_pixels),u_image:new vt.Uniform1i(t,e.u_image)}},linePattern:function(t,e){return{u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_texsize:new vt.Uniform2f(t,e.u_texsize),u_ratio:new vt.Uniform1f(t,e.u_ratio),u_device_pixel_ratio:new vt.Uniform1f(t,e.u_device_pixel_ratio),u_image:new vt.Uniform1i(t,e.u_image),u_units_to_pixels:new vt.Uniform2f(t,e.u_units_to_pixels),u_scale:new vt.Uniform3f(t,e.u_scale),u_fade:new vt.Uniform1f(t,e.u_fade)}},lineSDF:function(t,e){return{u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_ratio:new vt.Uniform1f(t,e.u_ratio),u_device_pixel_ratio:new vt.Uniform1f(t,e.u_device_pixel_ratio),u_units_to_pixels:new vt.Uniform2f(t,e.u_units_to_pixels),u_patternscale_a:new vt.Uniform2f(t,e.u_patternscale_a),u_patternscale_b:new vt.Uniform2f(t,e.u_patternscale_b),u_sdfgamma:new vt.Uniform1f(t,e.u_sdfgamma),u_image:new vt.Uniform1i(t,e.u_image),u_tex_y_a:new vt.Uniform1f(t,e.u_tex_y_a),u_tex_y_b:new vt.Uniform1f(t,e.u_tex_y_b),u_mix:new vt.Uniform1f(t,e.u_mix)}},raster:function(t,e){return{u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_tl_parent:new vt.Uniform2f(t,e.u_tl_parent),u_scale_parent:new vt.Uniform1f(t,e.u_scale_parent),u_buffer_scale:new vt.Uniform1f(t,e.u_buffer_scale),u_fade_t:new vt.Uniform1f(t,e.u_fade_t),u_opacity:new vt.Uniform1f(t,e.u_opacity),u_image0:new vt.Uniform1i(t,e.u_image0),u_image1:new vt.Uniform1i(t,e.u_image1),u_brightness_low:new vt.Uniform1f(t,e.u_brightness_low),u_brightness_high:new vt.Uniform1f(t,e.u_brightness_high),u_saturation_factor:new vt.Uniform1f(t,e.u_saturation_factor),u_contrast_factor:new vt.Uniform1f(t,e.u_contrast_factor),u_spin_weights:new vt.Uniform3f(t,e.u_spin_weights)}},symbolIcon:function(t,e){return{u_is_size_zoom_constant:new vt.Uniform1i(t,e.u_is_size_zoom_constant),u_is_size_feature_constant:new vt.Uniform1i(t,e.u_is_size_feature_constant),u_size_t:new vt.Uniform1f(t,e.u_size_t),u_size:new vt.Uniform1f(t,e.u_size),u_camera_to_center_distance:new vt.Uniform1f(t,e.u_camera_to_center_distance),u_pitch:new vt.Uniform1f(t,e.u_pitch),u_rotate_symbol:new vt.Uniform1i(t,e.u_rotate_symbol),u_aspect_ratio:new vt.Uniform1f(t,e.u_aspect_ratio),u_fade_change:new vt.Uniform1f(t,e.u_fade_change),u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_label_plane_matrix:new vt.UniformMatrix4f(t,e.u_label_plane_matrix),u_coord_matrix:new vt.UniformMatrix4f(t,e.u_coord_matrix),u_is_text:new vt.Uniform1i(t,e.u_is_text),u_pitch_with_map:new vt.Uniform1i(t,e.u_pitch_with_map),u_texsize:new vt.Uniform2f(t,e.u_texsize),u_texture:new vt.Uniform1i(t,e.u_texture)}},symbolSDF:function(t,e){return{u_is_size_zoom_constant:new vt.Uniform1i(t,e.u_is_size_zoom_constant),u_is_size_feature_constant:new vt.Uniform1i(t,e.u_is_size_feature_constant),u_size_t:new vt.Uniform1f(t,e.u_size_t),u_size:new vt.Uniform1f(t,e.u_size),u_camera_to_center_distance:new vt.Uniform1f(t,e.u_camera_to_center_distance),u_pitch:new vt.Uniform1f(t,e.u_pitch),u_rotate_symbol:new vt.Uniform1i(t,e.u_rotate_symbol),u_aspect_ratio:new vt.Uniform1f(t,e.u_aspect_ratio),u_fade_change:new vt.Uniform1f(t,e.u_fade_change),u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_label_plane_matrix:new vt.UniformMatrix4f(t,e.u_label_plane_matrix),u_coord_matrix:new vt.UniformMatrix4f(t,e.u_coord_matrix),u_is_text:new vt.Uniform1i(t,e.u_is_text),u_pitch_with_map:new vt.Uniform1i(t,e.u_pitch_with_map),u_texsize:new vt.Uniform2f(t,e.u_texsize),u_texture:new vt.Uniform1i(t,e.u_texture),u_gamma_scale:new vt.Uniform1f(t,e.u_gamma_scale),u_device_pixel_ratio:new vt.Uniform1f(t,e.u_device_pixel_ratio),u_is_halo:new vt.Uniform1i(t,e.u_is_halo)}},symbolTextAndIcon:function(t,e){return{u_is_size_zoom_constant:new vt.Uniform1i(t,e.u_is_size_zoom_constant),u_is_size_feature_constant:new vt.Uniform1i(t,e.u_is_size_feature_constant),u_size_t:new vt.Uniform1f(t,e.u_size_t),u_size:new vt.Uniform1f(t,e.u_size),u_camera_to_center_distance:new vt.Uniform1f(t,e.u_camera_to_center_distance),u_pitch:new vt.Uniform1f(t,e.u_pitch),u_rotate_symbol:new vt.Uniform1i(t,e.u_rotate_symbol),u_aspect_ratio:new vt.Uniform1f(t,e.u_aspect_ratio),u_fade_change:new vt.Uniform1f(t,e.u_fade_change),u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_label_plane_matrix:new vt.UniformMatrix4f(t,e.u_label_plane_matrix),u_coord_matrix:new vt.UniformMatrix4f(t,e.u_coord_matrix),u_is_text:new vt.Uniform1i(t,e.u_is_text),u_pitch_with_map:new vt.Uniform1i(t,e.u_pitch_with_map),u_texsize:new vt.Uniform2f(t,e.u_texsize),u_texsize_icon:new vt.Uniform2f(t,e.u_texsize_icon),u_texture:new vt.Uniform1i(t,e.u_texture),u_texture_icon:new vt.Uniform1i(t,e.u_texture_icon),u_gamma_scale:new vt.Uniform1f(t,e.u_gamma_scale),u_device_pixel_ratio:new vt.Uniform1f(t,e.u_device_pixel_ratio),u_is_halo:new vt.Uniform1i(t,e.u_is_halo)}},background:function(t,e){return{u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_opacity:new vt.Uniform1f(t,e.u_opacity),u_color:new vt.UniformColor(t,e.u_color)}},backgroundPattern:function(t,e){return{u_matrix:new vt.UniformMatrix4f(t,e.u_matrix),u_opacity:new vt.Uniform1f(t,e.u_opacity),u_image:new vt.Uniform1i(t,e.u_image),u_pattern_tl_a:new vt.Uniform2f(t,e.u_pattern_tl_a),u_pattern_br_a:new vt.Uniform2f(t,e.u_pattern_br_a),u_pattern_tl_b:new vt.Uniform2f(t,e.u_pattern_tl_b),u_pattern_br_b:new vt.Uniform2f(t,e.u_pattern_br_b),u_texsize:new vt.Uniform2f(t,e.u_texsize),u_mix:new vt.Uniform1f(t,e.u_mix),u_pattern_size_a:new vt.Uniform2f(t,e.u_pattern_size_a),u_pattern_size_b:new vt.Uniform2f(t,e.u_pattern_size_b),u_scale_a:new vt.Uniform1f(t,e.u_scale_a),u_scale_b:new vt.Uniform1f(t,e.u_scale_b),u_pixel_coord_upper:new vt.Uniform2f(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new vt.Uniform2f(t,e.u_pixel_coord_lower),u_tile_units_to_pixels:new vt.Uniform1f(t,e.u_tile_units_to_pixels)}}};function hn(t,e,i,r,n,o,a){for(var s,u,l,c,p,h,d,f,y,m=t.context,g=m.gl,v=t.useProgram("collisionBox"),_=[],x=0,b=0,M=0;M<r.length;M++){var w,I,T,L,z,D=r[M],A=e.getTile(D),S=A.getBucket(i);S&&(w=D.posMatrix,0===n[0]&&0===n[1]||(w=t.translatePosMatrix(D.posMatrix,A,n,o)),I=a?S.textCollisionBox:S.iconCollisionBox,0<(T=S.collisionCircleArray).length&&(L=vt.create(),z=w,vt.mul(L,S.placementInvProjMatrix,t.transform.glCoordMatrix),vt.mul(L,L,S.placementViewportMatrix),_.push({circleArray:T,circleOffset:b,transform:z,invTransform:L}),b=x+=T.length/4),I&&v.draw(m,g.LINES,ei.disabled,ii.disabled,t.colorModeForRenderPass(),ni.disabled,(s=w,u=t.transform,0,c=Ui(l=A,1,u.zoom),p=Math.pow(2,u.zoom-l.tileID.overscaledZ),h=l.tileID.overscaleFactor(),{u_matrix:s,u_camera_to_center_distance:u.cameraToCenterDistance,u_pixels_to_tile_units:c,u_extrude_scale:[u.pixelsToGLUnits[0]/(c*p),u.pixelsToGLUnits[1]/(c*p)],u_overscale_factor:h}),i.id,I.layoutVertexBuffer,I.indexBuffer,I.segments,null,t.transform.zoom,null,null,I.collisionVertexBuffer))}if(a&&_.length){var E=t.useProgram("collisionCircle"),C=new vt.StructArrayLayout2f1f2i16;C.resize(4*x),C._trim();for(var N=0,j=0,k=_;j<k.length;j+=1)for(var P=k[j],O=0;O<P.circleArray.length/4;O++){var B=4*O,U=P.circleArray[0+B],R=P.circleArray[1+B],F=P.circleArray[2+B],Z=P.circleArray[3+B];C.emplace(N++,U,R,F,Z,0),C.emplace(N++,U,R,F,Z,1),C.emplace(N++,U,R,F,Z,2),C.emplace(N++,U,R,F,Z,3)}(!cn||cn.length<2*x)&&(cn=function(){var t=2*x,e=new vt.StructArrayLayout3ui6;e.resize(t),e._trim();for(var i=0;i<t;i++){var r=6*i;e.uint16[0+r]=4*i+0,e.uint16[1+r]=4*i+1,e.uint16[2+r]=4*i+2,e.uint16[3+r]=4*i+2,e.uint16[4+r]=4*i+3,e.uint16[5+r]=4*i+0}return e}());for(var V=m.createIndexBuffer(cn,!0),G=m.createVertexBuffer(C,vt.collisionCircleLayout.members,!0),Y=0,Q=_;Y<Q.length;Y+=1){var W=Q[Y],H=(d=W.transform,f=W.invTransform,y=t.transform,{u_matrix:d,u_inv_matrix:f,u_camera_to_center_distance:y.cameraToCenterDistance,u_viewport_size:[y.width,y.height]});E.draw(m,g.TRIANGLES,ei.disabled,ii.disabled,t.colorModeForRenderPass(),ni.disabled,H,i.id,G,V,vt.SegmentVector.simpleSegment(0,2*W.circleOffset,W.circleArray.length,W.circleArray.length/2),null,t.transform.zoom,null,null,null)}G.destroy(),V.destroy()}}var dn=vt.identity(new Float32Array(16));function fn(t,e,i,r,n,o,a,s,u,l,c){var p=t.text.placedSymbolArray,h=t.text.dynamicLayoutVertexArray,d=t.icon.dynamicLayoutVertexArray,f={};h.clear();for(var y,m,g,v,_,x,b,M,w,I,T=0;T<p.length;T++){var L=p.get(T),z=L.hidden||!L.crossTileID||t.allowVerticalPlacement&&!L.placedOrientation?null:r[L.crossTileID];if(z){var D=new vt.Point(L.anchorX,L.anchorY),A=Di(D,i?s:a),S=Ai(o.cameraToCenterDistance,A.signedDistanceFromCamera),E=n.evaluateSizeForFeature(t.textSizeData,l,L)*S/vt.ONE_EM;i&&(E*=t.tilePixelRatio/u);for(var C=(y=z.anchor,m=z.width,g=z.height,v=z.textOffset,_=z.textBoxScale,x=E,0,b=vt.getAnchorAlignment(y),M=-(b.horizontalAlign-.5)*m,w=-(b.verticalAlign-.5)*g,I=vt.evaluateVariableOffset(y,v),new vt.Point((M/_+I[0])*x,(w/_+I[1])*x)),N=i?Di(D.add(C),a).point:A.point.add(e?C.rotate(-o.angle):C),j=t.allowVerticalPlacement&&L.placedOrientation===vt.WritingMode.vertical?Math.PI/2:0,k=0;k<L.numGlyphs;k++)vt.addDynamicAttributes(h,N,j);c&&0<=L.associatedIconIndex&&(f[L.associatedIconIndex]={shiftedAnchor:N,angle:j})}else Pi(L.numGlyphs,h)}if(c){d.clear();for(var P=t.icon.placedSymbolArray,O=0;O<P.length;O++){var B=P.get(O);if(B.hidden)Pi(B.numGlyphs,d);else{var U=f[O];if(U)for(var R=0;R<B.numGlyphs;R++)vt.addDynamicAttributes(d,U.shiftedAnchor,U.angle);else Pi(B.numGlyphs,d)}}t.icon.dynamicLayoutVertexBuffer.updateData(d)}t.text.dynamicLayoutVertexBuffer.updateData(h)}function yn(t,e,i,r,n,o,a,s,u,l,c,p){for(var h,d,f,y,m,g,v,_,x,b,M,w,I=t.context,T=I.gl,L=t.transform,z="map"===s,D="map"===u,A=z&&"point"!==i.layout.get("symbol-placement"),S=z&&!D&&!A,E=void 0!==i.layout.get("symbol-sort-key").constantOr(1),C=t.depthModeForSublayer(0,ei.ReadOnly),N=i.layout.get("text-variable-anchor"),j=[],k=0,P=r;k<P.length;k+=1){var O=P[k],B=e.getTile(O),U=B.getBucket(i);if(U){var R=n?U.text:U.icon;if(R&&R.segments.get().length){var F,Z=R.programConfigurations.get(i.id),V=n||U.sdfIcons,G=n?U.textSizeData:U.iconSizeData,Y=D||0!==L.pitch,Q=t.useProgram((M=V,w=n,U.iconsInText&&w?"symbolTextAndIcon":M?"symbolSDF":"symbolIcon"),Z),W=vt.evaluateSizeForZoom(G,L.zoom),H=void 0,q=[0,0],X=void 0,J=void 0,K=null,$=void 0;n?(X=B.glyphAtlasTexture,J=T.LINEAR,H=B.glyphAtlasTexture.size,U.iconsInText&&(q=B.imageAtlasTexture.size,K=B.imageAtlasTexture,$=Y||t.options.rotating||t.options.zooming||"composite"===G.kind||"camera"===G.kind?T.LINEAR:T.NEAREST)):(F=1!==i.layout.get("icon-size").constantOr(0)||U.iconsNeedLinear,X=B.imageAtlasTexture,J=V||t.options.rotating||t.options.zooming||F||Y?T.LINEAR:T.NEAREST,H=B.imageAtlasTexture.size);var tt=Ui(B,1,t.transform.zoom),et=Li(O.posMatrix,D,z,t.transform,tt),it=zi(O.posMatrix,D,z,t.transform,tt),rt=N&&U.hasTextData(),nt="none"!==i.layout.get("icon-text-fit")&&rt&&U.hasIconData();A&&function(t,e,i,r,n,o,a,s){var u=r?t.textSizeData:t.iconSizeData,l=vt.evaluateSizeForZoom(u,i.transform.zoom),c=[256/i.width*2+1,256/i.height*2+1],p=r?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;p.clear();for(var h,d,f,y,m=t.lineVertexArray,g=r?t.text.placedSymbolArray:t.icon.placedSymbolArray,v=i.transform.width/i.transform.height,_=!1,x=0;x<g.length;x++){var b,M,w,I,T,L,z,D,A=g.get(x);A.hidden||A.writingMode===vt.WritingMode.vertical&&!_?Pi(A.numGlyphs,p):(_=!1,b=[A.anchorX,A.anchorY,0,1],vt.transformMat4(b,b,e),d=c,0,f=(h=b)[0]/h[3],y=h[1]/h[3],f>=-d[0]&&f<=d[0]&&y>=-d[1]&&y<=d[1]?(M=Ai(i.transform.cameraToCenterDistance,b[3]),w=vt.evaluateSizeForFeature(u,l,A),I=a?w/M:w*M,L=Di(T=new vt.Point(A.anchorX,A.anchorY),n).point,_=(D=Ci(A,I,!(z={}),s,e,n,o,t.glyphOffsetArray,m,p,L,T,z,v)).useVertical,(D.notEnoughRoom||_||D.needsFlipping&&Ci(A,I,!0,s,e,n,o,t.glyphOffsetArray,m,p,L,T,z,v).notEnoughRoom)&&Pi(A.numGlyphs,p)):Pi(A.numGlyphs,p))}r?t.text.dynamicLayoutVertexBuffer.updateData(p):t.icon.dynamicLayoutVertexBuffer.updateData(p)}(U,O.posMatrix,t,n,et,it,D,l);var ot=t.translatePosMatrix(O.posMatrix,B,o,a),at=A||n&&N||nt?dn:et,st=t.translatePosMatrix(it,B,o,a,!0),ut=V&&0!==i.paint.get(n?"text-halo-width":"icon-halo-width").constantOr(1),lt={program:Q,buffers:R,uniformValues:V?U.iconsInText?(h=G.kind,d=W,f=S,y=D,m=t,g=ot,v=at,_=st,x=H,b=q,vt.extend(ln(h,d,f,y,m,g,v,_,!0,x,!0),{u_texsize_icon:b,u_texture_icon:1})):ln(G.kind,W,S,D,t,ot,at,st,n,H,!0):un(G.kind,W,S,D,t,ot,at,st,n,H),atlasTexture:X,atlasTextureIcon:K,atlasInterpolation:J,atlasInterpolationIcon:$,isSDF:V,hasHalo:ut};if(E)for(var ct=0,pt=R.segments.get();ct<pt.length;ct+=1){var ht=pt[ct];j.push({segments:new vt.SegmentVector([ht]),sortKey:ht.sortKey,state:lt})}else j.push({segments:R.segments,sortKey:0,state:lt})}}}E&&j.sort(function(t,e){return t.sortKey-e.sortKey});for(var dt=0,ft=j;dt<ft.length;dt+=1){var yt,mt=ft[dt],gt=mt.state;I.activeTexture.set(T.TEXTURE0),gt.atlasTexture.bind(gt.atlasInterpolation,T.CLAMP_TO_EDGE),gt.atlasTextureIcon&&(I.activeTexture.set(T.TEXTURE1),gt.atlasTextureIcon&&gt.atlasTextureIcon.bind(gt.atlasInterpolationIcon,T.CLAMP_TO_EDGE)),gt.isSDF&&(yt=gt.uniformValues,gt.hasHalo&&(yt.u_is_halo=1,mn(gt.buffers,mt.segments,i,t,gt.program,C,c,p,yt)),yt.u_is_halo=0),mn(gt.buffers,mt.segments,i,t,gt.program,C,c,p,gt.uniformValues)}}function mn(t,e,i,r,n,o,a,s,u){var l=r.context;n.draw(l,l.gl.TRIANGLES,o,a,s,ni.disabled,u,i.id,t.layoutVertexBuffer,t.indexBuffer,e,i.paint,r.transform.zoom,t.programConfigurations.get(i.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function gn(t,e,i,r,n,o,a){for(var s,u,l,c,p,h,d,f,y=t.context.gl,m=i.paint.get("fill-pattern"),g=m&&m.constantOr(1),v=i.getCrossfadeParameters(),_=a?(s=g&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",y.LINES):(s=g?"fillPattern":"fill",y.TRIANGLES),x=0,b=r;x<b.length;x+=1){var M,w,I,T,L,z,D,A,S,E,C=b[x],N=e.getTile(C);g&&!N.patternsLoaded()||(M=N.getBucket(i))&&(w=M.programConfigurations.get(i.id),I=t.useProgram(s,w),g&&(t.context.activeTexture.set(y.TEXTURE0),N.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),w.updatePaintBuffers(v)),(T=m.constantOr(null))&&N.imageAtlas&&(z=(L=N.imageAtlas).patternPositions[T.to.toString()],D=L.patternPositions[T.from.toString()],z&&D&&w.setConstantPatternPositions(z,D)),A=t.translatePosMatrix(C.posMatrix,N,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor")),E=a?(u=M.indexBuffer2,l=M.segments2,S=[y.drawingBufferWidth,y.drawingBufferHeight],"fillOutlinePattern"===s&&g?(c=A,p=t,h=v,d=N,f=S,vt.extend(tn(c,p,h,d),{u_world:f})):{u_matrix:A,u_world:S}):(u=M.indexBuffer,l=M.segments,g?tn(A,t,v,N):$r(A)),I.draw(t.context,_,n,t.stencilModeForClipping(C),o,ni.disabled,E,i.id,M.layoutVertexBuffer,u,l,i.paint,t.transform.zoom,w))}}function vn(t,e,i,r,n,o,a){for(var s,u,l,c,p,h,d,f=t.context,y=f.gl,m=i.paint.get("fill-extrusion-pattern"),g=m.constantOr(1),v=i.getCrossfadeParameters(),_=i.paint.get("fill-extrusion-opacity"),x=0,b=r;x<b.length;x+=1){var M,w,I,T,L,z,D,A,S,E=b[x],C=e.getTile(E),N=C.getBucket(i);N&&(M=N.programConfigurations.get(i.id),w=t.useProgram(g?"fillExtrusionPattern":"fillExtrusion",M),g&&(t.context.activeTexture.set(y.TEXTURE0),C.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),M.updatePaintBuffers(v)),(I=m.constantOr(null))&&C.imageAtlas&&(L=(T=C.imageAtlas).patternPositions[I.to.toString()],z=T.patternPositions[I.from.toString()],L&&z&&M.setConstantPatternPositions(L,z)),D=t.translatePosMatrix(E.posMatrix,C,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),A=i.paint.get("fill-extrusion-vertical-gradient"),S=g?(s=D,u=t,l=A,c=_,p=E,h=v,d=C,vt.extend(Kr(s,u,l,c),Jr(h,u,d),{u_height_factor:-Math.pow(2,p.overscaledZ)/d.tileSize/8})):Kr(D,t,A,_),w.draw(f,f.gl.TRIANGLES,n,o,a,ni.backCCW,S,i.id,N.layoutVertexBuffer,N.indexBuffer,N.segments,i.paint,t.transform.zoom,M))}}var _n=new vt.Color(1,0,0,1),xn=new vt.Color(0,1,0,1),bn=new vt.Color(0,0,1,1),Mn=new vt.Color(1,0,1,1),wn=new vt.Color(0,1,1,1);function In(t,e,i,r){Ln(t,0,e+i/2,t.transform.width,i,r)}function Tn(t,e,i,r){Ln(t,e-i/2,0,i,t.transform.height,r)}function Ln(t,e,i,r,n,o){var a=t.context,s=a.gl;s.enable(s.SCISSOR_TEST),s.scissor(e*vt.browser.devicePixelRatio,i*vt.browser.devicePixelRatio,r*vt.browser.devicePixelRatio,n*vt.browser.devicePixelRatio),a.clear({color:o}),s.disable(s.SCISSOR_TEST)}function zn(t,e){this.context=new oi(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=si.maxUnderzooming+si.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new pr,this.gpuTimers={}}var Dn={symbol:function(t,e,i,r,n){var o,a;"translucent"===t.renderPass&&(o=ii.disabled,a=t.colorModeForRenderPass(),i.layout.get("text-variable-anchor")&&function(t,e,i,r,n,o,a){for(var s=e.transform,u="map"===n,l="map"===o,c=0,p=t;c<p.length;c+=1){var h,d,f,y,m,g=p[c],v=r.getTile(g),_=v.getBucket(i);_&&_.text&&_.text.segments.get().length&&(h=vt.evaluateSizeForZoom(_.textSizeData,s.zoom),d=Ui(v,1,e.transform.zoom),f=Li(g.posMatrix,l,u,e.transform,d),y="none"!==i.layout.get("icon-text-fit")&&_.hasIconData(),h&&(m=Math.pow(2,s.zoom-v.tileID.overscaledZ),fn(_,u,l,a,vt.symbolSize,s,f,g.posMatrix,m,h,y)))}}(r,t,i,e,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),n),0!==i.paint.get("icon-opacity").constantOr(1)&&yn(t,e,i,r,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),o,a),0!==i.paint.get("text-opacity").constantOr(1)&&yn(t,e,i,r,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),o,a),e.map.showCollisionBoxes&&(hn(t,e,i,r,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),hn(t,e,i,r,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1)))},circle:function(t,e,i,r){if("translucent"===t.renderPass){var n=i.paint.get("circle-opacity"),o=i.paint.get("circle-stroke-width"),a=i.paint.get("circle-stroke-opacity"),s=void 0!==i.layout.get("circle-sort-key").constantOr(1);if(0!==n.constantOr(1)||0!==o.constantOr(1)&&0!==a.constantOr(1)){for(var u=t.context,l=u.gl,c=t.depthModeForSublayer(0,ei.ReadOnly),p=ii.disabled,h=t.colorModeForRenderPass(),d=[],f=0;f<r.length;f++){var y=r[f],m=e.getTile(y),g=m.getBucket(i);if(g){var v=g.programConfigurations.get(i.id),_={programConfiguration:v,program:t.useProgram("circle",v),layoutVertexBuffer:g.layoutVertexBuffer,indexBuffer:g.indexBuffer,uniformValues:(D=y,A=m,S=i,N=C=E=void 0,j=(z=t).transform,N="map"===S.paint.get("circle-pitch-alignment")?(C=!0,[E=Ui(A,1,j.zoom),E]):(C=!1,j.pixelsToGLUnits),{u_camera_to_center_distance:j.cameraToCenterDistance,u_scale_with_map:+("map"===S.paint.get("circle-pitch-scale")),u_matrix:z.translatePosMatrix(D.posMatrix,A,S.paint.get("circle-translate"),S.paint.get("circle-translate-anchor")),u_pitch_with_map:+C,u_device_pixel_ratio:vt.browser.devicePixelRatio,u_extrude_scale:N})};if(s)for(var x=0,b=g.segments.get();x<b.length;x+=1){var M=b[x];d.push({segments:new vt.SegmentVector([M]),sortKey:M.sortKey,state:_})}else d.push({segments:g.segments,sortKey:0,state:_})}}s&&d.sort(function(t,e){return t.sortKey-e.sortKey});for(var w=0,I=d;w<I.length;w+=1){var T=I[w],L=T.state;L.program.draw(u,l.TRIANGLES,c,p,h,ni.disabled,L.uniformValues,i.id,L.layoutVertexBuffer,L.indexBuffer,T.segments,i.paint,t.transform.zoom,L.programConfiguration)}}}var z,D,A,S,E,C,N,j},heatmap:function(t,e,i,r){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var n=t.context,o=n.gl,a=ii.disabled,s=new ri([o.ONE,o.ONE],vt.Color.transparent,[!0,!0,!0,!0]);!function(t,e,i){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var n,o,a,s,u=i.heatmapFbo;u?(r.bindTexture(r.TEXTURE_2D,u.colorAttachment.get()),t.bindFramebuffer.set(u.framebuffer)):(n=r.createTexture(),r.bindTexture(r.TEXTURE_2D,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),u=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),o=n,a=u,(s=t.gl).texImage2D(s.TEXTURE_2D,0,s.RGBA,e.width/4,e.height/4,0,s.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:s.UNSIGNED_BYTE,null),a.colorAttachment.set(o))}(n,t,i),n.clear({color:vt.Color.transparent});for(var u=0;u<r.length;u++){var l,c,p,h=r[u];e.hasRenderableParent(h)||(c=(l=e.getTile(h)).getBucket(i))&&(p=c.programConfigurations.get(i.id),t.useProgram("heatmap",p).draw(n,o.TRIANGLES,ei.disabled,a,s,ni.disabled,(v=h.posMatrix,_=l,x=t.transform.zoom,b=i.paint.get("heatmap-intensity"),{u_matrix:v,u_extrude_scale:Ui(_,1,x),u_intensity:b}),i.id,c.layoutVertexBuffer,c.indexBuffer,c.segments,i.paint,t.transform.zoom,p))}n.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),f=i,y=(d=t).context,m=y.gl,(g=f.heatmapFbo)&&(y.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,g.colorAttachment.get()),y.activeTexture.set(m.TEXTURE1),(f.colorRampTexture||(f.colorRampTexture=new vt.Texture(y,f.colorRamp,m.RGBA))).bind(m.LINEAR,m.CLAMP_TO_EDGE),d.useProgram("heatmapTexture").draw(y,m.TRIANGLES,ei.disabled,ii.disabled,d.colorModeForRenderPass(),ni.disabled,function(t,e){var i=vt.create();vt.ortho(i,0,t.width,t.height,0,0,1);var r=t.context.gl;return{u_matrix:i,u_world:[r.drawingBufferWidth,r.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:e.paint.get("heatmap-opacity")}}(d,f),f.id,d.viewportBuffer,d.quadTriangleIndexBuffer,d.viewportSegments,f.paint,d.transform.zoom)));var d,f,y,m,g,v,_,x,b},line:function(t,e,i,r){if("translucent"===t.renderPass){var n=i.paint.get("line-opacity"),o=i.paint.get("line-width");if(0!==n.constantOr(1)&&0!==o.constantOr(1)){var a=t.depthModeForSublayer(0,ei.ReadOnly),s=t.colorModeForRenderPass(),u=i.paint.get("line-dasharray"),l=i.paint.get("line-pattern"),c=l.constantOr(1),p=i.paint.get("line-gradient"),h=i.getCrossfadeParameters(),d=c?"linePattern":u?"lineSDF":p?"lineGradient":"line",f=t.context,y=f.gl,m=!0;if(p){f.activeTexture.set(y.TEXTURE0);var g=i.gradientTexture;if(!i.gradient)return;(g=g||(i.gradientTexture=new vt.Texture(f,i.gradient,y.RGBA))).bind(y.LINEAR,y.CLAMP_TO_EDGE)}for(var v=0,_=r;v<_.length;v+=1){var x,b,M,w,I,T,L,z,D,A,S=_[v],E=e.getTile(S);c&&!E.patternsLoaded()||(x=E.getBucket(i))&&(b=x.programConfigurations.get(i.id),M=t.context.program.get(),w=t.useProgram(d,b),I=m||w.program!==M,(T=l.constantOr(null))&&E.imageAtlas&&(z=(L=E.imageAtlas).patternPositions[T.to.toString()],D=L.patternPositions[T.from.toString()],z&&D&&b.setConstantPatternPositions(z,D)),A=c?(H=E,q=i,X=h,0,J=(W=t).transform,K=on(H,J),{u_matrix:an(W,H,q),u_texsize:H.imageAtlasTexture.size,u_ratio:1/Ui(H,1,J.zoom),u_device_pixel_ratio:vt.browser.devicePixelRatio,u_image:0,u_scale:[K,X.fromScale,X.toScale],u_fade:X.t,u_units_to_pixels:[1/J.pixelsToGLUnits[0],1/J.pixelsToGLUnits[1]]}):u?(P=E,O=i,B=u,U=h,R=void 0,R=(k=t).lineAtlas,F=on(P,k.transform),Z="round"===O.layout.get("line-cap"),V=R.getDash(B.from,Z),G=R.getDash(B.to,Z),Y=V.width*U.fromScale,Q=G.width*U.toScale,vt.extend(rn(k,P,O),{u_patternscale_a:[F/Y,-V.height/2],u_patternscale_b:[F/Q,-G.height/2],u_sdfgamma:R.width/(256*Math.min(Y,Q)*vt.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:V.y,u_tex_y_b:G.y,u_mix:U.t})):p?(C=t,N=E,j=i,vt.extend(rn(C,N,j),{u_image:0})):rn(t,E,i),c?(f.activeTexture.set(y.TEXTURE0),E.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),b.updatePaintBuffers(h)):u&&(I||t.lineAtlas.dirty)&&(f.activeTexture.set(y.TEXTURE0),t.lineAtlas.bind(f)),w.draw(f,y.TRIANGLES,a,t.stencilModeForClipping(S),s,ni.disabled,A,i.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,i.paint,t.transform.zoom,b),m=!1)}}}var C,N,j,k,P,O,B,U,R,F,Z,V,G,Y,Q,W,H,q,X,J,K},fill:function(t,e,i,r){var n,o,a,s,u,l=i.paint.get("fill-color"),c=i.paint.get("fill-opacity");0!==c.constantOr(1)&&(n=t.colorModeForRenderPass(),o=i.paint.get("fill-pattern"),a=t.opaquePassEnabledForLayer()&&!o.constantOr(1)&&1===l.constantOr(vt.Color.transparent).a&&1===c.constantOr(0)?"opaque":"translucent",t.renderPass===a&&(s=t.depthModeForSublayer(1,"opaque"===t.renderPass?ei.ReadWrite:ei.ReadOnly),gn(t,e,i,r,s,n,!1)),"translucent"===t.renderPass&&i.paint.get("fill-antialias")&&(u=t.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,ei.ReadOnly),gn(t,e,i,r,u,n,!0)))},"fill-extrusion":function(t,e,i,r){var n,o,a=i.paint.get("fill-extrusion-opacity");0!==a&&"translucent"===t.renderPass&&(n=new ei(t.context.gl.LEQUAL,ei.ReadWrite,t.depthRangeFor3D),1!==a||i.paint.get("fill-extrusion-pattern").constantOr(1)?(vn(t,e,i,r,n,ii.disabled,ri.disabled),vn(t,e,i,r,n,t.stencilModeFor3D(),t.colorModeForRenderPass())):(o=t.colorModeForRenderPass(),vn(t,e,i,r,n,ii.disabled,o)))},hillshade:function(t,e,i,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var n=t.context,o=e.getSource().maxzoom,a=t.depthModeForSublayer(0,ei.ReadOnly),s=t.colorModeForRenderPass(),u="translucent"===t.renderPass?t.stencilConfigForOverlap(r):[{},r],l=u[0],c=0,p=u[1];c<p.length;c+=1){var h=p[c],d=e.getTile(h);d.needsHillshadePrepare&&"offscreen"===t.renderPass?(T=t,L=d,z=i,D=o,A=a,S=ii.disabled,E=s,Y=V=R=U=B=O=P=k=void 0,V=T.context,G=V.gl,(Y=L.dem)&&Y.data&&(C=Y.dim,N=Y.stride,j=Y.getPixels(),V.activeTexture.set(G.TEXTURE1),V.pixelStoreUnpackPremultiplyAlpha.set(!1),L.demTexture=L.demTexture||T.getTileTexture(N),L.demTexture?((k=L.demTexture).update(j,{premultiply:!1}),k.bind(G.NEAREST,G.CLAMP_TO_EDGE)):(L.demTexture=new vt.Texture(V,j,G.RGBA,{premultiply:!1}),L.demTexture.bind(G.NEAREST,G.CLAMP_TO_EDGE)),V.activeTexture.set(G.TEXTURE0),(P=L.fbo)||((O=new vt.Texture(V,{width:C,height:C,data:null},G.RGBA)).bind(G.LINEAR,G.CLAMP_TO_EDGE),(P=L.fbo=V.createFramebuffer(C,C,!0)).colorAttachment.set(O.texture)),V.bindFramebuffer.set(P.framebuffer),V.viewport.set([0,0,C,C]),T.useProgram("hillshadePrepare").draw(V,G.TRIANGLES,A,S,E,ni.disabled,(B=L.tileID,R=D,F=(U=Y).stride,Z=vt.create(),vt.ortho(Z,0,vt.EXTENT,-vt.EXTENT,0,0,1),vt.translate(Z,Z,[0,-vt.EXTENT,0]),{u_matrix:Z,u_image:1,u_dimension:[F,F],u_zoom:B.overscaledZ,u_maxzoom:R,u_unpack:U.getUnpackVector()}),z.id,T.rasterBoundsBuffer,T.quadTriangleIndexBuffer,T.rasterBoundsSegments),L.needsHillshadePrepare=!1)):"translucent"===t.renderPass&&(f=t,y=d,m=i,g=a,v=l[h.overscaledZ],_=s,I=w=M=x=void 0,M=f.context,w=M.gl,(I=y.fbo)&&(x=f.useProgram("hillshade"),M.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,I.colorAttachment.get()),b=function(t,e,i){var r=i.paint.get("hillshade-shadow-color"),n=i.paint.get("hillshade-highlight-color"),o=i.paint.get("hillshade-accent-color"),a=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);var s,u,l,c=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),c),u_image:0,u_latrange:(s=e.tileID,u=Math.pow(2,s.canonical.z),l=s.canonical.y,[new vt.MercatorCoordinate(0,l/u).toLngLat().lat,new vt.MercatorCoordinate(0,(l+1)/u).toLngLat().lat]),u_light:[i.paint.get("hillshade-exaggeration"),a],u_shadow:r,u_highlight:n,u_accent:o}}(f,y,m),x.draw(M,w.TRIANGLES,g,v,_,ni.disabled,b,m.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)))}n.viewport.set([0,0,t.width,t.height])}var f,y,m,g,v,_,x,b,M,w,I,T,L,z,D,A,S,E,C,N,j,k,P,O,B,U,R,F,Z,V,G,Y},raster:function(t,e,i,r){if("translucent"===t.renderPass&&0!==i.paint.get("raster-opacity")&&r.length)for(var n=t.context,o=n.gl,a=e.getSource(),s=t.useProgram("raster"),u=t.colorModeForRenderPass(),l=a instanceof F?[{},r]:t.stencilConfigForOverlap(r),c=l[0],p=l[1],h=p[p.length-1].overscaledZ,d=!t.options.moving,f=0,y=p;f<y.length;f+=1){var m=y[f],g=t.depthModeForSublayer(m.overscaledZ-h,1===i.paint.get("raster-opacity")?ei.ReadWrite:ei.ReadOnly,o.LESS),v=e.getTile(m),_=t.transform.calculatePosMatrix(m.toUnwrapped(),d);v.registerFadeDuration(i.paint.get("raster-fade-duration"));var x=e.findLoadedParent(m,0),b=function(t,e,i,r,n){var o=r.paint.get("raster-fade-duration");if(0<o){var a=vt.browser.now(),s=(a-t.timeAdded)/o,u=e?(a-e.timeAdded)/o:-1,l=i.getSource(),c=n.coveringZoomLevel({tileSize:l.tileSize,roundZoom:l.roundZoom}),p=!e||Math.abs(e.tileID.overscaledZ-c)>Math.abs(t.tileID.overscaledZ-c),h=p&&t.refreshedUponExpiration?1:vt.clamp(p?s:1-u,0,1);return t.refreshedUponExpiration&&1<=s&&(t.refreshedUponExpiration=!1),e?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}}(v,x,e,i,t.transform),M=void 0,w=void 0,I="nearest"===i.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;n.activeTexture.set(o.TEXTURE0),v.texture.bind(I,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),n.activeTexture.set(o.TEXTURE1),x?(x.texture.bind(I,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),M=Math.pow(2,x.tileID.overscaledZ-v.tileID.overscaledZ),w=[v.tileID.canonical.x*M%1,v.tileID.canonical.y*M%1]):v.texture.bind(I,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var T=sn(_,w||[0,0],M||1,b,i);a instanceof F?s.draw(n,o.TRIANGLES,g,ii.disabled,u,ni.disabled,T,i.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(n,o.TRIANGLES,g,c[m.overscaledZ],u,ni.disabled,T,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,i){var r,n,o,a,s,u,l,c,p,h,d,f,y,m,g,v,_,x,b,M=i.paint.get("background-color"),w=i.paint.get("background-opacity");if(0!==w){var I=t.context,T=I.gl,L=t.transform,z=L.tileSize,D=i.paint.get("background-pattern");if(!t.isPatternMissing(D)){var A=!D&&1===M.a&&1===w&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===A){var S=ii.disabled,E=t.depthModeForSublayer(0,"opaque"==A?ei.ReadWrite:ei.ReadOnly),C=t.colorModeForRenderPass(),N=t.useProgram(D?"backgroundPattern":"background"),j=L.coveringTiles({tileSize:z});D&&(I.activeTexture.set(T.TEXTURE0),t.imageManager.bind(t.context));for(var k=i.getCrossfadeParameters(),P=0,O=j;P<O.length;P+=1){var B=O[P],U=t.transform.calculatePosMatrix(B.toUnwrapped()),R=D?(r=U,n=w,o=t,a=D,s={tileID:B,tileSize:z},u=k,b=x=_=v=g=m=y=f=d=h=p=c=l=void 0,vt.extend((l=a,c=u,h=s,d=(p=o).imageManager.getPattern(l.from.toString()),f=p.imageManager.getPattern(l.to.toString()),y=p.imageManager.getPixelSize(),m=y.width,g=y.height,v=Math.pow(2,h.tileID.overscaledZ),_=h.tileSize*Math.pow(2,p.transform.tileZoom)/v,x=_*(h.tileID.canonical.x+h.tileID.wrap*v),b=_*h.tileID.canonical.y,{u_image:0,u_pattern_tl_a:d.tl,u_pattern_br_a:d.br,u_pattern_tl_b:f.tl,u_pattern_br_b:f.br,u_texsize:[m,g],u_mix:c.t,u_pattern_size_a:d.displaySize,u_pattern_size_b:f.displaySize,u_scale_a:c.fromScale,u_scale_b:c.toScale,u_tile_units_to_pixels:1/Ui(h,1,p.transform.tileZoom),u_pixel_coord_upper:[x>>16,b>>16],u_pixel_coord_lower:[65535&x,65535&b]}),{u_matrix:r,u_opacity:n})):{u_matrix:U,u_opacity:w,u_color:M};N.draw(I,T.TRIANGLES,E,S,C,ni.disabled,R,i.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,i){for(var r=0;r<i.length;r++)!function(t,e,i){var r=t.context,n=r.gl,o=i.posMatrix,a=t.useProgram("debug"),s=ei.disabled,u=ii.disabled,l=t.colorModeForRenderPass();r.activeTexture.set(n.TEXTURE0),t.emptyTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE),a.draw(r,n.LINE_STRIP,s,u,l,ni.disabled,nn(o,vt.Color.red),"$debug",t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments);var c=e.getTileByID(i.key).latestRawTileData,p=Math.floor((c&&c.byteLength||0)/1024),h=e.getTile(i).tileSize,d=512/Math.min(h,512)*(i.overscaledZ/t.transform.zoom)*.5,f=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(f+=" => "+i.overscaledZ),function(t,e){t.initDebugOverlayCanvas();var i=t.debugOverlayCanvas,r=t.context.gl,n=t.debugOverlayCanvas.getContext("2d");n.clearRect(0,0,i.width,i.height),n.shadowColor="white",n.shadowBlur=2,n.lineWidth=1.5,n.strokeStyle="white",n.textBaseline="top",n.font="bold 36px Open Sans, sans-serif",n.fillText(e,5,5),n.strokeText(e,5,5),t.debugOverlayTexture.update(i),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,f+" "+p+"kb"),a.draw(r,n.TRIANGLES,s,u,ri.alphaBlended,ni.disabled,nn(o,vt.Color.transparent,d),"$debug",t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments)}(t,e,i[r])},custom:function(t,e,i){var r,n,o=t.context,a=i.implementation;"offscreen"===t.renderPass?(r=a.prerender)&&(t.setCustomLayerDefaults(),o.setColorMode(t.colorModeForRenderPass()),r.call(a,o.gl,t.transform.customLayerMatrix()),o.setDirty(),t.setBaseState()):"translucent"===t.renderPass&&(t.setCustomLayerDefaults(),o.setColorMode(t.colorModeForRenderPass()),o.setStencilMode(ii.disabled),n="3d"===a.renderingMode?new ei(t.context.gl.LEQUAL,ei.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,ei.ReadOnly),o.setDepthMode(n),a.render(o.gl,t.transform.customLayerMatrix()),o.setDirty(),t.setBaseState(),o.bindFramebuffer.set(null))}};zn.prototype.resize=function(t,e){if(this.width=t*vt.browser.devicePixelRatio,this.height=e*vt.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,r=this.style._order;i<r.length;i+=1)this.style._layers[r[i]].resize()},zn.prototype.setup=function(){var t=this.context,e=new vt.StructArrayLayout2i4;e.emplaceBack(0,0),e.emplaceBack(vt.EXTENT,0),e.emplaceBack(0,vt.EXTENT),e.emplaceBack(vt.EXTENT,vt.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(e,_r.members),this.tileExtentSegments=vt.SegmentVector.simpleSegment(0,0,4,2);var i=new vt.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(vt.EXTENT,0),i.emplaceBack(0,vt.EXTENT),i.emplaceBack(vt.EXTENT,vt.EXTENT),this.debugBuffer=t.createVertexBuffer(i,_r.members),this.debugSegments=vt.SegmentVector.simpleSegment(0,0,4,5);var r=new vt.StructArrayLayout4i8;r.emplaceBack(0,0,0,0),r.emplaceBack(vt.EXTENT,0,vt.EXTENT,0),r.emplaceBack(0,vt.EXTENT,0,vt.EXTENT),r.emplaceBack(vt.EXTENT,vt.EXTENT,vt.EXTENT,vt.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(r,R.members),this.rasterBoundsSegments=vt.SegmentVector.simpleSegment(0,0,4,2);var n=new vt.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(1,0),n.emplaceBack(0,1),n.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(n,_r.members),this.viewportSegments=vt.SegmentVector.simpleSegment(0,0,4,2);var o=new vt.StructArrayLayout1ui2;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(o);var a=new vt.StructArrayLayout3ui6;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(a),this.emptyTexture=new vt.Texture(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA);var s=this.context.gl;this.stencilClearMode=new ii({func:s.ALWAYS,mask:0},0,255,s.ZERO,s.ZERO,s.ZERO)},zn.prototype.clearStencil=function(){var t=this.context,e=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var i=vt.create();vt.ortho(i,0,this.width,this.height,0,0,1),vt.scale(i,i,[e.drawingBufferWidth,e.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,e.TRIANGLES,ei.disabled,this.stencilClearMode,ri.disabled,ni.disabled,en(i),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},zn.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var i=this.context,r=i.gl;256<this.nextStencilID+e.length&&this.clearStencil(),i.setColorMode(ri.disabled),i.setDepthMode(ei.disabled);var n=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],u=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;n.draw(i,r.TRIANGLES,ei.disabled,new ii({func:r.ALWAYS,mask:0},u,255,r.KEEP,r.KEEP,r.REPLACE),ri.disabled,ni.disabled,en(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},zn.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,256<this.nextStencilID+1&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new ii({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},zn.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new ii({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},zn.prototype.stencilConfigForOverlap=function(t){var e,i=this.context.gl,r=t.sort(function(t,e){return e.overscaledZ-t.overscaledZ}),n=r[r.length-1].overscaledZ,o=r[0].overscaledZ-n+1;if(1<o){this.currentStencilSource=void 0,256<this.nextStencilID+o&&this.clearStencil();for(var a={},s=0;s<o;s++)a[s+n]=new ii({func:i.GEQUAL,mask:255},s+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=o,[a,r]}return[((e={})[n]=ii.disabled,e),r]},zn.prototype.colorModeForRenderPass=function(){var t=this.context.gl;return this._showOverdrawInspector?new ri([t.CONSTANT_COLOR,t.ONE],new vt.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?ri.unblended:ri.alphaBlended},zn.prototype.depthModeForSublayer=function(t,e,i){if(!this.opaquePassEnabledForLayer())return ei.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new ei(i||this.context.gl.LEQUAL,e,[r,r])},zn.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},zn.prototype.render=function(t,e){var i=this;this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(vt.browser.now()),this.imageManager.beginFrame();var r=this.style._order,n=this.style.sourceCaches;for(var o in n){var a=n[o];a.used&&a.prepare(this.context)}var s,u,l={},c={},p={};for(var h in n){var d=n[h];l[h]=d.getVisibleCoordinates(),c[h]=l[h].slice().reverse(),p[h]=d.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var f=0;f<r.length;f++)if(this.style._layers[r[f]].is3D()){this.opaquePassCutoff=f;break}this.renderPass="offscreen";for(var y=0,m=r;y<m.length;y+=1){var g,v=this.style._layers[m[y]];v.hasOffscreenPass()&&!v.isHidden(this.transform.zoom)&&(g=c[v.source],"custom"!==v.type&&!g.length||this.renderLayer(this,n[v.source],v,g))}for(this.context.bindFramebuffer.set(null),this.context.clear({color:e.showOverdrawInspector?vt.Color.black:vt.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=e.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=r.length-1;0<=this.currentLayer;this.currentLayer--){var _=this.style._layers[r[this.currentLayer]],x=n[_.source],b=l[_.source];this._renderTileClippingMasks(_,b),this.renderLayer(this,x,_,b)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){var M=this.style._layers[r[this.currentLayer]],w=n[M.source],I=("symbol"===M.type?p:c)[M.source];this._renderTileClippingMasks(M,l[M.source]),this.renderLayer(this,w,M,I)}this.options.showTileBoundaries&&(vt.values(this.style._layers).forEach(function(t){t.source&&!t.isHidden(i.transform.zoom)&&(t.source!==(u&&u.id)&&(u=i.style.sourceCaches[t.source]),(!s||s.getSource().maxzoom<u.getSource().maxzoom)&&(s=u))}),s&&Dn.debug(this,s,s.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;In(t,t.transform.height-(e.top||0),3,_n),In(t,e.bottom||0,3,xn),Tn(t,e.left||0,3,bn),Tn(t,t.transform.width-(e.right||0),3,Mn);var i,r,n,o,a=t.transform.centerPoint;i=t,r=a.x,n=t.transform.height-a.y,Ln(i,r-1,n-10,2,20,o=wn),Ln(i,r-10,n-1,20,2,o)}(this),this.context.setDefault()},zn.prototype.renderLayer=function(t,e,i,r){i.isHidden(this.transform.zoom)||"background"!==i.type&&"custom"!==i.type&&!r.length||(this.id=i.id,this.gpuTimingStart(i),Dn[i.type](t,e,i,r,this.style.placement.variableOffsets),this.gpuTimingEnd())},zn.prototype.gpuTimingStart=function(t){var e,i;this.options.gpuTiming&&(e=this.context.extTimerQuery,(i=(i=this.gpuTimers[t.id])||(this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()})).calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,i.query))},zn.prototype.gpuTimingEnd=function(){var t;this.options.gpuTiming&&(t=this.context.extTimerQuery).endQueryEXT(t.TIME_ELAPSED_EXT)},zn.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},zn.prototype.queryGpuTimers=function(t){var e={};for(var i in t){var r=t[i],n=this.context.extTimerQuery,o=n.getQueryObjectEXT(r.query,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(r.query),e[i]=o}return e},zn.prototype.translatePosMatrix=function(t,e,i,r,n){if(!i[0]&&!i[1])return t;var o,a,s=n?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;s&&(o=Math.sin(s),a=Math.cos(s),i=[i[0]*a-i[1]*o,i[0]*o+i[1]*a]);var u=[n?i[0]:Ui(e,i[0],this.transform.zoom),n?i[1]:Ui(e,i[1],this.transform.zoom),0],l=new Float32Array(16);return vt.translate(l,t,u),l},zn.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},zn.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&0<e.length?e.pop():null},zn.prototype.isPatternMissing=function(t){if(!t)return!1;if(!t.from||!t.to)return!0;var e=this.imageManager.getPattern(t.from.toString()),i=this.imageManager.getPattern(t.to.toString());return!e||!i},zn.prototype.useProgram=function(t,e){this.cache=this.cache||{};var i=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new Xr(this.context,0,Hr[t],e,pn[t],this._showOverdrawInspector)),this.cache[i]},zn.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},zn.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)},zn.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=vt.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new vt.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},zn.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};function An(t,e){this.points=t,this.planes=e}An.fromInvProjectionMatrix=function(e,i,t){var r=Math.pow(2,t),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(t){return vt.transformMat4([],t,e)}).map(function(t){return vt.scale$1([],t,1/t[3]/i*r)}),n=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(t){var e=vt.sub([],o[t[0]],o[t[1]]),i=vt.sub([],o[t[2]],o[t[1]]),r=vt.normalize([],vt.cross([],e,i)),n=-vt.dot(r,o[t[1]]);return r.concat(n)});return new An(o,n)};function Sn(t,e){this.min=t,this.max=e,this.center=vt.scale$2([],vt.add([],this.min,this.max),.5)}Sn.prototype.quadrant=function(t){for(var e=[t%2==0,t<2],i=vt.clone$2(this.min),r=vt.clone$2(this.max),n=0;n<e.length;n++)i[n]=e[n]?this.min[n]:this.center[n],r[n]=e[n]?this.center[n]:this.max[n];return r[2]=this.max[2],new Sn(i,r)},Sn.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},Sn.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},Sn.prototype.intersects=function(t){for(var e=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],i=!0,r=0;r<t.planes.length;r++){for(var n=t.planes[r],o=0,a=0;a<e.length;a++)o+=0<=vt.dot$1(n,e[a]);if(0===o)return 0;o!==e.length&&(i=!1)}if(i)return 2;for(var s=0;s<3;s++){for(var u=Number.MAX_VALUE,l=-Number.MAX_VALUE,c=0;c<t.points.length;c++)var p=t.points[c][s]-this.min[s],u=Math.min(u,p),l=Math.max(l,p);if(l<0||u>this.max[s]-this.min[s])return 0}return 1};function En(t,e,i,r){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),isNaN(t)||t<0||isNaN(e)||e<0||isNaN(i)||i<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=i,this.right=r}En.prototype.interpolate=function(t,e,i){return null!=e.top&&null!=t.top&&(this.top=vt.number(t.top,e.top,i)),null!=e.bottom&&null!=t.bottom&&(this.bottom=vt.number(t.bottom,e.bottom,i)),null!=e.left&&null!=t.left&&(this.left=vt.number(t.left,e.left,i)),null!=e.right&&null!=t.right&&(this.right=vt.number(t.right,e.right,i)),this},En.prototype.getCenter=function(t,e){var i=vt.clamp((this.left+t-this.right)/2,0,t),r=vt.clamp((this.top+e-this.bottom)/2,0,e);return new vt.Point(i,r)},En.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right},En.prototype.clone=function(){return new En(this.top,this.bottom,this.left,this.right)},En.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};function Cn(t,e,i,r,n){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===n||n,this._minZoom=t||0,this._maxZoom=e||22,this._minPitch=null==i?0:i,this._maxPitch=null==r?60:r,this.setMaxBounds(),this.width=0,this.height=0,this._center=new vt.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new En,this._posMatrixCache={},this._alignedPosMatrixCache={}}var Nn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Cn.prototype.clone=function(){var t=new Cn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t},Nn.minZoom.get=function(){return this._minZoom},Nn.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},Nn.maxZoom.get=function(){return this._maxZoom},Nn.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},Nn.minPitch.get=function(){return this._minPitch},Nn.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},Nn.maxPitch.get=function(){return this._maxPitch},Nn.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},Nn.renderWorldCopies.get=function(){return this._renderWorldCopies},Nn.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},Nn.worldSize.get=function(){return this.tileSize*this.scale},Nn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Nn.size.get=function(){return new vt.Point(this.width,this.height)},Nn.bearing.get=function(){return-this.angle/Math.PI*180},Nn.bearing.set=function(t){var e=-vt.wrap(t,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=vt.create$2(),vt.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Nn.pitch.get=function(){return this._pitch/Math.PI*180},Nn.pitch.set=function(t){var e=vt.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())},Nn.fov.get=function(){return this._fov/Math.PI*180},Nn.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},Nn.zoom.get=function(){return this._zoom},Nn.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},Nn.center.get=function(){return this._center},Nn.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Nn.padding.get=function(){return this._edgeInsets.toJSON()},Nn.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())},Nn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Cn.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)},Cn.prototype.interpolatePadding=function(t,e,i){this._unmodified=!1,this._edgeInsets.interpolate(t,e,i),this._constrain(),this._calcMatrices()},Cn.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},Cn.prototype.getVisibleUnwrappedCoordinates=function(t){var e=[new vt.UnwrappedTileID(0,t)];if(this._renderWorldCopies)for(var i=this.pointCoordinate(new vt.Point(0,0)),r=this.pointCoordinate(new vt.Point(this.width,0)),n=this.pointCoordinate(new vt.Point(this.width,this.height)),o=this.pointCoordinate(new vt.Point(0,this.height)),a=Math.floor(Math.min(i.x,r.x,n.x,o.x)),s=Math.floor(Math.max(i.x,r.x,n.x,o.x)),u=a-1;u<=s+1;u++)0!==u&&e.push(new vt.UnwrappedTileID(u,t));return e},Cn.prototype.coveringTiles=function(t){var e=this.coveringZoomLevel(t),i=e;if(void 0!==t.minzoom&&e<t.minzoom)return[];void 0!==t.maxzoom&&e>t.maxzoom&&(e=t.maxzoom);var r=vt.MercatorCoordinate.fromLngLat(this.center),n=Math.pow(2,e),o=[n*r.x,n*r.y,0],a=An.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,e),s=t.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(s=e);function u(t){return{aabb:new Sn([t*n,0,0],[(t+1)*n,n,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}}var l=[],c=[],p=e,h=t.reparseOverscaled?i:e;if(this._renderWorldCopies)for(var d=1;d<=3;d++)l.push(u(-d)),l.push(u(d));for(l.push(u(0));0<l.length;){var f=l.pop(),y=f.x,m=f.y,g=f.fullyVisible;if(!g){var v=f.aabb.intersects(a);if(0===v)continue;g=2===v}var _=f.aabb.distanceX(o),x=f.aabb.distanceY(o),b=Math.max(Math.abs(_),Math.abs(x));if(f.zoom===p||b>3+(1<<p-f.zoom)-2&&f.zoom>=s)c.push({tileID:new vt.OverscaledTileID(f.zoom===p?h:f.zoom,f.wrap,f.zoom,y,m),distanceSq:vt.sqrLen([o[0]-.5-y,o[1]-.5-m])});else for(var M=0;M<4;M++){var w=(y<<1)+M%2,I=(m<<1)+(M>>1);l.push({aabb:f.aabb.quadrant(M),zoom:f.zoom+1,x:w,y:I,wrap:f.wrap,fullyVisible:g})}}return c.sort(function(t,e){return t.distanceSq-e.distanceSq}).map(function(t){return t.tileID})},Cn.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},Nn.unmodified.get=function(){return this._unmodified},Cn.prototype.zoomScale=function(t){return Math.pow(2,t)},Cn.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},Cn.prototype.project=function(t){var e=vt.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new vt.Point(vt.mercatorXfromLng(t.lng)*this.worldSize,vt.mercatorYfromLat(e)*this.worldSize)},Cn.prototype.unproject=function(t){return new vt.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()},Nn.point.get=function(){return this.project(this.center)},Cn.prototype.setLocationAtPoint=function(t,e){var i=this.pointCoordinate(e),r=this.pointCoordinate(this.centerPoint),n=this.locationCoordinate(t),o=new vt.MercatorCoordinate(n.x-(i.x-r.x),n.y-(i.y-r.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())},Cn.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},Cn.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},Cn.prototype.locationCoordinate=function(t){return vt.MercatorCoordinate.fromLngLat(t)},Cn.prototype.coordinateLocation=function(t){return t.toLngLat()},Cn.prototype.pointCoordinate=function(t){var e=[t.x,t.y,0,1],i=[t.x,t.y,1,1];vt.transformMat4(e,e,this.pixelMatrixInverse),vt.transformMat4(i,i,this.pixelMatrixInverse);var r=e[3],n=i[3],o=e[1]/r,a=i[1]/n,s=e[2]/r,u=i[2]/n,l=s==u?0:(0-s)/(u-s);return new vt.MercatorCoordinate(vt.number(e[0]/r,i[0]/n,l)/this.worldSize,vt.number(o,a,l)/this.worldSize)},Cn.prototype.coordinatePoint=function(t){var e=[t.x*this.worldSize,t.y*this.worldSize,0,1];return vt.transformMat4(e,e,this.pixelMatrix),new vt.Point(e[0]/e[3],e[1]/e[3])},Cn.prototype.getBounds=function(){return(new vt.LngLatBounds).extend(this.pointLocation(new vt.Point(0,0))).extend(this.pointLocation(new vt.Point(this.width,0))).extend(this.pointLocation(new vt.Point(this.width,this.height))).extend(this.pointLocation(new vt.Point(0,this.height)))},Cn.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new vt.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Cn.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Cn.prototype.calculatePosMatrix=function(t,e){void 0===e&&(e=!1);var i=t.key,r=e?this._alignedPosMatrixCache:this._posMatrixCache;if(r[i])return r[i];var n=t.canonical,o=this.worldSize/this.zoomScale(n.z),a=n.x+Math.pow(2,n.z)*t.wrap,s=vt.identity(new Float64Array(16));return vt.translate(s,s,[a*o,n.y*o,0]),vt.scale(s,s,[o/vt.EXTENT,o/vt.EXTENT,1]),vt.multiply(s,e?this.alignedProjMatrix:this.projMatrix,s),r[i]=new Float32Array(s),r[i]},Cn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Cn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,i,r,n,o,a=-90,s=90,u=-180,l=180,c=this.size,p=this._unmodified;this.latRange&&(i=this.latRange,a=vt.mercatorYfromLat(i[1])*this.worldSize,r=(s=vt.mercatorYfromLat(i[0])*this.worldSize)-a<c.y?c.y/(s-a):0),this.lngRange&&(n=this.lngRange,u=vt.mercatorXfromLng(n[0])*this.worldSize,o=(l=vt.mercatorXfromLng(n[1])*this.worldSize)-u<c.x?c.x/(l-u):0);var h,d,f,y,m=this.point,g=Math.max(o||0,r||0);if(g)return this.center=this.unproject(new vt.Point(o?(l+u)/2:m.x,r?(s+a)/2:m.y)),this.zoom+=this.scaleZoom(g),this._unmodified=p,void(this._constraining=!1);this.latRange&&((h=m.y)-(d=c.y/2)<a&&(e=a+d),s<h+d&&(e=s-d)),this.lngRange&&((f=m.x)-(y=c.x/2)<u&&(t=u+y),l<f+y&&(t=l-y)),void 0===t&&void 0===e||(this.center=this.unproject(new vt.Point(void 0!==t?t:m.x,void 0!==e?e:m.y))),this._unmodified=p,this._constraining=!1}},Cn.prototype._calcMatrices=function(){if(this.height){var t=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=Math.PI/2+this._pitch,i=this._fov*(.5+t.y/this.height),r=Math.sin(i)*this.cameraToCenterDistance/Math.sin(vt.clamp(Math.PI-e-i,.01,Math.PI-.01)),n=this.point,o=n.x,a=n.y,s=1.01*(Math.cos(Math.PI/2-this._pitch)*r+this.cameraToCenterDistance),u=this.height/50,l=new Float64Array(16);vt.perspective(l,this._fov,this.width/this.height,u,s),l[8]=2*-t.x/this.width,l[9]=2*t.y/this.height,vt.scale(l,l,[1,-1,1]),vt.translate(l,l,[0,0,-this.cameraToCenterDistance]),vt.rotateX(l,l,this._pitch),vt.rotateZ(l,l,this.angle),vt.translate(l,l,[-o,-a,0]),this.mercatorMatrix=vt.scale([],l,[this.worldSize,this.worldSize,this.worldSize]),vt.scale(l,l,[1,1,vt.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=l,this.invProjMatrix=vt.invert([],this.projMatrix);var c=this.width%2/2,p=this.height%2/2,h=Math.cos(this.angle),d=Math.sin(this.angle),f=o-Math.round(o)+h*c+d*p,y=a-Math.round(a)+h*p+d*c,m=new Float64Array(l);if(vt.translate(m,m,[.5<f?f-1:f,.5<y?y-1:y,0]),this.alignedProjMatrix=m,l=vt.create(),vt.scale(l,l,[this.width/2,-this.height/2,1]),vt.translate(l,l,[1,-1,0]),this.labelPlaneMatrix=l,l=vt.create(),vt.scale(l,l,[1,-1,1]),vt.translate(l,l,[-1,-1,0]),vt.scale(l,l,[2/this.width,2/this.height,1]),this.glCoordMatrix=l,this.pixelMatrix=vt.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(l=vt.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=l,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Cn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new vt.Point(0,0)),e=[t.x*this.worldSize,t.y*this.worldSize,0,1];return vt.transformMat4(e,e,this.pixelMatrix)[3]/this.cameraToCenterDistance},Cn.prototype.getCameraPoint=function(){var t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new vt.Point(0,t))},Cn.prototype.getCameraQueryGeometry=function(t){var e=this.getCameraPoint();if(1===t.length)return[t[0],e];for(var i=e.x,r=e.y,n=e.x,o=e.y,a=0,s=t;a<s.length;a+=1)var u=s[a],i=Math.min(i,u.x),r=Math.min(r,u.y),n=Math.max(n,u.x),o=Math.max(o,u.y);return[new vt.Point(i,r),new vt.Point(n,r),new vt.Point(n,o),new vt.Point(i,o),new vt.Point(i,r)]},Object.defineProperties(Cn.prototype,Nn);function jn(t){var e,i,r,n;this._hashName=t&&encodeURIComponent(t),vt.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),i=!1,r=null,n=function(){r=null,i&&(e(),r=setTimeout(n,300),i=!1)},function(){return i=!0,r||n(),r})}jn.prototype.addTo=function(t){return this._map=t,vt.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},jn.prototype.remove=function(){return vt.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},jn.prototype.getHashString=function(t){var e=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,r=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),n=Math.pow(10,r),o=Math.round(e.lng*n)/n,a=Math.round(e.lat*n)/n,s=this._map.getBearing(),u=this._map.getPitch(),l="";if(l+=t?"/"+o+"/"+a+"/"+i:i+"/"+a+"/"+o,(s||u)&&(l+="/"+Math.round(10*s)/10),u&&(l+="/"+Math.round(u)),this._hashName){var c=this._hashName,p=!1,h=vt.window.location.hash.slice(1).split("&").map(function(t){var e=t.split("=")[0];return e===c?(p=!0,e+"="+l):t}).filter(function(t){return t});return p||h.push(c+"="+l),"#"+h.join("&")}return"#"+l},jn.prototype._getCurrentHash=function(){var e,i=this,t=vt.window.location.hash.replace("#","");return this._hashName?(t.split("&").map(function(t){return t.split("=")}).forEach(function(t){t[0]===i._hashName&&(e=t)}),(e&&e[1]||"").split("/")):t.split("/")},jn.prototype._onHashChange=function(){var t=this._getCurrentHash();if(3<=t.length&&!t.some(function(t){return isNaN(t)})){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},jn.prototype._updateHashUnthrottled=function(){var t=this.getHashString();try{vt.window.history.replaceState(vt.window.history.state,"",t)}catch(t){}};function kn(t){this._map=t,this.clear()}var Pn={linearity:.3,easing:vt.bezier(0,0,.3,1)},On=vt.extend({deceleration:2500,maxSpeed:1400},Pn),Bn=vt.extend({deceleration:20,maxSpeed:1400},Pn),Un=vt.extend({deceleration:1e3,maxSpeed:360},Pn),Rn=vt.extend({deceleration:1e3,maxSpeed:90},Pn);function Fn(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function Zn(t,e,i){var r=i.maxSpeed,n=i.linearity,o=i.deceleration,a=vt.clamp(t*n/(e/1e3),-r,r),s=Math.abs(a)/(o*n);return{easing:i.easing,duration:1e3*s,amount:a*(s/2)}}kn.prototype.clear=function(){this._inertiaBuffer=[]},kn.prototype.record=function(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:vt.browser.now(),settings:t})},kn.prototype._drainInertiaBuffer=function(){for(var t=this._inertiaBuffer,e=vt.browser.now();0<t.length&&160<e-t[0].time;)t.shift()},kn.prototype._onMoveEnd=function(t){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var e={zoom:0,bearing:0,pitch:0,pan:new vt.Point(0,0),pinchAround:void 0,around:void 0},i=0,r=this._inertiaBuffer;i<r.length;i+=1){var n=r[i].settings;e.zoom+=n.zoomDelta||0,e.bearing+=n.bearingDelta||0,e.pitch+=n.pitchDelta||0,n.panDelta&&e.pan._add(n.panDelta),n.around&&(e.around=n.around),n.pinchAround&&(e.pinchAround=n.pinchAround)}var o,a,s,u,l,c=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,p={};return e.pan.mag()&&(o=Zn(e.pan.mag(),c,vt.extend({},On,t||{})),p.offset=e.pan.mult(o.amount/e.pan.mag()),p.center=this._map.transform.center,Fn(p,o)),e.zoom&&(a=Zn(e.zoom,c,Bn),p.zoom=this._map.transform.zoom+a.amount,Fn(p,a)),e.bearing&&(s=Zn(e.bearing,c,Un),p.bearing=this._map.transform.bearing+vt.clamp(s.amount,-179,179),Fn(p,s)),e.pitch&&(u=Zn(e.pitch,c,Rn),p.pitch=this._map.transform.pitch+u.amount,Fn(p,u)),(p.zoom||p.bearing)&&(l=void 0===e.pinchAround?e.around:e.pinchAround,p.around=l?this._map.unproject(l):this._map.getCenter()),this.clear(),vt.extend(p,{noMoveStart:!0})}};function Vn(t,e){this._map=t,this._clickTolerance=e.clickTolerance}var Gn=function(a){function t(t,e,i,r){void 0===r&&(r={});var n=_.mousePos(e.getCanvasContainer(),i),o=e.unproject(n);a.call(this,t,vt.extend({point:n,lngLat:o,originalEvent:i},r)),this._defaultPrevented=!1,this.target=e}a&&(t.__proto__=a);var e={defaultPrevented:{configurable:!0}};return((t.prototype=Object.create(a&&a.prototype)).constructor=t).prototype.preventDefault=function(){this._defaultPrevented=!0},e.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,e),t}(vt.Event),Yn=function(u){function t(t,e,i){var r="touchend"===t?i.changedTouches:i.touches,n=_.touchPos(e.getCanvasContainer(),r),o=n.map(function(t){return e.unproject(t)}),a=n.reduce(function(t,e,i,r){return t.add(e.div(r.length))},new vt.Point(0,0)),s=e.unproject(a);u.call(this,t,{points:n,point:a,lngLats:o,lngLat:s,originalEvent:i}),this._defaultPrevented=!1}u&&(t.__proto__=u);var e={defaultPrevented:{configurable:!0}};return((t.prototype=Object.create(u&&u.prototype)).constructor=t).prototype.preventDefault=function(){this._defaultPrevented=!0},e.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,e),t}(vt.Event),Qn=function(r){function t(t,e,i){r.call(this,t,{originalEvent:i}),this._defaultPrevented=!1}r&&(t.__proto__=r);var e={defaultPrevented:{configurable:!0}};return((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.preventDefault=function(){this._defaultPrevented=!0},e.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,e),t}(vt.Event);Vn.prototype.reset=function(){delete this._mousedownPos},Vn.prototype.wheel=function(t){return this._firePreventable(new Qn(t.type,this._map,t))},Vn.prototype.mousedown=function(t,e){return this._mousedownPos=e,this._firePreventable(new Gn(t.type,this._map,t))},Vn.prototype.mouseup=function(t){this._map.fire(new Gn(t.type,this._map,t))},Vn.prototype.click=function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new Gn(t.type,this._map,t))},Vn.prototype.dblclick=function(t){return this._firePreventable(new Gn(t.type,this._map,t))},Vn.prototype.mouseover=function(t){this._map.fire(new Gn(t.type,this._map,t))},Vn.prototype.mouseout=function(t){this._map.fire(new Gn(t.type,this._map,t))},Vn.prototype.touchstart=function(t){return this._firePreventable(new Yn(t.type,this._map,t))},Vn.prototype.touchmove=function(t){this._map.fire(new Yn(t.type,this._map,t))},Vn.prototype.touchend=function(t){this._map.fire(new Yn(t.type,this._map,t))},Vn.prototype.touchcancel=function(t){this._map.fire(new Yn(t.type,this._map,t))},Vn.prototype._firePreventable=function(t){if(this._map.fire(t),t.defaultPrevented)return{}},Vn.prototype.isEnabled=function(){return!0},Vn.prototype.isActive=function(){return!1},Vn.prototype.enable=function(){},Vn.prototype.disable=function(){};function Wn(t){this._map=t}Wn.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Wn.prototype.mousemove=function(t){this._map.fire(new Gn(t.type,this._map,t))},Wn.prototype.mousedown=function(){this._delayContextMenu=!0},Wn.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Gn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Wn.prototype.contextmenu=function(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new Gn(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()},Wn.prototype.isEnabled=function(){return!0},Wn.prototype.isActive=function(){return!1},Wn.prototype.enable=function(){},Wn.prototype.disable=function(){};function Hn(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}function qn(t,e){for(var i={},r=0;r<t.length;r++)i[t[r].identifier]=e[r];return i}Hn.prototype.isEnabled=function(){return!!this._enabled},Hn.prototype.isActive=function(){return!!this._active},Hn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Hn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Hn.prototype.mousedown=function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(_.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)},Hn.prototype.mousemoveWindow=function(t,e){var i,r,n,o,a,s;this._active&&(i=e,this._lastPos.equals(i)||!this._box&&i.dist(this._startPos)<this._clickTolerance||(r=this._startPos,this._lastPos=i,this._box||(this._box=_.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t)),n=Math.min(r.x,i.x),o=Math.max(r.x,i.x),a=Math.min(r.y,i.y),s=Math.max(r.y,i.y),_.setTransform(this._box,"translate("+n+"px,"+a+"px)"),this._box.style.width=o-n+"px",this._box.style.height=s-a+"px"))},Hn.prototype.mouseupWindow=function(t,e){var i=this;if(this._active&&0===t.button){var r=this._startPos,n=e;if(this.reset(),_.suppressClick(),r.x!==n.x||r.y!==n.y)return this._map.fire(new vt.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:function(t){return t.fitScreenCoordinates(r,n,i._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",t)}},Hn.prototype.keydown=function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))},Hn.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(_.remove(this._box),this._box=null),_.enableDrag(),delete this._startPos,delete this._lastPos},Hn.prototype._fireEvent=function(t,e){return this._map.fire(new vt.Event(t,{originalEvent:e}))};function Xn(t){this.reset(),this.numTouches=t.numTouches}Xn.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Xn.prototype.touchstart=function(t,e,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),i.length===this.numTouches&&(this.centroid=function(t){for(var e=new vt.Point(0,0),i=0,r=t;i<r.length;i+=1)e._add(r[i]);return e.div(t.length)}(e),this.touches=qn(i,e)))},Xn.prototype.touchmove=function(t,e,i){if(!this.aborted&&this.centroid){var r=qn(i,e);for(var n in this.touches){var o=r[n];(!o||30<o.dist(this.touches[n]))&&(this.aborted=!0)}}},Xn.prototype.touchend=function(t,e,i){if((!this.centroid||500<t.timeStamp-this.startTime)&&(this.aborted=!0),0===i.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}};function Jn(t){this.singleTap=new Xn(t),this.numTaps=t.numTaps,this.reset()}Jn.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Jn.prototype.touchstart=function(t,e,i){this.singleTap.touchstart(t,e,i)},Jn.prototype.touchmove=function(t,e,i){this.singleTap.touchmove(t,e,i)},Jn.prototype.touchend=function(t,e,i){var r=this.singleTap.touchend(t,e,i);if(r){var n=t.timeStamp-this.lastTime<500,o=!this.lastTap||this.lastTap.dist(r)<30;if(n&&o||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}};function Kn(){this._zoomIn=new Jn({numTouches:1,numTaps:2}),this._zoomOut=new Jn({numTouches:2,numTaps:1}),this.reset()}Kn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Kn.prototype.touchstart=function(t,e,i){this._zoomIn.touchstart(t,e,i),this._zoomOut.touchstart(t,e,i)},Kn.prototype.touchmove=function(t,e,i){this._zoomIn.touchmove(t,e,i),this._zoomOut.touchmove(t,e,i)},Kn.prototype.touchend=function(e,t,i){var r=this,n=this._zoomIn.touchend(e,t,i),o=this._zoomOut.touchend(e,t,i);return n?(this._active=!0,e.preventDefault(),setTimeout(function(){return r.reset()},0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(n)},{originalEvent:e})}}):o?(this._active=!0,e.preventDefault(),setTimeout(function(){return r.reset()},0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(o)},{originalEvent:e})}}):void 0},Kn.prototype.touchcancel=function(){this.reset()},Kn.prototype.enable=function(){this._enabled=!0},Kn.prototype.disable=function(){this._enabled=!1,this.reset()},Kn.prototype.isEnabled=function(){return this._enabled},Kn.prototype.isActive=function(){return this._active};function $n(t){this.reset(),this._clickTolerance=t.clickTolerance||1}var to={0:1,2:2};$n.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},$n.prototype._correctButton=function(t,e){return!1},$n.prototype._move=function(t,e){return{}},$n.prototype.mousedown=function(t,e){var i;this._lastPoint||(i=_.mouseButton(t),this._correctButton(t,i)&&(this._lastPoint=e,this._eventButton=i))},$n.prototype.mousemoveWindow=function(t,e){var i,r,n=this._lastPoint;if(n)if(t.preventDefault(),i=this._eventButton,r=to[i],void 0===t.buttons||(t.buttons&r)!==r)this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)},$n.prototype.mouseupWindow=function(t){this._lastPoint&&_.mouseButton(t)===this._eventButton&&(this._moved&&_.suppressClick(),this.reset())},$n.prototype.enable=function(){this._enabled=!0},$n.prototype.disable=function(){this._enabled=!1,this.reset()},$n.prototype.isEnabled=function(){return this._enabled},$n.prototype.isActive=function(){return this._active};function eo(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()}var io,ro,no,oo=((no=$n)&&(co.__proto__=no),((co.prototype=Object.create(no&&no.prototype)).constructor=co).prototype.mousedown=function(t,e){no.prototype.mousedown.call(this,t,e),this._lastPoint&&(this._active=!0)},co.prototype._correctButton=function(t,e){return 0===e&&!t.ctrlKey},co.prototype._move=function(t,e){return{around:e,panDelta:e.sub(t)}},co),ao=((ro=$n)&&(lo.__proto__=ro),((lo.prototype=Object.create(ro&&ro.prototype)).constructor=lo).prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},lo.prototype._move=function(t,e){var i=.8*(e.x-t.x);if(i)return this._active=!0,{bearingDelta:i}},lo.prototype.contextmenu=function(t){t.preventDefault()},lo),so=((io=$n)&&(uo.__proto__=io),((uo.prototype=Object.create(io&&io.prototype)).constructor=uo).prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},uo.prototype._move=function(t,e){var i=-.5*(e.y-t.y);if(i)return this._active=!0,{pitchDelta:i}},uo.prototype.contextmenu=function(t){t.preventDefault()},uo);function uo(){io.apply(this,arguments)}function lo(){ro.apply(this,arguments)}function co(){no.apply(this,arguments)}eo.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new vt.Point(0,0)},eo.prototype.touchstart=function(t,e,i){return this._calculateTransform(t,e,i)},eo.prototype.touchmove=function(t,e,i){if(this._active)return t.preventDefault(),this._calculateTransform(t,e,i)},eo.prototype.touchend=function(t,e,i){this._calculateTransform(t,e,i),this._active&&i.length<this._minTouches&&this.reset()},eo.prototype.touchcancel=function(){this.reset()},eo.prototype._calculateTransform=function(t,e,i){0<i.length&&(this._active=!0);var r=qn(i,e),n=new vt.Point(0,0),o=new vt.Point(0,0),a=0;for(var s in r){var u=r[s],l=this._touches[s];l&&(n._add(u),o._add(u.sub(l)),a++,r[s]=u)}if(this._touches=r,!(a<this._minTouches)&&o.mag()){var c=o.div(a);if(this._sum._add(c),!(this._sum.mag()<this._clickTolerance))return{around:n.div(a),panDelta:c}}},eo.prototype.enable=function(){this._enabled=!0},eo.prototype.disable=function(){this._enabled=!1,this.reset()},eo.prototype.isEnabled=function(){return this._enabled},eo.prototype.isActive=function(){return this._active};function po(){this.reset()}function ho(t,e,i){for(var r=0;r<t.length;r++)if(t[r].identifier===i)return e[r]}function fo(t,e){return Math.log(t/e)/Math.LN2}po.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},po.prototype._start=function(t){},po.prototype._move=function(t,e,i){return{}},po.prototype.touchstart=function(t,e,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([e[0],e[1]]))},po.prototype.touchmove=function(t,e,i){if(this._firstTwoTouches){t.preventDefault();var r=this._firstTwoTouches,n=r[1],o=ho(i,e,r[0]),a=ho(i,e,n);if(o&&a){var s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}}},po.prototype.touchend=function(t,e,i){var r,n,o,a;this._firstTwoTouches&&(n=(r=this._firstTwoTouches)[1],o=ho(i,e,r[0]),a=ho(i,e,n),o&&a||(this._active&&_.suppressClick(),this.reset()))},po.prototype.touchcancel=function(){this.reset()},po.prototype.enable=function(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around},po.prototype.disable=function(){this._enabled=!1,this.reset()},po.prototype.isEnabled=function(){return this._enabled},po.prototype.isActive=function(){return this._active};var yo,mo=((yo=po)&&(go.__proto__=yo),((go.prototype=Object.create(yo&&yo.prototype)).constructor=go).prototype.reset=function(){yo.prototype.reset.call(this),delete this._distance,delete this._startDistance},go.prototype._start=function(t){this._startDistance=this._distance=t[0].dist(t[1])},go.prototype._move=function(t,e){var i=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(fo(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:fo(this._distance,i),pinchAround:e}},go);function go(){yo.apply(this,arguments)}function vo(t,e){return 180*t.angleWith(e)/Math.PI}var _o,xo=((_o=po)&&(bo.__proto__=_o),((bo.prototype=Object.create(_o&&_o.prototype)).constructor=bo).prototype.reset=function(){_o.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},bo.prototype._start=function(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])},bo.prototype._move=function(t,e){var i=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:vo(this._vector,i),pinchAround:e}},bo.prototype._isBelowThreshold=function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360,i=vo(t,this._startVector);return Math.abs(i)<e},bo);function bo(){_o.apply(this,arguments)}function Mo(t){return Math.abs(t.y)>Math.abs(t.x)}function wo(){var t=Lo;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep}var Io,To=((Io=po)&&(zo.__proto__=Io),((zo.prototype=Object.create(Io&&Io.prototype)).constructor=zo).prototype.reset=function(){Io.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},zo.prototype._start=function(t){Mo((this._lastPoints=t)[0].sub(t[1]))&&(this._valid=!1)},zo.prototype._move=function(t,e,i){var r=t[0].sub(this._lastPoints[0]),n=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,n,i.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(r.y+n.y)/2*-.5}},zo.prototype.gestureBeginsVertically=function(t,e,i){if(void 0!==this._valid)return this._valid;var r=2<=t.mag(),n=2<=e.mag();if(r||n){if(!r||!n)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;var o=0<t.y==0<e.y;return Mo(t)&&Mo(e)&&o}},zo),Lo={panStep:100,bearingStep:15,pitchStep:10};function zo(){Io.apply(this,arguments)}function Do(t){return t*(2-t)}wo.prototype.reset=function(){this._active=!1},wo.prototype.keydown=function(i){var r=this;if(!(i.altKey||i.ctrlKey||i.metaKey)){var n=0,o=0,a=0,s=0,u=0;switch(i.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:i.shiftKey?o=-1:(i.preventDefault(),s=-1);break;case 39:i.shiftKey?o=1:(i.preventDefault(),s=1);break;case 38:i.shiftKey?a=1:(i.preventDefault(),u=-1);break;case 40:i.shiftKey?a=-1:(i.preventDefault(),u=1);break;default:return}return{cameraAnimation:function(t){var e=t.getZoom();t.easeTo({duration:300,easeId:"keyboardHandler",easing:Do,zoom:n?Math.round(e)+n*(i.shiftKey?2:1):e,bearing:t.getBearing()+o*r._bearingStep,pitch:t.getPitch()+a*r._pitchStep,offset:[-s*r._panStep,-u*r._panStep],center:t.getCenter()},{originalEvent:i})}}}},wo.prototype.enable=function(){this._enabled=!0},wo.prototype.disable=function(){this._enabled=!1,this.reset()},wo.prototype.isEnabled=function(){return this._enabled},wo.prototype.isActive=function(){return this._active};function Ao(t,e){this._map=t,this._el=t.getCanvasContainer(),this._handler=e,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,vt.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)}Ao.prototype.setZoomRate=function(t){this._defaultZoomRate=t},Ao.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},Ao.prototype.isEnabled=function(){return!!this._enabled},Ao.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},Ao.prototype.isZooming=function(){return!!this._zooming},Ao.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},Ao.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ao.prototype.wheel=function(t){var e,i,r;this.isEnabled()&&(e=t.deltaMode===vt.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,r=(i=vt.browser.now())-(this._lastWheelEventTime||0),this._lastWheelEventTime=i,0!==e&&e%4.000244140625==0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":400<r?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(r*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&(this._lastWheelEvent=t,this._delta-=e,this._active||this._start(t)),t.preventDefault())},Ao.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)},Ao.prototype._start=function(t){var e;this._delta&&(this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout),e=_.mousePos(this._el,t),this._around=vt.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(e)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame()))},Ao.prototype.renderFrame=function(){return this._onScrollFrame()},Ao.prototype._onScrollFrame=function(){var t=this;if(this._frameId&&(this._frameId=null,this.isActive())){var e,i,r,n=this._map.transform;0!==this._delta&&(e="wheel"===this._type&&4.000244140625<Math.abs(this._delta)?this._wheelZoomRate:this._defaultZoomRate,i=2/(1+Math.exp(-Math.abs(this._delta*e))),this._delta<0&&0!==i&&(i=1/i),r="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale,this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(r*i))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0);var o,a,s,u="number"==typeof this._targetZoom?this._targetZoom:n.zoom,l=this._startZoom,c=this._easing,p=!1;return"wheel"===this._type&&l&&c?(a=c(o=Math.min((vt.browser.now()-this._lastWheelEventTime)/200,1)),s=vt.number(l,u,a),o<1?this._frameId||(this._frameId=!0):p=!0):(s=u,p=!0),this._active=!0,p&&(this._active=!1,this._finishTimeout=setTimeout(function(){t._zooming=!1,t._handler._triggerRenderFrame(),delete t._targetZoom,delete t._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!p,zoomDelta:s-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ao.prototype._smoothOutEasing=function(t){var e,i,r,n,o,a=vt.ease;return this._prevEase&&(e=this._prevEase,i=(vt.browser.now()-e.start)/e.duration,r=e.easing(.01+i)-e.easing(i),n=.27/Math.sqrt(r*r+1e-4)*.01,o=Math.sqrt(.0729-n*n),a=vt.bezier(n,o,.25,1)),this._prevEase={start:vt.browser.now(),duration:t,easing:a},a},Ao.prototype.reset=function(){this._active=!1};function So(t,e){this._clickZoom=t,this._tapZoom=e}So.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},So.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},So.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},So.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};function Eo(){this.reset()}Eo.prototype.reset=function(){this._active=!1},Eo.prototype.dblclick=function(e,i){return e.preventDefault(),{cameraAnimation:function(t){t.easeTo({duration:300,zoom:t.getZoom()+(e.shiftKey?-1:1),around:t.unproject(i)},{originalEvent:e})}}},Eo.prototype.enable=function(){this._enabled=!0},Eo.prototype.disable=function(){this._enabled=!1,this.reset()},Eo.prototype.isEnabled=function(){return this._enabled},Eo.prototype.isActive=function(){return this._active};function Co(){this._tap=new Jn({numTouches:1,numTaps:1}),this.reset()}Co.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Co.prototype.touchstart=function(t,e,i){this._swipePoint||(this._tapTime&&500<t.timeStamp-this._tapTime&&this.reset(),this._tapTime?0<i.length&&(this._swipePoint=e[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(t,e,i))},Co.prototype.touchmove=function(t,e,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;var r=e[0],n=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:n/128}}}else this._tap.touchmove(t,e,i)},Co.prototype.touchend=function(t,e,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(t,e,i)&&(this._tapTime=t.timeStamp)},Co.prototype.touchcancel=function(){this.reset()},Co.prototype.enable=function(){this._enabled=!0},Co.prototype.disable=function(){this._enabled=!1,this.reset()},Co.prototype.isEnabled=function(){return this._enabled},Co.prototype.isActive=function(){return this._active};function No(t,e,i){this._el=t,this._mousePan=e,this._touchPan=i}No.prototype.enable=function(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},No.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},No.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},No.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};function jo(t,e,i){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=i}jo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},jo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},jo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},jo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};function ko(t,e,i,r){this._el=t,this._touchZoom=e,this._touchRotate=i,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}ko.prototype.enable=function(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ko.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ko.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ko.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ko.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ko.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};function Po(t){return t.zoom||t.drag||t.pitch||t.rotate}var Oo,Bo=((Oo=vt.Event)&&(Uo.__proto__=Oo),(Uo.prototype=Object.create(Oo&&Oo.prototype)).constructor=Uo);function Uo(){Oo.apply(this,arguments)}function Ro(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}function Fo(t,e){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new kn(t),this._bearingSnap=e.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(e),vt.bindAll(["handleEvent","handleWindowEvent"],this);var i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[vt.window.document,"mousemove",{capture:!0}],[vt.window.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[vt.window,"blur",void 0]];for(var r=0,n=this._listeners;r<n.length;r+=1){var o=n[r],a=o[0];_.addEventListener(a,o[1],a===vt.window.document?this.handleWindowEvent:this.handleEvent,o[2])}}Fo.prototype.destroy=function(){for(var t=0,e=this._listeners;t<e.length;t+=1){var i=e[t],r=i[0];_.removeEventListener(r,i[1],r===vt.window.document?this.handleWindowEvent:this.handleEvent,i[2])}},Fo.prototype._addDefaultHandlers=function(t){var e=this._map,i=e.getCanvasContainer();this._add("mapEvent",new Vn(e,t));var r=e.boxZoom=new Hn(e,t);this._add("boxZoom",r);var n=new Kn,o=new Eo;e.doubleClickZoom=new So(o,n),this._add("tapZoom",n),this._add("clickZoom",o);var a=new Co;this._add("tapDragZoom",a);var s=e.touchPitch=new To;this._add("touchPitch",s);var u=new ao(t),l=new so(t);e.dragRotate=new jo(t,u,l),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",l,["mouseRotate"]);var c=new oo(t),p=new eo(t);e.dragPan=new No(i,c,p),this._add("mousePan",c),this._add("touchPan",p,["touchZoom","touchRotate"]);var h=new xo,d=new mo;e.touchZoomRotate=new ko(i,d,h,a),this._add("touchRotate",h,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]);var f=e.scrollZoom=new Ao(e,this);this._add("scrollZoom",f,["mousePan"]);var y=e.keyboard=new wo;this._add("keyboard",y),this._add("blockableMapEvent",new Wn(e));for(var m=0,g=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];m<g.length;m+=1){var v=g[m];t.interactive&&t[v]&&e[v].enable(t[v])}},Fo.prototype._add=function(t,e,i){this._handlers.push({handlerName:t,handler:e,allowed:i}),this._handlersById[t]=e},Fo.prototype.stop=function(){if(!this._updatingCamera){for(var t=0,e=this._handlers;t<e.length;t+=1)e[t].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},Fo.prototype.isActive=function(){for(var t=0,e=this._handlers;t<e.length;t+=1)if(e[t].handler.isActive())return!0;return!1},Fo.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Fo.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Fo.prototype.isMoving=function(){return Boolean(Po(this._eventsInProgress))||this.isZooming()},Fo.prototype._blockedByActive=function(t,e,i){for(var r in t)if(r!==i&&(!e||e.indexOf(r)<0))return!0;return!1},Fo.prototype.handleWindowEvent=function(t){this.handleEvent(t,t.type+"Window")},Fo.prototype._getMapTouches=function(t){for(var e=[],i=0,r=t;i<r.length;i+=1){var n=r[i];this._el.contains(n.target)&&e.push(n)}return e},Fo.prototype.handleEvent=function(t,e){if("blur"!==t.type){this._updatingCamera=!0;for(var i="renderFrame"===t.type?void 0:t,r={needsRenderFrame:!1},n={},o={},a=t.touches?this._getMapTouches(t.touches):void 0,s=a?_.touchPos(this._el,a):_.mousePos(this._el,t),u=0,l=this._handlers;u<l.length;u+=1){var c,p=l[u],h=p.handlerName,d=p.handler,f=p.allowed;d.isEnabled()&&(c=void 0,this._blockedByActive(o,f,h)?d.reset():d[e||t.type]&&(c=d[e||t.type](t,s,a),this.mergeHandlerResult(r,n,c,h,i),c&&c.needsRenderFrame&&this._triggerRenderFrame()),(c||d.isActive())&&(o[h]=d))}var y={};for(var m in this._previousActiveHandlers)o[m]||(y[m]=i);this._previousActiveHandlers=o,(Object.keys(y).length||Ro(r))&&(this._changes.push([r,n,y]),this._triggerRenderFrame()),(Object.keys(o).length||Ro(r))&&this._map._stop(!0),this._updatingCamera=!1;var g=r.cameraAnimation;g&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],g(this._map))}else this.stop()},Fo.prototype.mergeHandlerResult=function(t,e,i,r,n){var o;i&&(vt.extend(t,i),o={handlerName:r,originalEvent:i.originalEvent||n},void 0!==i.zoomDelta&&(e.zoom=o),void 0!==i.panDelta&&(e.drag=o),void 0!==i.pitchDelta&&(e.pitch=o),void 0!==i.bearingDelta&&(e.rotate=o))},Fo.prototype._applyChanges=function(){for(var t={},e={},i={},r=0,n=this._changes;r<n.length;r+=1){var o=n[r],a=o[0],s=o[1],u=o[2];a.panDelta&&(t.panDelta=(t.panDelta||new vt.Point(0,0))._add(a.panDelta)),a.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+a.zoomDelta),a.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+a.bearingDelta),a.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+a.pitchDelta),void 0!==a.around&&(t.around=a.around),void 0!==a.pinchAround&&(t.pinchAround=a.pinchAround),a.noInertia&&(t.noInertia=a.noInertia),vt.extend(e,s),vt.extend(i,u)}this._updateMapTransform(t,e,i),this._changes=[]},Fo.prototype._updateMapTransform=function(t,e,i){var r=this._map,n=r.transform;if(!Ro(t))return this._fireEvents(e,i);var o=t.panDelta,a=t.zoomDelta,s=t.bearingDelta,u=t.pitchDelta,l=t.around,c=t.pinchAround;void 0!==c&&(l=c),r._stop(!0),l=l||r.transform.centerPoint;var p=n.pointLocation(o?l.sub(o):l);s&&(n.bearing+=s),u&&(n.pitch+=u),a&&(n.zoom+=a),n.setLocationAtPoint(p,l),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,i)},Fo.prototype._fireEvents=function(t,e){var i=this,r=Po(this._eventsInProgress),n=Po(t),o={};for(var a in t)this._eventsInProgress[a]||(o[a+"start"]=t[a].originalEvent),this._eventsInProgress[a]=t[a];for(var s in!r&&n&&this._fireEvent("movestart",n.originalEvent),o)this._fireEvent(s,o[s]);for(var u in t.rotate&&(this._bearingChanged=!0),n&&this._fireEvent("move",n.originalEvent),t)this._fireEvent(u,t[u].originalEvent);var l,c={};for(var p in this._eventsInProgress){var h=this._eventsInProgress[p],d=h.handlerName,f=h.originalEvent;this._handlersById[d].isActive()||(delete this._eventsInProgress[p],c[p+"end"]=l=e[d]||f)}for(var y in c)this._fireEvent(y,c[y]);var m,g,v=Po(this._eventsInProgress);!r&&!n||v||(this._updatingCamera=!0,g=function(t){return 0!==t&&-i._bearingSnap<t&&t<i._bearingSnap},(m=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions))?(g(m.bearing||this._map.getBearing())&&(m.bearing=0),this._map.easeTo(m,{originalEvent:l})):(this._map.fire(new vt.Event("moveend",{originalEvent:l})),g(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1)},Fo.prototype._fireEvent=function(t,e){this._map.fire(new vt.Event(t,e?{originalEvent:e}:{}))},Fo.prototype._triggerRenderFrame=function(){var e=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(t){delete e._frameId,e.handleEvent(new Bo("renderFrame",{timeStamp:t})),e._applyChanges()}))};function Zo(t){void 0===t&&(t={}),this.options=t,vt.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)}var Vo,Go=((Vo=vt.Evented)&&(Yo.__proto__=Vo),((Yo.prototype=Object.create(Vo&&Vo.prototype)).constructor=Yo).prototype.getCenter=function(){return new vt.LngLat(this.transform.center.lng,this.transform.center.lat)},Yo.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},Yo.prototype.panBy=function(t,e,i){return t=vt.Point.convert(t).mult(-1),this.panTo(this.transform.center,vt.extend({offset:t},e),i)},Yo.prototype.panTo=function(t,e,i){return this.easeTo(vt.extend({center:t},e),i)},Yo.prototype.getZoom=function(){return this.transform.zoom},Yo.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},Yo.prototype.zoomTo=function(t,e,i){return this.easeTo(vt.extend({zoom:t},e),i)},Yo.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},Yo.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},Yo.prototype.getBearing=function(){return this.transform.bearing},Yo.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},Yo.prototype.getPadding=function(){return this.transform.padding},Yo.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},Yo.prototype.rotateTo=function(t,e,i){return this.easeTo(vt.extend({bearing:t},e),i)},Yo.prototype.resetNorth=function(t,e){return this.rotateTo(0,vt.extend({duration:1e3},t),e),this},Yo.prototype.resetNorthPitch=function(t,e){return this.easeTo(vt.extend({bearing:0,pitch:0,duration:1e3},t),e),this},Yo.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},Yo.prototype.getPitch=function(){return this.transform.pitch},Yo.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},Yo.prototype.cameraForBounds=function(t,e){return t=vt.LngLatBounds.convert(t),this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),0,e)},Yo.prototype._cameraForBoxAndBearing=function(t,e,i,r){var n,o={top:0,bottom:0,right:0,left:0};"number"==typeof(r=vt.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding&&(n=r.padding,r.padding={top:n,bottom:n,right:n,left:n}),r.padding=vt.extend(o,r.padding);var a=this.transform,s=a.padding,u=a.project(vt.LngLat.convert(t)),l=a.project(vt.LngLat.convert(e)),c=u.rotate(-i*Math.PI/180),p=l.rotate(-i*Math.PI/180),h=new vt.Point(Math.max(c.x,p.x),Math.max(c.y,p.y)),d=new vt.Point(Math.min(c.x,p.x),Math.min(c.y,p.y)),f=h.sub(d),y=(a.width-(s.left+s.right+r.padding.left+r.padding.right))/f.x,m=(a.height-(s.top+s.bottom+r.padding.top+r.padding.bottom))/f.y;if(!(m<0||y<0)){var g=Math.min(a.scaleZoom(a.scale*Math.min(y,m)),r.maxZoom),v=vt.Point.convert(r.offset),_=new vt.Point(v.x+(r.padding.left-r.padding.right)/2,v.y+(r.padding.top-r.padding.bottom)/2).mult(a.scale/a.zoomScale(g));return{center:a.unproject(u.add(l).div(2).sub(_)),zoom:g,bearing:i}}vt.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},Yo.prototype.fitBounds=function(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)},Yo.prototype.fitScreenCoordinates=function(t,e,i,r,n){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(vt.Point.convert(t)),this.transform.pointLocation(vt.Point.convert(e)),i,r),r,n)},Yo.prototype._fitInternal=function(t,e,i){return t?(delete(e=vt.extend(t,e)).padding,e.linear?this.easeTo(e,i):this.flyTo(e,i)):this},Yo.prototype.jumpTo=function(t,e){this.stop();var i=this.transform,r=!1,n=!1,o=!1;return"zoom"in t&&i.zoom!==+t.zoom&&(r=!0,i.zoom=+t.zoom),void 0!==t.center&&(i.center=vt.LngLat.convert(t.center)),"bearing"in t&&i.bearing!==+t.bearing&&(n=!0,i.bearing=+t.bearing),"pitch"in t&&i.pitch!==+t.pitch&&(o=!0,i.pitch=+t.pitch),null==t.padding||i.isPaddingEqual(t.padding)||(i.padding=t.padding),this.fire(new vt.Event("movestart",e)).fire(new vt.Event("move",e)),r&&this.fire(new vt.Event("zoomstart",e)).fire(new vt.Event("zoom",e)).fire(new vt.Event("zoomend",e)),n&&this.fire(new vt.Event("rotatestart",e)).fire(new vt.Event("rotate",e)).fire(new vt.Event("rotateend",e)),o&&this.fire(new vt.Event("pitchstart",e)).fire(new vt.Event("pitch",e)).fire(new vt.Event("pitchend",e)),this.fire(new vt.Event("moveend",e))},Yo.prototype.easeTo=function(t,o){var a=this;this._stop(!1,t.easeId),(!1===(t=vt.extend({offset:[0,0],duration:500,easing:vt.ease},t)).animate||!t.essential&&vt.browser.prefersReducedMotion)&&(t.duration=0);var s=this.transform,u=this.getZoom(),l=this.getBearing(),c=this.getPitch(),p=this.getPadding(),h="zoom"in t?+t.zoom:u,d="bearing"in t?this._normalizeBearing(t.bearing,l):l,f="pitch"in t?+t.pitch:c,y="padding"in t?t.padding:s.padding,m=vt.Point.convert(t.offset),g=s.centerPoint.add(m),e=s.pointLocation(g),i=vt.LngLat.convert(t.center||e);this._normalizeCenter(i);var v,_,x=s.project(e),b=s.project(i).sub(x),M=s.zoomScale(h-u);t.around&&(v=vt.LngLat.convert(t.around),_=s.locationPoint(v));var r={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||h!==u,this._rotating=this._rotating||l!==d,this._pitching=this._pitching||f!==c,this._padding=!s.isPaddingEqual(y),this._easeId=t.easeId,this._prepareEase(o,t.noMoveStart,r),clearTimeout(this._easeEndTimeoutID),this._ease(function(t){var e,i,r,n;a._zooming&&(s.zoom=vt.number(u,h,t)),a._rotating&&(s.bearing=vt.number(l,d,t)),a._pitching&&(s.pitch=vt.number(c,f,t)),a._padding&&(s.interpolatePadding(p,y,t),g=s.centerPoint.add(m)),v?s.setLocationAtPoint(v,_):(e=s.zoomScale(s.zoom-u),i=u<h?Math.min(2,M):Math.max(.5,M),r=Math.pow(i,1-t),n=s.unproject(x.add(b.mult(t*r)).mult(e)),s.setLocationAtPoint(s.renderWorldCopies?n.wrap():n,g)),a._fireMoveEvents(o)},function(t){a._afterEase(o,t)},t),this},Yo.prototype._prepareEase=function(t,e,i){void 0===i&&(i={}),this._moving=!0,e||i.moving||this.fire(new vt.Event("movestart",t)),this._zooming&&!i.zooming&&this.fire(new vt.Event("zoomstart",t)),this._rotating&&!i.rotating&&this.fire(new vt.Event("rotatestart",t)),this._pitching&&!i.pitching&&this.fire(new vt.Event("pitchstart",t))},Yo.prototype._fireMoveEvents=function(t){this.fire(new vt.Event("move",t)),this._zooming&&this.fire(new vt.Event("zoom",t)),this._rotating&&this.fire(new vt.Event("rotate",t)),this._pitching&&this.fire(new vt.Event("pitch",t))},Yo.prototype._afterEase=function(t,e){var i,r,n;this._easeId&&e&&this._easeId===e||(delete this._easeId,i=this._zooming,r=this._rotating,n=this._pitching,this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,i&&this.fire(new vt.Event("zoomend",t)),r&&this.fire(new vt.Event("rotateend",t)),n&&this.fire(new vt.Event("pitchend",t)),this.fire(new vt.Event("moveend",t)))},Yo.prototype.flyTo=function(t,n){var o=this;if(!t.essential&&vt.browser.prefersReducedMotion){var e=vt.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(e,n)}this.stop(),t=vt.extend({offset:[0,0],speed:1.2,curve:1.42,easing:vt.ease},t);var a=this.transform,s=this.getZoom(),u=this.getBearing(),l=this.getPitch(),c=this.getPadding(),p="zoom"in t?vt.clamp(+t.zoom,a.minZoom,a.maxZoom):s,h="bearing"in t?this._normalizeBearing(t.bearing,u):u,d="pitch"in t?+t.pitch:l,f="padding"in t?t.padding:a.padding,i=a.zoomScale(p-s),y=vt.Point.convert(t.offset),m=a.centerPoint.add(y),r=a.pointLocation(m),g=vt.LngLat.convert(t.center||r);this._normalizeCenter(g);var v,_,x=a.project(r),b=a.project(g).sub(x),M=t.curve,w=Math.max(a.width,a.height),I=w/i,T=b.mag();"minZoom"in t&&(v=vt.clamp(Math.min(t.minZoom,s,p),a.minZoom,a.maxZoom),_=w/a.zoomScale(v-s),M=Math.sqrt(_/T*2));var L=M*M;function z(t){var e=(I*I-w*w+(t?-1:1)*L*L*T*T)/(2*(t?I:w)*L*T);return Math.log(Math.sqrt(e*e+1)-e)}function D(t){return(Math.exp(t)-Math.exp(-t))/2}function A(t){return(Math.exp(t)+Math.exp(-t))/2}var S=z(0),E=function(t){return A(S)/A(S+M*t)},C=function(t){return w*((A(S)*(D(e=S+M*t)/A(e))-D(S))/L)/T;var e},N=(z(1)-S)/M;if(Math.abs(T)<1e-6||!isFinite(N)){if(Math.abs(w-I)<1e-6)return this.easeTo(t,n);var j=I<w?-1:1,N=Math.abs(Math.log(I/w))/M,C=function(){return 0},E=function(t){return Math.exp(j*M*t)}}return t.duration="duration"in t?+t.duration:1e3*N/("screenSpeed"in t?t.screenSpeed/M:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=u!==h,this._pitching=d!==l,this._padding=!a.isPaddingEqual(f),this._prepareEase(n,!1),this._ease(function(t){var e=t*N,i=1/E(e);a.zoom=1===t?p:s+a.scaleZoom(i),o._rotating&&(a.bearing=vt.number(u,h,t)),o._pitching&&(a.pitch=vt.number(l,d,t)),o._padding&&(a.interpolatePadding(c,f,t),m=a.centerPoint.add(y));var r=1===t?g:a.unproject(x.add(b.mult(C(e))).mult(i));a.setLocationAtPoint(a.renderWorldCopies?r.wrap():r,m),o._fireMoveEvents(n)},function(){return o._afterEase(n)},t),this},Yo.prototype.isEasing=function(){return!!this._easeFrameId},Yo.prototype.stop=function(){return this._stop()},Yo.prototype._stop=function(t,e){var i,r;return this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd&&(i=this._onEaseEnd,delete this._onEaseEnd,i.call(this,e)),t||(r=this.handlers)&&r.stop(),this},Yo.prototype._ease=function(t,e,i){!1===i.animate||0===i.duration?(t(1),e()):(this._easeStart=vt.browser.now(),this._easeOptions=i,this._onEaseFrame=t,this._onEaseEnd=e,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Yo.prototype._renderFrameCallback=function(){var t=Math.min((vt.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Yo.prototype._normalizeBearing=function(t,e){t=vt.wrap(t,-180,180);var i=Math.abs(t-e);return Math.abs(t-360-e)<i&&(t-=360),Math.abs(t+360-e)<i&&(t+=360),t},Yo.prototype._normalizeCenter=function(t){var e,i=this.transform;i.renderWorldCopies&&!i.lngRange&&(e=t.lng-i.center.lng,t.lng+=180<e?-360:e<-180?360:0)},Yo);function Yo(t,e){Vo.call(this),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=e.bearingSnap,vt.bindAll(["_renderFrameCallback"],this)}Zo.prototype.getDefaultPosition=function(){return"bottom-right"},Zo.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=_.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Zo.prototype.onRemove=function(){_.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Zo.prototype._updateEditLink=function(){var t,e=(e=this._editLink)||(this._editLink=this._container.querySelector(".mapbox-improve-map")),r=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||vt.config.ACCESS_TOKEN}];e&&(t=r.reduce(function(t,e,i){return e.value&&(t+=e.key+"="+e.value+(i<r.length-1?"&":"")),t},"?"),e.href=vt.config.FEEDBACK_URL+"/"+t+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow")},Zo.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},Zo.prototype._updateAttributions=function(){if(this._map.style){var t,r=[];this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(function(t){return"string"!=typeof t?"":t})):"string"==typeof this.options.customAttribution&&r.push(this.options.customAttribution)),this._map.style.stylesheet&&(t=this._map.style.stylesheet,this.styleOwner=t.owner,this.styleId=t.id);var e=this._map.style.sourceCaches;for(var i in e){var n,o=e[i];!o.used||(n=o.getSource()).attribution&&r.indexOf(n.attribution)<0&&r.push(n.attribution)}r.sort(function(t,e){return t.length-e.length});var a=(r=r.filter(function(t,e){for(var i=e+1;i<r.length;i++)if(0<=r[i].indexOf(t))return!1;return!0})).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,r.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Zo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};function Qo(){vt.bindAll(["_updateLogo"],this),vt.bindAll(["_updateCompact"],this)}Qo.prototype.onAdd=function(t){this._map=t,this._container=_.create("div","mapboxgl-ctrl");var e=_.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Qo.prototype.onRemove=function(){_.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Qo.prototype.getDefaultPosition=function(){return"bottom-left"},Qo.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Qo.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},Qo.prototype._updateCompact=function(){var t,e=this._container.children;e.length&&(t=e[0],this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact"))};function Wo(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}Wo.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},Wo.prototype.remove=function(t){for(var e=this._currentlyRunning,i=0,r=e?this._queue.concat(e):this._queue;i<r.length;i+=1){var n=r[i];if(n.id===t)return void(n.cancelled=!0)}},Wo.prototype.run=function(t){void 0===t&&(t=0);var e=this._currentlyRunning=this._queue;this._queue=[];for(var i=0,r=e;i<r.length;i+=1){var n=r[i];if(!n.cancelled&&(n.callback(t),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Wo.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Ho={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},qo=vt.window.HTMLImageElement,Xo=vt.window.HTMLElement,Jo=vt.window.ImageBitmap,Ko={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},$o=function(l){function t(t){var e=this;if(null!=(t=vt.extend({},Ko,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&60<t.maxPitch)throw new Error("maxPitch must be less than or equal to 60");var i=new Cn(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies);if(l.call(this,i,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._renderTaskQueue=new Wo,this._controls=[],this._mapId=vt.uniqueId(),this._locale=vt.extend({},Ho,t.locale),this._requestManager=new vt.RequestManager(t.transformRequest,t.accessToken),"string"==typeof t.container){if(this._container=vt.window.document.getElementById(t.container),!this._container)throw new Error("Container '"+t.container+"' not found.")}else{if(!(t.container instanceof Xo))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),vt.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return e._update(!1)}),this.on("moveend",function(){return e._update(!1)}),this.on("zoom",function(){return e._update(!0)}),void 0!==vt.window&&(vt.window.addEventListener("online",this._onWindowOnline,!1),vt.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new Fo(this,t),this._hash=t.hash&&new jn("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,vt.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new Zo({customAttribution:t.customAttribution})),this.addControl(new Qo,t.logoPosition),this.on("style.load",function(){e.transform.unmodified&&e.jumpTo(e.style.stylesheet)}),this.on("data",function(t){e._update("style"===t.dataType),e.fire(new vt.Event(t.dataType+"data",t))}),this.on("dataloading",function(t){e.fire(new vt.Event(t.dataType+"dataloading",t))})}l&&(t.__proto__=l);var e={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return((t.prototype=Object.create(l&&l.prototype)).constructor=t).prototype._getMapId=function(){return this._mapId},t.prototype.addControl=function(t,e){if(void 0===e&&t.getDefaultPosition&&(e=t.getDefaultPosition()),void 0===e&&(e="top-right"),!t||!t.onAdd)return this.fire(new vt.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var i=t.onAdd(this);this._controls.push(t);var r=this._controlPositions[e];return-1!==e.indexOf("bottom")?r.insertBefore(i,r.firstChild):r.appendChild(i),this},t.prototype.removeControl=function(t){if(!t||!t.onRemove)return this.fire(new vt.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var e=this._controls.indexOf(t);return-1<e&&this._controls.splice(e,1),t.onRemove(this),this},t.prototype.resize=function(t){var e=this._containerDimensions(),i=e[0],r=e[1];this._resizeCanvas(i,r),this.transform.resize(i,r),this.painter.resize(i,r);var n=!this._moving;return n&&(this.stop(),this.fire(new vt.Event("movestart",t)).fire(new vt.Event("move",t))),this.fire(new vt.Event("resize",t)),n&&this.fire(new vt.Event("moveend",t)),this},t.prototype.getBounds=function(){return this.transform.getBounds()},t.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},t.prototype.setMaxBounds=function(t){return this.transform.setMaxBounds(vt.LngLatBounds.convert(t)),this._update()},t.prototype.setMinZoom=function(t){if(-2<=(t=null==t?-2:t)&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},t.prototype.getMinZoom=function(){return this.transform.minZoom},t.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},t.prototype.getMaxZoom=function(){return this.transform.maxZoom},t.prototype.setMinPitch=function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(0<=t&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},t.prototype.getMinPitch=function(){return this.transform.minPitch},t.prototype.setMaxPitch=function(t){if(60<(t=null==t?60:t))throw new Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},t.prototype.getMaxPitch=function(){return this.transform.maxPitch},t.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},t.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},t.prototype.project=function(t){return this.transform.locationPoint(vt.LngLat.convert(t))},t.prototype.unproject=function(t){return this.transform.pointLocation(vt.Point.convert(t))},t.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},t.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},t.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},t.prototype._createDelegatedListener=function(i,r,n){var t,o=this;if("mouseenter"===i||"mouseover"===i){var a=!1;return{layer:r,listener:n,delegates:{mousemove:function(t){var e=o.getLayer(r)?o.queryRenderedFeatures(t.point,{layers:[r]}):[];e.length?a||(a=!0,n.call(o,new Gn(i,o,t.originalEvent,{features:e}))):a=!1},mouseout:function(){a=!1}}}}if("mouseleave"!==i&&"mouseout"!==i)return{layer:r,listener:n,delegates:((t={})[i]=function(t){var e=o.getLayer(r)?o.queryRenderedFeatures(t.point,{layers:[r]}):[];e.length&&(t.features=e,n.call(o,t),delete t.features)},t)};var e=!1;return{layer:r,listener:n,delegates:{mousemove:function(t){(o.getLayer(r)?o.queryRenderedFeatures(t.point,{layers:[r]}):[]).length?e=!0:e&&(e=!1,n.call(o,new Gn(i,o,t.originalEvent)))},mouseout:function(t){e&&(e=!1,n.call(o,new Gn(i,o,t.originalEvent)))}}}},t.prototype.on=function(t,e,i){if(void 0===i)return l.prototype.on.call(this,t,e);var r=this._createDelegatedListener(t,e,i);for(var n in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(r),r.delegates)this.on(n,r.delegates[n]);return this},t.prototype.once=function(t,e,i){if(void 0===i)return l.prototype.once.call(this,t,e);var r=this._createDelegatedListener(t,e,i);for(var n in r.delegates)this.once(n,r.delegates[n]);return this},t.prototype.off=function(o,a,s){var u=this;return void 0===s?l.prototype.off.call(this,o,a):(this._delegatedListeners&&this._delegatedListeners[o]&&function(t){for(var e=t[o],i=0;i<e.length;i++){var r=e[i];if(r.layer===a&&r.listener===s){for(var n in r.delegates)u.off(n,r.delegates[n]);return e.splice(i,1)}}}(this._delegatedListeners),this)},t.prototype.queryRenderedFeatures=function(t,e){return this.style?(void 0!==e||void 0===t||t instanceof vt.Point||Array.isArray(t)||(e=t,t=void 0),e=e||{},n=(t=t||[[0,0],[this.transform.width,this.transform.height]])instanceof vt.Point||"number"==typeof t[0]?[vt.Point.convert(t)]:(i=vt.Point.convert(t[0]),r=vt.Point.convert(t[1]),[i,new vt.Point(r.x,i.y),r,new vt.Point(i.x,r.y),i]),this.style.queryRenderedFeatures(n,e,this.transform)):[];var i,r,n},t.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},t.prototype.setStyle=function(t,e){return!1!==(e=vt.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},e)).diff&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(t,e))},t.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},t.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new gr(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t)):delete this.style,this},t.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new gr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},t.prototype._diffStyle=function(t,i){var e,r,n=this;"string"==typeof t?(e=this._requestManager.normalizeStyleURL(t),r=this._requestManager.transformRequest(e,vt.ResourceType.Style),vt.getJSON(r,function(t,e){t?n.fire(new vt.ErrorEvent(t)):e&&n._updateDiff(e,i)})):"object"==typeof t&&this._updateDiff(t,i)},t.prototype._updateDiff=function(e,i){try{this.style.setState(e)&&this._update(!0)}catch(t){vt.warnOnce("Unable to perform style diff: "+(t.message||t.error||t)+".  Rebuilding the style from scratch."),this._updateStyle(e,i)}},t.prototype.getStyle=function(){if(this.style)return this.style.serialize()},t.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():vt.warnOnce("There is no style added to the map.")},t.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},t.prototype.isSourceLoaded=function(t){var e=this.style&&this.style.sourceCaches[t];if(void 0!==e)return e.loaded();this.fire(new vt.ErrorEvent(new Error("There is no source with ID '"+t+"'")))},t.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var i=t[e]._tiles;for(var r in i){var n=i[r];if("loaded"!==n.state&&"errored"!==n.state)return!1}}return!0},t.prototype.addSourceType=function(t,e,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,i)},t.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},t.prototype.getSource=function(t){return this.style.getSource(t)},t.prototype.addImage=function(t,e,i){void 0===i&&(i={});var r=i.pixelRatio;void 0===r&&(r=1);var n=i.sdf;void 0===n&&(n=!1);var o=i.stretchX,a=i.stretchY,s=i.content;if(this._lazyInitEmptyStyle(),e instanceof qo||Jo&&e instanceof Jo){var u=vt.browser.getImageData(e);this.style.addImage(t,{data:new vt.RGBAImage({width:u.width,height:u.height},u.data),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:n,version:0})}else{if(void 0===e.width||void 0===e.height)return this.fire(new vt.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var l=e;this.style.addImage(t,{data:new vt.RGBAImage({width:e.width,height:e.height},new Uint8Array(e.data)),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:n,version:0,userImage:l}),l.onAdd&&l.onAdd(this,t)}},t.prototype.updateImage=function(t,e){var i=this.style.getImage(t);if(!i)return this.fire(new vt.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var r=e instanceof qo||Jo&&e instanceof Jo?vt.browser.getImageData(e):e,n=r.width,o=r.height,a=r.data;return void 0===n||void 0===o?this.fire(new vt.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):n!==i.data.width||o!==i.data.height?this.fire(new vt.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(i.data.replace(a,!(e instanceof qo||Jo&&e instanceof Jo)),void this.style.updateImage(t,i))},t.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire(new vt.ErrorEvent(new Error("Missing required image id"))),!1)},t.prototype.removeImage=function(t){this.style.removeImage(t)},t.prototype.loadImage=function(t,e){vt.getImage(this._requestManager.transformRequest(t,vt.ResourceType.Image),e)},t.prototype.listImages=function(){return this.style.listImages()},t.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},t.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},t.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},t.prototype.getLayer=function(t){return this.style.getLayer(t)},t.prototype.setLayerZoomRange=function(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)},t.prototype.setFilter=function(t,e,i){return void 0===i&&(i={}),this.style.setFilter(t,e,i),this._update(!0)},t.prototype.getFilter=function(t){return this.style.getFilter(t)},t.prototype.setPaintProperty=function(t,e,i,r){return void 0===r&&(r={}),this.style.setPaintProperty(t,e,i,r),this._update(!0)},t.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},t.prototype.setLayoutProperty=function(t,e,i,r){return void 0===r&&(r={}),this.style.setLayoutProperty(t,e,i,r),this._update(!0)},t.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},t.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},t.prototype.getLight=function(){return this.style.getLight()},t.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},t.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},t.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},t.prototype.getContainer=function(){return this._container},t.prototype.getCanvasContainer=function(){return this._canvasContainer},t.prototype.getCanvas=function(){return this._canvas},t.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},t.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==vt.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&vt.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},t.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=_.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=_.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=_.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var i=this._containerDimensions();this._resizeCanvas(i[0],i[1]);var r=this._controlContainer=_.create("div","mapboxgl-control-container",t),n=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){n[t]=_.create("div","mapboxgl-ctrl-"+t,r)})},t.prototype._resizeCanvas=function(t,e){var i=vt.browser.devicePixelRatio||1;this._canvas.width=i*t,this._canvas.height=i*e,this._canvas.style.width=t+"px",this._canvas.style.height=e+"px"},t.prototype._setupPainter=function(){var t=vt.extend({},i.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),e=this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);e?(this.painter=new zn(e,this.transform),vt.webpSupported.testSupport(e)):this.fire(new vt.ErrorEvent(new Error("Failed to initialize WebGL")))},t.prototype._contextLost=function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new vt.Event("webglcontextlost",{originalEvent:t}))},t.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new vt.Event("webglcontextrestored",{originalEvent:t}))},t.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},t.prototype._update=function(t){return this.style&&(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint()),this},t.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},t.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},t.prototype._render=function(t){var e,i=this,r=0,n=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(e=n.createQueryEXT(),n.beginQueryEXT(n.TIME_ELAPSED_EXT,e),r=vt.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),!this._removed){var o,a,s,u,l,c,p=!1;this.style&&this._styleDirty&&(this._styleDirty=!1,o=this.transform.zoom,a=vt.browser.now(),this.style.zoomHistory.update(o,a),1===(u=(s=new vt.EvaluationParameters(o,{now:a,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()})).crossFadingFactor())&&u===this._crossFadingFactor||(p=!0,this._crossFadingFactor=u),this.style.update(s)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new vt.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new vt.Event("load"))),this.style&&(this.style.hasTransitions()||p)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")&&(l=vt.browser.now()-r,n.endQueryEXT(n.TIME_ELAPSED_EXT,e),setTimeout(function(){var t=n.getQueryObjectEXT(e,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(e),i.fire(new vt.Event("gpu-timing-frame",{cpuTime:l,gpuTime:t}))},50)),this.listens("gpu-timing-layer")&&(c=this.painter.collectGpuTimers(),setTimeout(function(){var t=i.painter.queryGpuTimers(c);i.fire(new vt.Event("gpu-timing-layer",{layerTimes:t}))},50));var h=this._sourcesDirty||this._styleDirty||this._placementDirty;return h||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new vt.Event("idle")),!this._loaded||this._fullyLoaded||h||(this._fullyLoaded=!0),this}},t.prototype.remove=function(){this._hash&&this._hash.remove();for(var t=0,e=this._controls;t<e.length;t+=1)e[t].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==vt.window&&(vt.window.removeEventListener("resize",this._onWindowResize,!1),vt.window.removeEventListener("online",this._onWindowOnline,!1));var i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),ta(this._canvasContainer),ta(this._controlContainer),ta(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new vt.Event("remove"))},t.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=vt.browser.frame(function(t){e._frame=null,e._render(t)}))},t.prototype._onWindowOnline=function(){this._update()},t.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},e.showTileBoundaries.get=function(){return!!this._showTileBoundaries},e.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},e.showPadding.get=function(){return!!this._showPadding},e.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},e.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},e.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&((this._showCollisionBoxes=t)?this.style._generateCollisionBoxes():this._update())},e.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},e.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},e.repaint.get=function(){return!!this._repaint},e.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},e.vertices.get=function(){return!!this._vertices},e.vertices.set=function(t){this._vertices=t,this._update()},t.prototype._setCacheLimits=function(t,e){vt.setCacheLimits(t,e)},e.version.get=function(){return vt.version},Object.defineProperties(t.prototype,e),t}(Go);function ta(t){t.parentNode&&t.parentNode.removeChild(t)}function ea(t){var e=this;this.options=vt.extend({},ia,t),this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(vt.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(t){return e._map.zoomIn({},{originalEvent:t})}),_.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(t){return e._map.zoomOut({},{originalEvent:t})}),_.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(vt.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(t){e.options.visualizePitch?e._map.resetNorthPitch({},{originalEvent:t}):e._map.resetNorth({},{originalEvent:t})}),this._compassIcon=_.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}var ia={showCompass:!0,showZoom:!0,visualizePitch:!1};ea.prototype._updateZoomButtons=function(){var t=this._map.getZoom();this._zoomInButton.disabled=t===this._map.getMaxZoom(),this._zoomOutButton.disabled=t===this._map.getMinZoom()},ea.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},ea.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ra(this._map,this._compass,this.options.visualizePitch)),this._container},ea.prototype.onRemove=function(){_.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ea.prototype._createButton=function(t,e){var i=_.create("button",t,this._container);return i.type="button",i.addEventListener("click",e),i},ea.prototype._setButtonTitle=function(t,e){var i=this._map._getUIString("NavigationControl."+e);t.title=i,t.setAttribute("aria-label",i)};var ra=function(t,e,i){void 0===i&&(i=!1),this._clickTolerance=10,this.element=e,this.mouseRotate=new ao({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,i&&(this.mousePitch=new so({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),vt.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),_.addEventListener(e,"mousedown",this.mousedown),_.addEventListener(e,"touchstart",this.touchstart,{passive:!1}),_.addEventListener(e,"touchmove",this.touchmove),_.addEventListener(e,"touchend",this.touchend),_.addEventListener(e,"touchcancel",this.reset)};function na(t,e,i){var r,n,o;for(t=new vt.LngLat(t.lng,t.lat),e&&(r=new vt.LngLat(t.lng-360,t.lat),n=new vt.LngLat(t.lng+360,t.lat),o=i.locationPoint(t).distSqr(e),i.locationPoint(r).distSqr(e)<o?t=r:i.locationPoint(n).distSqr(e)<o&&(t=n));180<Math.abs(t.lng-i.center.lng);){var a=i.locationPoint(t);if(0<=a.x&&0<=a.y&&a.x<=i.width&&a.y<=i.height)break;t.lng>i.center.lng?t.lng-=360:t.lng+=360}return t}ra.prototype.down=function(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),_.disableDrag()},ra.prototype.move=function(t,e){var i,r=this.map,n=this.mouseRotate.mousemoveWindow(t,e);n&&n.bearingDelta&&r.setBearing(r.getBearing()+n.bearingDelta),this.mousePitch&&(i=this.mousePitch.mousemoveWindow(t,e))&&i.pitchDelta&&r.setPitch(r.getPitch()+i.pitchDelta)},ra.prototype.off=function(){var t=this.element;_.removeEventListener(t,"mousedown",this.mousedown),_.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),_.removeEventListener(t,"touchmove",this.touchmove),_.removeEventListener(t,"touchend",this.touchend),_.removeEventListener(t,"touchcancel",this.reset),this.offTemp()},ra.prototype.offTemp=function(){_.enableDrag(),_.removeEventListener(vt.window,"mousemove",this.mousemove),_.removeEventListener(vt.window,"mouseup",this.mouseup)},ra.prototype.mousedown=function(t){this.down(vt.extend({},t,{ctrlKey:!0,preventDefault:function(){return t.preventDefault()}}),_.mousePos(this.element,t)),_.addEventListener(vt.window,"mousemove",this.mousemove),_.addEventListener(vt.window,"mouseup",this.mouseup)},ra.prototype.mousemove=function(t){this.move(t,_.mousePos(this.element,t))},ra.prototype.mouseup=function(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()},ra.prototype.touchstart=function(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=_.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return t.preventDefault()}},this._startPos))},ra.prototype.touchmove=function(t){1!==t.targetTouches.length?this.reset():(this._lastPos=_.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos))},ra.prototype.touchend=function(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},ra.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var oa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function aa(t,e,i){var r=t.classList;for(var n in oa)r.remove("mapboxgl-"+i+"-anchor-"+n);r.add("mapboxgl-"+i+"-anchor-"+e)}function sa(t){this.options=vt.extend({},ma,t),vt.bindAll(["_onMove","setUnit"],this)}var ua,la,ca,pa=((ca=vt.Evented)&&(va.__proto__=ca),((va.prototype=Object.create(ca&&ca.prototype)).constructor=va).prototype.addTo=function(t){return this.remove(),(this._map=t).getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},va.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),_.remove(this._element),this._popup&&this._popup.remove(),this},va.prototype.getLngLat=function(){return this._lngLat},va.prototype.setLngLat=function(t){return this._lngLat=vt.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},va.prototype.getElement=function(){return this._element},va.prototype.setPopup=function(t){var e;return this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t&&("offset"in t.options||(e=Math.sqrt(Math.pow(13.5,2)/2),t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset),this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)),this},va.prototype._onKeyPress=function(t){var e=t.code,i=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==i&&13!==i||this.togglePopup()},va.prototype._onMapClick=function(t){var e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()},va.prototype.getPopup=function(){return this._popup},va.prototype.togglePopup=function(){var t=this._popup;return t&&(t.isOpen()?t.remove():t.addTo(this._map)),this},va.prototype._update=function(t){var e,i;this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=na(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),e="","viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)"),i="","viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?i="rotateX(0deg)":"map"===this._pitchAlignment&&(i="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),_.setTransform(this._element,oa[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+i+" "+e))},va.prototype.getOffset=function(){return this._offset},va.prototype.setOffset=function(t){return this._offset=vt.Point.convert(t),this._update(),this},va.prototype._onMove=function(t){this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new vt.Event("dragstart"))),this.fire(new vt.Event("drag"))},va.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new vt.Event("dragend")),this._state="inactive"},va.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},va.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},va.prototype.isDraggable=function(){return this._draggable},va.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},va.prototype.getRotation=function(){return this._rotation},va.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},va.prototype.getRotationAlignment=function(){return this._rotationAlignment},va.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},va.prototype.getPitchAlignment=function(){return this._pitchAlignment},va),ha={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},da=0,fa=!1,ya=((la=vt.Evented)&&(ga.__proto__=la),((ga.prototype=Object.create(la&&la.prototype)).constructor=ga).prototype.onAdd=function(t){var e;return this._map=t,this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),e=this._setupUI,void 0!==ua?e(ua):void 0!==vt.window.navigator.permissions?vt.window.navigator.permissions.query({name:"geolocation"}).then(function(t){e(ua="denied"!==t.state)}):e(ua=!!vt.window.navigator.geolocation),this._container},ga.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(vt.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),_.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,da=0,fa=!1},ga.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),i=t.coords;return e&&(i.longitude<e.getWest()||i.longitude>e.getEast()||i.latitude<e.getSouth()||i.latitude>e.getNorth())},ga.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},ga.prototype._onSuccess=function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new vt.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new vt.Event("geolocate",t)),this._finish()}},ga.prototype._updateCamera=function(t){var e=new vt.LngLat(t.coords.longitude,t.coords.latitude),i=t.coords.accuracy,r=this._map.getBearing(),n=vt.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(e.toBounds(i),n,{geolocateSource:!0})},ga.prototype._updateMarker=function(t){var e;t?(e=new vt.LngLat(t.coords.longitude,t.coords.latitude),this._accuracyCircleMarker.setLngLat(e).addTo(this._map),this._userLocationDotMarker.setLngLat(e).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()):(this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove())},ga.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),i=this._map.unproject([1,t]),r=e.distanceTo(i),n=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=n+"px",this._circleElement.style.height=n+"px"},ga.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},ga.prototype._onError=function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&fa)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new vt.Event("error",t)),this._finish()}},ga.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},ga.prototype._setupUI=function(t){var e,i,r=this;this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=_.create("button","mapboxgl-ctrl-geolocate",this._container),_.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),!(this._geolocateButton.type="button")===t?(vt.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled."),e=this._map._getUIString("GeolocateControl.LocationNotAvailable"),this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)):(i=this._map._getUIString("GeolocateControl.FindMyLocation"),this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=_.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new pa(this._dotElement),this._circleElement=_.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(t){t.geolocateSource||"ACTIVE_LOCK"!==r._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(r._watchState="BACKGROUND",r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),r.fire(new vt.Event("trackuserlocationend")))})},ga.prototype.trigger=function(){if(!this._setup)return vt.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new vt.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":da--,fa=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new vt.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new vt.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}var t;"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),fa=1<++da?(t={maximumAge:6e5,timeout:0},!0):(t=this.options.positionOptions,!1),this._geolocationWatchID=vt.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t))}else vt.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},ga.prototype._clearWatch=function(){vt.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},ga),ma={maxWidth:100,unit:"metric"};function ga(t){la.call(this),this.options=vt.extend({},ha,t),vt.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}function va(t,e){var i=this;if(ca.call(this),(t instanceof vt.window.HTMLElement||e)&&(t=vt.extend({element:t},e)),vt.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:this._rotationAlignment,t&&t.element)this._element=t.element,this._offset=vt.Point.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=_.create("div"),this._element.setAttribute("aria-label","Map marker");var r=_.createNS("http://www.w3.org/2000/svg","svg");r.setAttributeNS(null,"display","block"),r.setAttributeNS(null,"height","41px"),r.setAttributeNS(null,"width","27px"),r.setAttributeNS(null,"viewBox","0 0 27 41");var n=_.createNS("http://www.w3.org/2000/svg","g");n.setAttributeNS(null,"stroke","none"),n.setAttributeNS(null,"stroke-width","1"),n.setAttributeNS(null,"fill","none"),n.setAttributeNS(null,"fill-rule","evenodd");var o=_.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"fill-rule","nonzero");var a=_.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"transform","translate(3.0, 29.0)"),a.setAttributeNS(null,"fill","#000000");for(var s=0,u=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];s<u.length;s+=1){var l=u[s],c=_.createNS("http://www.w3.org/2000/svg","ellipse");c.setAttributeNS(null,"opacity","0.04"),c.setAttributeNS(null,"cx","10.5"),c.setAttributeNS(null,"cy","5.80029008"),c.setAttributeNS(null,"rx",l.rx),c.setAttributeNS(null,"ry",l.ry),a.appendChild(c)}var p=_.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"fill",this._color);var h=_.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),p.appendChild(h);var d=_.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");var f=_.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(f);var y=_.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),y.setAttributeNS(null,"fill","#FFFFFF");var m=_.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");var g=_.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");var v=_.createNS("http://www.w3.org/2000/svg","circle");v.setAttributeNS(null,"fill","#FFFFFF"),v.setAttributeNS(null,"cx","5.5"),v.setAttributeNS(null,"cy","5.5"),v.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(v),o.appendChild(a),o.appendChild(p),o.appendChild(d),o.appendChild(y),o.appendChild(m),r.appendChild(o),r.setAttributeNS(null,"height",41*this._scale+"px"),r.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(r),this._offset=vt.Point.convert(t&&t.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(t){t.preventDefault()}),this._element.addEventListener("mousedown",function(t){t.preventDefault()}),this._element.addEventListener("focus",function(){var t=i._map.getContainer();t.scrollTop=0,t.scrollLeft=0}),aa(this._element,this._anchor,"marker"),this._popup=null}function _a(t,e,i){var r,n=i&&i.maxWidth||100,o=t._container.clientHeight/2,a=t.unproject([0,o]),s=t.unproject([n,o]),u=a.distanceTo(s);i&&"imperial"===i.unit?5280<(r=3.2808*u)?xa(e,n,r/5280,t._getUIString("ScaleControl.Miles")):xa(e,n,r,t._getUIString("ScaleControl.Feet")):i&&"nautical"===i.unit?xa(e,n,u/1852,t._getUIString("ScaleControl.NauticalMiles")):1e3<=u?xa(e,n,u/1e3,t._getUIString("ScaleControl.Kilometers")):xa(e,n,u,t._getUIString("ScaleControl.Meters"))}function xa(t,e,i,r){var n,o,a,s,u,l=(n=i,(o=Math.pow(10,(""+Math.floor(n)).length-1))*(a=10<=(a=n/o)?10:5<=a?5:3<=a?3:2<=a?2:1<=a?1:(s=a,u=Math.pow(10,Math.ceil(-Math.log(s)/Math.LN10)),Math.round(s*u)/u)));t.style.width=e*(l/i)+"px",t.innerHTML=l+"&nbsp;"+r}sa.prototype.getDefaultPosition=function(){return"bottom-left"},sa.prototype._onMove=function(){_a(this._map,this._container,this.options)},sa.prototype.onAdd=function(t){return this._map=t,this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},sa.prototype.onRemove=function(){_.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},sa.prototype.setUnit=function(t){this.options.unit=t,_a(this._map,this._container,this.options)};function ba(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof vt.window.HTMLElement?this._container=t.container:vt.warnOnce("Full screen control 'container' must be a DOM element.")),vt.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in vt.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in vt.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in vt.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in vt.window.document&&(this._fullscreenchange="MSFullscreenChange")}ba.prototype.onAdd=function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",vt.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},ba.prototype.onRemove=function(){_.remove(this._controlContainer),this._map=null,vt.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ba.prototype._checkFullscreenSupport=function(){return!!(vt.window.document.fullscreenEnabled||vt.window.document.mozFullScreenEnabled||vt.window.document.msFullscreenEnabled||vt.window.document.webkitFullscreenEnabled)},ba.prototype._setupUI=function(){var t=this._fullscreenButton=_.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);_.create("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden",!0),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),vt.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},ba.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},ba.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},ba.prototype._isFullscreen=function(){return this._fullscreen},ba.prototype._changeIcon=function(){(vt.window.document.fullscreenElement||vt.window.document.mozFullScreenElement||vt.window.document.webkitFullscreenElement||vt.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},ba.prototype._onClickFullscreen=function(){this._isFullscreen()?vt.window.document.exitFullscreen?vt.window.document.exitFullscreen():vt.window.document.mozCancelFullScreen?vt.window.document.mozCancelFullScreen():vt.window.document.msExitFullscreen?vt.window.document.msExitFullscreen():vt.window.document.webkitCancelFullScreen&&vt.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Ma,wa={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Ia=((Ma=vt.Evented)&&(La.__proto__=Ma),((La.prototype=Object.create(Ma&&Ma.prototype)).constructor=La).prototype.addTo=function(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new vt.Event("open")),this},La.prototype.isOpen=function(){return!!this._map},La.prototype.remove=function(){return this._content&&_.remove(this._content),this._container&&(_.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new vt.Event("close")),this},La.prototype.getLngLat=function(){return this._lngLat},La.prototype.setLngLat=function(t){return this._lngLat=vt.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},La.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},La.prototype.getElement=function(){return this._container},La.prototype.setText=function(t){return this.setDOMContent(vt.window.document.createTextNode(t))},La.prototype.setHTML=function(t){var e,i=vt.window.document.createDocumentFragment(),r=vt.window.document.createElement("body");for(r.innerHTML=t;e=r.firstChild;)i.appendChild(e);return this.setDOMContent(i)},La.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},La.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},La.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},La.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},La.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},La.prototype.toggleClassName=function(t){if(this._container)return this._container.classList.toggle(t)},La.prototype._createContent=function(){this._content&&_.remove(this._content),this._content=_.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=_.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},La.prototype._onMouseUp=function(t){this._update(t.point)},La.prototype._onMouseMove=function(t){this._update(t.point)},La.prototype._onDrag=function(t){this._update(t.point)},La.prototype._update=function(t){var e,i,r,n,o,a,s,u=this;this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=_.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=_.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return u._container.classList.add(t)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=na(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||t)&&(e=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat),i=this.options.anchor,r=function t(e){if(e){if("number"==typeof e){var i=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new vt.Point(0,0),top:new vt.Point(0,e),"top-left":new vt.Point(i,i),"top-right":new vt.Point(-i,i),bottom:new vt.Point(0,-e),"bottom-left":new vt.Point(i,-i),"bottom-right":new vt.Point(-i,-i),left:new vt.Point(e,0),right:new vt.Point(-e,0)}}if(e instanceof vt.Point||Array.isArray(e)){var r=vt.Point.convert(e);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:vt.Point.convert(e.center||[0,0]),top:vt.Point.convert(e.top||[0,0]),"top-left":vt.Point.convert(e["top-left"]||[0,0]),"top-right":vt.Point.convert(e["top-right"]||[0,0]),bottom:vt.Point.convert(e.bottom||[0,0]),"bottom-left":vt.Point.convert(e["bottom-left"]||[0,0]),"bottom-right":vt.Point.convert(e["bottom-right"]||[0,0]),left:vt.Point.convert(e.left||[0,0]),right:vt.Point.convert(e.right||[0,0])}}return t(new vt.Point(0,0))}(this.options.offset),i||(n=this._container.offsetWidth,o=this._container.offsetHeight,a=e.y+r.bottom.y<o?["top"]:e.y>this._map.transform.height-o?["bottom"]:[],e.x<n/2?a.push("left"):e.x>this._map.transform.width-n/2&&a.push("right"),i=0===a.length?"bottom":a.join("-")),s=e.add(r[i]).round(),_.setTransform(this._container,oa[i]+" translate("+s.x+"px,"+s.y+"px)"),aa(this._container,i,"popup"))},La.prototype._onClose=function(){this.remove()},La),Ta={version:vt.version,supported:i,setRTLTextPlugin:vt.setRTLTextPlugin,getRTLTextPluginStatus:vt.getRTLTextPluginStatus,Map:$o,NavigationControl:ea,GeolocateControl:ya,AttributionControl:Zo,ScaleControl:sa,FullscreenControl:ba,Popup:Ia,Marker:pa,Style:gr,LngLat:vt.LngLat,LngLatBounds:vt.LngLatBounds,Point:vt.Point,MercatorCoordinate:vt.MercatorCoordinate,Evented:vt.Evented,config:vt.config,prewarm:function(){mi().acquire(hi)},clearPrewarmedResources:function(){var t=fi;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(hi),fi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return vt.config.ACCESS_TOKEN},set accessToken(t){vt.config.ACCESS_TOKEN=t},get baseApiUrl(){return vt.config.API_URL},set baseApiUrl(t){vt.config.API_URL=t},get workerCount(){return di.workerCount},set workerCount(t){di.workerCount=t},get maxParallelImageRequests(){return vt.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){vt.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){vt.clearTileCache(t)},workerUrl:""};function La(t){Ma.call(this),this.options=vt.extend(Object.create(wa),t),vt.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return Ta}),a}()},function(t,e,i){"use strict";var s=i(8),u=i(37),l=i(20),c=i(38),p=i(39);(t.exports=function(t,e){var i,r,n,o,a;return arguments.length<2||"string"!=typeof t?(o=e,e=t,t=null):o=arguments[2],s(t)?(i=p.call(t,"c"),r=p.call(t,"e"),n=p.call(t,"w")):(i=n=!0,r=!1),a={value:e,configurable:i,enumerable:r,writable:n},o?l(c(o),a):a}).gs=function(t,e,i){var r,n,o,a;return"string"!=typeof t?(o=i,i=e,e=t,t=null):o=arguments[3],s(e)?u(e)?s(i)?u(i)||(o=i,i=void 0):i=void 0:(o=e,e=i=void 0):e=void 0,n=s(t)?(r=p.call(t,"c"),p.call(t,"e")):!(r=!0),a={get:e,set:i,configurable:r,enumerable:n},o?l(c(o),a):a}},function(t,e,i){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t){return null===t?"null":void 0===t?"undefined":"object"===r(t)?Array.isArray(t)?"array":"object":r(t)}function n(t){return"object"===g(t)?_(t):"array"===g(t)?v(t):t}function v(t){return t.map(n)}function _(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=n(t[i]));return e}function x(t,e,i){for(var r=1<arguments.length&&void 0!==e?e:[],n={arrayBehaviour:(2<arguments.length&&void 0!==i?i:{}).arrayBehaviour||"replace"},o=r.map(function(t){return t||{}}),a=t||{},s=0;s<o.length;s++)for(var u=o[s],l=Object.keys(u),c=0;c<l.length;c++){var p,h,d=l[c],f=u[d],y=g(f),m=g(a[d]);"object"===y?"undefined"!==m?(p="object"===m?a[d]:{},a[d]=x({},[p,_(f)],n)):a[d]=_(f):"array"===y?"array"===m?(h=v(f),a[d]="merge"===n.arrayBehaviour?a[d].concat(h):h):a[d]=v(f):a[d]=f}return a}t.exports=function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return x(t,i)},t.exports.noMutate=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return x({},e)},t.exports.withOptions=function(t,e,i){return x(t,e,i)}},function(t,e,i){"use strict";var r=i(7);t.exports=function(t){if(!r(t))throw new TypeError("Cannot use null or undefined");return t}},function(t,e,i){"use strict";t.exports=i(121)()?i(12).Symbol:i(124)},function(t,e,i){"use strict";t.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},function(t,e,i){"use strict";var r=i(100)();t.exports=function(t){return t!==r&&null!==t}},function(t,e,i){"use strict";t.exports=function(t){return null!=t}},function(t,o,e){"use strict";function s(t,e,i){void 0===i&&(i={});var r={type:"Feature"};return 0!==i.id&&!i.id||(r.id=i.id),i.bbox&&(r.bbox=i.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,i){return void 0===i&&(i={}),s({type:"Point",coordinates:t},e,i)}function n(t,e,i){void 0===i&&(i={});for(var r=0,n=t;r<n.length;r++){var o=n[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return s({type:"Polygon",coordinates:t},e,i)}function a(t,e,i){if(void 0===i&&(i={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return s({type:"LineString",coordinates:t},e,i)}function u(t,e){void 0===e&&(e={});var i={type:"FeatureCollection"};return e.id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=t,i}function l(t,e,i){return void 0===i&&(i={}),s({type:"MultiLineString",coordinates:t},e,i)}function c(t,e,i){return void 0===i&&(i={}),s({type:"MultiPoint",coordinates:t},e,i)}function p(t,e,i){return void 0===i&&(i={}),s({type:"MultiPolygon",coordinates:t},e,i)}function h(t,e){void 0===e&&(e="kilometers");var i=o.factors[e];if(!i)throw new Error(e+" units is invalid");return t*i}function d(t,e){void 0===e&&(e="kilometers");var i=o.factors[e];if(!i)throw new Error(e+" units is invalid");return t/i}function i(t){return 180*(t%(2*Math.PI))/Math.PI}function f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(o,"__esModule",{value:!0}),o.earthRadius=6371008.8,o.factors={centimeters:100*o.earthRadius,centimetres:100*o.earthRadius,degrees:o.earthRadius/111325,feet:3.28084*o.earthRadius,inches:39.37*o.earthRadius,kilometers:o.earthRadius/1e3,kilometres:o.earthRadius/1e3,meters:o.earthRadius,metres:o.earthRadius,miles:o.earthRadius/1609.344,millimeters:1e3*o.earthRadius,millimetres:1e3*o.earthRadius,nauticalmiles:o.earthRadius/1852,radians:1,yards:o.earthRadius/1.0936},o.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/o.earthRadius,yards:1/1.0936},o.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},o.feature=s,o.geometry=function(t,e,i){switch(void 0===i&&(i={}),t){case"Point":return r(e).geometry;case"LineString":return a(e).geometry;case"Polygon":return n(e).geometry;case"MultiPoint":return c(e).geometry;case"MultiLineString":return l(e).geometry;case"MultiPolygon":return p(e).geometry;default:throw new Error(t+" is invalid")}},o.point=r,o.points=function(t,e,i){return void 0===i&&(i={}),u(t.map(function(t){return r(t,e)}),i)},o.polygon=n,o.polygons=function(t,e,i){return void 0===i&&(i={}),u(t.map(function(t){return n(t,e)}),i)},o.lineString=a,o.lineStrings=function(t,e,i){return void 0===i&&(i={}),u(t.map(function(t){return a(t,e)}),i)},o.featureCollection=u,o.multiLineString=l,o.multiPoint=c,o.multiPolygon=p,o.geometryCollection=function(t,e,i){return void 0===i&&(i={}),s({type:"GeometryCollection",geometries:t},e,i)},o.round=function(t,e){if(void 0===e&&(e=0),e&&!(0<=e))throw new Error("precision must be a positive number");var i=Math.pow(10,e||0);return Math.round(t*i)/i},o.radiansToLength=h,o.lengthToRadians=d,o.lengthToDegrees=function(t,e){return i(d(t,e))},o.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},o.radiansToDegrees=i,o.degreesToRadians=function(t){return t%360*Math.PI/180},o.convertLength=function(t,e,i){if(void 0===e&&(e="kilometers"),void 0===i&&(i="kilometers"),!(0<=t))throw new Error("length must be a positive number");return h(d(t,e),i)},o.convertArea=function(t,e,i){if(void 0===e&&(e="meters"),void 0===i&&(i="kilometers"),!(0<=t))throw new Error("area must be a positive number");var r=o.areaFactors[e];if(!r)throw new Error("invalid original units");var n=o.areaFactors[i];if(!n)throw new Error("invalid final units");return t/r*n},o.isNumber=f,o.isObject=function(t){return!!t&&t.constructor===Object},o.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!f(t))throw new Error("bbox must only contain numbers")})},o.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},o.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},o.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},o.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},o.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},o.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},o.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},o.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(t){t.exports=JSON.parse('{"sources":{"mm-tiles":{"type":"vector","tiles":["{mmTileBaseUrl}/{zLevel}/{z}/{x}/{y}.mvt"],"minzoom":10,"maxzoom":20}},"layers":[{"id":"mm-building-fill","type":"fill","source":"mm-tiles","source-layer":"buildings","layout":{},"paint":{"fill-color":"#dad4ca","fill-opacity":1}},{"id":"mm-floor-outline","source":"mm-tiles","source-layer":"outlines","type":"fill","minzoom":16,"paint":{"fill-color":"#e6e9ec","fill-outline-color":"#14304f","fill-opacity":{"base":1,"stops":[[16,0.1],[18,1]]}}},{"id":"mm-rooms","source":"mm-tiles","source-layer":"rooms","type":"fill","minzoom":16,"paint":{"fill-color":"#FBFAFA","fill-opacity":{"base":1,"stops":[[16,0.1],[17,0.1],[18,0.9],[19,1]]},"fill-antialias":true}},{"id":"mm-stairs-fill","source":"mm-tiles","source-layer":"stairs","type":"fill","minzoom":16,"paint":{"fill-color":"#F2F8EC","fill-opacity":1},"filter":["==","$type","Polygon"]},{"id":"mm-elevators-fill","source":"mm-tiles","source-layer":"elevators","type":"fill","minzoom":16,"paint":{"fill-color":"#DFF8EB","fill-opacity":1},"filter":["==","$type","Polygon"]},{"id":"mm-rooms-fill","source":"mm-tiles","source-layer":"markers","type":"fill","minzoom":16,"filter":["has","color"],"paint":{"fill-color":{"type":"identity","property":"color"},"fill-opacity":{"base":1,"stops":[[16,0],[17,0.1],[18,0.9],[19,1]]},"fill-antialias":true}},{"id":"mm-areas-fill","source":"mm-tiles","source-layer":"area-fill","type":"fill","minzoom":16,"paint":{"fill-color":["case",["has","color"],["get","color"],"rgba(0, 0, 0, 0)"],"fill-outline-color":["case",["has","outline"],["get","outline"],["get","color"]],"fill-opacity":{"base":1,"stops":[[16,0],[17,0.1],[18,0.9],[19,1]]},"fill-antialias":true}},{"id":"mm-rooms-outline","source":"mm-tiles","source-layer":"rooms","type":"line","minzoom":16,"paint":{"line-opacity":{"base":1,"stops":[[16,0.1],[17,0.1],[18,0.25],[22,0.8]]},"line-color":"#000","line-width":0.5}},{"id":"mm-stairs","source":"mm-tiles","source-layer":"stairs","type":"line","minzoom":16,"paint":{"line-opacity":{"base":1,"stops":[[18,0],[21,0.18]]},"line-width":1,"line-color":"#000"}},{"id":"mm-inventory","source":"mm-tiles","source-layer":"inventory","type":"line","minzoom":16,"paint":{"line-opacity":{"base":1,"stops":[[18,0],[21,0.18]]},"line-width":1,"line-color":"#000"}},{"id":"mm-doors","source":"mm-tiles","source-layer":"doors","type":"line","minzoom":16,"paint":{"line-opacity":{"base":1,"stops":[[18,0],[21,0.18]]},"line-width":1,"line-color":"#000"}},{"id":"mm-poi-label","source":"mm-tiles","source-layer":"markers","type":"symbol","minzoom":16,"layout":{"icon-image":"{icon}","icon-offset":["case",["has","text"],["literal",[0,-8]],["literal",[0,0]]],"text-field":"{text}","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-padding":7,"text-offset":["case",["has","icon"],["literal",[0,0.7]],["literal",[0,0.1]]],"text-size":{"base":1,"stops":[[17,10],[20,16],[20.9,22]]},"text-anchor":"top","symbol-avoid-edges":false},"paint":{"text-opacity":{"base":1,"stops":[[16,0],[17,1]]},"text-color":"#514D48","text-halo-color":"#fff","text-halo-width":{"base":1,"stops":[[16,1],[18.7,2],[20.9,3.2]]}}},{"id":"mm-building-label","type":"symbol","source":"mm-tiles","source-layer":"buildings","minzoom":14,"layout":{"text-field":"{text}","text-allow-overlap":false,"symbol-avoid-edges":false,"text-size":{"base":1,"stops":[[13,10],[16,12],[17,14],[20,20]]},"text-font":{"base":1,"stops":[[10,["Open Sans Regular"]],[17,["Open Sans Bold"]]]},"text-letter-spacing":0.05,"text-padding":10.75},"paint":{"text-color":"#000","text-halo-color":"#fff","text-halo-width":2}}]}')},function(t,e,i){"use strict";t.exports=i(35)()?Object.setPrototypeOf:i(36)},function(t,e,i){"use strict";t.exports=i(122)()?globalThis:i(123)},function(t,e,i){"use strict";var r=Object.prototype.toString,n=r.call(function(){return arguments}());t.exports=function(t){return r.call(t)===n}},function(t,e,i){"use strict";var r=Object.prototype.toString,n=r.call("");t.exports=function(t){return"string"==typeof t||t&&"object"==typeof t&&(t instanceof String||r.call(t)===n)||!1}},function(t){t.exports=JSON.parse('{"a":"2.0.35"}')},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNLTYtMWgyNHYyNEgtNnoiLz48cGF0aCBkPSJNOCAzLjZjMSAwIDEuOC0uOCAxLjgtMS44UzkgMCA4IDAgNi4yLjggNi4yIDEuOCA3IDMuNiA4IDMuNnptLjEgNi4ySDEzVjhIOS40bC0yLTMuM2MtLjMtLjUtLjktLjktMS41LS45LS4yIDAtLjMgMC0uNS4xTDAgNS42djUuMmgxLjhWNy4xbDIuMS0uN0wwIDIxLjhoMS44bDIuOS04LjFMNyAxNi44djVoMS44di02LjRsLTIuNS00LjVMNyA4bDEuMSAxLjh6IiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNLTYtMWgyNHYyNEgtNnoiLz48cGF0aCBkPSJNOCAzLjZjMSAwIDEuOC0uOCAxLjgtMS44UzkgMCA4IDAgNi4yLjggNi4yIDEuOCA3IDMuNiA4IDMuNnptLjEgNi4ySDEzVjhIOS40bC0yLTMuM2MtLjMtLjUtLjktLjktMS41LS45LS4yIDAtLjMgMC0uNS4xTDAgNS42djUuMmgxLjhWNy4xbDIuMS0uN0wwIDIxLjhoMS44bDIuOS04LjFMNyAxNi44djVoMS44di02LjRsLTIuNS00LjVMNyA4bDEuMSAxLjh6IiBmaWxsPSIjMDAwIi8+PC9nPjwvc3ZnPg=="},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(9);e.getCoord=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&2<=t.length&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(1<e.length&&r.isNumber(e[0])&&r.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,i){if(!e||!i)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,i){if(!t)throw new Error("No feature passed");if(!i)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,i){if(!t)throw new Error("No featureCollection passed");if(!i)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+i+", FeatureCollection required");for(var r=0,n=t.features;r<n.length;r++){var o=n[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+o.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},function(t,e,i){"use strict";var r=i(8),n={object:!0,function:!0,undefined:!0};t.exports=function(t){return!!r(t)&&hasOwnProperty.call(n,typeof t)}},function(t,e,i){"use strict";t.exports=i(113)()?Object.assign:i(114)},function(t,e,i){"use strict";var r,n=i(33),o=i(20),a=i(6),s=i(4),u=i(2),l=i(133),c=i(5),p=Object.defineProperty,h=Object.defineProperties;t.exports=r=function(t,e){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");h(this,{__list__:u("w",s(t)),__context__:u("w",e),__nextIndex__:u("w",0)}),e&&(a(e.on),e.on("_add",this._onAdd),e.on("_delete",this._onDelete),e.on("_clear",this._onClear))},delete r.prototype.constructor,h(r.prototype,o({_next:u(function(){var t;if(this.__list__)return this.__redo__&&void 0!==(t=this.__redo__.shift())?t:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:u(function(){return this._createResult(this._next())}),_createResult:u(function(t){return void 0===t?{done:!0,value:void 0}:{done:!1,value:this._resolve(t)}}),_resolve:u(function(t){return this.__list__[t]}),_unBind:u(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:u(function(){return"[object "+(this[c.toStringTag]||"Object")+"]"})},l({_onAdd:u(function(i){i>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(t,e){i<=t&&(this.__redo__[e]=++t)},this),this.__redo__.push(i)):p(this,"__redo__",u("c",[i])))}),_onDelete:u(function(i){var t;i>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(t=this.__redo__.indexOf(i))&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,e){i<t&&(this.__redo__[e]=--t)},this)))}),_onClear:u(function(){this.__redo__&&n.call(this.__redo__),this.__nextIndex__=0})}))),p(r.prototype,c.iterator,u(function(){return this}))},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjkiIGhlaWdodD0iMjkiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNMTQuNSAyOEMyMS45NTYgMjggMjggMjEuOTU2IDI4IDE0LjVTMjEuOTU2IDEgMTQuNSAxIDEgNy4wNDQgMSAxNC41IDcuMDQ0IDI4IDE0LjUgMjh6IiBmaWxsPSIjRkZGIi8+PHBhdGggZD0iTTE0LjUgMjguNjcxQzYuNjczIDI4LjY3MS4zMjkgMjIuMzI3LjMyOSAxNC41LjMyOSA2LjY3MyA2LjY3My4zMjkgMTQuNS4zMjljNy44MjcgMCAxNC4xNzEgNi4zNDQgMTQuMTcxIDE0LjE3MSAwIDcuODI3LTYuMzQ0IDE0LjE3MS0xNC4xNzEgMTQuMTcxeiIgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJub256ZXJvIi8+PGcgZmlsbD0iIzFEQTcxRCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNNy41MSAxMC41MTFoMi4yNThWNi4zMTdoMTEuMjkzVjIyLjQ1SDkuNzY4VjE4LjQ3SDcuNTF2NS45MTVoMTUuNTk0VjQuMzgxSDcuNTF6Ii8+PHBhdGggZD0iTTE1LjI1MyAxNy43MTdoLTIuNzk2bDEuOTM2LTIuMzY2SDYuMTEydi0xLjYxM2g4LjI4bC0xLjkzNS0yLjM2NmgyLjc5NmwyLjY4OSAzLjExOXoiLz48L2c+PC9nPjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNLTMtNGgyNHYyNEgtM3oiLz48cGF0aCBkPSJNMTUuOSAxYy0uMi0uNi0uOC0xLTEuNC0xaC0xMWMtLjcgMC0xLjIuNC0xLjQgMUwwIDd2OGMwIC42LjQgMSAxIDFoMWMuNiAwIDEtLjQgMS0xdi0xaDEydjFjMCAuNi40IDEgMSAxaDFjLjYgMCAxLS40IDEtMVY3bC0yLjEtNnpNMy41IDExQzIuNyAxMSAyIDEwLjMgMiA5LjVTMi43IDggMy41IDggNSA4LjcgNSA5LjUgNC4zIDExIDMuNSAxMXptMTEgMGMtLjggMC0xLjUtLjctMS41LTEuNVMxMy43IDggMTQuNSA4czEuNS43IDEuNSAxLjUtLjcgMS41LTEuNSAxLjV6TTIgNmwxLjUtNC41aDExTDE2IDZIMnoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNLTMtNGgyNHYyNEgtM3oiLz48cGF0aCBkPSJNMTUuOSAxYy0uMi0uNi0uOC0xLTEuNC0xaC0xMWMtLjcgMC0xLjIuNC0xLjQgMUwwIDd2OGMwIC42LjQgMSAxIDFoMWMuNiAwIDEtLjQgMS0xdi0xaDEydjFjMCAuNi40IDEgMSAxaDFjLjYgMCAxLS40IDEtMVY3bC0yLjEtNnpNMy41IDExQzIuNyAxMSAyIDEwLjMgMiA5LjVTMi43IDggMy41IDggNSA4LjcgNSA5LjUgNC4zIDExIDMuNSAxMXptMTEgMGMtLjggMC0xLjUtLjctMS41LTEuNVMxMy43IDggMTQuNSA4czEuNS43IDEuNSAxLjUtLjcgMS41LTEuNSAxLjV6TTIgNmwxLjUtNC41aDExTDE2IDZIMnoiIGZpbGw9IiMwMDAiLz48L2c+PC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjIycHgiIGhlaWdodD0iMjJweCIgdmlld0JveD0iMCAwIDIyIDIyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0MC4zICgzMzgzOSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+ZGotbW0tdGFyZ2V0LWdyZXk8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iSW50ZXJmYWNlLWljb25zIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iZGotbW0tdGFyZ2V0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtOS4wMDAwMDAsIC05LjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iZGotbW0tdGFyZ2V0LWdyZXkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDguMDAwMDAwLCA4LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9Im1hc2siIHBvaW50cz0iMCAwIDI0IDAgMjQgMjQgMCAyNCI+PC9wb2x5Z29uPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTEyLDggQzkuOCw4IDgsOS44IDgsMTIgQzgsMTQuMiA5LjgsMTYgMTIsMTYgQzE0LjIsMTYgMTYsMTQuMiAxNiwxMiBDMTYsOS44IDE0LjIsOCAxMiw4IEwxMiw4IFogTTIwLjksMTEgQzIwLjQsNi44IDE3LjEsMy41IDEzLDMuMSBMMTMsMSBMMTEsMSBMMTEsMy4xIEM2LjgsMy41IDMuNSw2LjggMy4xLDExIEwxLDExIEwxLDEzIEwzLjEsMTMgQzMuNiwxNy4yIDYuOSwyMC41IDExLDIwLjkgTDExLDIzIEwxMywyMyBMMTMsMjAuOSBDMTcuMiwyMC40IDIwLjUsMTcuMSAyMC45LDEzIEwyMywxMyBMMjMsMTEgTDIwLjksMTEgTDIwLjksMTEgWiBNMTIsMTkgQzguMSwxOSA1LDE1LjkgNSwxMiBDNSw4LjEgOC4xLDUgMTIsNSBDMTUuOSw1IDE5LDguMSAxOSwxMiBDMTksMTUuOSAxNS45LDE5IDEyLDE5IEwxMiwxOSBaIiBpZD0idGFyZ2V0IiBmaWxsPSIjQTBBMEEwIj48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},function(t,e){var i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";function o(t,e,i,r){var n;e in t&&("function"!=typeof(n=r)||"[object Function]"!==u.call(n)||!r())||(p?c(t,e,{configurable:!0,enumerable:!1,value:i,writable:!0}):t[e]=i)}function r(t,e){var i=2<arguments.length?arguments[2]:{},r=a(e);s&&(r=l.call(r,Object.getOwnPropertySymbols(e)));for(var n=0;n<r.length;n+=1)o(t,r[n],e[r[n]],i[r[n]])}var a=i(28),s="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),u=Object.prototype.toString,l=Array.prototype.concat,c=Object.defineProperty,p=c&&function(){var t={};try{for(var e in c(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}();r.supportsDescriptors=!!p,t.exports=r},function(t,e,i){"use strict";var r=Array.prototype.slice,n=i(29),o=Object.keys,a=o?function(t){return o(t)}:i(90),s=Object.keys;a.shim=function(){return Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return n(t)?s(r.call(t)):s(t)}):Object.keys=a,Object.keys||a},t.exports=a},function(t,e,i){"use strict";var r=Object.prototype.toString;t.exports=function(t){var e=r.call(t);return"[object Arguments]"===e||"[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&0<=t.length&&"[object Function]"===r.call(t.callee)}},function(t,e,i){"use strict";var p=i(28),r=i(91),h=i(93)(),d=Object,f=r.call(Function.call,Array.prototype.push),y=r.call(Function.call,Object.prototype.propertyIsEnumerable),m=h?Object.getOwnPropertySymbols:null;t.exports=function(t,e){if(null==t)throw new TypeError("target must be an object");for(var i,r,n,o,a,s,u=d(t),l=1;l<arguments.length;++l){i=d(arguments[l]),n=p(i);var c=h&&(Object.getOwnPropertySymbols||m);if(c)for(o=c(i),r=0;r<o.length;++r)s=o[r],y(i,s)&&f(n,s);for(r=0;r<n.length;++r)a=i[s=n[r]],y(i,s)&&(u[s]=a)}return u}},function(t,e,i){"use strict";var r=i(30);t.exports=function(){return!Object.assign||function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),i={},r=0;r<e.length;++r)i[e[r]]=e[r];var n=Object.assign({},i),o="";for(var a in n)o+=a;return t!==o}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}return!1}()?r:Object.assign}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(18),s=i(95),n=i(96),o=i(97),u=i(9);function l(t,e){return t[0]*e[0]+t[1]*e[1]}function c(t,e,i){return"planar"===i.method?o.default(t,e,i):n.default(t,e,i)}e.default=function(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=u.point(t):"Point"===t.type?t=u.feature(t):r.featureOf(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=u.lineString(e):"LineString"===e.type?e=u.feature(e):r.featureOf(e,"LineString","line");var o=1/0,a=t.geometry.coordinates;return s.segmentEach(e,function(t){var e=t.geometry.coordinates[0],i=t.geometry.coordinates[1],r=function(t,e,i,r){var n=[i[0]-e[0],i[1]-e[1]],o=l([t[0]-e[0],t[1]-e[1]],n);if(o<=0)return c(t,e,{method:r.method,units:"degrees"});var a=l(n,n);if(a<=o)return c(t,i,{method:r.method,units:"degrees"});var s=o/a,u=[e[0]+s*n[0],e[1]+s*n[1]];return c(t,u,{method:r.method,units:"degrees"})}(a,e,i,n);r<o&&(o=r)}),u.convertLength(o,"degrees",n.units)}},function(t,e,i){"use strict";var r=i(4);t.exports=function(){return r(this).length=0,this}},function(t,e,i){"use strict";var r=i(105),n=Math.max;t.exports=function(t){return n(0,r(t))}},function(t,e,i){"use strict";var r=Object.create,n=Object.getPrototypeOf,o={};t.exports=function(){var t=Object.setPrototypeOf;return"function"==typeof t&&n(t((arguments[0]||r)(null),o))===o}},function(t,e,i){"use strict";function n(t,e){if(u(t),null===e||s(e))return t;throw new TypeError("Prototype must be null or an object")}var r,o,a,s=i(109),u=i(4),l=Object.prototype.isPrototypeOf,c=Object.defineProperty,p={configurable:!0,enumerable:!1,writable:!0,value:void 0};t.exports=(r=function(){var t,e=Object.create(null),i={},r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(r){try{(t=r.set).call(e,i)}catch(t){}if(Object.getPrototypeOf(e)===i)return{set:t,level:2}}return e.__proto__=i,Object.getPrototypeOf(e)===i?{level:2}:((e={}).__proto__=i,Object.getPrototypeOf(e)===i&&{level:1})}())?(o=2===r.level?r.set?(a=r.set,function(t,e){return a.call(n(t,e),e),t}):function(t,e){return n(t,e).__proto__=e,t}:function t(e,i){var r;return n(e,i),(r=l.call(t.nullPolyfill,e))&&delete t.nullPolyfill.__proto__,null===i&&(i=t.nullPolyfill),e.__proto__=i,r&&c(t.nullPolyfill,"__proto__",p),e},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:r.level})):null,i(110)},function(t,e,i){"use strict";var r=i(111),n=/^\s*class[\s{/}]/,o=Function.prototype.toString;t.exports=function(t){return!!r(t)&&!n.test(o.call(t))}},function(t,e,i){"use strict";var r=i(7),n=Array.prototype.forEach,o=Object.create;t.exports=function(t){var e=o(null);return n.call(arguments,function(t){r(t)&&function(t,e){var i;for(i in t)e[i]=t[i]}(Object(t),e)}),e}},function(t,e,i){"use strict";t.exports=i(118)()?String.prototype.contains:i(119)},function(t,e,i){"use strict";var r=i(125);t.exports=function(t){if(!r(t))throw new TypeError(t+" is not a symbol");return t}},function(t,e,i){"use strict";var r=i(129);t.exports=function(t){if(!r(t))throw new TypeError(t+" is not iterable");return t}},function(t,e,i){"use strict";function n(t,e){return t.replace("%v",r(e))}var o=i(8),a=i(19),s=i(135),r=i(136);t.exports=function(t,e,i){if(!a(i))throw new TypeError(n(e,t));if(!o(t)){if("default"in i)return i.default;if(i.isOptional)return null}var r=s(i.errorMessage);throw o(r)||(r=e),new TypeError(n(r,t))}},function(t,h,d){"use strict";(function(e){var t=d(44),i=setTimeout;function u(t){return Boolean(t&&void 0!==t.length)}function r(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(t,this)}function n(i,r){for(;3===i._state;)i=i._value;0!==i._state?(i._handled=!0,o._immediateFn(function(){var t,e=1===i._state?r.onFulfilled:r.onRejected;if(null!==e){try{t=e(i._value)}catch(t){return void s(r.promise,t)}a(r.promise,t)}else(1===i._state?a:s)(r.promise,i._value)})):i._deferreds.push(r)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var i=t.then;if(t instanceof o)return e._state=3,e._value=t,void l(e);if("function"==typeof i)return void p((r=i,n=t,function(){r.apply(n,arguments)}),e)}e._state=1,e._value=t,l(e)}catch(t){s(e,t)}var r,n}function s(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,i=t._deferreds.length;e<i;e++)n(t,t._deferreds[e]);t._deferreds=null}function c(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function p(t,e){var i=!1;try{t(function(t){i||(i=!0,a(e,t))},function(t){i||(i=!0,s(e,t))})}catch(t){if(i)return;i=!0,s(e,t)}}o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var i=new this.constructor(r);return n(this,new c(t,e,i)),i},o.prototype.finally=t.a,o.all=function(e){return new o(function(n,o){if(!u(e))return o(new TypeError("Promise.all accepts an array"));var a=Array.prototype.slice.call(e);if(0===a.length)return n([]);var s=a.length;for(var t=0;t<a.length;t++)!function e(i,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var r=t.then;if("function"==typeof r)return void r.call(t,function(t){e(i,t)},o)}a[i]=t,0==--s&&n(a)}catch(t){o(t)}}(t,a[t])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(i){return new o(function(t,e){e(i)})},o.race=function(n){return new o(function(t,e){if(!u(n))return e(new TypeError("Promise.race accepts an array"));for(var i=0,r=n.length;i<r;i++)o.resolve(n[i]).then(t,e)})},o._immediateFn="function"==typeof e?function(t){e(t)}:function(t){i(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},h.a=o}).call(this,d(84).setImmediate)},function(t,e,i){"use strict";e.a=function(e){var i=this.constructor;return this.then(function(t){return i.resolve(e()).then(function(){return t})},function(t){return i.resolve(e()).then(function(){return i.reject(t)})})}},function(t,e,i){"use strict";t.exports=i(98)()?Map:i(99)},function(t,e,i){t.exports="function"==typeof Array.from?Array.from:i(152)},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0MiAoMzY3ODEpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPmRqLW1tLWV4Y2xhbWF0aW9uLWNpcmNsZS15ZWxsb3c8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8Y2lyY2xlIGlkPSJwYXRoLTEiIGN4PSIxMiIgY3k9IjEyIiByPSIxMCI+PC9jaXJjbGU+CiAgICAgICAgPG1hc2sgaWQ9Im1hc2stMiIgbWFza0NvbnRlbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIG1hc2tVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIHg9Ii0yIiB5PSItMiIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij4KICAgICAgICAgICAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSJ3aGl0ZSI+PC9yZWN0PgogICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNwYXRoLTEiIGZpbGw9ImJsYWNrIj48L3VzZT4KICAgICAgICA8L21hc2s+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iSW50ZXJmYWNlLWljb25zIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iZGotbW0tZXhjbGFtYXRpb24tY2lyY2xlLXllbGxvdyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTguMDAwMDAwLCAtOC4wMDAwMDApIj4KICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOC4wMDAwMDAsIDguMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0ibWFzayIgcG9pbnRzPSIwIDAgMjQgMCAyNCAyNCAwIDI0Ij48L3BvbHlnb24+CiAgICAgICAgICAgICAgICA8ZyBpZD0iT3ZhbCI+CiAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRkZFNTAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgIDx1c2Ugc3Ryb2tlPSIjQjBCMEIwIiBtYXNrPSJ1cmwoI21hc2stMikiIHN0cm9rZS13aWR0aD0iNCIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjEzMjM1MywxMy41MTA2MzgzIEMxMy4yMDU4ODIzLDEzLjU2OTc0MDIgMTMuMTgzODIzNywxMy42MjI5MzEyIDEzLjE0NzA1ODgsMTMuNjcwMjEyOCBDMTMuMTEwMjkzOSwxMy43MTc0OTQzIDEzLjA0NTk1NjMsMTMuNzU3Mzg3NSAxMi45NTQwNDQxLDEzLjc4OTg5MzYgQzEyLjg2MjEzMTksMTMuODIyMzk5NyAxMi43MzcxMzMxLDEzLjg0NzUxNzYgMTIuNTc5MDQ0MSwxMy44NjUyNDgyIEMxMi40MjA5NTUxLDEzLjg4Mjk3ODggMTIuMjI3OTQyMywxMy44OTE4NDQgMTIsMTMuODkxODQ0IEMxMS43NjQ3MDQ3LDEzLjg5MTg0NCAxMS41Njk4NTM3LDEzLjg4Mjk3ODggMTEuNDE1NDQxMiwxMy44NjUyNDgyIEMxMS4yNjEwMjg2LDEzLjg0NzUxNzYgMTEuMTM3ODY4MSwxMy44MjIzOTk3IDExLjA0NTk1NTksMTMuNzg5ODkzNiBDMTAuOTU0MDQzNywxMy43NTczODc1IDEwLjg4OTcwNjEsMTMuNzE3NDk0MyAxMC44NTI5NDEyLDEzLjY3MDIxMjggQzEwLjgxNjE3NjMsMTMuNjIyOTMxMiAxMC43OTQxMTc3LDEzLjU2OTc0MDIgMTAuNzg2NzY0NywxMy41MTA2MzgzIEwxMC41LDUuNDYwOTkyOTEgQzEwLjUsNS4zODQxNjAzNyAxMC41MjIwNTg2LDUuMzE2MTk0MTUgMTAuNTY2MTc2NSw1LjI1NzA5MjIgQzEwLjYxMDI5NDMsNS4xOTc5OTAyNSAxMC42ODkzMzc3LDUuMTQ5MjMxODcgMTAuODAzMzA4OCw1LjExMDgxNTYgQzEwLjkxNzI4LDUuMDcyMzk5MzQgMTEuMDcxNjkwMiw1LjA0NDMyNjMzIDExLjI2NjU0NDEsNS4wMjY1OTU3NCBDMTEuNDYxMzk4LDUuMDA4ODY1MTYgMTEuNzA1ODgwOSw1IDEyLDUgQzEyLjI5NDExOTEsNSAxMi41MzY3NjM3LDUuMDEwMzQyNjkgMTIuNzI3OTQxMiw1LjAzMTAyODM3IEMxMi45MTkxMTg2LDUuMDUxNzE0MDUgMTMuMDcxNjkwNiw1LjA4MTI2NDU4IDEzLjE4NTY2MTgsNS4xMTk2ODA4NSBDMTMuMjk5NjMyOSw1LjE1ODA5NzEyIDEzLjM4MDUxNDUsNS4yMDUzNzc5NyAxMy40MjgzMDg4LDUuMjYxNTI0ODIgQzEzLjQ3NjEwMzIsNS4zMTc2NzE2OCAxMy41LDUuMzg0MTYwMzcgMTMuNSw1LjQ2MDk5MjkxIEwxMy4yMTMyMzUzLDEzLjUxMDYzODMgWiBNMTMuNSwxOC4xMDgxNTYgQzEzLjUsMTguMzUwNDc0IDEzLjQ3Njk1MDYsMTguNTU0MzcyNyAxMy40MzA4NTExLDE4LjcxOTg1ODIgQzEzLjM4NDc1MTUsMTguODg1MzQzNiAxMy4zMDMxOTIxLDE5LjAxODMyMSAxMy4xODYxNzAyLDE5LjExODc5NDMgQzEzLjA2OTE0ODQsMTkuMjE5MjY3NiAxMi45MTQ4OTQ2LDE5LjI5MTY2NjQgMTIuNzIzNDA0MywxOS4zMzU5OTI5IEMxMi41MzE5MTM5LDE5LjM4MDMxOTQgMTIuMjkwNzgxNiwxOS40MDI0ODIzIDEyLDE5LjQwMjQ4MjMgQzExLjcwOTIxODQsMTkuNDAyNDgyMyAxMS40NjYzMTMsMTkuMzgwMzE5NCAxMS4yNzEyNzY2LDE5LjMzNTk5MjkgQzExLjA3NjI0MDIsMTkuMjkxNjY2NCAxMC45MjE5ODY0LDE5LjIxOTI2NzYgMTAuODA4NTEwNiwxOS4xMTg3OTQzIEMxMC42OTUwMzQ5LDE5LjAxODMyMSAxMC42MTUyNDg1LDE4Ljg4NTM0MzYgMTAuNTY5MTQ4OSwxOC43MTk4NTgyIEMxMC41MjMwNDk0LDE4LjU1NDM3MjcgMTAuNSwxOC4zNTA0NzQgMTAuNSwxOC4xMDgxNTYgQzEwLjUsMTcuODU5OTI3OCAxMC41MjMwNDk0LDE3LjY1MTU5NjYgMTAuNTY5MTQ4OSwxNy40ODMxNTYgQzEwLjYxNTI0ODUsMTcuMzE0NzE1NSAxMC42OTUwMzQ5LDE3LjE3ODc4MyAxMC44MDg1MTA2LDE3LjA3NTM1NDYgQzEwLjkyMTk4NjQsMTYuOTcxOTI2MiAxMS4wNzYyNDAyLDE2Ljg5ODA0OTkgMTEuMjcxMjc2NiwxNi44NTM3MjM0IEMxMS40NjYzMTMsMTYuODA5Mzk2OSAxMS43MDkyMTg0LDE2Ljc4NzIzNCAxMiwxNi43ODcyMzQgQzEyLjI5MDc4MTYsMTYuNzg3MjM0IDEyLjUzMTkxMzksMTYuODA5Mzk2OSAxMi43MjM0MDQzLDE2Ljg1MzcyMzQgQzEyLjkxNDg5NDYsMTYuODk4MDQ5OSAxMy4wNjkxNDg0LDE2Ljk3MTkyNjIgMTMuMTg2MTcwMiwxNy4wNzUzNTQ2IEMxMy4zMDMxOTIxLDE3LjE3ODc4MyAxMy4zODQ3NTE1LDE3LjMxNDcxNTUgMTMuNDMwODUxMSwxNy40ODMxNTYgQzEzLjQ3Njk1MDYsMTcuNjUxNTk2NiAxMy41LDE3Ljg1OTkyNzggMTMuNSwxOC4xMDgxNTYgWiIgaWQ9IiEiIGZpbGw9IiM0MTQxNDEiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE4IDdsLTctN3Y0QzQgNSAxIDEwIDAgMTVjMi41LTMuNSA2LTUuMSAxMS01LjFWMTRsNy03eiIgZmlsbD0iIzAwQTNGRiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI2cHgiIGhlaWdodD0iMjFweCIgdmlld0JveD0iMCAwIDI2IDIxIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0My4yICgzOTA2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+ZGotbW0tc3RhaXJzPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IkludGVyZmFjZS1pY29ucyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9ImRqLW1tLXN0YWlycyIgZmlsbC1ydWxlPSJub256ZXJvIiBmaWxsPSIjMDBBRUZGIj4KICAgICAgICAgICAgPGcgaWQ9InN0YWlycy11cCI+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0icGF0aDYiIHBvaW50cz0iMCAyMSAwIDE4LjYyMTY4NjcgNC41NSAxOC42MjE2ODY3IDQuNTUgMTMuOTQwOTYzOSA5LjA3NSAxMy45NDA5NjM5IDkuMDc1IDkuMjM0OTM5NzYgMTMuNjc1IDkuMjM0OTM5NzYgMTMuNjc1IDQuNjA0ODE5MjggMTguMjI1IDQuNjA0ODE5MjggMTguMjI1IDAgMjUgMCAyNSAyLjMyNzcxMDg0IDIwLjUgMi4zMjc3MTA4NCAyMC41IDYuOTU3ODMxMzMgMTUuOTI1IDYuOTU3ODMxMzMgMTUuOTI1IDExLjYzODU1NDIgMTEuMzc1IDExLjYzODU1NDIgMTEuMzc1IDE2LjI5Mzk3NTkgNi44IDE2LjI5Mzk3NTkgNi44IDIxIj48L3BvbHlnb24+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI2cHgiIGhlaWdodD0iMjFweCIgdmlld0JveD0iMCAwIDI2IDIxIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0My4yICgzOTA2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+ZGotbW0tc3RhaXJzLWRvd248L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iSW50ZXJmYWNlLWljb25zIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iZGotbW0tc3RhaXJzLWRvd24iIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0iIzAwQUVGRiI+CiAgICAgICAgICAgIDxnIGlkPSJzdGFpcnMtZG93biI+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMCwyMSBMMCwxOC42MjE2ODY3IEw0LjU1LDE4LjYyMTY4NjcgTDQuNTUsMTMuOTQwOTYzOSBMOS4wNzUsMTMuOTQwOTYzOSBMOS4wNzUsOS4yMzQ5Mzk3NiBMMTMuNjc1LDkuMjM0OTM5NzYgTDEzLjY3NSw0LjYwNDgxOTI4IEwxOC4yMjUsNC42MDQ4MTkyOCBMMTguMjI1LDAgTDI1LDAgTDI1LDIuMzI3NzEwODQgTDIwLjUsMi4zMjc3MTA4NCBMMjAuNSw2Ljk1NzgzMTMzIEwxNS45MjUsNi45NTc4MzEzMyBMMTUuOTI1LDExLjYzODU1NDIgTDExLjM3NSwxMS42Mzg1NTQyIEwxMS4zNzUsMTYuMjkzOTc1OSBMNi44LDE2LjI5Mzk3NTkgTDYuOCwyMSBMMCwyMSBaIE0xNC4xNzUsMTkuODg2NzQ3IEwxNC4xNzUsMTUuODM4NTU0MiBDMTQuMTc1LDE1LjQ4NDMzNzMgMTQuMzI1LDE1LjIzMTMyNTMgMTQuNjI1LDE1LjA3OTUxODEgQzE0LjkyNSwxNC45Mjc3MTA4IDE1LjIwODMzMzMsMTQuOTI3NzEwOCAxNS40NzUsMTUuMDc5NTE4MSBDMTUuNzQxNjY2NywxNS4yMzEzMjUzIDE1Ljg4MzMzMzMsMTUuNDg0MzM3MyAxNS45LDE1LjgzODU1NDIgTDE1LjksMTcuOTEzMjUzIEwxOS43NzUsMTMuOTkxNTY2MyBDMTkuOTQxNjY2NywxMy44MjI4OTE2IDIwLjEyNSwxMy43MTMyNTMgMjAuMzI1LDEzLjY2MjY1MDYgQzIwLjUyNSwxMy42MTIwNDgyIDIwLjcwODMzMzMsMTMuNjQ1NzgzMSAyMC44NzUsMTMuNzYzODU1NCBDMjEuMDQxNjY2NywxMy44ODE5Mjc3IDIxLjE2NjY2NjcsMTQgMjEuMjUsMTQuMTE4MDcyMyBDMjEuMzMzMzMzMywxNC4yMzYxNDQ2IDIxLjM2NjY2NjcsMTQuNDEzMjUzIDIxLjM1LDE0LjY0OTM5NzYgQzIxLjMzMzMzMzMsMTQuODg1NTQyMiAyMS4yMzMzMzMzLDE1LjA3MTA4NDMgMjEuMDUsMTUuMjA2MDI0MSBMMTcuMTI1LDE5LjE3ODMxMzMgTDE5LjIsMTkuMTc4MzEzMyBDMTkuNDY2NjY2NywxOS4xNzgzMTMzIDE5LjY3NSwxOS4yNjI2NTA2IDE5LjgyNSwxOS40MzEzMjUzIEMxOS45NzUsMTkuNiAyMC4wNSwxOS44MDI0MDk2IDIwLjA1LDIwLjAzODU1NDIgQzIwLjA1LDIwLjI3NDY5ODggMTkuOTc1LDIwLjQ2ODY3NDcgMTkuODI1LDIwLjYyMDQ4MTkgQzE5LjY3NSwyMC43NzIyODkyIDE5LjQ2NjY2NjcsMjAuODY1MDYwMiAxOS4yLDIwLjg5ODc5NTIgTDE1LjE3NSwyMC44OTg3OTUyIEMxNC44NzUsMjAuODk4Nzk1MiAxNC42MzMzMzMzLDIwLjgwNjAyNDEgMTQuNDUsMjAuNjIwNDgxOSBDMTQuMjY2NjY2NywyMC40MzQ5Mzk4IDE0LjE3NSwyMC4xOTAzNjE0IDE0LjE3NSwxOS44ODY3NDcgWiIgaWQ9InBhdGg0NTg2Ij48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTAwMCAxMDAwIiBpZD0ic3ZnOCI+PGRlZnMgaWQ9ImRlZnM0Ij48c3R5bGUgaWQ9InN0eWxlMiI+LmNscy0xe2ZpbGw6IzAwYWVmZn08L3N0eWxlPjwvZGVmcz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik0xMCA4ODB2LTk0aDE4MlY2MDFoMTgxVjQxNWgxODRWMjMyaDE4MlY1MGgyNzF2OTJIODMwdjE4M0g2NDd2MTg1SDQ2NXYxODRIMjgydjE4NnptNTY5LTQycTItMTIgMTItMjJsMTU3LTE1N2gtODNxLTIyIDAtMzAtMTd0MC0zNHE4LTE3IDMwLTE3aDE2MXExMiAwIDIxIDV0MTMgMTRxNCA5IDUgMjF2MTYwcTAgMjEtMTcgMzB0LTM0IDBxLTE3LTktMTctMzB2LTgyTDY0MiA4NjRxLTExIDktMjMgMTJ0LTIxLTNxLTktNi0xNS0xNXQtNC0yMHoiIGlkPSJwYXRoNiIgZmlsbD0iIzAwYWVmZiIvPjwvc3ZnPgo="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI2cHgiIGhlaWdodD0iMjZweCIgdmlld0JveD0iMCAwIDI2IDI2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0My4yICgzOTA2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+ZGotbW0tZWxldmF0b3I8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iSW50ZXJmYWNlLWljb25zIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iZGotbW0tZWxldmF0b3IiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0iIzAwQUVGRiI+CiAgICAgICAgICAgIDxnIGlkPSJlbGV2YXRvciI+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMjAuNDc2Njk5MywxNC42MjEyNSBMMTguODYyMzIwMywxNC42MjEyNSBMMTguODYyMzIwMywyMC43NTMyNSBDMTguODYyMzIwMywyMS44NDUyNSAyMC40NzY2OTkzLDIxLjg0NTI1IDIwLjQ3NjY5OTMsMjAuNzUzMjUgTDIwLjQ3NjY5OTMsMTQuNjIxMjUgWiBNMTguNjQ5OTAyLDE0LjYyMTI1IEwxNy4wMzU1MjI5LDE0LjYyMTI1IEwxNy4wMzU1MjI5LDIwLjc1MzI1IEMxNy4wMzU1MjI5LDIxLjg0NTI1IDE4LjY0OTkwMiwyMS44NDUyNSAxOC42NDk5MDIsMjAuNzUzMjUgTDE4LjY0OTkwMiwxNC42MjEyNSBaIE0xNC43NDE0MDUyLDE0LjYyMTI1IEwxMy4xMjcwMjYxLDE0LjYyMTI1IEwxMy4xMjcwMjYxLDIwLjc1MzI1IEMxMy4xMjcwMjYxLDIxLjg0NTI1IDE0Ljc0MTQwNTIsMjEuODQ1MjUgMTQuNzQxNDA1MiwyMC43NTMyNSBMMTQuNzQxNDA1MiwxNC42MjEyNSBaIE0xMi44NzIxMjQyLDE0LjYyMTI1IEwxMS4yNTc3NDUxLDE0LjYyMTI1IEwxMS4yNTc3NDUxLDIwLjc1MzI1IEMxMS4zMDAyMjg4LDIxLjg0NTI1IDEyLjg3MjEyNDIsMjEuODQ1MjUgMTIuODcyMTI0MiwyMC43NTMyNSBMMTIuODcyMTI0MiwxNC42MjEyNSBaIE04Ljk2MzYyNzQ1LDE0LjYyMTI1IEw3LjM0OTI0ODM3LDE0LjYyMTI1IEw3LjM0OTI0ODM3LDIwLjc1MzI1IEM3LjM5MTczMjAzLDIxLjg0NTI1IDguOTYzNjI3NDUsMjEuODQ1MjUgOC45NjM2Mjc0NSwyMC43NTMyNSBMOC45NjM2Mjc0NSwxNC42MjEyNSBaIE03LjEzNjgzMDA3LDE0LjYyMTI1IEw1LjUyMjQ1MDk4LDE0LjYyMTI1IEw1LjUyMjQ1MDk4LDIwLjc1MzI1IEM1LjUyMjQ1MDk4LDIxLjg0NTI1IDcuMTM2ODMwMDcsMjEuODQ1MjUgNy4xMzY4MzAwNywyMC43NTMyNSBMNy4xMzY4MzAwNywxNC42MjEyNSBaIE0yMi41MTU5MTUsMC4wMDUyNSBMMy40ODMyMzUyOSwwLjAwNTI1IEMxLjQ4NjUwMzI3LDAuMDA1MjUgMC4wNDIwNTg4MjM1LDEuNTU5MjUgMC4wNDIwNTg4MjM1LDMuNDQ5MjUgTDAuMDQyMDU4ODIzNSwyMi4yMjMyNSBDMC4wNDIwNTg4MjM1LDI0LjE1NTI1IDEuNTcxNDcwNTksMjUuNjI1MjUgMy40ODMyMzUyOSwyNS42MjUyNSBMMjIuNTU4Mzk4NywyNS42MjUyNSBDMjQuNDI3Njc5NywyNS42MjUyNSAyNS45OTk1NzUyLDI0LjIzOTI1IDI1Ljk1NzA5MTUsMjIuMjIzMjUgTDI1Ljk1NzA5MTUsMy40NDkyNSBDMjUuOTk5NTc1MiwxLjU1OTI1IDI0LjQ3MDE2MzQsMC4wMDUyNSAyMi41MTU5MTUsMC4wMDUyNSBaIE0yMi4zODg0NjQxLDIyLjA1NTI1IEwzLjYxMDY4NjI3LDIyLjA1NTI1IEwzLjYxMDY4NjI3LDMuNjE3MjUgTDIyLjM4ODQ2NDEsMy42MTcyNSBMMjIuMzg4NDY0MSwyMi4wNTUyNSBaIE0yMS40OTYzMDcyLDE0LjIwMTI1IEMyMS40OTYzMDcyLDE0LjUzNzI1IDIxLjE5ODkyMTYsMTQuODMxMjUgMjAuODU5MDUyMywxNC43ODkyNSBDMjAuODU5MDUyMywxNC43ODkyNSAxNi42NTMxNjk5LDE0LjgzMTI1IDE2LjY1MzE2OTksMTQuNzg5MjUgQzE2LjMxMzMwMDcsMTQuODMxMjUgMTYuMDE1OTE1LDE0LjUzNzI1IDE2LjAxNTkxNSwxNC4yMDEyNSBMMTYuMDE1OTE1LDkuNjY1MjUgQzE2LjAxNTkxNSw5LjE2MTI1IDE2LjQ0MDc1MTYsOC43ODMyNSAxNi45MDgwNzE5LDguNzgzMjUgTDIwLjYwNDE1MDMsOC43ODMyNSBDMjEuMTEzOTU0Miw4Ljc4MzI1IDIxLjQ5NjMwNzIsOS4xNjEyNSAyMS40OTYzMDcyLDkuNjY1MjUgTDIxLjQ5NjMwNzIsMTQuMjAxMjUgWiBNMTguNzc3MzUyOSw4LjQwNTI1IEMxOS40NTcwOTE1LDguNDA1MjUgMTkuOTY2ODk1NCw3LjkwMTI1IDE5Ljk2Njg5NTQsNy4yMjkyNSBDMTkuOTY2ODk1NCw2LjU1NzI1IDE5LjQ1NzA5MTUsNi4wNTMyNSAxOC43NzczNTI5LDYuMDUzMjUgQzE4LjA5NzYxNDQsNi4wNTMyNSAxNy41ODc4MTA1LDYuNTU3MjUgMTcuNTg3ODEwNSw3LjIyOTI1IEMxNy41ODc4MTA1LDcuOTAxMjUgMTguMDk3NjE0NCw4LjQwNTI1IDE4Ljc3NzM1MjksOC40MDUyNSBaIE0xNS43NjEwMTMxLDE0LjIwMTI1IEMxNS43NjEwMTMxLDE0LjUzNzI1IDE1LjQ2MzYyNzUsMTQuODMxMjUgMTUuMTIzNzU4MiwxNC43ODkyNSBDMTUuMTIzNzU4MiwxNC43ODkyNSAxMC45MTc4NzU4LDE0LjgzMTI1IDEwLjkxNzg3NTgsMTQuNzg5MjUgQzEwLjU3ODAwNjUsMTQuODMxMjUgMTAuMjgwNjIwOSwxNC41MzcyNSAxMC4yODA2MjA5LDE0LjIwMTI1IEwxMC4yODA2MjA5LDkuNjY1MjUgQzEwLjI4MDYyMDksOS4xNjEyNSAxMC43MDU0NTc1LDguNzgzMjUgMTEuMTMwMjk0MSw4Ljc4MzI1IEwxNC44Njg4NTYyLDguNzgzMjUgQzE1LjM3ODY2MDEsOC43ODMyNSAxNS43NjEwMTMxLDkuMTYxMjUgMTUuNzYxMDEzMSw5LjY2NTI1IEwxNS43NjEwMTMxLDE0LjIwMTI1IFogTTEzLjA0MjA1ODgsOC40MDUyNSBDMTMuNjc5MzEzNyw4LjQwNTI1IDE0LjIzMTYwMTMsNy45MDEyNSAxNC4yMzE2MDEzLDcuMjI5MjUgQzE0LjIzMTYwMTMsNi41NTcyNSAxMy42NzkzMTM3LDYuMDUzMjUgMTMuMDQyMDU4OCw2LjA1MzI1IEMxMi4zNjIzMjAzLDYuMDUzMjUgMTEuODEwMDMyNyw2LjU1NzI1IDExLjgxMDAzMjcsNy4yMjkyNSBDMTEuODEwMDMyNyw3LjkwMTI1IDEyLjM2MjMyMDMsOC40MDUyNSAxMy4wNDIwNTg4LDguNDA1MjUgWiBNOS45ODMyMzUyOSwxNC4yMDEyNSBDMTAuMDI1NzE5LDE0LjUzNzI1IDkuNjg1ODQ5NjcsMTQuODMxMjUgOS4zODg0NjQwNSwxNC43ODkyNSBDOS4zODg0NjQwNSwxNC43ODkyNSA1LjE4MjU4MTcsMTQuODMxMjUgNS4xNDAwOTgwNCwxNC43ODkyNSBDNC44NDI3MTI0MiwxNC44MzEyNSA0LjUwMjg0MzE0LDE0LjUzNzI1IDQuNTAyODQzMTQsMTQuMjAxMjUgTDQuNTAyODQzMTQsOS42NjUyNSBDNC41MDI4NDMxNCw5LjE2MTI1IDQuOTI3Njc5NzQsOC43ODMyNSA1LjM5NSw4Ljc4MzI1IEw5LjEzMzU2MjA5LDguNzgzMjUgQzkuNjQzMzY2MDEsOC43ODMyNSAxMC4wMjU3MTksOS4xNjEyNSA5Ljk4MzIzNTI5LDkuNjY1MjUgTDkuOTgzMjM1MjksMTQuMjAxMjUgWiBNNy4yNjQyODEwNSw4LjQwNTI1IEM3Ljk0NDAxOTYxLDguNDA1MjUgOC40OTYzMDcxOSw3LjkwMTI1IDguNDUzODIzNTMsNy4yMjkyNSBDOC40OTYzMDcxOSw2LjU1NzI1IDcuOTQ0MDE5NjEsNi4wNTMyNSA3LjI2NDI4MTA1LDYuMDUzMjUgQzYuNjI3MDI2MTQsNi4wNTMyNSA2LjA3NDczODU2LDYuNTU3MjUgNi4wNzQ3Mzg1Niw3LjIyOTI1IEM2LjA3NDczODU2LDcuOTAxMjUgNi42MjcwMjYxNCw4LjQwNTI1IDcuMjY0MjgxMDUsOC40MDUyNSBaIiBpZD0iU2hhcGUiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjQ0cHgiIGhlaWdodD0iNDRweCIgdmlld0JveD0iMCAwIDQ0IDQ0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0My4yICgzOTA2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+ZGotbW0tZWxldmF0b3ItZG93bjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJJbnRlcmZhY2UtaWNvbnMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJkai1tbS1lbGV2YXRvci1kb3duIj4KICAgICAgICAgICAgPHBvbHlnb24gaWQ9Im1hc2siIHBvaW50cz0iMCAwIDQ0IDAgNDQgNDQgMCA0NCI+PC9wb2x5Z29uPgogICAgICAgICAgICA8ZyBpZD0iZWxldmF0b3ItZG93biIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOS4wMDAwMDAsIDEuMDAwMDAwKSIgZmlsbC1ydWxlPSJub256ZXJvIiBmaWxsPSIjMDBBRUZGIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0yMC40NzY2OTkzLDE0LjYyMTI1IEwxOC44NjIzMjAzLDE0LjYyMTI1IEwxOC44NjIzMjAzLDIwLjc1MzI1IEMxOC44NjIzMjAzLDIxLjg0NTI1IDIwLjQ3NjY5OTMsMjEuODQ1MjUgMjAuNDc2Njk5MywyMC43NTMyNSBMMjAuNDc2Njk5MywxNC42MjEyNSBaIE0xOC42NDk5MDIsMTQuNjIxMjUgTDE3LjAzNTUyMjksMTQuNjIxMjUgTDE3LjAzNTUyMjksMjAuNzUzMjUgQzE3LjAzNTUyMjksMjEuODQ1MjUgMTguNjQ5OTAyLDIxLjg0NTI1IDE4LjY0OTkwMiwyMC43NTMyNSBMMTguNjQ5OTAyLDE0LjYyMTI1IFogTTE0Ljc0MTQwNTIsMTQuNjIxMjUgTDEzLjEyNzAyNjEsMTQuNjIxMjUgTDEzLjEyNzAyNjEsMjAuNzUzMjUgQzEzLjEyNzAyNjEsMjEuODQ1MjUgMTQuNzQxNDA1MiwyMS44NDUyNSAxNC43NDE0MDUyLDIwLjc1MzI1IEwxNC43NDE0MDUyLDE0LjYyMTI1IFogTTEyLjg3MjEyNDIsMTQuNjIxMjUgTDExLjI1Nzc0NTEsMTQuNjIxMjUgTDExLjI1Nzc0NTEsMjAuNzUzMjUgQzExLjMwMDIyODgsMjEuODQ1MjUgMTIuODcyMTI0MiwyMS44NDUyNSAxMi44NzIxMjQyLDIwLjc1MzI1IEwxMi44NzIxMjQyLDE0LjYyMTI1IFogTTguOTYzNjI3NDUsMTQuNjIxMjUgTDcuMzQ5MjQ4MzcsMTQuNjIxMjUgTDcuMzQ5MjQ4MzcsMjAuNzUzMjUgQzcuMzkxNzMyMDMsMjEuODQ1MjUgOC45NjM2Mjc0NSwyMS44NDUyNSA4Ljk2MzYyNzQ1LDIwLjc1MzI1IEw4Ljk2MzYyNzQ1LDE0LjYyMTI1IFogTTcuMTM2ODMwMDcsMTQuNjIxMjUgTDUuNTIyNDUwOTgsMTQuNjIxMjUgTDUuNTIyNDUwOTgsMjAuNzUzMjUgQzUuNTIyNDUwOTgsMjEuODQ1MjUgNy4xMzY4MzAwNywyMS44NDUyNSA3LjEzNjgzMDA3LDIwLjc1MzI1IEw3LjEzNjgzMDA3LDE0LjYyMTI1IFogTTIyLjUxNTkxNSwwLjAwNTI1IEwzLjQ4MzIzNTI5LDAuMDA1MjUgQzEuNDg2NTAzMjcsMC4wMDUyNSAwLjA0MjA1ODgyMzUsMS41NTkyNSAwLjA0MjA1ODgyMzUsMy40NDkyNSBMMC4wNDIwNTg4MjM1LDIyLjIyMzI1IEMwLjA0MjA1ODgyMzUsMjQuMTU1MjUgMS41NzE0NzA1OSwyNS42MjUyNSAzLjQ4MzIzNTI5LDI1LjYyNTI1IEwyMi41NTgzOTg3LDI1LjYyNTI1IEMyNC40Mjc2Nzk3LDI1LjYyNTI1IDI1Ljk5OTU3NTIsMjQuMjM5MjUgMjUuOTU3MDkxNSwyMi4yMjMyNSBMMjUuOTU3MDkxNSwzLjQ0OTI1IEMyNS45OTk1NzUyLDEuNTU5MjUgMjQuNDcwMTYzNCwwLjAwNTI1IDIyLjUxNTkxNSwwLjAwNTI1IFogTTIyLjM4ODQ2NDEsMjIuMDU1MjUgTDMuNjEwNjg2MjcsMjIuMDU1MjUgTDMuNjEwNjg2MjcsMy42MTcyNSBMMjIuMzg4NDY0MSwzLjYxNzI1IEwyMi4zODg0NjQxLDIyLjA1NTI1IFogTTExLjE3Mjc3NzgsMjguNjA3MjUgQzExLjE3Mjc3NzgsMjYuMTcxMjUgMTQuNzgzODg4OSwyNi4xMjkyNSAxNC43ODM4ODg5LDI4LjYwNzI1IEwxNC43NDE0MDUyLDM2LjA4MzI1IEwxNi42NTMxNjk5LDMzLjczMTI1IEMxOC4wMTI2NDcxLDMyLjI2MTI1IDIwLjM0OTI0ODQsMzQuMzE5MjUgMTguOTA0ODAzOSwzNS45NTcyNSBMMTQuMjMxNjAxMyw0MS40NTkyNSBDMTMuNDY2ODk1NCw0Mi4xNzMyNSAxMi40ODk3NzEyLDQyLjE3MzI1IDExLjc2NzU0OSw0MS40NTkyNSBMNy4wOTQzNDY0MSwzNS45MTUyNSBDNS42NDk5MDE5NiwzNC4yNzcyNSA4LjAyODk4NjkzLDMyLjIxOTI1IDkuMzAzNDk2NzMsMzMuNjg5MjUgTDExLjI1Nzc0NTEsMzYuMDgzMjUgTDExLjE3Mjc3NzgsMjguNjA3MjUgWiBNMjEuNDk2MzA3MiwxNC4yMDEyNSBDMjEuNDk2MzA3MiwxNC41MzcyNSAyMS4xOTg5MjE2LDE0LjgzMTI1IDIwLjg1OTA1MjMsMTQuNzg5MjUgQzIwLjg1OTA1MjMsMTQuNzg5MjUgMTYuNjUzMTY5OSwxNC44MzEyNSAxNi42NTMxNjk5LDE0Ljc4OTI1IEMxNi4zMTMzMDA3LDE0LjgzMTI1IDE2LjAxNTkxNSwxNC41MzcyNSAxNi4wMTU5MTUsMTQuMjAxMjUgTDE2LjAxNTkxNSw5LjY2NTI1IEMxNi4wMTU5MTUsOS4xNjEyNSAxNi40NDA3NTE2LDguNzgzMjUgMTYuOTA4MDcxOSw4Ljc4MzI1IEwyMC42MDQxNTAzLDguNzgzMjUgQzIxLjExMzk1NDIsOC43ODMyNSAyMS40OTYzMDcyLDkuMTYxMjUgMjEuNDk2MzA3Miw5LjY2NTI1IEwyMS40OTYzMDcyLDE0LjIwMTI1IFogTTE4Ljc3NzM1MjksOC40MDUyNSBDMTkuNDU3MDkxNSw4LjQwNTI1IDE5Ljk2Njg5NTQsNy45MDEyNSAxOS45NjY4OTU0LDcuMjI5MjUgQzE5Ljk2Njg5NTQsNi41NTcyNSAxOS40NTcwOTE1LDYuMDUzMjUgMTguNzc3MzUyOSw2LjA1MzI1IEMxOC4wOTc2MTQ0LDYuMDUzMjUgMTcuNTg3ODEwNSw2LjU1NzI1IDE3LjU4NzgxMDUsNy4yMjkyNSBDMTcuNTg3ODEwNSw3LjkwMTI1IDE4LjA5NzYxNDQsOC40MDUyNSAxOC43NzczNTI5LDguNDA1MjUgWiBNMTUuNzYxMDEzMSwxNC4yMDEyNSBDMTUuNzYxMDEzMSwxNC41MzcyNSAxNS40NjM2Mjc1LDE0LjgzMTI1IDE1LjEyMzc1ODIsMTQuNzg5MjUgQzE1LjEyMzc1ODIsMTQuNzg5MjUgMTAuOTE3ODc1OCwxNC44MzEyNSAxMC45MTc4NzU4LDE0Ljc4OTI1IEMxMC41NzgwMDY1LDE0LjgzMTI1IDEwLjI4MDYyMDksMTQuNTM3MjUgMTAuMjgwNjIwOSwxNC4yMDEyNSBMMTAuMjgwNjIwOSw5LjY2NTI1IEMxMC4yODA2MjA5LDkuMTYxMjUgMTAuNzA1NDU3NSw4Ljc4MzI1IDExLjEzMDI5NDEsOC43ODMyNSBMMTQuODY4ODU2Miw4Ljc4MzI1IEMxNS4zNzg2NjAxLDguNzgzMjUgMTUuNzYxMDEzMSw5LjE2MTI1IDE1Ljc2MTAxMzEsOS42NjUyNSBMMTUuNzYxMDEzMSwxNC4yMDEyNSBaIE0xMy4wNDIwNTg4LDguNDA1MjUgQzEzLjY3OTMxMzcsOC40MDUyNSAxNC4yMzE2MDEzLDcuOTAxMjUgMTQuMjMxNjAxMyw3LjIyOTI1IEMxNC4yMzE2MDEzLDYuNTU3MjUgMTMuNjc5MzEzNyw2LjA1MzI1IDEzLjA0MjA1ODgsNi4wNTMyNSBDMTIuMzYyMzIwMyw2LjA1MzI1IDExLjgxMDAzMjcsNi41NTcyNSAxMS44MTAwMzI3LDcuMjI5MjUgQzExLjgxMDAzMjcsNy45MDEyNSAxMi4zNjIzMjAzLDguNDA1MjUgMTMuMDQyMDU4OCw4LjQwNTI1IFogTTkuOTgzMjM1MjksMTQuMjAxMjUgQzEwLjAyNTcxOSwxNC41MzcyNSA5LjY4NTg0OTY3LDE0LjgzMTI1IDkuMzg4NDY0MDUsMTQuNzg5MjUgQzkuMzg4NDY0MDUsMTQuNzg5MjUgNS4xODI1ODE3LDE0LjgzMTI1IDUuMTQwMDk4MDQsMTQuNzg5MjUgQzQuODQyNzEyNDIsMTQuODMxMjUgNC41MDI4NDMxNCwxNC41MzcyNSA0LjUwMjg0MzE0LDE0LjIwMTI1IEw0LjUwMjg0MzE0LDkuNjY1MjUgQzQuNTAyODQzMTQsOS4xNjEyNSA0LjkyNzY3OTc0LDguNzgzMjUgNS4zOTUsOC43ODMyNSBMOS4xMzM1NjIwOSw4Ljc4MzI1IEM5LjY0MzM2NjAxLDguNzgzMjUgMTAuMDI1NzE5LDkuMTYxMjUgOS45ODMyMzUyOSw5LjY2NTI1IEw5Ljk4MzIzNTI5LDE0LjIwMTI1IFogTTcuMjY0MjgxMDUsOC40MDUyNSBDNy45NDQwMTk2MSw4LjQwNTI1IDguNDk2MzA3MTksNy45MDEyNSA4LjQ1MzgyMzUzLDcuMjI5MjUgQzguNDk2MzA3MTksNi41NTcyNSA3Ljk0NDAxOTYxLDYuMDUzMjUgNy4yNjQyODEwNSw2LjA1MzI1IEM2LjYyNzAyNjE0LDYuMDUzMjUgNi4wNzQ3Mzg1Niw2LjU1NzI1IDYuMDc0NzM4NTYsNy4yMjkyNSBDNi4wNzQ3Mzg1Niw3LjkwMTI1IDYuNjI3MDI2MTQsOC40MDUyNSA3LjI2NDI4MTA1LDguNDA1MjUgWiIgaWQ9IlNoYXBlIj48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjQ0cHgiIGhlaWdodD0iNDJweCIgdmlld0JveD0iMCAwIDQ0IDQyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0My4yICgzOTA2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+ZGotbW0tZWxldmF0b3ItdXA8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iSW50ZXJmYWNlLWljb25zIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iZGotbW0tZWxldmF0b3ItdXAiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0iIzAwQUVGRiI+CiAgICAgICAgICAgIDxnIGlkPSJlbGV2YXRvci11cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOS4wMDAwMDAsIDAuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMjAuNDc2Njk5MywzMS4wMzI3NSBMMTguODYyMzIwMywzMS4wMzI3NSBMMTguODYyMzIwMywzNy4xMjI3NSBDMTguODYyMzIwMywzOC4yMTQ3NSAyMC40NzY2OTkzLDM4LjIxNDc1IDIwLjQ3NjY5OTMsMzcuMTIyNzUgTDIwLjQ3NjY5OTMsMzEuMDMyNzUgWiBNMTguNjQ5OTAyLDMxLjAzMjc1IEwxNy4wMzU1MjI5LDMxLjAzMjc1IEwxNy4wMzU1MjI5LDM3LjEyMjc1IEMxNy4wMzU1MjI5LDM4LjIxNDc1IDE4LjY0OTkwMiwzOC4yMTQ3NSAxOC42NDk5MDIsMzcuMTIyNzUgTDE4LjY0OTkwMiwzMS4wMzI3NSBaIE0xNC43NDE0MDUyLDMxLjAzMjc1IEwxMy4xMjcwMjYxLDMxLjAzMjc1IEwxMy4xMjcwMjYxLDM3LjEyMjc1IEMxMy4xMjcwMjYxLDM4LjIxNDc1IDE0Ljc0MTQwNTIsMzguMjE0NzUgMTQuNzQxNDA1MiwzNy4xMjI3NSBMMTQuNzQxNDA1MiwzMS4wMzI3NSBaIE0xMi44NzIxMjQyLDMxLjAzMjc1IEwxMS4yNTc3NDUxLDMxLjAzMjc1IEwxMS4yNTc3NDUxLDM3LjEyMjc1IEMxMS4zMDAyMjg4LDM4LjIxNDc1IDEyLjg3MjEyNDIsMzguMjE0NzUgMTIuODcyMTI0MiwzNy4xMjI3NSBMMTIuODcyMTI0MiwzMS4wMzI3NSBaIE04Ljk2MzYyNzQ1LDMxLjAzMjc1IEw3LjM0OTI0ODM3LDMxLjAzMjc1IEw3LjM0OTI0ODM3LDM3LjEyMjc1IEM3LjM5MTczMjAzLDM4LjIxNDc1IDguOTYzNjI3NDUsMzguMjE0NzUgOC45NjM2Mjc0NSwzNy4xMjI3NSBMOC45NjM2Mjc0NSwzMS4wMzI3NSBaIE03LjEzNjgzMDA3LDMxLjAzMjc1IEw1LjUyMjQ1MDk4LDMxLjAzMjc1IEw1LjUyMjQ1MDk4LDM3LjEyMjc1IEM1LjUyMjQ1MDk4LDM4LjIxNDc1IDcuMTM2ODMwMDcsMzguMjE0NzUgNy4xMzY4MzAwNywzNy4xMjI3NSBMNy4xMzY4MzAwNywzMS4wMzI3NSBaIE0yMi41MTU5MTUsMTYuMzc0NzUgTDMuNDgzMjM1MjksMTYuMzc0NzUgQzEuNDg2NTAzMjcsMTYuMzc0NzUgMC4wNDIwNTg4MjM1LDE3LjkyODc1IDAuMDQyMDU4ODIzNSwxOS44MTg3NSBMMC4wNDIwNTg4MjM1LDM4LjU5Mjc1IEMwLjA0MjA1ODgyMzUsNDAuNTI0NzUgMS41NzE0NzA1OSw0MS45OTQ3NSAzLjQ4MzIzNTI5LDQxLjk5NDc1IEwyMi41NTgzOTg3LDQxLjk5NDc1IEMyNC40Mjc2Nzk3LDQxLjk5NDc1IDI1Ljk5OTU3NTIsNDAuNjA4NzUgMjUuOTU3MDkxNSwzOC41OTI3NSBMMjUuOTU3MDkxNSwxOS44MTg3NSBDMjUuOTk5NTc1MiwxNy45Mjg3NSAyNC40NzAxNjM0LDE2LjM3NDc1IDIyLjUxNTkxNSwxNi4zNzQ3NSBaIE0yMi4zODg0NjQxLDM4LjQyNDc1IEwzLjYxMDY4NjI3LDM4LjQyNDc1IEwzLjYxMDY4NjI3LDE5Ljk4Njc1IEwyMi4zODg0NjQxLDE5Ljk4Njc1IEwyMi4zODg0NjQxLDM4LjQyNDc1IFogTTExLjE3Mjc3NzgsMTMuMzkyNzUgQzExLjE3Mjc3NzgsMTUuODI4NzUgMTQuNzgzODg4OSwxNS44NzA3NSAxNC43ODM4ODg5LDEzLjM5Mjc1IEwxNC43NDE0MDUyLDUuOTE2NzUgTDE2LjY1MzE2OTksOC4yNjg3NSBDMTguMDEyNjQ3MSw5LjY5Njc1IDIwLjM0OTI0ODQsNy42ODA3NSAxOC45MDQ4MDM5LDYuMDQyNzUgTDE0LjIzMTYwMTMsMC41NDA3NSBDMTMuNDY2ODk1NCwtMC4xNzMyNSAxMi40ODk3NzEyLC0wLjE3MzI1IDExLjc2NzU0OSwwLjU0MDc1IEw3LjA5NDM0NjQxLDYuMDg0NzUgQzUuNjQ5OTAxOTYsNy43MjI3NSA4LjAyODk4NjkzLDkuNzM4NzUgOS4zMDM0OTY3Myw4LjMxMDc1IEwxMS4yNTc3NDUxLDUuOTE2NzUgTDExLjE3Mjc3NzgsMTMuMzkyNzUgWiBNMjEuNDk2MzA3MiwzMC41NzA3NSBDMjEuNDk2MzA3MiwzMC45MDY3NSAyMS4xOTg5MjE2LDMxLjIwMDc1IDIwLjg1OTA1MjMsMzEuMTU4NzUgQzIwLjg1OTA1MjMsMzEuMTU4NzUgMTYuNjUzMTY5OSwzMS4yMDA3NSAxNi42NTMxNjk5LDMxLjE1ODc1IEMxNi4zMTMzMDA3LDMxLjIwMDc1IDE2LjAxNTkxNSwzMC45MDY3NSAxNi4wMTU5MTUsMzAuNTcwNzUgTDE2LjAxNTkxNSwyNi4wMzQ3NSBDMTYuMDE1OTE1LDI1LjUzMDc1IDE2LjQ0MDc1MTYsMjUuMTUyNzUgMTYuOTA4MDcxOSwyNS4xNTI3NSBMMjAuNjA0MTUwMywyNS4xNTI3NSBDMjEuMTEzOTU0MiwyNS4xNTI3NSAyMS40OTYzMDcyLDI1LjU3Mjc1IDIxLjQ5NjMwNzIsMjYuMDM0NzUgTDIxLjQ5NjMwNzIsMzAuNTcwNzUgWiBNMTguNzc3MzUyOSwyNC43NzQ3NSBDMTkuNDU3MDkxNSwyNC43NzQ3NSAxOS45NjY4OTU0LDI0LjI3MDc1IDE5Ljk2Njg5NTQsMjMuNTk4NzUgQzE5Ljk2Njg5NTQsMjIuOTI2NzUgMTkuNDU3MDkxNSwyMi40MjI3NSAxOC43NzczNTI5LDIyLjQyMjc1IEMxOC4wOTc2MTQ0LDIyLjQyMjc1IDE3LjU4NzgxMDUsMjIuOTI2NzUgMTcuNTg3ODEwNSwyMy41OTg3NSBDMTcuNTg3ODEwNSwyNC4yNzA3NSAxOC4wOTc2MTQ0LDI0Ljc3NDc1IDE4Ljc3NzM1MjksMjQuNzc0NzUgWiBNMTUuNzYxMDEzMSwzMC41NzA3NSBDMTUuNzYxMDEzMSwzMC45MDY3NSAxNS40NjM2Mjc1LDMxLjIwMDc1IDE1LjEyMzc1ODIsMzEuMTU4NzUgQzE1LjEyMzc1ODIsMzEuMTU4NzUgMTAuOTE3ODc1OCwzMS4yMDA3NSAxMC45MTc4NzU4LDMxLjE1ODc1IEMxMC41NzgwMDY1LDMxLjIwMDc1IDEwLjI4MDYyMDksMzAuOTA2NzUgMTAuMjgwNjIwOSwzMC41NzA3NSBMMTAuMjgwNjIwOSwyNi4wMzQ3NSBDMTAuMjgwNjIwOSwyNS41MzA3NSAxMC43MDU0NTc1LDI1LjE1Mjc1IDExLjEzMDI5NDEsMjUuMTUyNzUgTDE0Ljg2ODg1NjIsMjUuMTUyNzUgQzE1LjM3ODY2MDEsMjUuMTUyNzUgMTUuNzYxMDEzMSwyNS41NzI3NSAxNS43NjEwMTMxLDI2LjAzNDc1IEwxNS43NjEwMTMxLDMwLjU3MDc1IFogTTEzLjA0MjA1ODgsMjQuNzc0NzUgQzEzLjY3OTMxMzcsMjQuNzc0NzUgMTQuMjMxNjAxMywyNC4yNzA3NSAxNC4yMzE2MDEzLDIzLjU5ODc1IEMxNC4yMzE2MDEzLDIyLjkyNjc1IDEzLjY3OTMxMzcsMjIuNDIyNzUgMTMuMDQyMDU4OCwyMi40MjI3NSBDMTIuMzYyMzIwMywyMi40MjI3NSAxMS44MTAwMzI3LDIyLjkyNjc1IDExLjgxMDAzMjcsMjMuNTk4NzUgQzExLjgxMDAzMjcsMjQuMjcwNzUgMTIuMzYyMzIwMywyNC43NzQ3NSAxMy4wNDIwNTg4LDI0Ljc3NDc1IFogTTkuOTgzMjM1MjksMzAuNTcwNzUgQzEwLjAyNTcxOSwzMC45MDY3NSA5LjY4NTg0OTY3LDMxLjIwMDc1IDkuMzg4NDY0MDUsMzEuMTU4NzUgQzkuMzg4NDY0MDUsMzEuMTU4NzUgNS4xODI1ODE3LDMxLjIwMDc1IDUuMTQwMDk4MDQsMzEuMTU4NzUgQzQuODQyNzEyNDIsMzEuMjAwNzUgNC41MDI4NDMxNCwzMC45MDY3NSA0LjUwMjg0MzE0LDMwLjU3MDc1IEw0LjUwMjg0MzE0LDI2LjAzNDc1IEM0LjUwMjg0MzE0LDI1LjUzMDc1IDQuOTI3Njc5NzQsMjUuMTUyNzUgNS4zOTUsMjUuMTUyNzUgTDkuMTMzNTYyMDksMjUuMTUyNzUgQzkuNjQzMzY2MDEsMjUuMTUyNzUgMTAuMDI1NzE5LDI1LjU3Mjc1IDkuOTgzMjM1MjksMjYuMDM0NzUgTDkuOTgzMjM1MjksMzAuNTcwNzUgWiBNNy4yNjQyODEwNSwyNC43NzQ3NSBDNy45NDQwMTk2MSwyNC43NzQ3NSA4LjQ5NjMwNzE5LDI0LjI3MDc1IDguNDUzODIzNTMsMjMuNTk4NzUgQzguNDk2MzA3MTksMjIuOTI2NzUgNy45NDQwMTk2MSwyMi40MjI3NSA3LjI2NDI4MTA1LDIyLjQyMjc1IEM2LjYyNzAyNjE0LDIyLjQyMjc1IDYuMDc0NzM4NTYsMjIuOTI2NzUgNi4wNzQ3Mzg1NiwyMy41OTg3NSBDNi4wNzQ3Mzg1NiwyNC4yNzA3NSA2LjYyNzAyNjE0LDI0Ljc3NDc1IDcuMjY0MjgxMDUsMjQuNzc0NzUgWiIgaWQ9IlNoYXBlIj48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNyAuMzMzQzMuMzMzLjMzMy4zMzMgMy4zMzMuMzMzIDdzMyA2LjY2NyA2LjY2NyA2LjY2NyA2LjY2Ny0zIDYuNjY3LTYuNjY3UzEwLjY2Ny4zMzMgNyAuMzMzem0wIDEyYy0yLjkzMyAwLTUuMzMzLTIuNC01LjMzMy01LjMzMyAwLTIuOTMzIDIuNC01LjMzMyA1LjMzMy01LjMzMyAyLjkzMyAwIDUuMzMzIDIuNCA1LjMzMyA1LjMzMyAwIDIuOTMzLTIuNCA1LjMzMy01LjMzMyA1LjMzM3ptLjMzMy04LjY2NmgtMXY0TDkuOCA5LjhsLjUzMy0uODY3LTMtMS44VjMuNjY3eiIgZmlsbD0iI2ZmZiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNyAuMzMzQzMuMzMzLjMzMy4zMzMgMy4zMzMuMzMzIDdzMyA2LjY2NyA2LjY2NyA2LjY2NyA2LjY2Ny0zIDYuNjY3LTYuNjY3UzEwLjY2Ny4zMzMgNyAuMzMzem0wIDEyYy0yLjkzMyAwLTUuMzMzLTIuNC01LjMzMy01LjMzMyAwLTIuOTMzIDIuNC01LjMzMyA1LjMzMy01LjMzMyAyLjkzMyAwIDUuMzMzIDIuNCA1LjMzMyA1LjMzMyAwIDIuOTMzLTIuNCA1LjMzMy01LjMzMyA1LjMzM3ptLjMzMy04LjY2NmgtMXY0TDkuOCA5LjhsLjUzMy0uODY3LTMtMS44VjMuNjY3eiIgZmlsbD0iIzIzMjMyMyIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgMjF2LTIuMzc4aDQuNTVWMTMuOTRoNC41MjVWOS4yMzVoNC42di00LjYzaDQuNTVWMEgyNXYyLjMyOGgtNC41djQuNjNoLTQuNTc1djQuNjhoLTQuNTV2NC42NTZINi44VjIxeiIgZmlsbC1ydWxlPSJub256ZXJvIiBmaWxsPSIjMDAwMDAwIi8+PC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAwIDEwMDAiPjxwYXRoIGQ9Ik0xMCA4ODB2LTk0aDE4MlY2MDFoMTgxVjQxNWgxODRWMjMyaDE4MlY1MGgyNzF2OTJIODMwdjE4M0g2NDd2MTg1SDQ2NXYxODRIMjgydjE4NnptNTY5LTQycTItMTIgMTItMjJsMTU3LTE1N2gtODNxLTIyIDAtMzAtMTd0MC0zNHE4LTE3IDMwLTE3aDE2MXExMiAwIDIxIDV0MTMgMTRxNCA5IDUgMjF2MTYwcTAgMjEtMTcgMzB0LTM0IDBxLTE3LTktMTctMzB2LTgyTDY0MiA4NjRxLTExIDktMjMgMTJ0LTIxLTNxLTktNi0xNS0xNXQtNC0yMHoiIGZpbGw9IiMwMDAwMDAiLz48L3N2Zz4="},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgMjF2LTIuMzc4aDQuNTVWMTMuOTRoNC41MjVWOS4yMzVoNC42di00LjYzaDQuNTVWMEgyNXYyLjMyOGgtNC41djQuNjNoLTQuNTc1djQuNjhoLTQuNTV2NC42NTZINi44VjIxSDB6bTE0LjE3NS0xLjExM3YtNC4wNDhjMC0uMzU1LjE1LS42MDguNDUtLjc2LjMtLjE1MS41ODMtLjE1MS44NSAwIC4yNjcuMTUyLjQwOC40MDUuNDI1Ljc2djIuMDc0bDMuODc1LTMuOTIxYy4xNjctLjE3LjM1LS4yNzkuNTUtLjMzLjItLjA1LjM4My0uMDE2LjU1LjEwMi4xNjcuMTE4LjI5Mi4yMzYuMzc1LjM1NC4wODMuMTE4LjExNy4yOTUuMS41MzFhLjcyLjcyIDAgMCAxLS4zLjU1N2wtMy45MjUgMy45NzJIMTkuMmMuMjY3IDAgLjQ3NS4wODUuNjI1LjI1My4xNS4xNjkuMjI1LjM3MS4yMjUuNjA4IDAgLjIzNi0uMDc1LjQzLS4yMjUuNTgxLS4xNS4xNTItLjM1OC4yNDUtLjYyNS4yNzloLTQuMDI1Yy0uMyAwLS41NDItLjA5My0uNzI1LS4yNzktLjE4My0uMTg1LS4yNzUtLjQzLS4yNzUtLjczM3oiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0iIzAwMDAwMCIvPjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE2IDQuM2MxIDAgMS44LS44IDEuOC0xLjhTMTcgLjcgMTYgLjdzLTEuOC44LTEuOCAxLjguOCAxLjggMS44IDEuOHptMyA3LjJjLTIuOCAwLTUgMi4yLTUgNXMyLjIgNSA1IDUgNS0yLjIgNS01LTIuMi01LTUtNXptMCA4LjVjLTEuOSAwLTMuNS0xLjYtMy41LTMuNVMxNy4xIDEzIDE5IDEzczMuNSAxLjYgMy41IDMuNVMyMC45IDIwIDE5IDIwek0xNC44IDkuNUgxOVY3LjdoLTMuMmwtMS45LTMuM2MtLjMtLjUtLjgtLjgtMS41LS44LS41IDAtLjkuMi0xLjIuNUw3LjUgNy44Yy0uMy4zLS41LjctLjUgMS4yIDAgLjYuMyAxLjIuOCAxLjVsMy40IDJ2NUgxM1YxMWwtMi4yLTEuN0wxMy4xIDdsMS43IDIuNXptLTkuOCAyYy0yLjggMC01IDIuMi01IDVzMi4yIDUgNSA1IDUtMi4yIDUtNS0yLjItNS01LTV6TTUgMjBjLTEuOSAwLTMuNS0xLjYtMy41LTMuNVMzLjEgMTMgNSAxM3MzLjUgMS42IDMuNSAzLjVTNi45IDIwIDUgMjB6IiBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4="},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE2IDQuM2MxIDAgMS44LS44IDEuOC0xLjhTMTcgLjcgMTYgLjdzLTEuOC44LTEuOCAxLjguOCAxLjggMS44IDEuOHptMyA3LjJjLTIuOCAwLTUgMi4yLTUgNXMyLjIgNSA1IDUgNS0yLjIgNS01LTIuMi01LTUtNXptMCA4LjVjLTEuOSAwLTMuNS0xLjYtMy41LTMuNVMxNy4xIDEzIDE5IDEzczMuNSAxLjYgMy41IDMuNVMyMC45IDIwIDE5IDIwek0xNC44IDkuNUgxOVY3LjdoLTMuMmwtMS45LTMuM2MtLjMtLjUtLjgtLjgtMS41LS44LS41IDAtLjkuMi0xLjIuNUw3LjUgNy44Yy0uMy4zLS41LjctLjUgMS4yIDAgLjYuMyAxLjIuOCAxLjVsMy40IDJ2NUgxM1YxMWwtMi4yLTEuN0wxMy4xIDdsMS43IDIuNXptLTkuOCAyYy0yLjggMC01IDIuMi01IDVzMi4yIDUgNSA1IDUtMi4yIDUtNS0yLjItNS01LTV6TTUgMjBjLTEuOSAwLTMuNS0xLjYtMy41LTMuNVMzLjEgMTMgNSAxM3MzLjUgMS42IDMuNSAzLjVTNi45IDIwIDUgMjB6IiBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4="},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTkiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgMTRjMCAuOS40IDEuNyAxIDIuMlYxOGMwIC42LjQgMSAxIDFoMWMuNiAwIDEtLjQgMS0xdi0xaDh2MWMwIC42LjQgMSAxIDFoMWMuNiAwIDEtLjQgMS0xdi0xLjhjLjYtLjUgMS0xLjMgMS0yLjJWNGMwLTMuNS0zLjYtNC04LTRTMCAuNSAwIDR2MTB6bTMuNSAxYy0uOCAwLTEuNS0uNy0xLjUtMS41UzIuNyAxMiAzLjUgMTJzMS41LjcgMS41IDEuNVM0LjMgMTUgMy41IDE1em05IDBjLS44IDAtMS41LS43LTEuNS0xLjVzLjctMS41IDEuNS0xLjUgMS41LjcgMS41IDEuNS0uNyAxLjUtMS41IDEuNXpNMTQgOUgyVjRoMTJ2NXoiIGZpbGw9IiNmZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTkiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgMTRjMCAuOS40IDEuNyAxIDIuMlYxOGMwIC42LjQgMSAxIDFoMWMuNiAwIDEtLjQgMS0xdi0xaDh2MWMwIC42LjQgMSAxIDFoMWMuNiAwIDEtLjQgMS0xdi0xLjhjLjYtLjUgMS0xLjMgMS0yLjJWNGMwLTMuNS0zLjYtNC04LTRTMCAuNSAwIDR2MTB6bTMuNSAxYy0uOCAwLTEuNS0uNy0xLjUtMS41UzIuNyAxMiAzLjUgMTJzMS41LjcgMS41IDEuNVM0LjMgMTUgMy41IDE1em05IDBjLS44IDAtMS41LS43LTEuNS0xLjVzLjctMS41IDEuNS0xLjUgMS41LjcgMS41IDEuNS0uNyAxLjUtMS41IDEuNXpNMTQgOUgyVjRoMTJ2NXoiIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTggLjVjLTQuNCAwLTggLjUtOCA0VjE0YzAgMS45IDEuNiAzLjUgMy41IDMuNUwyIDE5di41aDEyVjE5bC0xLjUtMS41YzEuOSAwIDMuNS0xLjYgMy41LTMuNVY0LjVjMC0zLjUtMy42LTQtOC00em0tNC41IDE1Yy0uOCAwLTEuNS0uNy0xLjUtMS41cy43LTEuNSAxLjUtMS41UzUgMTMuMiA1IDE0cy0uNyAxLjUtMS41IDEuNXptMy41LTZIMnYtNWg1djV6bTUuNSA2Yy0uOCAwLTEuNS0uNy0xLjUtMS41cy43LTEuNSAxLjUtMS41IDEuNS43IDEuNSAxLjUtLjcgMS41LTEuNSAxLjV6bTEuNS02SDl2LTVoNXY1eiIgZmlsbD0iI2ZmZiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTggLjVjLTQuNCAwLTggLjUtOCA0VjE0YzAgMS45IDEuNiAzLjUgMy41IDMuNUwyIDE5di41aDEyVjE5bC0xLjUtMS41YzEuOSAwIDMuNS0xLjYgMy41LTMuNVY0LjVjMC0zLjUtMy42LTQtOC00em0tNC41IDE1Yy0uOCAwLTEuNS0uNy0xLjUtMS41cy43LTEuNSAxLjUtMS41UzUgMTMuMiA1IDE0cy0uNyAxLjUtMS41IDEuNXptMy41LTZIMnYtNWg1djV6bTUuNSA2Yy0uOCAwLTEuNS0uNy0xLjUtMS41cy43LTEuNSAxLjUtMS41IDEuNS43IDEuNSAxLjUtLjcgMS41LTEuNSAxLjV6bTEuNS02SDl2LTVoNXY1eiIgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTggLjVjLTQuNCAwLTggLjUtOCA0VjE0YzAgMS45IDEuNiAzLjUgMy41IDMuNUwyIDE5di41aDEyVjE5bC0xLjUtMS41YzEuOSAwIDMuNS0xLjYgMy41LTMuNVY0LjVjMC0zLjUtMy42LTQtOC00em0tNC41IDE1Yy0uOCAwLTEuNS0uNy0xLjUtMS41cy43LTEuNSAxLjUtMS41UzUgMTMuMiA1IDE0cy0uNyAxLjUtMS41IDEuNXptMy41LTZIMnYtNWg1djV6bTUuNSA2Yy0uOCAwLTEuNS0uNy0xLjUtMS41cy43LTEuNSAxLjUtMS41IDEuNS43IDEuNSAxLjUtLjcgMS41LTEuNSAxLjV6bTEuNS02SDl2LTVoNXY1eiIgZmlsbD0iI2ZmZiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTggLjVjLTQuNCAwLTggLjUtOCA0VjE0YzAgMS45IDEuNiAzLjUgMy41IDMuNUwyIDE5di41aDEyVjE5bC0xLjUtMS41YzEuOSAwIDMuNS0xLjYgMy41LTMuNVY0LjVjMC0zLjUtMy42LTQtOC00em0tNC41IDE1Yy0uOCAwLTEuNS0uNy0xLjUtMS41cy43LTEuNSAxLjUtMS41UzUgMTMuMiA1IDE0cy0uNyAxLjUtMS41IDEuNXptMy41LTZIMnYtNWg1djV6bTUuNSA2Yy0uOCAwLTEuNS0uNy0xLjUtMS41cy43LTEuNSAxLjUtMS41IDEuNS43IDEuNSAxLjUtLjcgMS41LTEuNSAxLjV6bTEuNS02SDl2LTVoNXY1eiIgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgMTQuNUMwIDE2LjQgMS42IDE4IDMuNSAxOEwyIDE5LjV2LjVoMTJ2LS41TDEyLjUgMThjMS45IDAgMy41LTEuNiAzLjUtMy41VjRjMC0zLjUtMy42LTQtOC00UzAgLjUgMCA0djEwLjV6TTggMTZjLTEuMSAwLTItLjktMi0ycy45LTIgMi0yIDIgLjkgMiAyLS45IDItMiAyem02LTdIMlY0aDEydjV6IiBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4="},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgMTQuNUMwIDE2LjQgMS42IDE4IDMuNSAxOEwyIDE5LjV2LjVoMTJ2LS41TDEyLjUgMThjMS45IDAgMy41LTEuNiAzLjUtMy41VjRjMC0zLjUtMy42LTQtOC00UzAgLjUgMCA0djEwLjV6TTggMTZjLTEuMSAwLTItLjktMi0ycy45LTIgMi0yIDIgLjkgMiAyLS45IDItMiAyem02LTdIMlY0aDEydjV6IiBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4="},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTIwIDEwYzAtLjgtLjctMS41LTEuNS0xLjVIMTNsLTUtOEg2bDIuNSA4SDNsLTEuNS0ySDBMMSAxMGwtMSAzLjVoMS41bDEuNS0yaDUuNWwtMi41IDhoMmw1LThoNS41Yy44IDAgMS41LS43IDEuNS0xLjV6IiBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4="},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTIwIDEwYzAtLjgtLjctMS41LTEuNS0xLjVIMTNsLTUtOEg2bDIuNSA4SDNsLTEuNS0ySDBMMSAxMGwtMSAzLjVoMS41bDEuNS0yaDUuNWwtMi41IDhoMmw1LThoNS41Yy44IDAgMS41LS43IDEuNS0xLjV6IiBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4="},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMSAyMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxjaXJjbGUgZmlsbD0iIzBEQTNGMyIgY3g9IjEwLjUiIGN5PSIxMC41IiByPSIxMC41Ii8+PHBhdGggZD0iTTcuMjc3IDE0SDYuMTgybDMuNzI2LTkuMDk0aDEuMTk2TDE0LjU0NCAxNGgtMS4yNzhsLS45NDQtMi41MDJIOC4zMUw3LjI3NiAxNHptMS4zOS0zLjQxaDMuMzA0bC0xLjU5My00LjIyNS0xLjcxIDQuMjI1eiIgZmlsbD0iI0ZGRiIvPjwvZz48L3N2Zz4="},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMSAyMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxjaXJjbGUgZmlsbD0iIzBEQTNGMyIgY3g9IjEwLjUiIGN5PSIxMC41IiByPSIxMC41Ii8+PHBhdGggZD0iTTExLjk1IDEwLjIyYy43Mi4xNzUgMS4yNC40NyAxLjU2My44ODYuMzIyLjQxNi40ODMuODg2LjQ4MyAxLjQxIDAgLjQzMy0uMTEuODQtLjMzNCAxLjIyNC0uMjIzLjM4My0uNTQuNjktLjk1LjkxNy0uNDEuMjMtMS4xMTguMzQzLTIuMTI2LjM0M0g3Ljg2VjUuOTA2aDIuNDE1YzEuMTAyIDAgMS44NC4wOCAyLjIxOC4yMzguMzc3LjE1OC42Ni4zOS44NTMuNy4xOS4zMDguMjg3LjY1LjI4NyAxLjAyNSAwIC40MTctLjEyLjgzMi0uMzYzIDEuMjQ0LS4yNDMuNDEyLS42ODIuNzgtMS4zMiAxLjEwNXptLTIuOTA1LS4zNmgxLjEzN2MuNTg2IDAgMS4wMjQtLjA3NyAxLjMxNS0uMjMzLjI5LS4xNTYuNTI0LS4zOC42OTctLjY3LjE3NC0uMjkyLjI2LS41OTIuMjYtLjkgMC0uMzQtLjEzNS0uNjMtLjQwNi0uODczLS4yNzItLjI0My0uNzYtLjM2NC0xLjQ2OC0uMzY0SDkuMDQ1djMuMDR6bTAgNC4yMzJoMS42N2MuNzkgMCAxLjMzLS4xNDggMS42Mi0uNDQzLjI5LS4yOTYuNDM2LS42NDQuNDM2LTEuMDQ2IDAtLjMyNS0uMDkyLS42MjQtLjI4LS44OTctLjE4Ny0uMjczLS40NjYtLjQ5Ny0uODM1LS42Ny0uMzctLjE3NS0uOTQ2LS4yNjItMS43My0uMjYyaC0uODh2My4zMTd6IiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjIycHgiIGhlaWdodD0iMjJweCIgdmlld0JveD0iMCAwIDIyIDIyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0MC4zICgzMzgzOSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+ZGotbW0tdGFyZ2V0LWJsdWU8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iSW50ZXJmYWNlLWljb25zIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iZGotbW0tdGFyZ2V0LWJsdWUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC05LjAwMDAwMCwgLTkuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDguMDAwMDAwLCA4LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9Im1hc2siIHBvaW50cz0iMCAwIDI0IDAgMjQgMjQgMCAyNCI+PC9wb2x5Z29uPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTEyLDggQzkuOCw4IDgsOS44IDgsMTIgQzgsMTQuMiA5LjgsMTYgMTIsMTYgQzE0LjIsMTYgMTYsMTQuMiAxNiwxMiBDMTYsOS44IDE0LjIsOCAxMiw4IEwxMiw4IFogTTIwLjksMTEgQzIwLjQsNi44IDE3LjEsMy41IDEzLDMuMSBMMTMsMSBMMTEsMSBMMTEsMy4xIEM2LjgsMy41IDMuNSw2LjggMy4xLDExIEwxLDExIEwxLDEzIEwzLjEsMTMgQzMuNiwxNy4yIDYuOSwyMC41IDExLDIwLjkgTDExLDIzIEwxMywyMyBMMTMsMjAuOSBDMTcuMiwyMC40IDIwLjUsMTcuMSAyMC45LDEzIEwyMywxMyBMMjMsMTEgTDIwLjksMTEgTDIwLjksMTEgWiBNMTIsMTkgQzguMSwxOSA1LDE1LjkgNSwxMiBDNSw4LjEgOC4xLDUgMTIsNSBDMTUuOSw1IDE5LDguMSAxOSwxMiBDMTksMTUuOSAxNS45LDE5IDEyLDE5IEwxMiwxOSBaIiBpZD0idGFyZ2V0IiBmaWxsPSIjMDBBM0ZGIj48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0MC4zICgzMzgzOSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+ZGotbW0tdGFyZ2V0LWJsdWU8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iSW50ZXJmYWNlLWljb25zIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iZGotbW0tdGFyZ2V0LWJsdWUtY29weSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTguMDAwMDAwLCAtOC4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9ImRqLW1tLXRhcmdldC1ibHVlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMi4wMDAwMDAsIC0yLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9Im1hc2siIHBvaW50cz0iMTAgMTAgMzQgMTAgMzQgMzQgMTAgMzQiPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0yMiwxNy4yNzI3MjczIEMxOS40LDE3LjI3MjcyNzMgMTcuMjcyNzI3MywxOS40IDE3LjI3MjcyNzMsMjIgQzE3LjI3MjcyNzMsMjQuNiAxOS40LDI2LjcyNzI3MjcgMjIsMjYuNzI3MjcyNyBDMjQuNiwyNi43MjcyNzI3IDI2LjcyNzI3MjcsMjQuNiAyNi43MjcyNzI3LDIyIEMyNi43MjcyNzI3LDE5LjQgMjQuNiwxNy4yNzI3MjczIDIyLDE3LjI3MjcyNzMgTDIyLDE3LjI3MjcyNzMgWiBNMzIuNTE4MTgxOCwyMC44MTgxODE4IEMzMS45MjcyNzI3LDE1Ljg1NDU0NTUgMjguMDI3MjcyNywxMS45NTQ1NDU1IDIzLjE4MTgxODIsMTEuNDgxODE4MiBMMjMuMTgxODE4Miw5IEwyMC44MTgxODE4LDkgTDIwLjgxODE4MTgsMTEuNDgxODE4MiBDMTUuODU0NTQ1NSwxMS45NTQ1NDU1IDExLjk1NDU0NTUsMTUuODU0NTQ1NSAxMS40ODE4MTgyLDIwLjgxODE4MTggTDksMjAuODE4MTgxOCBMOSwyMy4xODE4MTgyIEwxMS40ODE4MTgyLDIzLjE4MTgxODIgQzEyLjA3MjcyNzMsMjguMTQ1NDU0NSAxNS45NzI3MjczLDMyLjA0NTQ1NDUgMjAuODE4MTgxOCwzMi41MTgxODE4IEwyMC44MTgxODE4LDM1IEwyMy4xODE4MTgyLDM1IEwyMy4xODE4MTgyLDMyLjUxODE4MTggQzI4LjE0NTQ1NDUsMzEuOTI3MjcyNyAzMi4wNDU0NTQ1LDI4LjAyNzI3MjcgMzIuNTE4MTgxOCwyMy4xODE4MTgyIEwzNSwyMy4xODE4MTgyIEwzNSwyMC44MTgxODE4IEwzMi41MTgxODE4LDIwLjgxODE4MTggTDMyLjUxODE4MTgsMjAuODE4MTgxOCBaIE0yMiwzMC4yNzI3MjczIEMxNy4zOTA5MDkxLDMwLjI3MjcyNzMgMTMuNzI3MjcyNywyNi42MDkwOTA5IDEzLjcyNzI3MjcsMjIgQzEzLjcyNzI3MjcsMTcuMzkwOTA5MSAxNy4zOTA5MDkxLDEzLjcyNzI3MjcgMjIsMTMuNzI3MjcyNyBDMjYuNjA5MDkwOSwxMy43MjcyNzI3IDMwLjI3MjcyNzMsMTcuMzkwOTA5MSAzMC4yNzI3MjczLDIyIEMzMC4yNzI3MjczLDI2LjYwOTA5MDkgMjYuNjA5MDkwOSwzMC4yNzI3MjczIDIyLDMwLjI3MjcyNzMgTDIyLDMwLjI3MjcyNzMgWiIgaWQ9InRhcmdldCIgZmlsbD0iIzAwQTNGRiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjIuMDAwMDAwLCAyMi4wMDAwMDApIHJvdGF0ZSg0NS4wMDAwMDApIHRyYW5zbGF0ZSgtMjIuMDAwMDAwLCAtMjIuMDAwMDAwKSAiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjIuMDAwMDAwLCAyMi4wMDAwMDApIHJvdGF0ZSg0NS4wMDAwMDApIHRyYW5zbGF0ZSgtMjIuMDAwMDAwLCAtMjIuMDAwMDAwKSB0cmFuc2xhdGUoNy4wMDAwMDAsIDcuMDAwMDAwKSIgZmlsbD0iIzAwQTNGRiI+CiAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlJlY3RhbmdsZS0yIiBwb2ludHM9IjEzIDAgMTcgMCAxNSA5LjUiPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iUmVjdGFuZ2xlLTItQ29weSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTUuMDAwMDAwLCAyNS4yNTAwMDApIHNjYWxlKDEsIC0xKSB0cmFuc2xhdGUoLTE1LjAwMDAwMCwgLTI1LjI1MDAwMCkgIiBwb2ludHM9IjEzIDIwLjUgMTcgMjAuNSAxNSAzMCI+PC9wb2x5Z29uPgogICAgICAgICAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJSZWN0YW5nbGUtMi1Db3B5LTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI1LjI1MDAwMCwgMTUuMDAwMDAwKSBzY2FsZSgxLCAtMSkgcm90YXRlKDkwLjAwMDAwMCkgdHJhbnNsYXRlKC0yNS4yNTAwMDAsIC0xNS4wMDAwMDApICIgcG9pbnRzPSIyMy4yNSAxMC4yNSAyNy4yNSAxMC4yNSAyNS4yNSAxOS43NSI+PC9wb2x5Z29uPgogICAgICAgICAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJSZWN0YW5nbGUtMi1Db3B5LTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQuNzUwMDAwLCAxNS4wMDAwMDApIHNjYWxlKC0xLCAtMSkgcm90YXRlKDkwLjAwMDAwMCkgdHJhbnNsYXRlKC00Ljc1MDAwMCwgLTE1LjAwMDAwMCkgIiBwb2ludHM9IjIuNzUgMTAuMjUgNi43NSAxMC4yNSA0Ljc1IDE5Ljc1Ij48L3BvbHlnb24+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjIwcHgiIGhlaWdodD0iMjBweCIgdmlld0JveD0iMCAwIDIwIDIwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0MC4zICgzMzgzOSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+ZGotbW0tdGFyZ2V0LW9mZno8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMTIsMjAgQzcuNTQyODU3MTQsMjAgNCwxNi40NTcxNDI5IDQsMTIgQzQsNy41NDI4NTcxNCA3LjU0Mjg1NzE0LDQgMTIsNCBDMTYuNDU3MTQyOSw0IDIwLDcuNTQyODU3MTQgMjAsMTIgQzIwLDE2LjQ1NzE0MjkgMTYuNDU3MTQyOSwyMCAxMiwyMCBMMTIsMjAgWiIgaWQ9InBhdGgtMSI+PC9wYXRoPgogICAgICAgIDxtYXNrIGlkPSJtYXNrLTIiIG1hc2tDb250ZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBtYXNrVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiB4PSItMiIgeT0iLTIiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+CiAgICAgICAgICAgIDxyZWN0IHg9IjIiIHk9IjIiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0id2hpdGUiPjwvcmVjdD4KICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcGF0aC0xIiBmaWxsPSJibGFjayI+PC91c2U+CiAgICAgICAgPC9tYXNrPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IkludGVyZmFjZS1pY29ucyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9ImRqLW1tLXRhcmdldC1vZmZ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTAuMDAwMDAwLCAtMTAuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDguMDAwMDAwLCA4LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9Im1hc2siIHBvaW50cz0iMCAwIDI0IDAgMjQgMjQgMCAyNCI+PC9wb2x5Z29uPgogICAgICAgICAgICAgICAgPHVzZSBpZD0idGFyZ2V0IiBzdHJva2Utb3BhY2l0eT0iMC43MTU4MzQ0NjYiIHN0cm9rZT0iIzJCNzdBMSIgbWFzaz0idXJsKCNtYXNrLTIpIiBzdHJva2Utd2lkdGg9IjQiIHN0cm9rZS1kYXNoYXJyYXk9IjMsMSIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIsOCBDOS44LDggOCw5LjggOCwxMiBDOCwxNC4yIDkuOCwxNiAxMiwxNiBDMTQuMiwxNiAxNiwxNC4yIDE2LDEyIEMxNiw5LjggMTQuMiw4IDEyLDggTDEyLDggWiIgaWQ9IlBhdGgiIGZpbGwtb3BhY2l0eT0iMC4zMjg2MzQ1MTEiIGZpbGw9IiMwMDMzNTAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0MiAoMzY3ODEpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPmRqLW1tLWV4Y2xhbWF0aW9uLWNpcmNsZS15ZWxsb3c8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8Y2lyY2xlIGlkPSJwYXRoLTEiIGN4PSIxMiIgY3k9IjEyIiByPSIxMCI+PC9jaXJjbGU+CiAgICAgICAgPG1hc2sgaWQ9Im1hc2stMiIgbWFza0NvbnRlbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIG1hc2tVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIHg9Ii0yIiB5PSItMiIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij4KICAgICAgICAgICAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSJ3aGl0ZSI+PC9yZWN0PgogICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNwYXRoLTEiIGZpbGw9ImJsYWNrIj48L3VzZT4KICAgICAgICA8L21hc2s+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iSW50ZXJmYWNlLWljb25zIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iZGotbW0tZXhjbGFtYXRpb24tY2lyY2xlLXllbGxvdyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTguMDAwMDAwLCAtOC4wMDAwMDApIj4KICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOC4wMDAwMDAsIDguMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0ibWFzayIgcG9pbnRzPSIwIDAgMjQgMCAyNCAyNCAwIDI0Ij48L3BvbHlnb24+CiAgICAgICAgICAgICAgICA8ZyBpZD0iT3ZhbCI+CiAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRkZFNTAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgIDx1c2Ugc3Ryb2tlPSIjQjBCMEIwIiBtYXNrPSJ1cmwoI21hc2stMikiIHN0cm9rZS13aWR0aD0iNCIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjEzMjM1MywxMy41MTA2MzgzIEMxMy4yMDU4ODIzLDEzLjU2OTc0MDIgMTMuMTgzODIzNywxMy42MjI5MzEyIDEzLjE0NzA1ODgsMTMuNjcwMjEyOCBDMTMuMTEwMjkzOSwxMy43MTc0OTQzIDEzLjA0NTk1NjMsMTMuNzU3Mzg3NSAxMi45NTQwNDQxLDEzLjc4OTg5MzYgQzEyLjg2MjEzMTksMTMuODIyMzk5NyAxMi43MzcxMzMxLDEzLjg0NzUxNzYgMTIuNTc5MDQ0MSwxMy44NjUyNDgyIEMxMi40MjA5NTUxLDEzLjg4Mjk3ODggMTIuMjI3OTQyMywxMy44OTE4NDQgMTIsMTMuODkxODQ0IEMxMS43NjQ3MDQ3LDEzLjg5MTg0NCAxMS41Njk4NTM3LDEzLjg4Mjk3ODggMTEuNDE1NDQxMiwxMy44NjUyNDgyIEMxMS4yNjEwMjg2LDEzLjg0NzUxNzYgMTEuMTM3ODY4MSwxMy44MjIzOTk3IDExLjA0NTk1NTksMTMuNzg5ODkzNiBDMTAuOTU0MDQzNywxMy43NTczODc1IDEwLjg4OTcwNjEsMTMuNzE3NDk0MyAxMC44NTI5NDEyLDEzLjY3MDIxMjggQzEwLjgxNjE3NjMsMTMuNjIyOTMxMiAxMC43OTQxMTc3LDEzLjU2OTc0MDIgMTAuNzg2NzY0NywxMy41MTA2MzgzIEwxMC41LDUuNDYwOTkyOTEgQzEwLjUsNS4zODQxNjAzNyAxMC41MjIwNTg2LDUuMzE2MTk0MTUgMTAuNTY2MTc2NSw1LjI1NzA5MjIgQzEwLjYxMDI5NDMsNS4xOTc5OTAyNSAxMC42ODkzMzc3LDUuMTQ5MjMxODcgMTAuODAzMzA4OCw1LjExMDgxNTYgQzEwLjkxNzI4LDUuMDcyMzk5MzQgMTEuMDcxNjkwMiw1LjA0NDMyNjMzIDExLjI2NjU0NDEsNS4wMjY1OTU3NCBDMTEuNDYxMzk4LDUuMDA4ODY1MTYgMTEuNzA1ODgwOSw1IDEyLDUgQzEyLjI5NDExOTEsNSAxMi41MzY3NjM3LDUuMDEwMzQyNjkgMTIuNzI3OTQxMiw1LjAzMTAyODM3IEMxMi45MTkxMTg2LDUuMDUxNzE0MDUgMTMuMDcxNjkwNiw1LjA4MTI2NDU4IDEzLjE4NTY2MTgsNS4xMTk2ODA4NSBDMTMuMjk5NjMyOSw1LjE1ODA5NzEyIDEzLjM4MDUxNDUsNS4yMDUzNzc5NyAxMy40MjgzMDg4LDUuMjYxNTI0ODIgQzEzLjQ3NjEwMzIsNS4zMTc2NzE2OCAxMy41LDUuMzg0MTYwMzcgMTMuNSw1LjQ2MDk5MjkxIEwxMy4yMTMyMzUzLDEzLjUxMDYzODMgWiBNMTMuNSwxOC4xMDgxNTYgQzEzLjUsMTguMzUwNDc0IDEzLjQ3Njk1MDYsMTguNTU0MzcyNyAxMy40MzA4NTExLDE4LjcxOTg1ODIgQzEzLjM4NDc1MTUsMTguODg1MzQzNiAxMy4zMDMxOTIxLDE5LjAxODMyMSAxMy4xODYxNzAyLDE5LjExODc5NDMgQzEzLjA2OTE0ODQsMTkuMjE5MjY3NiAxMi45MTQ4OTQ2LDE5LjI5MTY2NjQgMTIuNzIzNDA0MywxOS4zMzU5OTI5IEMxMi41MzE5MTM5LDE5LjM4MDMxOTQgMTIuMjkwNzgxNiwxOS40MDI0ODIzIDEyLDE5LjQwMjQ4MjMgQzExLjcwOTIxODQsMTkuNDAyNDgyMyAxMS40NjYzMTMsMTkuMzgwMzE5NCAxMS4yNzEyNzY2LDE5LjMzNTk5MjkgQzExLjA3NjI0MDIsMTkuMjkxNjY2NCAxMC45MjE5ODY0LDE5LjIxOTI2NzYgMTAuODA4NTEwNiwxOS4xMTg3OTQzIEMxMC42OTUwMzQ5LDE5LjAxODMyMSAxMC42MTUyNDg1LDE4Ljg4NTM0MzYgMTAuNTY5MTQ4OSwxOC43MTk4NTgyIEMxMC41MjMwNDk0LDE4LjU1NDM3MjcgMTAuNSwxOC4zNTA0NzQgMTAuNSwxOC4xMDgxNTYgQzEwLjUsMTcuODU5OTI3OCAxMC41MjMwNDk0LDE3LjY1MTU5NjYgMTAuNTY5MTQ4OSwxNy40ODMxNTYgQzEwLjYxNTI0ODUsMTcuMzE0NzE1NSAxMC42OTUwMzQ5LDE3LjE3ODc4MyAxMC44MDg1MTA2LDE3LjA3NTM1NDYgQzEwLjkyMTk4NjQsMTYuOTcxOTI2MiAxMS4wNzYyNDAyLDE2Ljg5ODA0OTkgMTEuMjcxMjc2NiwxNi44NTM3MjM0IEMxMS40NjYzMTMsMTYuODA5Mzk2OSAxMS43MDkyMTg0LDE2Ljc4NzIzNCAxMiwxNi43ODcyMzQgQzEyLjI5MDc4MTYsMTYuNzg3MjM0IDEyLjUzMTkxMzksMTYuODA5Mzk2OSAxMi43MjM0MDQzLDE2Ljg1MzcyMzQgQzEyLjkxNDg5NDYsMTYuODk4MDQ5OSAxMy4wNjkxNDg0LDE2Ljk3MTkyNjIgMTMuMTg2MTcwMiwxNy4wNzUzNTQ2IEMxMy4zMDMxOTIxLDE3LjE3ODc4MyAxMy4zODQ3NTE1LDE3LjMxNDcxNTUgMTMuNDMwODUxMSwxNy40ODMxNTYgQzEzLjQ3Njk1MDYsMTcuNjUxNTk2NiAxMy41LDE3Ljg1OTkyNzggMTMuNSwxOC4xMDgxNTYgWiIgaWQ9IiEiIGZpbGw9IiM0MTQxNDEiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI4cHgiIGhlaWdodD0iMjhweCIgdmlld0JveD0iMCAwIDI4IDI4IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0My4yICgzOTA2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+ZGotbW0tdGFyZ2V0LXdvcmtpbmc8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMTIsMTkgQzguMSwxOSA1LDE1LjkgNSwxMiBDNSw4LjEgOC4xLDUgMTIsNSBDMTUuOSw1IDE5LDguMSAxOSwxMiBDMTksMTUuOSAxNS45LDE5IDEyLDE5IEwxMiwxOSBaIiBpZD0icGF0aC0xIj48L3BhdGg+CiAgICAgICAgPG1hc2sgaWQ9Im1hc2stMiIgbWFza0NvbnRlbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIG1hc2tVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIHg9Ii03IiB5PSItNyIgd2lkdGg9IjI4IiBoZWlnaHQ9IjI4Ij4KICAgICAgICAgICAgPHJlY3QgeD0iLTIiIHk9Ii0yIiB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIGZpbGw9IndoaXRlIj48L3JlY3Q+CiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI3BhdGgtMSIgZmlsbD0iYmxhY2siPjwvdXNlPgogICAgICAgIDwvbWFzaz4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSJJbnRlcmZhY2UtaWNvbnMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJkai1tbS10YXJnZXQtd29ya2luZyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTYuMDAwMDAwLCAtNi4wMDAwMDApIj4KICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOC4wMDAwMDAsIDguMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0ibWFzayIgZmlsbC1vcGFjaXR5PSIwIiBmaWxsPSIjRkZGRkZGIiBwb2ludHM9IjAgMCAyNCAwIDI0IDI0IDAgMjQiPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgIDx1c2UgaWQ9InRhcmdldCIgc3Ryb2tlPSIjMDBBM0ZGIiBtYXNrPSJ1cmwoI21hc2stMikiIHN0cm9rZS13aWR0aD0iMTQiIHN0cm9rZS1kYXNoYXJyYXk9IjIsMiIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMDAwMDAwLCAyLjAwMDAwMCkiPjwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgMjIgMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQzLjIgKDM5MDY5KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5kai1tbS10YXJnZXQtb2ZmPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IkludGVyZmFjZS1pY29ucyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9ImRqLW1tLXRhcmdldC1vZmYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC05LjAwMDAwMCwgLTkuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDguMDAwMDAwLCA4LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9Im1hc2siIHBvaW50cz0iMCAwIDI0IDAgMjQgMjQgMCAyNCI+PC9wb2x5Z29uPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTIwLjksMTEgQzIwLjQsNi44IDE3LjEsMy41IDEzLDMuMSBMMTMsMSBMMTEsMSBMMTEsMy4xIEM5LjksMy4yIDguOCwzLjUgNy44LDQgTDkuMyw1LjUgQzEwLjIsNS4yIDExLjEsNSAxMiw1IEMxNS45LDUgMTksOC4xIDE5LDEyIEMxOSwxMi45IDE4LjgsMTMuOCAxOC41LDE0LjcgTDIwLDE2LjIgQzIwLjUsMTUuMiAyMC44LDE0LjIgMjEsMTMgTDIzLDEzIEwyMywxMSBMMjAuOSwxMSBMMjAuOSwxMSBaIE0zLDQuMyBMNSw2LjMgQzQsNy42IDMuMyw5LjIgMy4xLDExIEwxLDExIEwxLDEzIEwzLjEsMTMgQzMuNiwxNy4yIDYuOSwyMC41IDExLDIwLjkgTDExLDIzIEwxMywyMyBMMTMsMjAuOSBDMTQuOCwyMC43IDE2LjQsMjAgMTcuNywxOC45IEwxOS43LDIwLjkgTDIxLDE5LjYgTDQuMywzIEwzLDQuMyBMMyw0LjMgWiBNMTYuMywxNy41IEMxNS4xLDE4LjUgMTMuNiwxOSAxMiwxOSBDOC4xLDE5IDUsMTUuOSA1LDEyIEM1LDEwLjQgNS41LDguOSA2LjUsNy43IEwxNi4zLDE3LjUgTDE2LjMsMTcuNSBaIiBpZD0iU2hhcGUiIGZpbGw9IiNBMEEwQTAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgMjIgMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQzLjIgKDM5MDY5KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5kai1tbS10YXJnZXQtdW5maXhlZC1ncmV5PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IkludGVyZmFjZS1pY29ucyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9ImRqLW1tLXRhcmdldC11bmZpeGVkLWdyZXkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC05LjAwMDAwMCwgLTkuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDguMDAwMDAwLCA4LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9Im1hc2siIHBvaW50cz0iMCAwIDI0IDAgMjQgMjQgMCAyNCI+PC9wb2x5Z29uPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTIwLjksMTEgQzIwLjQsNi44IDE3LjEsMy41IDEzLDMuMSBMMTMsMSBMMTEsMSBMMTEsMy4xIEM2LjgsMy41IDMuNSw2LjggMy4xLDExIEwxLDExIEwxLDEzIEwzLjEsMTMgQzMuNiwxNy4yIDYuOSwyMC41IDExLDIwLjkgTDExLDIzIEwxMywyMyBMMTMsMjAuOSBDMTcuMiwyMC40IDIwLjUsMTcuMSAyMC45LDEzIEwyMywxMyBMMjMsMTEgTDIwLjksMTEgTDIwLjksMTEgWiBNMTIsMTkgQzguMSwxOSA1LDE1LjkgNSwxMiBDNSw4LjEgOC4xLDUgMTIsNSBDMTUuOSw1IDE5LDguMSAxOSwxMiBDMTksMTUuOSAxNS45LDE5IDEyLDE5IEwxMiwxOSBaIiBpZD0iU2hhcGUiIGZpbGw9IiNBMEEwQTAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(e,i,t){var r;!function(t){"use strict";"object"==typeof e.exports?e.exports=t:void 0===(r=function(){return t}.apply(i,[]))||(e.exports=r)}(function(){return function(t,e){if(!t)throw"Need URL Params.";var i,r=t.indexOf("#"),n=t.substr(0,-1===r?t.length:r);function o(t){if(!t)return null;for(var e=t.split("&"),i={};e.length;){var r,n,o=e.shift(),a=o.indexOf("=");if(0!==a||o.lastIndexOf("=")!==o.indexOf("=")){if(-1!==a)r=o.substr(0,a),n=o.substr(a+1);else{if(!o)continue;r=o,n=void 0}i.hasOwnProperty(r)?("[object Array]"!=={}.toString.call(i[r])&&(i[r]=[i[r]]),i[r].push(n)):i[r]=n}}return i}e||(i=-1!==r&&t.lastIndexOf("#")===t.indexOf("#")?{hash:o(t.substr(r+1))}:{});var a=n.lastIndexOf("?");if(-1===a)return i;var s=n.substr(a+1);return-1===s||(i.search=o(s)),i}(arguments[0],arguments[1])})},function(t,e,i){"use strict";var a=i(153);function r(t){this.options=n(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function s(t,e){var i=t.geometry.coordinates;return{x:c(i[0]),y:p(i[1]),zoom:1/0,id:e,parentId:-1}}function u(t){return{type:"Feature",properties:l(t),geometry:{type:"Point",coordinates:[360*(t.x-.5),(e=t.y,i=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(i))/Math.PI-90)]}};var e,i}function l(t){var e=t.numPoints,i=1e4<=e?Math.round(e/1e3)+"k":1e3<=e?Math.round(e/100)/10+"k":e;return n(n({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:i})}function c(t){return t/360+.5}function p(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:1<i?1:i}function n(t,e){for(var i in e)t[i]=e[i];return t}function h(t){return t.x}function d(t){return t.y}t.exports=function(t){return new r(t)},r.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(t){return t}},load:function(t){var e=this.options.log;e&&console.time("total time");var i="prepare "+t.length+" points";e&&console.time(i);var r=(this.points=t).map(s);e&&console.timeEnd(i);for(var n=this.options.maxZoom;n>=this.options.minZoom;n--){var o=+Date.now();this.trees[n+1]=a(r,h,d,this.options.nodeSize,Float32Array),r=this._cluster(r,n),e&&console.log("z%d: %d clusters in %dms",n,r.length,Date.now()-o)}return this.trees[this.options.minZoom]=a(r,h,d,this.options.nodeSize,Float32Array),e&&console.timeEnd("total time"),this},getClusters:function(t,e){for(var i=this.trees[this._limitZoom(e)],r=i.range(c(t[0]),p(t[3]),c(t[2]),p(t[1])),n=[],o=0;o<r.length;o++){var a=i.points[r[o]];n.push(a.numPoints?u(a):this.points[a.id])}return n},getChildren:function(t,e){for(var i=this.trees[e+1].points[t],r=this.options.radius/(this.options.extent*Math.pow(2,e)),n=this.trees[e+1].within(i.x,i.y,r),o=[],a=0;a<n.length;a++){var s=this.trees[e+1].points[n[a]];s.parentId===t&&o.push(s.numPoints?u(s):this.points[s.id])}return o},getLeaves:function(t,e,i,r){i=i||10,r=r||0;var n=[];return this._appendLeaves(n,t,e,i,r,0),n},getTile:function(t,e,i){var r=this.trees[this._limitZoom(t)],n=Math.pow(2,t),o=this.options.extent,a=this.options.radius/o,s=(i-a)/n,u=(i+1+a)/n,l={features:[]};return this._addTileFeatures(r.range((e-a)/n,s,(e+1+a)/n,u),r.points,e,i,n,l),0===e&&this._addTileFeatures(r.range(1-a/n,s,1,u),r.points,n,i,n,l),e===n-1&&this._addTileFeatures(r.range(0,s,a/n,u),r.points,-1,i,n,l),l.features.length?l:null},getClusterExpansionZoom:function(t,e){for(;e<this.options.maxZoom;){var i=this.getChildren(t,e);if(e++,1!==i.length)break;t=i[0].properties.cluster_id}return e},_appendLeaves:function(t,e,i,r,n,o){for(var a=this.getChildren(e,i),s=0;s<a.length;s++){var u=a[s].properties;if(u.cluster?o+u.point_count<=n?o+=u.point_count:o=this._appendLeaves(t,u.cluster_id,i+1,r,n,o):o<n?o++:t.push(a[s]),t.length===r)break}return o},_addTileFeatures:function(t,e,i,r,n,o){for(var a=0;a<t.length;a++){var s=e[t[a]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(s.x*n-i)),Math.round(this.options.extent*(s.y*n-r))]],tags:s.numPoints?l(s):this.points[s.id].properties})}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var i=[],r=this.options.radius/(this.options.extent*Math.pow(2,e)),n=0;n<t.length;n++){var o=t[n];if(!(o.zoom<=e)){o.zoom=e;var a=this.trees[e+1],s=a.within(o.x,o.y,r),u=o.numPoints||1,l=o.x*u,c=o.y*u,p=null;this.options.reduce&&(p=this.options.initial(),this._accumulate(p,o));for(var h=0;h<s.length;h++){var d,f=a.points[s[h]];e<f.zoom&&(d=f.numPoints||1,f.zoom=e,l+=f.x*d,c+=f.y*d,u+=d,f.parentId=n,this.options.reduce&&this._accumulate(p,f))}1===u?i.push(o):(o.parentId=n,i.push({x:l/u,y:c/u,zoom:1/0,id:n,properties:p,parentId:-1,numPoints:u}))}}return i},_accumulate:function(t,e){var i=e.numPoints?e.properties:this.options.map(this.points[e.id].properties);this.options.reduce(t,i)}}},function(t,e){!function(t){"use strict";var e,i,a,r,n,o,s,u,l,c;function p(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function h(t){return"string"!=typeof t&&(t=String(t)),t}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function y(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function m(i){return new Promise(function(t,e){i.onload=function(){t(i.result)},i.onerror=function(){e(i.error)}})}function g(t){var e=new FileReader,i=m(e);return e.readAsArrayBuffer(t),i}function v(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(a&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(r&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(n&&a&&s(t))this._bodyArrayBuffer=v(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!n||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=v(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var t=y(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t,e,i,r=y(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,i=m(e),e.readAsText(t),i;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),i=new Array(e.length),r=0;r<e.length;r++)i[r]=String.fromCharCode(e[r]);return i.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}function x(t,e){var i,r,n=(e=e||{}).body;if(t instanceof x){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=(i=e.method||this.method||"GET",r=i.toUpperCase(),-1<l.indexOf(r)?r:i),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function b(t){var n=new FormData;return t.trim().split("&").forEach(function(t){var e,i,r;t&&(i=(e=t.split("=")).shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," "),n.append(decodeURIComponent(i),decodeURIComponent(r)))}),n}function M(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}t.fetch||(e="URLSearchParams"in t,i="Symbol"in t&&"iterator"in Symbol,a="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in t,(n="ArrayBuffer"in t)&&(o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<o.indexOf(Object.prototype.toString.call(t))}),f.prototype.append=function(t,e){t=p(t),e=h(e);var i=this.map[t];this.map[t]=i?i+","+e:e},f.prototype.delete=function(t){delete this.map[p(t)]},f.prototype.get=function(t){return t=p(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(p(t))},f.prototype.set=function(t,e){this.map[p(t)]=h(e)},f.prototype.forEach=function(t,e){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(e,this.map[i],i,this)},f.prototype.keys=function(){var i=[];return this.forEach(function(t,e){i.push(e)}),d(i)},f.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),d(e)},f.prototype.entries=function(){var i=[];return this.forEach(function(t,e){i.push([e,t])}),d(i)},i&&(f.prototype[Symbol.iterator]=f.prototype.entries),l=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],x.prototype.clone=function(){return new x(this,{body:this._bodyInit})},_.call(x.prototype),_.call(M.prototype),M.prototype.clone=function(){return new M(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},M.error=function(){var t=new M(null,{status:0,statusText:""});return t.type="error",t},c=[301,302,303,307,308],M.redirect=function(t,e){if(-1===c.indexOf(e))throw new RangeError("Invalid status code");return new M(null,{status:e,headers:{location:t}})},t.Headers=f,t.Request=x,t.Response=M,t.fetch=function(i,n){return new Promise(function(r,t){var e=new x(i,n),o=new XMLHttpRequest;o.onload=function(){var t,n,e={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",n=new f,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e,i=t.split(":"),r=i.shift().trim();r&&(e=i.join(":").trim(),n.append(r,e))}),n)};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var i="response"in o?o.response:o.responseText;r(new M(i,e))},o.onerror=function(){t(new TypeError("Network request failed"))},o.ontimeout=function(){t(new TypeError("Network request failed"))},o.open(e.method,e.url,!0),"include"===e.credentials?o.withCredentials=!0:"omit"===e.credentials&&(o.withCredentials=!1),"responseType"in o&&a&&(o.responseType="blob"),e.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===e._bodyInit?null:e._bodyInit)})},t.fetch.polyfill=!0)}("undefined"!=typeof self?self:this)},function(t,n,o){(function(t){var e=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new r(i.call(setTimeout,e,arguments),clearTimeout)},n.setInterval=function(){return new r(i.call(setInterval,e,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(e,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},o(85),n.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,n.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,o(26))},function(t,e,i){(function(t,f){!function(i,r){"use strict";var n,o,a,s,u,l,e,c,t;function p(t){delete o[t]}function h(t){if(a)setTimeout(h,0,t);else{var e=o[t];if(e){a=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(r,i)}}(e)}finally{p(t),a=!1}}}}function d(t){t.source===i&&"string"==typeof t.data&&0===t.data.indexOf(c)&&h(+t.data.slice(c.length))}i.setImmediate||(n=1,a=!(o={}),s=i.document,t=(t=Object.getPrototypeOf&&Object.getPrototypeOf(i))&&t.setTimeout?t:i,u="[object process]"==={}.toString.call(i.process)?function(t){f.nextTick(function(){h(t)})}:function(){if(i.postMessage&&!i.importScripts){var t=!0,e=i.onmessage;return i.onmessage=function(){t=!1},i.postMessage("","*"),i.onmessage=e,t}}()?(c="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",d,!1):i.attachEvent("onmessage",d),function(t){i.postMessage(c+t,"*")}):i.MessageChannel?((e=new MessageChannel).port1.onmessage=function(t){h(t.data)},function(t){e.port2.postMessage(t)}):s&&"onreadystatechange"in s.createElement("script")?(l=s.documentElement,function(t){var e=s.createElement("script");e.onreadystatechange=function(){h(t),e.onreadystatechange=null,l.removeChild(e),e=null},l.appendChild(e)}):function(t){setTimeout(h,0,t)},t.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var r={callback:t,args:e};return o[n]=r,u(n),n++},t.clearImmediate=p)}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(26),i(86))},function(t,e){var i,r,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,l=[],c=!1,p=-1;function h(){c&&u&&(c=!1,u.length?l=u.concat(l):p=-1,l.length&&d())}function d(){if(!c){var t=s(h);c=!0;for(var e=l.length;e;){for(u=l,l=[];++p<e;)u&&u[p].run();p=-1,e=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function y(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new f(t,e)),1!==l.length||c||s(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=y,n.addListener=y,n.once=y,n.off=y,n.removeListener=y,n.removeAllListeners=y,n.emit=y,n.prependListener=y,n.prependOnceListener=y,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e){[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(t){t.hasOwnProperty("remove")||Object.defineProperty(t,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})})},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";var h,d,f,r,y,m,g,v,n,_,o;Object.keys||(h=Object.prototype.hasOwnProperty,d=Object.prototype.toString,f=i(29),r=Object.prototype.propertyIsEnumerable,y=!r.call({toString:null},"toString"),m=r.call(function(){},"prototype"),g=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],v=function(t){var e=t.constructor;return e&&e.prototype===t},n={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},_=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!n["$"+t]&&h.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{v(window[t])}catch(t){return!0}}catch(t){return!0}return!1}(),o=function(t){var e=null!==t&&"object"==typeof t,i="[object Function]"===d.call(t),r=f(t),n=e&&"[object String]"===d.call(t),o=[];if(!e&&!i&&!r)throw new TypeError("Object.keys called on a non-object");var a=m&&i;if(n&&0<t.length&&!h.call(t,0))for(var s=0;s<t.length;++s)o.push(String(s));if(r&&0<t.length)for(var u=0;u<t.length;++u)o.push(String(u));else for(var l in t)a&&"prototype"===l||!h.call(t,l)||o.push(String(l));if(y)for(var c=function(t){if("undefined"==typeof window||!_)return v(t);try{return v(t)}catch(t){return!1}}(t),p=0;p<g.length;++p)c&&"constructor"===g[p]||!h.call(t,g[p])||o.push(g[p]);return o}),t.exports=o},function(t,e,i){"use strict";var r=i(92);t.exports=Function.prototype.bind||r},function(t,e,i){"use strict";var u=Array.prototype.slice,l=Object.prototype.toString;t.exports=function(e){var i=this;if("function"!=typeof i||"[object Function]"!==l.call(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var r,t,n=u.call(arguments,1),o=Math.max(0,i.length-n.length),a=[],s=0;s<o;s++)a.push("$"+s);return r=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof r){var t=i.apply(this,n.concat(u.call(arguments)));return Object(t)===t?t:this}return i.apply(e,n.concat(u.call(arguments)))}),i.prototype&&((t=function(){}).prototype=i.prototype,r.prototype=new t,t.prototype=null),r}},function(t,e,i){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),i=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(t,e);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},function(t,e,i){"use strict";var r=i(27),n=i(31);t.exports=function(){var t=n();return r(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var y=i(9);function M(t,e,i){if(null!==t)for(var r,n,o,a,s,u,l,c=0,p=0,h=t.type,d="FeatureCollection"===h,f="Feature"===h,y=d?t.features.length:1,m=0;m<y;m++){a=(l=!!(u=d?t.features[m].geometry:f?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var g=0;g<a;g++){var v,_=0,x=0;if(null!==(v=l?u.geometries[g]:u)){s=v.coordinates;var b=v.type,c=!i||"Polygon"!==b&&"MultiPolygon"!==b?0:1;switch(b){case null:break;case"Point":if(!1===e(s,p,m,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<s.length;r++){if(!1===e(s[r],p,m,_,x))return!1;p++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<s.length;r++){for(n=0;n<s[r].length-c;n++){if(!1===e(s[r][n],p,m,_,x))return!1;p++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(r=0;r<s.length;r++){for(n=x=0;n<s[r].length;n++){for(o=0;o<s[r][n].length-c;o++){if(!1===e(s[r][n][o],p,m,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(r=0;r<v.geometries.length;r++)if(!1===M(v.geometries[r],e,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var i;switch(t.type){case"FeatureCollection":for(i=0;i<t.features.length&&!1!==e(t.features[i].properties,i);i++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function r(t,e){for(var i,r,n,o,a,s,u,l,c,p=0,h="FeatureCollection"===t.type,d="Feature"===t.type,f=h?t.features.length:1,y=0;y<f;y++){for(a=h?t.features[y].geometry:d?t.geometry:t,u=h?t.features[y].properties:d?t.properties:{},l=h?t.features[y].bbox:d?t.bbox:void 0,c=h?t.features[y].id:d?t.id:void 0,o=(s=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<o;r++)if(null!==(n=s?a.geometries[r]:a))switch(n.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(n,p,u,l,c))return!1;break;case"GeometryCollection":for(i=0;i<n.geometries.length;i++)if(!1===e(n.geometries[i],p,u,l,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,u,l,c))return!1;p++}}function s(t,l){r(t,function(t,e,i,r,n){var o,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1===l(y.feature(t,i,{bbox:r,id:n}),e,0)?!1:void 0}switch(a){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}for(var s=0;s<t.coordinates.length;s++){var u={type:o,coordinates:t.coordinates[s]};if(!1===l(y.feature(u,i),e,s))return!1}})}function n(t,f){s(t,function(a,s,u){var l=0;if(a.geometry){var t=a.geometry.type;if("Point"!==t&&"MultiPoint"!==t){var c,p=0,h=0,d=0;return!1!==M(a,function(t,e,i,r,n){if(void 0===c||p<s||h<r||d<n)return c=t,p=s,h=r,d=n,void(l=0);var o=y.lineString([c,t],a.properties);if(!1===f(o,s,u,n,l))return!1;l++,c=t})&&void 0}}})}function u(t,a){if(!t)throw new Error("geojson is required");s(t,function(t,e,i){if(null!==t.geometry){var r=t.geometry.type,n=t.geometry.coordinates;switch(r){case"LineString":if(!1===a(t,e,i,0,0))return!1;break;case"Polygon":for(var o=0;o<n.length;o++)if(!1===a(y.lineString(n[o],t.properties),e,i,o))return!1}}})}e.coordEach=M,e.coordReduce=function(t,o,a,e){var s=a;return M(t,function(t,e,i,r,n){s=0===e&&void 0===a?t:o(s,t,e,i,r,n)},e),s},e.propEach=o,e.propReduce=function(t,i,r){var n=r;return o(t,function(t,e){n=0===e&&void 0===r?t:i(n,t,e)}),n},e.featureEach=a,e.featureReduce=function(t,i,r){var n=r;return a(t,function(t,e){n=0===e&&void 0===r?t:i(n,t,e)}),n},e.coordAll=function(t){var e=[];return M(t,function(t){e.push(t)}),e},e.geomEach=r,e.geomReduce=function(t,o,a){var s=a;return r(t,function(t,e,i,r,n){s=0===e&&void 0===a?t:o(s,t,e,i,r,n)}),s},e.flattenEach=s,e.flattenReduce=function(t,r,n){var o=n;return s(t,function(t,e,i){o=0===e&&0===i&&void 0===n?t:r(o,t,e,i)}),o},e.segmentEach=n,e.segmentReduce=function(t,o,a){var s=a,u=!1;return n(t,function(t,e,i,r,n){s=!1===u&&void 0===a?t:o(s,t,e,i,r,n),u=!0}),s},e.lineEach=u,e.lineReduce=function(t,n,o){var a=o;return u(t,function(t,e,i,r){a=0===e&&void 0===o?t:n(a,t,e,i,r)}),a},e.findSegment=function(t,e){if(e=e||{},!y.isObject(e))throw new Error("options is invalid");var i,r=e.featureIndex||0,n=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.segmentIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,i=t.features[r].geometry;break;case"Feature":s=s||t.properties,i=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=t;break;default:throw new Error("geojson is invalid")}if(null===i)return null;var u=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=u.length+a-1),y.lineString([u[a],u[a+1]],s,e);case"Polygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a-1),y.lineString([u[o][a],u[o][a+1]],s,e);case"MultiLineString":return n<0&&(n=u.length+n),a<0&&(a=u[n].length+a-1),y.lineString([u[n][a],u[n][a+1]],s,e);case"MultiPolygon":return n<0&&(n=u.length+n),o<0&&(o=u[n].length+o),a<0&&(a=u[n][o].length-a-1),y.lineString([u[n][o][a],u[n][o][a+1]],s,e)}throw new Error("geojson is invalid")},e.findPoint=function(t,e){if(e=e||{},!y.isObject(e))throw new Error("options is invalid");var i,r=e.featureIndex||0,n=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.coordIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,i=t.features[r].geometry;break;case"Feature":s=s||t.properties,i=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=t;break;default:throw new Error("geojson is invalid")}if(null===i)return null;var u=i.coordinates;switch(i.type){case"Point":return y.point(u,s,e);case"MultiPoint":return n<0&&(n=u.length+n),y.point(u[n],s,e);case"LineString":return a<0&&(a=u.length+a),y.point(u[a],s,e);case"Polygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),y.point(u[o][a],s,e);case"MultiLineString":return n<0&&(n=u.length+n),a<0&&(a=u[n].length+a),y.point(u[n][a],s,e);case"MultiPolygon":return n<0&&(n=u.length+n),o<0&&(o=u[n].length+o),a<0&&(a=u[n][o].length-a),y.point(u[n][o][a],s,e)}throw new Error("geojson is invalid")}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=i(18),p=i(9);e.default=function(t,e,i){void 0===i&&(i={});var r=c.getCoord(t),n=c.getCoord(e),o=p.degreesToRadians(n[1]-r[1]),a=p.degreesToRadians(n[0]-r[0]),s=p.degreesToRadians(r[1]),u=p.degreesToRadians(n[1]),l=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(s)*Math.cos(u);return p.radiansToLength(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),i.units)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=i(9),a=i(18);e.default=function(t,e,i){void 0===i&&(i={});var r=a.getCoord(t),n=a.getCoord(e);n[0]+=180<n[0]-r[0]?-360:180<r[0]-n[0]?360:0;var o=function(t,e,i){var r=i=void 0===i?c.earthRadius:Number(i),n=t[1]*Math.PI/180,o=e[1]*Math.PI/180,a=o-n,s=Math.abs(e[0]-t[0])*Math.PI/180;s>Math.PI&&(s-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),l=1e-11<Math.abs(u)?a/u:Math.cos(n);return Math.sqrt(a*a+l*l*s*s)*r}(r,n);return c.convertLength(o,"meters",i.units)}},function(t,e,i){"use strict";t.exports=function(){var t,e;if("function"!=typeof Map)return!1;try{t=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(t){return!1}return"[object Map]"===String(t)&&(3===t.size&&("function"==typeof t.clear&&("function"==typeof t.delete&&("function"==typeof t.entries&&("function"==typeof t.forEach&&("function"==typeof t.get&&("function"==typeof t.has&&("function"==typeof t.keys&&("function"==typeof t.set&&("function"==typeof t.values&&(!1===(e=t.entries().next()).done&&(!!e.value&&("raz"===e.value[0]&&"one"===e.value[1])))))))))))))}},function(t,e,i){"use strict";var n,r=i(33),o=i(101),a=i(11),s=i(6),u=i(4),l=i(2),c=i(120),p=i(5),h=i(41),d=i(130),f=i(148),y=i(151),m=Function.prototype.call,g=Object.defineProperties,v=Object.getPrototypeOf;t.exports=n=function(){var i,r,t,e=arguments[0];if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");return t=y&&a&&Map!==n?a(new Map,v(this)):this,null!=e&&h(e),g(t,{__mapKeysData__:l("c",i=[]),__mapValuesData__:l("c",r=[])}),e&&d(e,function(t){var e=u(t)[0];t=t[1],-1===o.call(i,e)&&(i.push(e),r.push(t))},t),t},y&&(a&&a(n,Map),n.prototype=Object.create(Map.prototype,{constructor:l(n)})),c(g(n.prototype,{clear:l(function(){this.__mapKeysData__.length&&(r.call(this.__mapKeysData__),r.call(this.__mapValuesData__),this.emit("_clear"))}),delete:l(function(t){var e=o.call(this.__mapKeysData__,t);return-1!==e&&(this.__mapKeysData__.splice(e,1),this.__mapValuesData__.splice(e,1),this.emit("_delete",e,t),!0)}),entries:l(function(){return new f(this,"key+value")}),forEach:l(function(t){var e,i,r=arguments[1];for(s(t),i=(e=this.entries())._next();void 0!==i;)m.call(t,r,this.__mapValuesData__[i],this.__mapKeysData__[i],this),i=e._next()}),get:l(function(t){var e=o.call(this.__mapKeysData__,t);if(-1!==e)return this.__mapValuesData__[e]}),has:l(function(t){return-1!==o.call(this.__mapKeysData__,t)}),keys:l(function(){return new f(this,"key")}),set:l(function(t,e){var i,r=o.call(this.__mapKeysData__,t);return-1===r&&(r=this.__mapKeysData__.push(t)-1,i=!0),this.__mapValuesData__[r]=e,i&&this.emit("_add",r,t),this}),size:l.gs(function(){return this.__mapKeysData__.length}),values:l(function(){return new f(this,"value")}),toString:l(function(){return"[object Map]"})})),Object.defineProperty(n.prototype,p.iterator,l(function(){return this.entries()})),Object.defineProperty(n.prototype,p.toStringTag,l("c","Map"))},function(t,e,i){"use strict";t.exports=function(){}},function(t,e,i){"use strict";var o=i(102),a=i(34),s=i(4),u=Array.prototype.indexOf,l=Object.prototype.hasOwnProperty,c=Math.abs,p=Math.floor;t.exports=function(t){var e,i,r,n;if(!o(t))return u.apply(this,arguments);for(i=a(s(this).length),r=arguments[1],e=r=isNaN(r)?0:0<=r?p(r):a(this.length)-p(c(r));e<i;++e)if(l.call(this,e)&&(n=this[e],o(n)))return e;return-1}},function(t,e,i){"use strict";t.exports=i(103)()?Number.isNaN:i(104)},function(t,e,i){"use strict";t.exports=function(){var t=Number.isNaN;return"function"==typeof t&&(!t({})&&t(NaN)&&!t(34))}},function(t,e,i){"use strict";t.exports=function(t){return t!=t}},function(t,e,i){"use strict";var r=i(106),n=Math.abs,o=Math.floor;t.exports=function(t){return isNaN(t)?0:0!==(t=Number(t))&&isFinite(t)?r(t)*o(n(t)):t}},function(t,e,i){"use strict";t.exports=i(107)()?Math.sign:i(108)},function(t,e,i){"use strict";t.exports=function(){var t=Math.sign;return"function"==typeof t&&(1===t(10)&&-1===t(-20))}},function(t,e,i){"use strict";t.exports=function(t){return t=Number(t),isNaN(t)||0===t?t:0<t?1:-1}},function(t,e,i){"use strict";var r=i(7),n={function:!0,object:!0};t.exports=function(t){return r(t)&&n[typeof t]||!1}},function(t,e,i){"use strict";var r,n,o,a,s=Object.create;i(35)()||(r=i(36)),t.exports=r&&1===r.level?(a={configurable:!(o={}),enumerable:!(n={}),writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(t){o[t]="__proto__"!==t?a:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(n,o),Object.defineProperty(r,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:n}),function(t,e){return s(null===t?n:t,e)}):s},function(t,e,i){"use strict";var r=i(112);t.exports=function(t){if("function"!=typeof t)return!1;if(!hasOwnProperty.call(t,"length"))return!1;try{if("number"!=typeof t.length)return!1;if("function"!=typeof t.call)return!1;if("function"!=typeof t.apply)return!1}catch(t){return!1}return!r(t)}},function(t,e,i){"use strict";var r=i(19);t.exports=function(t){if(!r(t))return!1;try{return t.constructor?t.constructor.prototype===t:!1}catch(t){return!1}}},function(t,e,i){"use strict";t.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(e(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},function(t,e,i){"use strict";var a=i(115),s=i(4),u=Math.max;t.exports=function(e,i){var r,t,n,o=u(arguments.length,2);for(e=Object(s(e)),n=function(t){try{e[t]=i[t]}catch(t){r=r||t}},t=1;t<o;++t)a(i=arguments[t]).forEach(n);if(void 0!==r)throw r;return e}},function(t,e,i){"use strict";t.exports=i(116)()?Object.keys:i(117)},function(t,e,i){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},function(t,e,i){"use strict";var r=i(7),n=Object.keys;t.exports=function(t){return n(r(t)?Object(t):t)}},function(t,e,i){"use strict";var r="razdwatrzy";t.exports=function(){return"function"==typeof r.contains&&(!0===r.contains("dwa")&&!1===r.contains("foo"))}},function(t,e,i){"use strict";var r=String.prototype.indexOf;t.exports=function(t){return-1<r.call(this,t,arguments[1])}},function(t,e,i){"use strict";function n(t,e){var i;return s(e),d.call(this,"__ee__")?i=this.__ee__:(i=f.value=c(null),p(this,"__ee__",f),f.value=null),i[t]?"object"==typeof i[t]?i[t].push(e):i[t]=[i[t],e]:i[t]=e,this}function r(t,e){var i,r;return s(e),n.call(r=this,t,i=function(){y.call(r,t,i),u.call(e,this,arguments)}),i.__eeOnceListener__=e,this}function o(t){var e,i,r,n,o;if(d.call(this,"__ee__")&&(n=this.__ee__[t]))if("object"==typeof n){for(i=arguments.length,o=new Array(i-1),e=1;e<i;++e)o[e-1]=arguments[e];for(n=n.slice(),e=0;r=n[e];++e)u.call(r,this,o)}else switch(arguments.length){case 1:l.call(n,this);break;case 2:l.call(n,this,arguments[1]);break;case 3:l.call(n,this,arguments[1],arguments[2]);break;default:for(i=arguments.length,o=new Array(i-1),e=1;e<i;++e)o[e-1]=arguments[e];u.call(n,this,o)}}var a=i(2),s=i(6),u=Function.prototype.apply,l=Function.prototype.call,c=Object.create,p=Object.defineProperty,h=Object.defineProperties,d=Object.prototype.hasOwnProperty,f={configurable:!0,enumerable:!1,writable:!0},y=function(t,e){var i,r,n,o;if(s(e),!d.call(this,"__ee__"))return this;if(!(i=this.__ee__)[t])return this;if("object"==typeof(r=i[t]))for(o=0;n=r[o];++o)n!==e&&n.__eeOnceListener__!==e||(2===r.length?i[t]=r[o?0:1]:r.splice(o,1));else r!==e&&r.__eeOnceListener__!==e||delete i[t];return this},m={on:n,once:r,off:y,emit:o},g={on:a(n),once:a(r),off:a(y),emit:a(o)},v=h({},g);t.exports=e=function(t){return null==t?c(v):h(Object(t),g)},e.methods=m},function(t,e,i){"use strict";var r=i(12),n={object:!0,symbol:!0};t.exports=function(){var t,e=r.Symbol;if("function"!=typeof e)return!1;t=e("test symbol");try{String(t)}catch(t){return!1}return!!n[typeof e.iterator]&&(!!n[typeof e.toPrimitive]&&!!n[typeof e.toStringTag])}},function(t,e,i){"use strict";t.exports=function(){return"object"==typeof globalThis&&(!!globalThis&&globalThis.Array===Array)}},function(t,e){function i(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")}t.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(t){return i()}try{return __global__?__global__:i()}finally{delete Object.prototype.__global__}}()},function(t,e,i){"use strict";var r,n,o,a=i(2),s=i(40),u=i(12).Symbol,l=i(126),c=i(127),p=i(128),h=Object.create,d=Object.defineProperties,f=Object.defineProperty;if("function"==typeof u)try{String(u()),o=!0}catch(t){}else u=null;n=function(t){if(this instanceof n)throw new TypeError("Symbol is not a constructor");return r(t)},t.exports=r=function t(e){var i;if(this instanceof t)throw new TypeError("Symbol is not a constructor");return o?u(e):(i=h(n.prototype),e=void 0===e?"":String(e),d(i,{__description__:a("",e),__name__:a("",l(e))}))},c(r),p(r),d(n.prototype,{constructor:a(r),toString:a("",function(){return this.__name__})}),d(r.prototype,{toString:a(function(){return"Symbol ("+s(this).__description__+")"}),valueOf:a(function(){return s(this)})}),f(r.prototype,r.toPrimitive,a("",function(){var t=s(this);return"symbol"==typeof t?t:t.toString()})),f(r.prototype,r.toStringTag,a("c","Symbol")),f(n.prototype,r.toStringTag,a("c",r.prototype[r.toStringTag])),f(n.prototype,r.toPrimitive,a("c",r.prototype[r.toPrimitive]))},function(t,e,i){"use strict";t.exports=function(t){return!!t&&("symbol"==typeof t||!!t.constructor&&("Symbol"===t.constructor.name&&"Symbol"===t[t.constructor.toStringTag]))}},function(t,e,i){"use strict";var n=i(2),r=Object.create,o=Object.defineProperty,a=Object.prototype,s=r(null);t.exports=function(t){for(var e,i,r=0;s[t+(r||"")];)++r;return s[t+=r||""]=!0,o(a,e="@@"+t,n.gs(null,function(t){i||(i=!0,o(this,e,n(t)),i=!1)})),e}},function(t,e,i){"use strict";var r=i(2),n=i(12).Symbol;t.exports=function(t){return Object.defineProperties(t,{hasInstance:r("",n&&n.hasInstance||t("hasInstance")),isConcatSpreadable:r("",n&&n.isConcatSpreadable||t("isConcatSpreadable")),iterator:r("",n&&n.iterator||t("iterator")),match:r("",n&&n.match||t("match")),replace:r("",n&&n.replace||t("replace")),search:r("",n&&n.search||t("search")),species:r("",n&&n.species||t("species")),split:r("",n&&n.split||t("split")),toPrimitive:r("",n&&n.toPrimitive||t("toPrimitive")),toStringTag:r("",n&&n.toStringTag||t("toStringTag")),unscopables:r("",n&&n.unscopables||t("unscopables"))})}},function(t,e,i){"use strict";var r=i(2),n=i(40),o=Object.create(null);t.exports=function(e){return Object.defineProperties(e,{for:r(function(t){return o[t]?o[t]:o[t]=e(String(t))}),keyFor:r(function(t){var e;for(e in n(t),o)if(o[e]===t)return e})})}},function(t,e,i){"use strict";var r=i(13),n=i(7),o=i(14),a=i(5).iterator,s=Array.isArray;t.exports=function(t){return!!n(t)&&(!!s(t)||(!!o(t)||(!!r(t)||"function"==typeof t[a])))}},function(t,e,i){"use strict";var p=i(13),h=i(6),d=i(14),f=i(131),y=Array.isArray,m=Function.prototype.call,g=Array.prototype.some;t.exports=function(t,e){var i,r,n,o,a,s,u,l,c=arguments[2];if(y(t)||p(t)?i="array":d(t)?i="string":t=f(t),h(e),n=function(){o=!0},"array"!==i)if("string"!==i)for(r=t.next();!r.done;){if(m.call(e,c,r.value,n),o)return;r=t.next()}else for(s=t.length,a=0;a<s&&(u=t[a],a+1<s&&55296<=(l=u.charCodeAt(0))&&l<=56319&&(u+=t[++a]),m.call(e,c,u,n),!o);++a);else g.call(t,function(t){return m.call(e,c,t,n),o})}},function(t,e,i){"use strict";var r=i(13),n=i(14),o=i(132),a=i(147),s=i(41),u=i(5).iterator;t.exports=function(t){return"function"==typeof s(t)[u]?t[u]():new(!r(t)&&n(t)?a:o)(t)}},function(t,e,i){"use strict";var r=i(11),n=i(39),o=i(2),a=i(5),s=i(21),u=Object.defineProperty,l=t.exports=function(t,e){if(!(this instanceof l))throw new TypeError("Constructor requires 'new'");s.call(this,t),e=e?n.call(e,"key+value")?"key+value":n.call(e,"key")?"key":"value":"value",u(this,"__kind__",o("",e))};r&&r(l,s),delete l.prototype.constructor,l.prototype=Object.create(s.prototype,{_resolve:o(function(t){return"value"===this.__kind__?this.__list__[t]:"key+value"===this.__kind__?[t,this.__list__[t]]:t})}),u(l.prototype,a.toStringTag,o("c","Array Iterator"))},function(t,e,i){"use strict";function r(t,e,i){var r=o(e)&&a(e.value),n=s(e);return delete n.writable,delete n.value,n.get=function(){return!i.overwriteDefinition&&h.call(this,t)?r:(e.value=c.call(r,i.resolveContext?i.resolveContext(this):this),p(this,t,e),this[t])},n}var n=i(8),o=i(134),a=i(138),s=i(139),u=i(38),l=i(144),c=Function.prototype.bind,p=Object.defineProperty,h=Object.prototype.hasOwnProperty;t.exports=function(t){var i=u(arguments[1]);return n(i.resolveContext)&&a(i.resolveContext),l(t,function(t,e){return r(e,t,i)})}},function(t,e,i){"use strict";var r=i(42),n=i(8);t.exports=function(t){return n(t)?t:r(t,"Cannot use %v",arguments[1])}},function(t,e,i){"use strict";var r=i(8),n=i(19),o=Object.prototype.toString;t.exports=function(t){if(!r(t))return null;if(n(t)){var e=t.toString;if("function"!=typeof e)return null;if(e===o)return null}try{return""+t}catch(t){return null}}},function(t,e,i){"use strict";var r=i(137),n=/[\n\r\u2028\u2029]/g;t.exports=function(t){var e=r(t);return null===e?"<Non-coercible to string value>":(100<e.length&&(e=e.slice(0,99)+""),e=e.replace(n,function(t){switch(t){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},function(t,e,i){"use strict";t.exports=function(e){try{return e.toString()}catch(t){try{return String(e)}catch(t){return null}}}},function(t,e,i){"use strict";var r=i(42),n=i(37);t.exports=function(t){return n(t)?t:r(t,"%v is not a plain function",arguments[1])}},function(t,e,i){"use strict";var o=i(140),a=i(20),s=i(4);t.exports=function(e){var t=Object(s(e)),i=arguments[1],r=Object(arguments[2]);if(t!==e&&!i)return t;var n={};return i?o(i,function(t){(r.ensure||t in e)&&(n[t]=e[t])}):a(n,e),n}},function(t,e,i){"use strict";t.exports=i(141)()?Array.from:i(142)},function(t,e,i){"use strict";t.exports=function(){var t,e,i=Array.from;return"function"==typeof i&&(e=i(t=["raz","dwa"]),Boolean(e&&e!==t&&"dwa"===e[1]))}},function(t,e,i){"use strict";var d=i(5).iterator,f=i(13),y=i(143),m=i(34),g=i(6),v=i(4),_=i(7),x=i(14),b=Array.isArray,M=Function.prototype.call,w={configurable:!0,enumerable:!0,writable:!0,value:null},I=Object.defineProperty;t.exports=function(t){var e,i,r,n,o,a,s,u,l,c,p=arguments[1],h=arguments[2];if(t=Object(v(t)),_(p)&&g(p),this&&this!==Array&&y(this))e=this;else{if(!p){if(f(t))return 1!==(o=t.length)?Array.apply(null,t):((n=new Array(1))[0]=t[0],n);if(b(t)){for(n=new Array(o=t.length),i=0;i<o;++i)n[i]=t[i];return n}}n=[]}if(!b(t))if(void 0!==(l=t[d])){for(s=g(l).call(t),e&&(n=new e),u=s.next(),i=0;!u.done;)c=p?M.call(p,h,u.value,i):u.value,e?(w.value=c,I(n,i,w)):n[i]=c,u=s.next(),++i;o=i}else if(x(t)){for(o=t.length,e&&(n=new e),r=i=0;i<o;++i)c=t[i],i+1<o&&55296<=(a=c.charCodeAt(0))&&a<=56319&&(c+=t[++i]),c=p?M.call(p,h,c,r):c,e?(w.value=c,I(n,r,w)):n[r]=c,++r;o=r}if(void 0===o)for(o=m(t.length),e&&(n=new e(o)),i=0;i<o;++i)c=p?M.call(p,h,t[i],i):t[i],e?(w.value=c,I(n,i,w)):n[i]=c;return e&&(w.value=null,n.length=o),n}},function(t,e,i){"use strict";var r=Object.prototype.toString,n=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);t.exports=function(t){return"function"==typeof t&&n(r.call(t))}},function(t,e,i){"use strict";var r=i(6),s=i(145),u=Function.prototype.call;t.exports=function(t,n){var o={},a=arguments[2];return r(n),s(t,function(t,e,i,r){o[e]=u.call(n,a,t,e,i,r)}),o}},function(t,e,i){"use strict";t.exports=i(146)("forEach")},function(t,e,i){"use strict";var s=i(6),u=i(4),l=Function.prototype.bind,c=Function.prototype.call,p=Object.keys,h=Object.prototype.propertyIsEnumerable;t.exports=function(o,a){return function(i,r){var t,n=arguments[2],e=arguments[3];return i=Object(u(i)),s(r),t=p(i),e&&t.sort("function"==typeof e?l.call(e,i):void 0),"function"!=typeof o&&(o=t[o]),c.call(o,t,function(t,e){return h.call(i,t)?c.call(r,n,i[t],t,i,e):a})}}},function(t,e,i){"use strict";var r=i(11),n=i(2),o=i(5),a=i(21),s=Object.defineProperty,u=t.exports=function(t){if(!(this instanceof u))throw new TypeError("Constructor requires 'new'");t=String(t),a.call(this,t),s(this,"__length__",n("",t.length))};r&&r(u,a),delete u.prototype.constructor,u.prototype=Object.create(a.prototype,{_next:n(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:n(function(t){var e,i=this.__list__[t];return this.__nextIndex__!==this.__length__&&55296<=(e=i.charCodeAt(0))&&e<=56319?i+this.__list__[this.__nextIndex__++]:i})}),s(u.prototype,o.toStringTag,n("c","String Iterator"))},function(t,e,i){"use strict";var r=i(11),n=i(2),o=i(21),a=i(5).toStringTag,s=i(149),u=Object.defineProperties,l=o.prototype._unBind,c=t.exports=function(t,e){if(!(this instanceof c))return new c(t,e);o.call(this,t.__mapKeysData__,t),e&&s[e]||(e="key+value"),u(this,{__kind__:n("",e),__values__:n("w",t.__mapValuesData__)})};r&&r(c,o),c.prototype=Object.create(o.prototype,{constructor:n(c),_resolve:n(function(t){return"value"===this.__kind__?this.__values__[t]:"key"===this.__kind__?this.__list__[t]:[this.__list__[t],this.__values__[t]]}),_unBind:n(function(){this.__values__=null,l.call(this)}),toString:n(function(){return"[object Map Iterator]"})}),Object.defineProperty(c.prototype,a,n("c","Map Iterator"))},function(t,e,i){"use strict";t.exports=i(150)("key","value","key+value")},function(t,e,i){"use strict";var r=Array.prototype.forEach,n=Object.create;t.exports=function(t){var e=n(null);return r.call(arguments,function(t){e[t]=!0}),e}},function(t,e,i){"use strict";t.exports="undefined"!=typeof Map&&"[object Map]"===Object.prototype.toString.call(new Map)},function(t,e){function y(t){return"function"==typeof t}function m(t){var e,i=(e=Number(t),isNaN(e)?0:0!==e&&isFinite(e)?(0<e?1:-1)*Math.floor(Math.abs(e)):e);return Math.min(Math.max(i,0),r)}var r;t.exports=(r=Math.pow(2,53)-1,function(t,e,i){"use strict";var r,n=1<arguments.length?e:void 0;if(void 0!==n){if(!y(n))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(r=i)}var o,a=function(t,e){if(null!=t&&null!=e){var i=t[e];if(null==i)return;if(!y(i))throw new TypeError(i+" is not a function");return i}}(t,function(t){if(null!=t){if(-1<["string","number","boolean","symbol"].indexOf(typeof t))return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in t)return Symbol.iterator;if("@@iterator"in t)return"@@iterator"}}(t));if(void 0!==a){d=y(this)?Object(new this):[];var s,u,l=a.call(t);if(null==l)throw new TypeError("Array.from requires an array-like or iterable object");for(f=0;;){if(o=l.next(),!(s=!Boolean(o.done)&&o))return d.length=f,d;u=s.value,d[f]=n?n.call(r,u,f):u,f++}}else{var c=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");for(var p,h=m(c.length),d=y(this)?Object(new this(h)):new Array(h),f=0;f<h;)p=c[f],d[f]=n?n.call(r,p,f):p,f++;d.length=h}return d})},function(t,e,i){"use strict";var a=i(154),n=i(155),r=i(156);function o(t,e,i,r,n){e=e||s,i=i||u,n=n||Array,this.nodeSize=r||64,this.points=t,this.ids=new n(t.length),this.coords=new n(2*t.length);for(var o=0;o<t.length;o++)this.ids[o]=o,this.coords[2*o]=e(t[o]),this.coords[2*o+1]=i(t[o]);a(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function s(t){return t[0]}function u(t){return t[1]}t.exports=function(t,e,i,r,n){return new o(t,e,i,r,n)},o.prototype={range:function(t,e,i,r){return n(this.ids,this.coords,t,e,i,r,this.nodeSize)},within:function(t,e,i){return r(this.ids,this.coords,t,e,i,this.nodeSize)}}},function(t,e,i){"use strict";function f(t,e,i,r,n,o){for(;r<n;){var a,s,u,l,c;600<n-r&&(a=n-r+1,s=i-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1),f(t,e,i,Math.max(r,Math.floor(i-s*l/a+c)),Math.min(n,Math.floor(i+(a-s)*l/a+c)),o));var p=e[2*i+o],h=r,d=n;for(y(t,e,r,i),e[2*n+o]>p&&y(t,e,r,n);h<d;){for(y(t,e,h,d),h++,d--;e[2*h+o]<p;)h++;for(;e[2*d+o]>p;)d--}e[2*r+o]===p?y(t,e,r,d):y(t,e,++d,n),d<=i&&(r=d+1),i<=d&&(n=d-1)}}function y(t,e,i,r){n(t,i,r),n(e,2*i,2*r),n(e,2*i+1,2*r+1)}function n(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}t.exports=function t(e,i,r,n,o,a){if(o-n<=r)return;var s=Math.floor((n+o)/2);f(e,i,s,n,o,a%2);t(e,i,r,n,s-1,a+1);t(e,i,r,s+1,o,a+1)}},function(t,e,i){"use strict";t.exports=function(t,e,i,r,n,o,a){var s,u,l=[0,t.length-1,0],c=[];for(;l.length;){var p=l.pop(),h=l.pop(),d=l.pop();if(h-d<=a)for(var f=d;f<=h;f++)s=e[2*f],u=e[2*f+1],i<=s&&s<=n&&r<=u&&u<=o&&c.push(t[f]);else{var y=Math.floor((d+h)/2);s=e[2*y],u=e[2*y+1],i<=s&&s<=n&&r<=u&&u<=o&&c.push(t[y]);var m=(p+1)%2;(0===p?i<=s:r<=u)&&(l.push(d),l.push(y-1),l.push(m)),(0===p?s<=n:u<=o)&&(l.push(y+1),l.push(h),l.push(m))}}return c}},function(t,e,i){"use strict";function g(t,e,i,r){var n=t-i,o=e-r;return n*n+o*o}t.exports=function(t,e,i,r,n,o){var a=[0,t.length-1,0],s=[],u=n*n;for(;a.length;){var l=a.pop(),c=a.pop(),p=a.pop();if(c-p<=o)for(var h=p;h<=c;h++)g(e[2*h],e[2*h+1],i,r)<=u&&s.push(t[h]);else{var d=Math.floor((p+c)/2),f=e[2*d],y=e[2*d+1];g(f,y,i,r)<=u&&s.push(t[d]);var m=(l+1)%2;(0===l?i-n<=f:r-n<=y)&&(a.push(p),a.push(d-1),a.push(m)),(0===l?f<=i+n:y<=r+n)&&(a.push(d+1),a.push(c),a.push(m))}}return s}},function(t,e,i){"use strict";i.r(e),i.d(e,"Config",function(){return r}),i.d(e,"Route",function(){return a}),i.d(e,"ZLevelBarControl",function(){return Pt}),i.d(e,"ZLevelSelectorControl",function(){return Ut}),i.d(e,"Data",function(){return ge}),i.d(e,"Poi",function(){return ue}),i.d(e,"SearchResultPoi",function(){return we}),i.d(e,"Search",function(){return je}),i.d(e,"Highlighter",function(){return Be}),i.d(e,"ZLevelMarker",function(){return Ge}),i.d(e,"MazeMarker",function(){return He}),i.d(e,"BlueDot",function(){return ri}),i.d(e,"CustomPoisLayer",function(){return ai}),i.d(e,"LocationController",function(){return pi}),i.d(e,"RouteController",function(){return Dr}),i.d(e,"GUIComponents",function(){return l}),i.d(e,"version",function(){return y.a}),i.d(e,"mapboxVersion",function(){return go}),i.d(e,"mapboxgl",function(){return g.a}),i.d(e,"Popup",function(){return vo}),i.d(e,"LngLat",function(){return _o}),i.d(e,"LngLatBounds",function(){return xo}),i.d(e,"Util",function(){return gn}),i.d(e,"Map",function(){return ho}),i.d(e,"Analytics",function(){return bo}),i.d(e,"Hotel",function(){return Mo});var r={};i.r(r),i.d(r,"getXHeaders",function(){return A}),i.d(r,"addXHeader",function(){return S}),i.d(r,"deleteXHeader",function(){return E}),i.d(r,"setApiBaseUrl",function(){return C}),i.d(r,"getApiBaseUrl",function(){return N}),i.d(r,"setMMTileBaseUrl",function(){return j}),i.d(r,"getMMTileBaseUrl",function(){return k}),i.d(r,"setMMDefaultTileUrl",function(){return P}),i.d(r,"getMMDefaultTileUrl",function(){return O}),i.d(r,"setMazemapAuthToken",function(){return B}),i.d(r,"getMazemapAuthToken",function(){return U}),i.d(r,"setMazemapViewToken",function(){return R}),i.d(r,"getMazemapViewToken",function(){return F});var n={};i.r(n),i.d(n,"center",function(){return tt}),i.d(n,"getCoord",function(){return et}),i.d(n,"bbox",function(){return $}),i.d(n,"pointToLineDistance",function(){return rt.a}),i.d(n,"lineString",function(){return W});var o={};i.r(o),i.d(o,"MazeColors",function(){return nt}),i.d(o,"mazeColor",function(){return ot});var a={};i.r(a),i.d(a,"getRouteJSON",function(){return zt}),i.d(a,"getDirections",function(){return Lt}),i.d(a,"getGeoJsonRoute",function(){return Et}),i.d(a,"displayGeoJsonRoute",function(){return Dt}),i.d(a,"hideGeoJsonRoute",function(){return At}),i.d(a,"getAndDisplayRoute",function(){return St});var s={};i.r(s),i.d(s,"getModeIcon",function(){return xr}),i.d(s,"getIcon",function(){return br});var u={};i.r(u),i.d(u,"RouteMetaInfoComponent",function(){return Nr}),i.d(u,"DirectionDetails",function(){return kr});var l={};i.r(l),i.d(l,"DirectionDetails",function(){return u}),i.d(l,"LocationControl",function(){return tn}),i.d(l,"Modal",function(){return an}),i.d(l,"SidePanel",function(){return hn}),i.d(l,"List",function(){return fn}),i.d(l,"Icons",function(){return s});var c={};i.r(c),i.d(c,"tracker",function(){return bn}),i.d(c,"deactivate",function(){return Mn}),i.d(c,"analyticsEnabled",function(){return wn}),i.d(c,"setSourceAppName",function(){return In});var p={};i.r(p),i.d(p,"getBookableRoomsByZLevel",function(){return mo});i(83);var h,d=i(43),f=(i(87),i(1)),g=i.n(f),y=(i(88),i(15));try{h=window.location}catch(t){h=self.location}var m="production";switch(h.hostname){case"dontuse.mazemap.com":m="dontuse";break;case"localhost":case"127.0.0.1":m="localhost";break;case"127.0.0.2":m="localbackend";break;case"127.0.0.3":m="dontuse"}function v(t){return t[m]}var _="x-mazemap-jsapi-version",x=y.a,b=v({production:"https://api.mazemap.com",dontuse:"https://dev.mazemap.com",localhost:"https://api.mazemap.com",localbackend:"http://localhost:5000"}),M=v({production:"UA-41286510-2",dontuse:"UA-41286510-3",localhost:"UA-41286510-3",localbackend:"UA-41286510-3"}),w="dimension1",I=v({production:"https://tiles.mazemap.com",dontuse:"https://devtiles.mazemap.com",localhost:"https://tiles.mazemap.com",localbackend:"https://devtiles.mazemap.com"}),T=v({production:"https://tiles.mazemap.com/default.mvt",dontuse:"https://devtiles.mazemap.com/default.mvt",localhost:"https://tiles.mazemap.com/default.mvt",localbackend:"https://devtiles.mazemap.com/default.mvt"}),L=h.search&&0<=h.search.indexOf("mm_no_tile_cache=true")||h.hash&&0<=h.hash.indexOf("mm_no_tile_cache=true");function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var D={apiBaseURL:b,mmTileBaseUrl:I+"/all/latest",mmDefaultTileUrl:T,mmAuthToken:null,mmViewToken:null,xHeaders:{}};function A(){return JSON.parse(JSON.stringify(D.xHeaders))}function S(t,e){if("string"!=typeof t)throw new Error("Config: Can not add XHeader. Key ".concat(t," was not string. Got: ").concat(z(t)));if("string"!=typeof e)throw new Error("Config: Can not add XHeader. Value ".concat(e," was not string. Got: ").concat(z(e)));if("x-"!==t.substr(0,2).toLowerCase())throw new Error("Config: Can not add XHeader. Key ".concat(t," does not start with prefix x-. Got: ").concat(t));D.xHeaders[t]=e}function E(t){t&&(D.xHeaders[t]=null,delete D.xHeaders[t])}function C(t){D.apiBaseURL=t}function N(){return D.apiBaseURL}function j(t){D.mmTileBaseUrl=t}function k(){return D.mmTileBaseUrl}function P(t){D.mmDefaultTileUrl=t}function O(){return D.mmDefaultTileUrl}function B(t){D.mmAuthToken=t}function U(){return D.mmAuthToken}function R(t){D.mmViewToken=t}function F(){return D.mmViewToken}var Z=i(0),V=i.n(Z);function G(t,e){e=e||{};var i=U(),r=F();e.headers=e.headers||new Headers,i&&e.headers.append("Authorization",i),r&&(e.headers.append("Authorization","Bearer ".concat(r)),t+=(-1===t.indexOf("?")?"?":"&")+"view_request=".concat(r)),e.headers.append("".concat(_),"".concat(x));var n=A();return Object.keys(n).forEach(function(t){"x-"===t.substr(0,2).toLowerCase()&&e.headers.append("".concat(t),"".concat(n[t]))}),fetch(t,e).catch(function(t){throw t})}function Y(t,e,i){if(!q(i=i||{}))throw new Error("options is invalid");var r=i.bbox,n=i.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&X(r),n&&J(n);var o={type:"Feature"};return n&&(o.id=n),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function Q(t,e,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!H(t[0])||!H(t[1]))throw new Error("coordinates must contain numbers");return Y({type:"Point",coordinates:t},e,i)}function W(t,e,i){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!H(t[0][1])||!H(t[0][1]))throw new Error("coordinates must contain numbers");return Y({type:"LineString",coordinates:t},e,i)}function H(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function q(t){return t&&t.constructor===Object}function X(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!H(t))throw new Error("bbox must only contain numbers")})}function J(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function K(t,e,i){if(null!==t)for(var r,n,o,a,s,u,l,c=0,p=0,h=t.type,d="FeatureCollection"===h,f="Feature"===h,y=d?t.features.length:1,m=0;m<y;m++){a=(l=!!(u=d?t.features[m].geometry:f?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var g=0;g<a;g++){var v,_=0,x=0;if(null!==(v=l?u.geometries[g]:u)){s=v.coordinates;var b=v.type,c=!i||"Polygon"!==b&&"MultiPolygon"!==b?0:1;switch(b){case null:break;case"Point":if(!1===e(s,p,m,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<s.length;r++){if(!1===e(s[r],p,m,_,x))return!1;p++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<s.length;r++){for(n=0;n<s[r].length-c;n++){if(!1===e(s[r][n],p,m,_,x))return!1;p++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(r=0;r<s.length;r++){for("MultiPolygon"===b&&(x=0),n=0;n<s[r].length;n++){for(o=0;o<s[r][n].length-c;o++){if(!1===e(s[r][n][o],p,m,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(r=0;r<v.geometries.length;r++)if(!1===K(v.geometries[r],e,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}var $=function(t){var e=[1/0,1/0,-1/0,-1/0];return K(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e};var tt=function(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var i=e.properties;if(!t)throw new Error("geojson is required");var r=$(t);return Q([(r[0]+r[2])/2,(r[1]+r[3])/2],i)};function et(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&2<=t.length&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}var it=i(32),rt=i.n(it),nt={MazeOrange:"#FF7B00",MazeBlue:"#1FAFFC",MazeGreen:"#5BD76F",MazeRed:"#FF3333",MazePurple:"#B04AFC",MazeMagenta:"#EE33E8",MazePink:"#FF309F",MazeYellow:"#FFE61E"};function ot(t){return nt[t]?nt[t]:t}function at(t){var e=et(tt(t));return new g.a.LngLat(e[0],e[1])}function st(i,r,n){var o;return function(){var t=this,e=arguments;clearTimeout(o),o=setTimeout(function(){o=null,n||i.apply(t,e)},r),n&&!o&&i.apply(t,e)}}function ut(e){if(400===e.status)try{return e.json().then(function(t){throw t})}catch(t){throw new Error(e.status+" "+e.statusText)}else if(400<e.status)throw new Error(e.status+" "+e.statusText);return e.json()}function lt(t,e,i){var r=[];for(var n in t)r.push(encodeURIComponent(i?n.toUpperCase():n)+"="+encodeURIComponent(t[n]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")}function ct(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)t[r]=i[r]}return t}function pt(t){return t.filter(function(t,e,i){return i.indexOf(t)==e})}function ht(t,e){var i={};return t.filter(function(t){return!i[t.properties[e]]&&(i[t.properties[e]]=!0)})}function dt(t){return null!==t&&""!==t&&(t=t.toString()).replace(/<[^>]*>/g,"")}function ft(t,e){var i=1,r=1e3,n=1e3,o=["m","km","km"];"imperial"===(e||"metric")&&(i=1/.3048,r=500,n=5280,o=["ft","miles","mile"]);var a,s=t*i;if(r<s){a=o[1];var u=Math.round(10*s/n)/10;return 1==u&&(a=o[2]),String(u)+" "+a}a=o[0];var l=Math.round(s);return String(l)+" "+a}function yt(t,e){var i=Math.floor(t/60),r=Math.floor(t%60),n=i?i+" h"+(r?" "+r+" min":""):t<1&&e?"< 1 min":Math.round(t)+" min";return n}function mt(t,e,i){var r=t.properties[i],n=e.properties[i];return r instanceof Array&&n instanceof Array?r.join()===n.join():r===n}function gt(t){null===t.properties.z&&(t.properties.z=0)}function vt(t,e){return t.properties&&t.properties.flags&&t.properties.flags.length&&-1!==t.properties.flags.indexOf(e)}function _t(t,e){if(vt(t,e)){var i=t.properties.flags.indexOf(e);if(-1!==i)return t.properties.flags.splice(i,1),!0}return!1}function xt(t){var e;e=t,["FOOT","SLIGHTLY_DISCOURAGE_ST","SLIGHTLY_DISCOURAGE_TS","DISCOURAGE_TS","DISCOURAGE_ST","DYNAMIC_DISCOURAGE_I_IS_ON","DYNAMIC_DISCOURAGE_I_IS_OFF"].map(function(t){return _t(e,t)})}function bt(t,o){var e,a=[];gt(t[0]),xt(t[0]),vt(t[0],"NO_HC")&&(o.avoidStairs&&((e=wt(t[0].geometry.coordinates[0],t[0].properties)).properties.routepoint="NO_HC",a.push(e)),_t(t[0],["NO_HC"]));var i=t.reduce(function(t,e){var i;xt(e),gt(e),vt(e,"NO_HC")&&(o.avoidStairs&&((i=wt(e.geometry.coordinates[0],e.properties)).properties.routepoint="NO_HC",a.push(i)),_t(e,"NO_HC"));var r,n;return!("TRANSIT"!==e.properties.travelMode&&mt(t,e,"z")&&mt(t,e,"travelMode")&&mt(t,e,"travelType")&&mt(t,e,"flags"))?(a.push(t),e):(r=e,(n=t).properties.m+=r.properties.m,n.properties.timeEstimateSeconds+=Number(r.properties.timeEstimateSeconds),n.geometry.coordinates=[].concat(n.geometry.coordinates,r.geometry.coordinates.splice(1)),n)});return a.push(i),a}function Mt(t,e,i){if(!t||!e)throw new Error("Mising start/dest params");t&&t.properties&&(t.properties.lngLat=at(t),t=t.properties),e&&e.properties&&(e.properties.lngLat=at(e),e=e.properties);var r,n,o={srid:4326,hc:!!i.avoidStairs};return t.lngLat&&(r=g.a.LngLat.convert(t.lngLat).wrap(),o.sourcelat=r.lat,o.sourcelon=r.lng),e.lngLat&&(n=g.a.LngLat.convert(e.lngLat).wrap(),o.targetlat=n.lat,o.targetlon=n.lng),t.zLevel&&(o.sourcez=t.zLevel),e.zLevel&&(o.targetz=e.zLevel),t.poiId&&(o.sourcepoi=t.poiId),e.poiId&&(o.targetpoi=e.poiId),i.lang&&(o.lang=i.lang),i.distanceUnitsType&&(o.distanceunitstype=i.distanceUnitsType),i.mode&&(o.mode=i.mode),o}function wt(t,e){return{geometry:{type:"Point",coordinates:g.a.LngLat.convert(t).wrap().toArray()},properties:e,type:"Feature"}}function It(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}var Tt={avoidStairs:!1,elevatorPoints:!0,stairPoints:!0,lang:void 0,distanceUnitsType:"metric",connectToStart:!0,connectToEnd:!0,includeSteps:!1};function Lt(t,e,i){var r=Mt(t,e,ct({},Tt,i||{}));return G(N()+"/routing/directions/"+lt(r)).then(ut)}function zt(u,l,t){var c=V()({},Tt,t),e=Mt(u,l,c);return G(N()+"/routing/path/"+lt(e)).then(ut).then(function(t){var e={pathMetrics:t.pathMetrics};e.pathMetrics.durationEstimateSeconds=0;var i=bt(t.path.features,{avoidStairs:c.avoidStairs});(i=i.filter(function(t){return t.geometry.coordinates.length})).forEach(function(t){t.timeEstimateSeconds?e.pathMetrics.durationEstimateSeconds+=t.timeEstimateSeconds:t.properties.timeEstimateSeconds&&(e.pathMetrics.durationEstimateSeconds+=t.properties.timeEstimateSeconds)});var r,n,o,h,d,f,y,m,a=u&&u.lngLat,s=l&&l.lngLat;return c.connectToStart&&i.length&&a&&(r=g.a.LngLat.convert(a).wrap().toArray(),i[0].geometry.coordinates.unshift(r)),c.connectToEnd&&i.length&&s&&(n=g.a.LngLat.convert(s).wrap().toArray(),i[i.length-1].geometry.coordinates.push(n)),o=e,h=c,d=[],m=y=f=null,i.filter(function(t){return"Point"!==t.geometry.type}).forEach(function(t){null!==y&&void 0!==t.properties.z&&null!==t.properties.z&&-1!==y.properties.z.indexOf(t.properties.z)&&(d.push(y),y=null);var e,i=t.geometry.coordinates[0],r=t.properties.flags,n=void 0,o=t.properties.source,a=t.properties.transitInfo,s=t.properties.travelMode,u=t.properties.travelType,l="mergesegment"===o,c=0===f&&t.properties.z&&0!==t.properties.z&&"mazemap"===t.properties.source&&t.properties.buildingId&&"PEDESTRIAN"===t.properties.travelMode,p=f&&0!==f&&0===t.properties.z&&"PEDESTRIAN"===t.properties.travelMode;c?n=wt(It(t.geometry.coordinates[0],t.geometry.coordinates[1]),{routepoint:"BUILDING_ENTER",z:t.properties.z,source:o,timeEstimateSeconds:null}):p?n=wt(It(t.geometry.coordinates[0],t.geometry.coordinates[1]),{routepoint:"BUILDING_EXIT",z:t.properties.z,source:o,timeEstimateSeconds:null}):l?f=0:"TRANSIT"===s?(n=wt(i,{routepoint:e=u,z:0,source:o,transitInfo:a,travelType:u,travelMode:s}),t.properties.routepoint=e):h.avoidStairs&&0<=r.indexOf("NO_HC")?(n=0<=r.indexOf("STAIR")?wt(i,{routepoint:"NO_HC",zLevel:f,z:[f,t.properties.z]}):wt(i,{routepoint:"NO_HC",zLevel:f,z:f}),t.properties.routepoint="NO_HC"):h.elevatorPoints&&0<=r.indexOf("ELEVATOR")?(e="ELEVATOR",f>t.properties.z?e="ELEVATOR-DOWN":f<t.properties.z&&(e="ELEVATOR-UP"),n=y?(y.properties.z=[m,t.properties.z],y):y=wt(i,{routepoint:e,zLevel:m=f,z:[m,t.properties.z]}),t.properties.routepoint=e):h.stairPoints&&0<=r.indexOf("STAIR")&&(e="STAIR",f>t.properties.z?e="STAIR-DOWN":f<t.properties.z&&(e="STAIR-UP"),n=wt(i,{routepoint:e,zLevel:f,z:[f,t.properties.z]}),t.properties.routepoint=e),y||(n&&d.push(n),d.push(t)),f=t.properties.z}),{type:"FeatureCollection",features:d,properties:o}})}function Dt(t,e){return e.route.setPath(t),t}function At(t){t.route.clear()}function St(e,t,i,r){if(5<=arguments.length)throw new Error("Too many arguments. Should be: (map, start, dest, options). Are you using a deprecated syntax? See the new documentation examples for getAndDisplayRoute. ");return zt(t,i,r).then(function(t){return Dt(t,e)})}function Et(t,e,i,r,n){return window.console.warn("Deprecated function getGeoJsonRoute. Use getRouteJSON instead, with syntax (start, dest, options), combining lngLat and zLevel in same object."),zt({lngLat:t,zLevel:e},{lngLat:i,zLevel:r},n)}function Ct(t,e,i){var r=window.document.createElement(t);return e&&(r.className=e),i&&i.appendChild(r),r}function Nt(t,e,i,r){return r?t.addEventListener(e,i.bind(r)):t.addEventListener(e,i)}function jt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var kt={autoUpdate:!0,className:"",autoSizeButtons:!0,maxHeight:null,miniModeThreshold:140,buttonHeight:30},Pt=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=V()({},kt,t),this.options.className="mazemap-control-zlevel-bar "+this.options.className,this._zs=[],this._visible=!1,this._zbuttons=[],this._scrollButtons=[],this._onAutoZlevelsChanged=this._onAutoZlevelsChanged.bind(this),this._updateAndCreateButtons=this._updateAndCreateButtons.bind(this)}var t,i,r;return t=e,(i=[{key:"onRemove",value:function(){this._container&&this._container.remove(),this._map&&this._map.off("zlevel",this._updateAndCreateButtons)}},{key:"onAdd",value:function(t){var e=Ct("div",this.options.className+" mapboxgl-ctrl-group mapboxgl-ctrl"),i=Ct("div","btns-container",e);return(this._map=t).on("zlevel",this._updateAndCreateButtons),this._container=e,this._btnsContainer=i,this.options.maxHeight&&this.setMaxHeight(this.options.maxHeight),this.hide(),this._map.zLevelUpdater&&this.options.autoUpdate?(this._map.zLevelUpdater.on("zlevelsupdate",this._onAutoZlevelsChanged),this._onAutoZlevelsChanged()):this.setZLevels(this.options.zLevels),e}},{key:"_createButton",value:function(t,e,i,r,n){var o=Ct("button",i,r);return o.innerHTML=t,o.href="#",o.title=e,Nt(o,"click",n.bind(this)),o}},{key:"setZLevels",value:function(t){if(t&&null!==t&&!(Object.keys(t).length<1))return this.show(),t&&(this.options.zLevels=t,this._zs=Object.keys(t).map(parseFloat),this._zs.sort(function(t,e){return e-t})),this._map?this._updateAndCreateButtons():this;this.hide()}},{key:"_ScrollBtnClickFactory",value:function(i){return function(t){var e;this.options.miniMode?this.zLevelStep(i):(e=this._btnsContainer.scrollTop,"up"===i?e-=100:e+=100,this._btnsContainer.scrollTop=e,this._updateScrollButtonsActiveState())}.bind(this)}},{key:"_BtnClickFactory",value:function(e){return function(t){this._map.zLevel=e}.bind(this)}},{key:"_updateAndCreateButtons",value:function(){var n=this;this._zbuttons.forEach(function(t){t.remove()}),this._zbuttons.length=0;var t,o,a=this._map._zLevel;this._zs.length&&(t=this._zs.reduce(function(t,e){return Math.max(t,n.options.zLevels[e].length)},this.options.zLevels[this._zs[0]].length),o="",this.options.autoSizeButtons&&3<=t&&(o=" small-".concat(9<t?"9":t)),this._zs.forEach(function(t){var e=n.options.zLevels[t],i="z-label"+(a===t?" active":""),r=n._createButton(e,"Floor "+e,i,n._btnsContainer,n._BtnClickFactory(t));r.className+=o,n._zbuttons.push(r)})),this.options.maxHeight&&(this._checkMaxHeight(),this._scrollActiveIntoView())}},{key:"_onAutoZlevelsChanged",value:function(){var t=this._map&&this._map.zLevelUpdater&&this._map.zLevelUpdater.zLevels||{};this.setZLevels(t)}},{key:"hide",value:function(){return this._container.style.display="none",this._visible=!1,this}},{key:"show",value:function(){return this._container.style.display="block",this._visible||this._scrollActiveIntoView(),this._visible=!0,this}},{key:"_wouldNeedToAddScrollButtons",value:function(){return this._zbuttons.length*this.options.buttonHeight>this.options.maxHeight}},{key:"setMaxHeight",value:function(t){this.options.maxHeight=t,this._checkMaxHeight(),this._scrollActiveIntoView()}},{key:"_applyMaxHeight",value:function(t){this._btnsContainer.style.maxHeight=String(t)+"px"}},{key:"_updateScrollButtonsActiveState",value:function(){this._scrollButtons.length&&(0<this._btnsContainer.scrollTop?this._scrollButtons[0].classList.remove("mazemap-disabled"):this._scrollButtons[0].classList.add("mazemap-disabled"),0<this._btnsContainer.scrollHeight-this._btnsContainer.clientHeight-this._btnsContainer.scrollTop?this._scrollButtons[1].classList.remove("mazemap-disabled"):this._scrollButtons[1].classList.add("mazemap-disabled"))}},{key:"_checkMaxHeight",value:function(){var t=this._wouldNeedToAddScrollButtons(this.options.maxHeight);this.options.maxHeight<=this.options.miniModeThreshold&&this._zs.length*this.options.buttonHeight>this.options.maxHeight?(this.options.miniMode=!0,this._applyMaxHeight(this.options.buttonHeight),this._addScroll()):t?(this.options.miniMode=!1,this._applyMaxHeight(this.options.maxHeight-2*this.options.buttonHeight),this._addScroll()):(this.options.miniMode=!1,this._removeScroll(),this._applyMaxHeight(this.options.maxHeight)),this._updateScrollButtonsActiveState()}},{key:"_addScroll",value:function(){this._container.classList.contains("autoscroll")||(this._container.classList.add("autoscroll"),this._container.style.paddingTop=this.options.buttonHeight+"px",this._container.style.paddingBottom=this.options.buttonHeight+"px",this._createScrollButtons(),this._scrollActiveIntoView())}},{key:"_scrollActiveIntoView",value:function(){var t,e=this._btnsContainer.querySelector("button.active");e&&(e.offsetTop<this._btnsContainer.scrollTop&&0<this._btnsContainer.scrollTop&&(this._btnsContainer.scrollTop=e.offsetTop),e.offsetTop+this.options.buttonHeight>this._btnsContainer.scrollTop+this._btnsContainer.clientHeight&&(t=e.offsetTop+e.clientHeight-this._btnsContainer.clientHeight,this._btnsContainer.scrollTop=t),this._updateScrollButtonsActiveState())}},{key:"_removeScroll",value:function(){!1!==this._container.classList.contains("autoscroll")&&(this._container.classList.remove("autoscroll"),this._container.style.paddingTop="0px",this._container.style.paddingBottom="0px",this._removeScrollButtons())}},{key:"_createScrollButtons",value:function(){this._removeScrollButtons();var t=this._createButton("&#x25B2;","Scroll up","z-scroll scroll-up",this._container,this._ScrollBtnClickFactory("up")),e=this._createButton("&#x25BC;","Scroll down","z-scroll scroll-down",this._container,this._ScrollBtnClickFactory("down"));this._scrollButtons.push(t),this._scrollButtons.push(e)}},{key:"_removeScrollButtons",value:function(){this._scrollButtons.forEach(function(t){t.remove()}),this._scrollButtons.length=0}},{key:"zLevelStep",value:function(t){var e,i=this._map.zLevel,r=this._zs.indexOf(i);-1===r||(e=this._zs[r+("up"===t?-1:1)])&&(this._map.zLevel=e)}}])&&jt(t.prototype,i),r&&jt(t,r),e}();function Ot(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Bt={autoUpdate:!0,className:"",textFn:function(t,e){return e}},Ut=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=V()({},Bt,t),this.options.className="mazemap-control-zlevel-selector "+this.options.className,this._zs=[],this._visible=!1,this._onAutoZlevelsChanged=this._onAutoZlevelsChanged.bind(this),this._render=this._render.bind(this)}var t,i,r;return t=e,(i=[{key:"onRemove",value:function(){this._container&&this._container.remove(),this._map&&this._map.off("zlevel",this._render)}},{key:"onAdd",value:function(t){var e=Ct("div",this.options.className+" mapboxgl-ctrl-group mapboxgl-ctrl");return(this._map=t).on("zlevel",this._render),this._container=e,this.hide(),this._map.zLevelUpdater&&this.options.autoUpdate?(this._map.zLevelUpdater.on("zlevelsupdate",this._onAutoZlevelsChanged),this._onAutoZlevelsChanged()):this.setZLevels(this.options.zLevels),e}},{key:"setZLevels",value:function(t){if(t&&null!==t&&!(Object.keys(t).length<1))return this.show(),t&&(this.options.zLevels=t,this._zs=Object.keys(t).map(parseFloat),this._zs.sort(function(t,e){return e-t})),this._map?this._render():this;this.hide()}},{key:"_render",value:function(){var r=this;this._container.innerHTML="";var n,t,o=this._map._zLevel;this._zs.length&&(this.options.zLevels[o],n=document.createElement("select"),this._zs.forEach(function(t){var e=r.options.zLevels[t],i=document.createElement("option");(i.value=t)===o&&(i.selected=!0),i.innerHTML=r.options.textFn(t,e),n.appendChild(i)}),(t=document.createElement("div")).className="dropdown-icon",t.innerHTML='<svg width="15" height="9" viewBox="0 0 19 9" xmlns="http://www.w3.org/2000/svg"><path d="M18.699 2.788c.442-.323.436-.851-.002-1.171l-.727-.531c-.444-.324-1.163-.324-1.61.002l-5.243 3.827c-.893.651-2.338.653-3.234 0L2.64 1.088C2.194.763 1.47.766 1.03 1.086l-.727.53c-.443.324-.447.846-.002 1.172l7.581 5.531c.894.652 2.337.656 3.236 0l7.58-5.531z" fill="currentColor" fill-rule="evenodd"/></svg>',n.addEventListener("change",function(t){var e=t.target.value;r._map&&r._map.setZLevel(e)}),this._container.appendChild(n),this._container.appendChild(t))}},{key:"_onAutoZlevelsChanged",value:function(){var t=this._map&&this._map.zLevelUpdater&&this._map.zLevelUpdater.zLevels||{};this.setZLevels(t)}},{key:"hide",value:function(){return this._container.style.display="none",this._visible=!1,this}},{key:"show",value:function(){return this._container.style.display="block",this._visible=!0,this}}])&&Ot(t.prototype,i),r&&Ot(t,r),e}(),Rt=i(45),Ft=new(i.n(Rt).a),Zt={},Vt={};function Gt(t){if("campusDatas"in t)throw new Error("OLD campus data format");return{type:"Feature",geometry:t.geometry,properties:{id:t.campusId,name:t.name,routing:!0===t.routing,wheelchair:!0===t.wheelchair,defaultZLevel:t.defaultZLevel,distanceUnitsType:t.distanceUnitsType,campusTypeId:t.type?t.type.toLowerCase():null,poiTypesSelectableInApp:t.poiTypesSelectableInApp,routingStepByStep:!0===t.routingStepByStep,roomBookingEnabled:!0===t.roomBookingEnabled,roomOccupancyEnabled:!0===t.roomOccupancyEnabled,useGeolocate:!1!==t.useGeolocate,snapToPath:!0===t.snapToPath,snapToPathMaxMeters:t.snapToPathMaxMeters,roomBookingConfig:t.roomBookingConfig,nodeId:t.nodeId||null,priority:t.priority||null,parentId:t.parentId||null,childId:t.childId||null,parents:[]}}}function Yt(t,e){if(e=e||{items:[],ids:[]},"children"in t){var i,r;t.bbox=null;var n=t.children;for(i in n)"children"in(r=n[i])||(r.title=r.name,Yt(r,e,t.name));for(i in n)"children"in(r=n[i])&&Yt(r,e,t.name)}else{var o;"geometry"in t&&((o=ct({},t)).campusId in Zt||(o.parents=[],Zt[o.campusId]=Gt(o)),-1===e.ids.indexOf(o.campusId)&&(e.items.unshift(Zt[o.campusId]),e.ids.unshift(o.campusId)))}return e.items}function Qt(t){return e=(e=t)||"all",Ft.has(e)||Ft.set(e,G(N()+"/api/campuscollections/"+lt({tag:e,srid:4326})).then(ut).then(function(t){return Yt(t),t}).catch(function(t){window.console.error("Error fetching data about campuses: ",t)})),Ft.get(e).then(function(t){return Yt(t)});var e}function Wt(e){return Vt[e]?Promise.resolve(Vt[e]):G(N()+"/api/campus/"+e+"/"+lt({srid:4326})).then(ut).then(Gt,function(t){throw new Error("Error fetching data about campus "+e.toString()+": ",t)})}var Ht={},qt={};function Xt(t){var e={type:"Feature",geometry:t.simpleGeom,properties:{id:t.id,name:t.name,campusId:t.campusId,floors:t.floors}};return qt[t.id]=e}function Jt(t){return Ht[t]?Ht[t]:Ht[t]=G(N()+"/api/buildings/"+lt({campusid:t,srid:4326})).then(ut).then(function(t){var e=[];for(var i in t.buildings)e.push(Xt(t.buildings[i]));return e}).catch(function(t){window.console.error("Error fetching data about buildings: ",t)})}function Kt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],r=!0,n=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(t){n=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(n)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return $t(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return $t(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $t(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var te={},ee={};function ie(t,e,i){return(ie=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var r=[null];r.push.apply(r,e);var n=new(Function.bind.apply(t,r));return i&&re(n,i.prototype),n}).apply(null,arguments)}function re(t,e){return(re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ne(t){return function(t){if(Array.isArray(t))return oe(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return oe(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return oe(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function ae(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var se=["google","outlook","time_edit","office_app"],ue=function(){function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.campusId=t.campusId,this.buildingId=t.buildingId,this.buildingName=t.buildingName,this.floorId=t.floorId,this.floorName=t.floorName,this.poiId=t.poiId,this.z=t.z,this.identifier=t.identifier,this.description=t.description,this.images=t.images,this.infoUrl=t.infoUrl,this.infoUrlText=t.infoUrlText,this.names=t.names,this.title=t.title,this.geometry=t.geometry,this.externalReferenceTypes=t.externalReferenceTypes||[]}var t,e,r;return t=i,r=[{key:"fromFeatureJSON",value:function(t){var e=JSON.parse(JSON.stringify(t)).properties;return e.z=e.zLevel,delete e.zLevel,e.geometry=t.geometry,new i(e)}}],(e=[{key:"getRoomBookingProviders",value:function(){return this.externalReferenceTypes.filter(function(t){return-1!==se.indexOf(t)})}},{key:"getLngLat",value:function(){return at(this.geometry)}},{key:"getPointCoordinates",value:function(){var t=this.getLngLat();return[t.lng,t.lat]}},{key:"getBounds",value:function(){var t=this.getPointCoordinates(),e=ie(g.a.LngLat,ne(t)),i=ie(g.a.LngLat,ne(t));return new g.a.LngLatBounds(e,i)}},{key:"asGeoJSONFeature",value:function(){var t=this.campusId,e=this.buildingId,i=this.buildingName,r=this.floorId,n=this.floorName,o=this.poiId,a=this.z,s=this.identifier,u=this.description,l=this.images,c=this.infoUrl,p=this.names,h=this.title,d=this.geometry,f={type:"Feature",properties:{campusId:t,buildingId:e,buildingName:i,floorId:r,floorName:n,poiId:o,zLevel:a,identifier:s,description:u,images:l,infoUrl:c,names:p,title:h,externalReferenceTypes:this.externalReferenceTypes},geometry:d};return JSON.parse(JSON.stringify(f))}},{key:"zLevel",get:function(){return this.z}}])&&ae(t.prototype,e),r&&ae(t,r),i}();function le(e,t){var i,r=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)),r}function ce(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?le(Object(o),!0).forEach(function(t){var e,i,r;e=n,r=o[i=t],i in e?Object.defineProperty(e,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[i]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):le(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}var pe={},he={};function de(t){if(t.deleted)return Promise.resolve(void 0);var e={type:"Feature",geometry:t.geometry,properties:ce({title:t.title,id:t.poiId,poiId:t.poiId,identifier:t.identifier,campusId:t.campusId,floorId:t.floorId,zLevel:t.z,floorName:t.floorName,buildingName:t.buildingName,infoUrl:t.infoUrl,infoUrlText:t.infoUrlText,description:t.description,images:t.images,names:t.infos?t.infos.sort(function(t,e){return t.priority-e.priority}).map(function(t){return t.name}):null},t.externalReferenceTypes?{externalReferenceTypes:t.externalReferenceTypes}:{})};return e.properties.poiId&&(pe[e.properties.id]=e),e}function fe(t){return t&&t.length||(t=[]),{type:"FeatureCollection",features:t.map(function(t){return{type:"Feature",geometry:t.geometry,properties:{title:t.title,poiId:t.poiId,identifier:t.identifier,campusId:t.campusId,floorId:t.floorId,floorName:t.floorName,zLevel:t.z,buildingName:t.buildingName}}})}}function ye(t,e){return pe[t]?Promise.resolve(pe[t]):(t=Number(t).toString(),G(N()+"/api/pois/"+t+"/"+lt({srid:4326})).then(ut).then(function(t){return e?new ue(t):de(t)}))}function me(t){var e={z:t.zLevel||0,lng:t.lngLat.lng,lat:t.lngLat.lat,typeid:t.typeId,srid:4326,numresults:t.numResults||1};return G(N()+"/routing/closest/poisoftype/"+lt(e)).then(ut)}var ge={getCampusesFeatureCollection:function(t){var r=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return Qt(t).then(function(t){var e={type:"FeatureCollection",features:[]},i=0;return t.map(function(t){e.features.push(t),r&&((i=n.center(t)).properties=t.properties,e.features.push(i))}),e})},getCampusFeatureCollection:function(t){var r=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return Wt(t).then(function(t){var e={type:"FeatureCollection",features:[]},i=0;return e.features.push(t),r&&((i=n.center(t)).properties=t.properties,e.features.push(i)),e})},getCampuses:Qt,getCampusesTree:function(t){return Ft(t)},getCampus:Wt,getBuilding:function(t){return qt[t]?Promise.resolve(qt[t]):G(N()+"/api/buildings/"+t+"/"+lt({srid:4326})).then(ut).then(Xt)},getBuildingsByCampusId:Jt,getFloor:function(o){if(!o)return Promise.resolve(void 0);if(o in ee)return ee[o];var t=G(N()+"/api/floor/"+o+"/"+lt({srid:4326})).then(ut),e=G(N()+"/api/flooroutlines/"+lt({floorid:o,srid:4326})).then(ut);return ee[o]=Promise.all([t,e]).then(function(t){var e,i=Kt(t,2),r=i[0],n=i[1];if(n.features&&n.features[0]&&n.features[0].id===r.floorOutlineId)(e=n.features[0].geometry)||(r.z=void 0);else{if(null!==r.floorOutlineId)throw new Error("Floor "+o+" has a ID mismatch with its floor outline.");r.z=void 0}return{type:"Feature",geometry:e,properties:{id:r.id,buildingId:r.buildingId,campusId:r.campusId,flags:r.flags,moh:r.moh,name:r.name,z:r.z}}})},getFloorsByCampusId:function(h){if(te[h])return new Promise(function(t){return t(te[h])});var t=G(N()+"/api/flooroutlines/"+lt({campusid:h,srid:4326})).then(ut);return te[h]=Promise.all([t,Jt(h)]).then(function(t){var e,i,r=Kt(t,2),n=r[0],o=r[1],a={},s=[];for(e in n.features){var u=n.features[e];u.geometry&&(a[u.id]=u.geometry)}for(e in o){var l=o[e];for(i in l.properties.floors){var c=l.properties.floors[i],p={geometry:a[c.floorOutlineId],properties:{buildingId:c.buildingId,campusId:c.campusId,flags:c.flags,id:c.id,moh:c.moh,name:c.name,z:c.z}};s.push(p),ee[p.properties.id]=new Promise(function(t){return t(p)})}}return te[h]=s}).catch(function(t){window.console.error("Error fetching data about floors: ",t)})},getPoi:ye,getPois:function(t){return t.srid=4326,G(N()+"/api/pois/"+lt(t)).then(ut).then(function(t){return t.pois}).then(function(t){return t.map(de)}).catch(function(t){return window.console&&window.console.warn&&window.console.warn(t),[]})},getPoiCategoryIdsByCampusId:function(t){return Wt(t).then(function(t){return t.properties.poiTypesSelectableInApp})},getPoiCategoryStyleById:function(i){var e=this;return i in this._categoryStylesById?new Promise(function(t){return t(e._categoryStylesById[i])}):G(N()+"/api/types/"+i).then(ut).then(function(t){var e=t.title;return he[i]={title:e,opacity:1,offZOpacity:.2,id:i}})},getPoisByCategoryAndCampusId:function(t,e){return e=Number(e).toString(),t=Number(t).toString(),G(N()+"/api/campus/"+Number(e)+"/pois/"+lt({typeid:t,srid:4326})).then(ut).then(function(t){return t.pois}).then(fe)},getPoiAt:function(t,e,i){var r={lat:t.lat,lng:t.lng,z:e||0,srid:4326},r=V()({},r,i);return G(N()+"/api/pois/closestpoi/"+lt(r)).then(ut).catch(function(){return!1}).then(function(t){return!!t&&de(t)})},getPoisByReferences:function(t,e){return G(N()+"/api/poireferences/",{method:"POST",body:JSON.stringify({referenceType:t,externalIds:e}),headers:new Headers({"Content-Type":"application/json"})}).then(ut).then(function(e){return Object.keys(e).forEach(function(t){e[t]&&(e[t]=de(e[t]))}),e})},getClosestPoisOfType:function(t){return me(t).then(function(t){if(3<t.closestPois.length)throw new Error("Number of POI ids exceed the allowed max number for automatically transforming to real POI models.");return Promise.all(t.closestPois.map(function(t){return ye(t.poiId,!0)})).then(function(t){return{closestPois:t}})})},getClosestPoiIdsOfType:me,getTypeById:function(t){return t=Number(t).toString(),G(N()+"/api/types/"+t).then(ut)},getRouteJSON:zt,getDirections:Lt};function ve(t,e,i){return(ve=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var r=[null];r.push.apply(r,e);var n=new(Function.bind.apply(t,r));return i&&_e(n,i.prototype),n}).apply(null,arguments)}function _e(t,e){return(_e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xe(t){return function(t){if(Array.isArray(t))return be(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return be(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return be(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function Me(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var we=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._json=t}var t,i,r;return t=e,(i=[{key:"getLngLat",value:function(){return at(this.geometry)}},{key:"getPointCoordinates",value:function(){var t=this.getLngLat();return[t.lng,t.lat]}},{key:"getBounds",value:function(){var t=this.getPointCoordinates(),e=ve(Mazemap.mapboxgl.LngLat,xe(t)),i=ve(Mazemap.mapboxgl.LngLat,xe(t));return new Mazemap.mapboxgl.LngLatBounds(e,i)}},{key:"getPoiAsync",value:function(){return new Promise(function(t){t(new Mazemap.Poi)})}},{key:"title",get:function(){return dt(this._json.title)}},{key:"campusId",get:function(){return this._json.campusId}},{key:"buildingName",get:function(){return this._json.dispBldNames.length?dt(this._json.dispBldNames[0]):null}},{key:"poiId",get:function(){return this._json.poiId}},{key:"floorName",get:function(){return this._json.zName}},{key:"geometry",get:function(){return this._json.point}},{key:"zLevel",get:function(){return this._json.zValue}}])&&Me(t.prototype,i),r&&Me(t,r),e}(),Ie=0;function Te(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Le=0,ze={rows:10,page:0,start:0,filterbybbox:!1,bboxBoost:!1,boostbydistance:!1,searchdiameter:null,lat:null,lng:null,withpois:!0,withbuilding:!0,withtype:!0,withcampus:!0,campusid:null,campuscollectiontag:"default",query:"",lastresult:{},resultsFormat:"flat",__cleanResults:!0},De=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=V()({},ze,t)}var t,i,r;return t=e,(i=[{key:"search",value:function(t){var r=this,n=0<arguments.length&&void 0!==t?t:"",o=Ie=Ie+1;return Le=o,new Promise(function(e,i){setTimeout(function(){if(o!==Le)return i("Search request cancelled due to new search initiated");var t=r._search(n);return e(t)},250)})}},{key:"_search",value:function(t){var e=this,i=0<arguments.length&&void 0!==t?t:"",r=i.trim();if(0<r.length&&(this.options.query=r),this.options.query.length<1)return Promise.resolve(null);var n=function(t,e){var i={q:t,rows:e.rows,start:e.start?e.start:e.rows*e.page,withpois:e.withpois,withbuilding:e.withbuilding,withtype:e.withtype,withcampus:e.withcampus,campusid:e.campusid,campuscollectiontag:e.campuscollectiontag};(e.boostbydistance||e.filterbybbox)&&e.lat&&e.lng&&e.searchdiameter&&(i.lat=e.lat,i.lng=e.lng,i.filterbybbox=e.filterbybbox,i.boostbydistance=e.boostbydistance,i.searchdiameter=e.searchdiameter);return i}(i,this.options),o=encodeURIComponent,a=Object.keys(n).filter(function(t){return null!==n[t]}).map(function(t){return o(t)+"="+o(n[t])}).join("&");return G(N()+"/search/equery/?"+a).then(ut).then(function(t){return e.options.lastresult=t}).then(function(t){return e.options.__cleanResults?function(t,e){var i=t.result.map(function(t){return function(t,e){switch(t.solrId.substring(0,3)){case"cps":return function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"flat",i={title:t.title,campusId:t.campusId,type:"campus"};return"geojson"===e?{type:"Feature",properties:i,geometry:t.point}:(i.point=t.point,i)}(t,e);case"bld":return function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"flat",i={title:t.title,campusId:t.campusId,id:t.id,dispBldNames:pt(t.dispBldNames),type:"building"};return"geojson"===e?{type:"Feature",properties:i,geometry:t.point}:(i.point=t.point,i)}(t,e);case"poi":return function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"flat",i={zValue:t.zValue,zName:t.zName,bldId:t.bldId,dispBldNames:pt(t.dispBldNames),dispPoiNames:pt(t.dispPoiNames),dispTypeNames:pt(t.dispTypeNames),typeIds:t.typeIds,title:t.title,campusId:t.campusId,identifier:t.identifier,poiId:t.poiId,type:"poi"};return"geojson"===e?{type:"Feature",properties:i,geometry:t.point}:(i.point=t.point,i)}(t,e);case"typ":return function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"flat",i={title:t.title,id:t.id,dispTypeNames:pt(t.dispTypeNames),type:"category"};return"geojson"===e?{type:"Feature",properties:i,geometry:null}:i}(t,e);default:return function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"flat",i={title:t.title,campusId:t.campusId,type:"unkown"};return"geojson"===e?{type:"Feature",properties:i,geometry:t.point}:(i.point=t.point,i)}(t,e)}}(t,e)}),r={results:null};r.results="geojson"===e?{type:"FeatureCollection",features:i}:i;return r}(t,e.options.resultsFormat):t})}},{key:"getResultFeatureCollection",value:function(){var t={type:"FeatureCollection",features:[]},e=this.options.lastresult.result;if(!e)return t;for(var i,r=0;r<e.length;r++){var n=(i=e[r]).point||i.geometry?{type:"Feature",properties:{},geometry:i.point||i.geometry}:null;n&&t.features.push(n)}return t}}])&&Te(t.prototype,i),r&&Te(t,r),e}();var Ae=i(46),Se=i.n(Ae);function Ee(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ce=function(){function i(t){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this._listeners={},t.forEach(function(t){return e._listeners[t]=[]})}var t,e,r;return t=i,(e=[{key:"_getEventListeners",value:function(t){if(!this._listeners[t])throw new Error('Events object has no registered event "'+t+'"');return this._listeners[t]}},{key:"on",value:function(t,e){this._getEventListeners(t).push(e)}},{key:"off",value:function(t,e){var i=this._getEventListeners(t),r=i.indexOf(e);-1!==r&&i.splice(r,1)}},{key:"trigger",value:function(){var e=this,i=Se()(arguments),t=i.shift();this._getEventListeners(t).forEach(function(t){t.apply(e,i)})}}])&&Ee(t.prototype,e),r&&Ee(t,r),i}();function Ne(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var je={SearchController:De,SearchInput:function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=V()({},t),!this.options.input)throw new Error("Need an <input> element to bind to");if(!this.options.suggestions)throw new Error("Need an element for search suggestions");if(!this.options.searchController)throw new Error("Need a SearchController");this.events=new Ce(["itemclick"]),this.on=this.events.on.bind(this.events),this._container=this.options.container,this._input=this.options.input,this._suggestions=this.options.suggestions,this.searchController=this.options.searchController,this._numSearch=0,this.addEventListeners(),this.hideSuggestions(),this.clearSuggestions()}var t,i,r;return t=e,(i=[{key:"addEventListeners",value:function(){Nt(this._input,"input",this._onInputChange,this),Nt(this._input,"focus",this.showSuggestions,this),Nt(this._input,"focus",function(){setTimeout(function(){var t=this._input.value;this._input.value=t+" ",this._input.value=t;var e=this._input.selectionEnd;this._input.setSelectionRange(e,e)}.bind(this),10)},this)}},{key:"_onInputChange",value:function(){var e=this,t=this._input.value;if(t.length<1)return this.clearSuggestions();this._suggestions.scrollTop=0,this._numSearch++;var i=this._numSearch;this.searchController.search(t).then(function(t){i===e._numSearch&&e.populateSuggestions(t.results.features)}).catch(function(){return null})}},{key:"_onItemClick",value:function(t){this._input.value=dt(t.properties.title),this.events.trigger("itemclick",{item:t}),this.hideSuggestions()}},{key:"hideSuggestions",value:function(){this._suggestions.style.display="none"}},{key:"showSuggestions",value:function(){this._suggestions.style.display="block"}},{key:"clearSearch",value:function(){this._input.value="",this.clearSuggestions()}},{key:"clearSuggestions",value:function(){return this._suggestions.innerHTML="",this}},{key:"populateSuggestions",value:function(t){var e=this;return this.clearSuggestions(),this.ul=Ct("ul","search-suggestions-list default",this._suggestions),t.forEach(function(t){e._createListItem(t,e.ul)}),this.showSuggestions(),this}},{key:"_createListItem",value:function(t,e){var i=Ct("button","item",e);i.style.display="list-item";var r=this._getClosestMatchingDisplayName(t.properties.dispPoiNames,t.properties.title);i.innerHTML='<span class="title">'+r+"</span>","poi"===t.properties.type&&(t.properties.zName&&(i.innerHTML+=',<span class="context floor">Floor&nbsp;'+t.properties.zName+"</span>"),t.properties.dispBldNames.length&&(i.innerHTML+='<span class="context building">'+dt(t.properties.dispBldNames[0])+"</span>"));return Nt(i,"click",function(){this._onItemClick(t)},this),i}},{key:"_getClosestMatchingDisplayName",value:function(t,e){if(!t||!t.length)return dt(e);for(var i=0;i<t.length;i++)if(-1!==t[i].indexOf("<em>"))return dt(t[i]);return dt(e)}}])&&Ne(t.prototype,i),r&&Ne(t,r),e}()};function ke(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Pe(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Oe={showOutline:!0,showFill:!1,fillColor:"#FF7B00",fillOpacity:.2,outlineColor:"#FF7B00",outlineWidth:5,fillLayerName:"mm-feature-highlight-fill",outlineLayerName:"mm-feature-highlight-outline",sourceName:"mm-highlight-geojson"},Be=function(){function i(t,e){if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),!t)throw new Error("Need a map to initialize Highlighter");this._map=t,e.id&&(e.fillLayerName=e.fillLayerName||e.id,e.outlineLayerName=e.outlineLayerName||"".concat(e.id,"-outline"),e.sourceName=e.sourceName||e.id),this.options=V()({},Oe,e),this._initStyling()}var t,e,r;return t=i,(e=[{key:"highlight",value:function(t){t instanceof Array&&(t={type:"FeatureCollection",features:t}),this._map.getSource(this.options.sourceName).setData(t)}},{key:"clear",value:function(){this._map.getSource(this.options.sourceName).setData({type:"FeatureCollection",features:[]})}},{key:"getOutlineLayer",value:function(){return this._map.getLayer(this.options.outlineLayerName)}},{key:"showOutline",value:function(){this._map.setLayoutProperty(this.options.outlineLayerName,"visibility","visible")}},{key:"hideOutline",value:function(){this._map.setLayoutProperty(this.options.outlineLayerName,"visibility","none")}},{key:"addOutlineLayer",value:function(){this._map.addLayer({id:this.options.outlineLayerName,type:"line",source:this.options.sourceName,layout:{visibility:"none"},paint:{"line-color":this.options.outlineColor,"line-width":this.options.outlineWidth,"line-opacity":.8}},"mm-poi-label")}},{key:"setOutlineStyle",value:function(t){for(var e in t)t.hasOwnProperty(e)&&this._map.setPaintProperty(this.options.outlineLayerName,e,t[e])}},{key:"getFillLayer",value:function(){return this._map.getLayer(this.options.fillLayerName)}},{key:"showFill",value:function(){this._map.setLayoutProperty(this.options.fillLayerName,"visibility","visible")}},{key:"hideFill",value:function(){this._map.setLayoutProperty(this.options.fillLayerName,"visibility","none")}},{key:"addFillLayer",value:function(){var t,e={id:this.options.fillLayerName,type:this.options.extrusion?"fill-extrusion":"fill",source:this.options.sourceName,minzoom:16,layout:{visibility:"none"},paint:(ke(t={},this.options.extrusion?"fill-extrusion-color":"fill-color",this.options.fillColor),ke(t,this.options.extrusion?"fill-extrusion-opacity":"fill-opacity",{base:1,stops:[[16,.05],[18,this.options.fillOpacity]]}),t)};this.options.extrusion&&(e.paint["fill-extrusion-height"]=this.options.extrusion),this._map.addLayer(e,"mm-poi-label")}},{key:"setFillStyle",value:function(t){for(var e in t)t.hasOwnProperty(e)&&this._map.setPaintProperty(this.options.fillLayerName,e,t[e])}},{key:"_initStyling",value:function(){this._map.addSource(this.options.sourceName,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.addFillLayer(),this.addOutlineLayer(),this.options.showFill&&this.showFill(),this.options.showOutline&&this.showOutline(),this._map.on("zlevel",this._updateStyling.bind(this)),this._updateStyling()}},{key:"_updateStyling",value:function(){var t=["in","zLevel",this._map.zLevel||0,0];this._map.setFilter(this.options.fillLayerName,t),this._map.setFilter(this.options.outlineLayerName,t)}}])&&Pe(t.prototype,e),r&&Pe(t,r),i}();function Ue(t){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Re(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fe(t,e){return(Fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ze(o){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,i,r,n=Ve(o);return e=a?(t=Ve(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments),i=this,!(r=e)||"object"!==Ue(r)&&"function"!=typeof r?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(i):r}}function Ve(t){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ge=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fe(t,e)}(a,g.a.Marker);var t,e,i,o=Ze(a);function a(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var i,r={offZOpacity:void 0,zLevel:0,offset:void 0,preventClickBubble:!0},n=V()({},r,e);return(i=o.call(this,t,n)).options=n,0!==i.options.zLevel&&null!==i.options.zLevel&&void 0!==i.options.zLevel||void 0!==i.options.offZOpacity?void 0===i.options.offZOpacity&&(i.options.offZOpacity=.3):i.options.offZOpacity=1,i._element.classList.add("zlevel-marker"),i.options.preventClickBubble&&t.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),i._onMapClick({originalEvent:t})}),i.options.zIndex&&(i._element.style.zIndex=i.options.zIndex),i.events=new Ce(["click"]),i.on=i.events.on.bind(i.events),i}return t=a,(e=[{key:"setZLevel",value:function(t){return this.options.zLevel=t,this._onZLevel(),this}},{key:"addTo",value:function(t){return t.on("zlevel",this._onZLevelBound=this._onZLevel.bind(this)),g.a.Marker.prototype.addTo.call(this,t),this._map=t,this._onZLevel(),this}},{key:"_onMapClick",value:function(t){var e=t.originalEvent.target,i=this._element;e!==i&&!i.contains(e)||(this.options.noClick||(this.zLevelToggle(),this._popup&&this.togglePopup()),this.events.trigger("click"))}},{key:"zLevelToggle",value:function(){return"number"==typeof this.options.zLevel?this._map.zLevel===this.options.zLevel||(this._map.zLevel=this.options.zLevel,!1):(Array.isArray(this.options.zLevel)&&(t=((t=this.options.zLevel.indexOf(this._map.zLevel))+1)%this.options.zLevel.length,this._map.zLevel=this.options.zLevel[t]),!1);var t}},{key:"remove",value:function(){return this._map&&this._map.off("zlevel",this._onZLevelBound),g.a.Marker.prototype.remove.call(this)}},{key:"_onZLevel",value:function(){var t,e;this._map&&this.options&&void 0!==this.options.offZOpacity&&(t=this._map.zLevel,(e=this.options.zLevel)===t||Array.isArray(e)&&-1!==e.indexOf(t)?this._onZ||(this._element.style.opacity=1,this._onZ=!0,this._element.style.pointerEvents=""):!this._onZ&&void 0!==this._onZ||(this._onZ=!1,this._element.style.opacity=this.options.offZOpacity,0===this.options.offZOpacity&&(this._element.style.pointerEvents="none")))}}])&&Re(t.prototype,e),i&&Re(t,i),a}();function Ye(t){return t.replace(/[\u00A0-\u9999<>\&"]/gim,function(t){return"S"===t||"s"===t?t:"&#"+t.charCodeAt(0)+";"})}function Qe(t,e,i){var r="circle"===i?[0,0]:[0,.45*-e];return g.a.Point.convert(r)}function We(t,e,i){t.style.backgroundColor="none",t.style.width=e+"px",t.style.height=i+"px"}var He=function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=V()({},{imgUrl:null,imgScale:.8,color:"MazeBlue",size:44,glyph:null,glyphSize:null,glyphColor:"#FFF",innerCircle:!1,innerCircleColor:"#FFFFFF",innerCircleScale:.65,shape:"marker",includeShadow:!0,glyphOffsetTop:0},e),i=document.createElement("div"),n="circle"===r.shape?1:42/52,o=r.size,a=r.size/n,s=o/42,u="circle"===r.shape?.65:34/42,l=(5.4+r.glyphOffsetTop)*s,c=34*s,p=r.glyphSize||o*u*.8,h=61.9047619*r.imgScale,d="circle"===r.shape?25:15,f=(100-h)/2;i.className="marker";var y,m,g,v=V()({},r,{imgWidth:h,imgTop:d,imgLeft:f,imgHeight:50,glyphOffsetTop:l,glyphHeight:c,fontSize:p});i.innerHTML=(m="",g=2===(y=v).clusterSize?5:2<y.clusterSize?10:0,y.glyph&&y.prefix?m+='<span style="color: '+ot(y.glyphColor)+"; display: inline-block; position: absolute; top: "+(y.glyphOffsetTop+g)+"px; height: "+y.glyphHeight+"px; line-height: "+y.glyphHeight+"px; left: 0; right: 0px; text-align: center; font-size: "+y.fontSize+'px;" class="'+y.prefix+"-"+y.glyph+'"></span>':y.glyph&&!y.prefix?m+='<span style="color: '+ot(y.glyphColor)+"; display: inline-block; position: absolute; top: "+(y.glyphOffsetTop+g)+"px; height: "+y.glyphHeight+"px; line-height: "+y.glyphHeight+"px; left: 0; right: 0px; text-align: center; font-size: "+y.fontSize+'px;">'+y.glyph+"</span>":y.imgUrl&&(y.imgUrl=Ye(y.imgUrl),m+='<span style="display: flex; justify-content: center; flex-direction: row; align-items: center; position: absolute; width: '+y.imgWidth+"%; height: "+y.imgHeight+"%; top: "+y.imgTop+"%; left: "+y.imgLeft+'%;"><img width="100%" border="0" style="pointer-events: none;" src="'+y.imgUrl+'"></span>'),"circle"===y.shape?m+='<svg width="100%" height="100%" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="">\n        <circle id="StrokeCircle" cx="20" cy="20" r="20"\n            fill="#FFFFFF"\n            style="stroke: rgb(214, 214, 214);">\n        </circle>\n        <circle id="StrokeCircle" cx="20" cy="20" r="18"\n            fill="'+ot(y.color)+'"\n            style="stroke: rgb(214, 214, 214);">\n        </circle>':(m+='<svg width="'+(42+g)/.42+'%" height="'+(52+g)/.52+'%" viewBox="0 '+(0-g).toString()+" "+(42+g).toString()+' 52" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+(y.includeShadow?'<ellipse fill="#000000" fill-opacity="0.112715127" id="Oval-7" cx="21" cy="50" rx="8" ry="2"></ellipse>':""),1<y.clusterSize&&(2<y.clusterSize&&(m+='<circle id="Cluster2OuterCircle" cx="30" cy="10" r="20" fill="#FFF" stroke="#d6d6d6"></circle>',m+='<circle id="Cluster2InnerCircle" cx="30" cy="10" r="18" fill="#c0c0c0" ></circle>'),m+='<circle id="Cluster1OuterCircle" cx="25" cy="15" r="20" fill="#FFF" stroke="#d6d6d6"></circle>',m+='<circle id="Cluster1InnerCircle" cx="25" cy="15" r="18" fill="#c0c0c0" ></circle>'),m+='<path d="M.93 21.044c0 6.357 2.983 12.215 7.961 16.002l.445.353c3.663 2.681 6.486 5.332 8.597 7.848a26.548 26.548 0 0 1 1.783 2.359c.27.405.432.682.5.812a1 1 0 0 0 1.778-.01c.066-.13.225-.405.488-.81a25.688 25.688 0 0 1 1.757-2.355c2.087-2.515 4.895-5.164 8.525-7.82.093-.068.2-.151.32-.247.25-.205.437-.363.524-.44 4.738-3.797 7.55-9.513 7.55-15.692C41.158 9.935 32.152.93 21.044.93 9.935.93.93 9.935.93 21.044z" fill="#FFF" stroke="#d6d6d6"/><path d="M19.465 43.961c-2.213-2.638-5.154-5.4-8.916-8.152l-.43-.342c-4.504-3.426-7.189-8.7-7.189-14.423C2.93 11.04 11.04 2.93 21.044 2.93c10.004 0 18.114 8.11 18.114 18.114 0 5.565-2.531 10.71-6.8 14.132-.143.123-.309.263-.48.403-.147.118-.23.183-.295.23-3.764 2.754-6.692 5.516-8.883 8.157a30.172 30.172 0 0 0-1.61 2.104 29.99 29.99 0 0 0-1.625-2.109z" fill="'+ot(y.color)+'"></path>'),y.innerCircle&&("circle"===y.shape?m+='<circle stroke="none" fill="'+ot(y.innerCircleColor)+'" fill-rule="evenodd" cx="20" cy="20" r="'+20*y.innerCircleScale+'"></circle>':m+='<circle stroke="none" fill="'+ot(y.innerCircleColor)+'" fill-rule="evenodd" cx="21" cy="21" r="'+20*y.innerCircleScale+'"></circle>'),m+="</svg>"),We(i,o,a),r.offset=Qe(0,a,r.shape);var _=new Ge(i,r);return _.setSize=function(t,e){var i=this._element;e=t/n,this._offset=Qe(0,e,r.shape),this._update(),We(i,t,e)}.bind(_),_},qe={},Xe=0;function Je(o,a,t,e){var s=2<arguments.length&&void 0!==t?t:400,u=3<arguments.length?e:void 0,l=++Xe;qe[l]=1;var c=performance.now(),p=(performance.now(),new g.a.LngLat(o.lng,o.lat));return function t(e){var i,r,n;1===qe[l]&&(s<(i=e-c)&&(i=s),r=(a.lng-o.lng)*(i/s),n=(a.lat-o.lat)*(i/s),p.lng=o.lng+r,p.lat=o.lat+n,u(p),i!==s&&requestAnimationFrame(t))}(c),l}var Ke=i(3),$e=i.n(Ke),ti={};function ei(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}ti.getUniqueSourceIdStr=function(t,e){for(var i=0,r=!0;r&&i<999;)i++,r=!!t.getSource(e+i);return e+i},ti.getUniqueLayerIdStr=function(t,e){for(var i=0,r=!0;r&&i<999;)i++,r=!!t.getLayer(e+i);return e+i};var ii={radius:10,zLevel:0,lngLat:null,fillColor:"rgb(51, 136, 255)",accuracyCircle:!(ti.setLayerPartialStyle=function(i,r,n){var e;n.layout&&Object.keys(n.layout).map(function(t){e=n.layout[t],i.setLayoutProperty(r,t,e)}),n.paint&&Object.keys(n.paint).map(function(t){var e=n.paint[t];i.setPaintProperty(r,t,e)})}),addBeforeLayer:"mm-poi-label",polygonPoints:32},ri=function(){function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.options=$e()({},ii,t),this.options.style=$e()({},{normal:{blueDot:{type:"circle",paint:{"circle-color":e=this.options.fillColor,"circle-radius":{base:1,stops:[[19,8],[20.5,23]]},"circle-stroke-width":5,"circle-stroke-color":"#FFFFFF"},filter:["in","$type","Point"]},accuracyCircle:{type:"fill",paint:{"fill-color":e,"fill-opacity":.2,"fill-outline-color":e}}},offZ:{blueDot:{paint:{"circle-color":"rgba(0,0,0,0.2)","circle-stroke-color":"rgba(0,0,0,0.4)"}},accuracyCircle:{paint:{"fill-opacity":.1,"fill-color":"rgb(153,153,153)","fill-outline-color":"rgb(153,153,153)"}}}},this.options.style),this._sourceId=null,this._accuracyCircleLayerId=null,this._blueDotLayerId=null,this._addedToMap=!1,this}var t,e,r;return t=i,(e=[{key:"getSourceId",value:function(){return!this._sourceId&&this._map&&(this._sourceId=ti.getUniqueSourceIdStr(this._map,"mm-bluedot-source")),this._sourceId}},{key:"getAccuracyCircleLayerId",value:function(){return!this._accuracyCircleLayerId&&this._map&&(this._accuracyCircleLayerId=ti.getUniqueLayerIdStr(this._map,"mm-bluedot-accuracy")),this._accuracyCircleLayerId}},{key:"getBlueDotLayerId",value:function(){return!this._blueDotLayerId&&this._map&&(this._blueDotLayerId=ti.getUniqueLayerIdStr(this._map,"mm-bluedot-circle")),this._blueDotLayerId}},{key:"_addSource",value:function(){this._map.getSource(this.getSourceId())||this._map.addSource(this.getSourceId(),{type:"geojson",data:{type:"FeatureCollection",features:[]}})}},{key:"setStyle",value:function(t){this.options.style=t}},{key:"setOffZStyle",value:function(t){this.options.offZStyle=t}},{key:"getStyle",value:function(){return $e()({},this.options.style).normal}},{key:"_getNormalStyle",value:function(){return $e()({},this.options.style.normal)}},{key:"_getOffZStyle",value:function(){return $e()({},this.options.style.normal,this.options.style.offZ)}},{key:"_addLayer",value:function(){var t,e,i=this._getNormalStyle(),r=this._getOffZStyle(),n=this._onZ()?i:r;this.options.accuracyCircle&&(t=this.getAccuracyCircleLayerId(),this._map.getLayer(t)||(e={id:this.getAccuracyCircleLayerId(),source:this.getSourceId()},e=$e()(e,n.accuracyCircle),this._map.addLayer(e,this.options.addBeforeLayer)));var o,a=this.getBlueDotLayerId();this._map.getLayer(a)||(o={id:this.getBlueDotLayerId(),source:this.getSourceId()},o=$e()(o,n.blueDot),this._map.addLayer(o,this.options.addBeforeLayer))}},{key:"_createGeoJSONCircle",value:function(t,e,i){i=i||64;var r={type:"geojson",data:{type:"FeatureCollection",features:[]}},n=[t.lng,t.lat];if(this.options.accuracyCircle){for(var o,a,s,u=e/1e3,l=[],c=u/(111.32*Math.cos(t.lat*Math.PI/180)),p=u/110.574,h=0;h<i;h++)o=h/i*(2*Math.PI),a=c*Math.cos(o),s=p*Math.sin(o),l.push([t.lng+a,t.lat+s]);l.push(l[0]),r.data.features.push({type:"Feature",geometry:{type:"Polygon",coordinates:[l]},properties:{z:this.options.zLevel}})}return r.data.features.push({type:"Feature",geometry:{type:"Point",coordinates:n},properties:{z:this.options.zLevel}}),r}},{key:"addTo",value:function(t){return this._addedToMap||(this._addedToMap=!0,this._map=t,this._addSource(),this._addLayer(),this._setLngLatRadius(this.options.lngLat,this.options.radius),this._updateZLevelBound=this._updateZLevel.bind(this),this._map.on("zlevel",this._updateZLevelBound)),this}},{key:"remove",value:function(){!1!==this._addedToMap&&(this._addedToMap=!1,this._map&&(this._map.off("zlevel",this._updateZLevelBound),this._map.getLayer(this.getAccuracyCircleLayerId())&&this._map.removeLayer(this.getAccuracyCircleLayerId()),this._map.getLayer(this.getBlueDotLayerId())&&this._map.removeLayer(this.getBlueDotLayerId())))}},{key:"_setRadius",value:function(t,e){var i=!(1<arguments.length&&void 0!==e)||e;return this.options.radius===t?this:(this.options.radius=t,i?this._setLngLatRadius(this.options.lngLat,this.options.radius):this)}},{key:"setAccuracy",value:function(t){return this._setRadius(t)}},{key:"_setLngLatRadius",value:function(t,e){return this.setLngLat(t,{update:!1})._setRadius(e,!1),this._map&&this._map.getSource&&this._map.getSource(this.getSourceId()).setData(this._createGeoJSONCircle(this.options.lngLat,this.options.radius,this.options.polygonPoints).data),this}},{key:"setLngLatAccuracy",value:function(t,e,i){var r=2<arguments.length&&void 0!==i?i:{};return r.animate?(this._setRadius(e,!0),this.animateToPosition(t,r.duration)):this._setLngLatRadius(t,e)}},{key:"setLngLat",value:function(t,e){var i=1<arguments.length&&void 0!==e?e:{};return this.options.lngLat&&this.options.lngLat.lat===t.lat&&this.options.lngLat.lng===t.lng?this:i.animate?this.animateToPosition(t,i.duration):(this.options.lngLat=t,!1===i.update?this:this._setLngLatRadius(this.options.lngLat,this.options.radius))}},{key:"getLngLat",value:function(){return this.options.lngLat}},{key:"animateToPosition",value:function(t,e){e=e||400;var i,r=this.options.lngLat,n=t;return this.animateId&&(i=this.animateId,qe[i]=!1),this.animateId=Je(r,n,e,function(t){this._setLngLatRadius(t,this.options.radius),this.options.lngLat=t}.bind(this)),this}},{key:"_setStyle",value:function(t){var e=this.getAccuracyCircleLayerId(),i=this.getBlueDotLayerId(),r=this._getNormalStyle(),n=this._getOffZStyle(),o=t?r:n;ti.setLayerPartialStyle(this._map,i,o.blueDot),this.options.accuracyCircle&&o.accuracyCircle&&ti.setLayerPartialStyle(this._map,e,o.accuracyCircle)}},{key:"setZLevel",value:function(t){return t===this.options.zLevel||(this.options.zLevel=t,this._updateZLevel()),this}},{key:"_onZ",value:function(){return!this.options.zLevel||0===this.options.zLevel||this.options.zLevel===this._map.zLevel}},{key:"_updateZLevel",value:function(){this._map&&this._addedToMap&&this.options.style.offZ&&this._setStyle(this._onZ())}}])&&ei(t.prototype,e),r&&ei(t,r),i}();function ni(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var oi={layerProperties:{id:"custom-pois-layer",source:"custom-pois-layer",type:"symbol",minzoom:10,layout:{"text-field":"","icon-image":"",visibility:"visible","icon-allow-overlap":!0},paint:{"icon-opacity":{type:"identity",property:"opacity"}}},beforeLayerId:"mm-building-label",cluster:!0,stopClickPropagation:!1,clusterMaxZoom:20,clusterRadius:10},ai=function(){function i(t,e){if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),!t)throw new Error("Need a map to initialize PoisLayer");this._map=t,this.options=$e()({},oi,e),this._updateStyling=this._updateStyling.bind(this),this._onFeaturesClick=this._onFeaturesClick.bind(this),this.onClick=function(){},this._initStyling()}var t,e,r;return t=i,(e=[{key:"setPois",value:function(t){this._lastZLevelCalculated=null,this._geoJson=t,this._updateStyling()}},{key:"_setData",value:function(t){this._map.getSource(this.options.layerProperties.source).setData(t)}},{key:"clear",value:function(){this._map.getSource(this.options.layerProperties.source).setData({type:"FeatureCollection",features:[]})}},{key:"remove",value:function(){this._map.removeLayer(this.options.layerProperties.id),this._map.removeSource(this.options.layerProperties.source),this._map.off("zlevel",this._updateStyling),this._map.layerEventHandler.off("click",this.options.layerProperties.id)}},{key:"getLayer",value:function(){return this._map.getLayer(this.options.layerProperties.id)}},{key:"show",value:function(){this._map.setLayoutProperty(this.options.layerProperties.id,"visibility","visible")}},{key:"hide",value:function(){this._map.setLayoutProperty(this.options.layerProperties.id,"visibility","none")}},{key:"addLayer",value:function(){this._map.addLayer(this.options.layerProperties,this.options.beforeLayerId)}},{key:"_initStyling",value:function(){this._map.addSource(this.options.layerProperties.source,{type:"geojson",data:{type:"FeatureCollection",features:[]},cluster:this.options.cluster,clusterMaxZoom:this.options.clusterMaxZoom,clusterRadius:this.options.clusterRadius}),this.addLayer(),this._map.on("zlevel",this._updateStyling),this._map.layerEventHandler.on("click",this.options.layerProperties.id,this._onFeaturesClick),this._updateStyling()}},{key:"_onFeaturesClick",value:function(t,e){var i=this._map,r=this._map.getZoom();if(1===e.length&&e[0].properties.cluster)return i.flyTo({center:t.lngLat,zoom:r+2,duration:1e3});if(1===e.length)return i.setZLevel(e[0].properties.zLevel),this.onClick(t,[e[0]]);if(1<e.length){if(i.getZoom()<21)return i.flyTo({center:t.lngLat,zoom:r+2,duration:1e3});var n=e.filter(function(t){return t.properties.zLevel===i.getZLevel()});return n.length?this.onClick(t,n):this.onClick(t,e)}}},{key:"_updateStyling",value:function(){var t,e=this._map.zLevel;e!=this._lastZLevelCalculated&&(t={type:"FeatureCollection",features:[]},this._geoJson&&(t.features=this._geoJson.features.map(this.featureMapFunction.bind(this))),this._setData(t),this._lastZLevelCalculated=e)}},{key:"featureMapFunction",value:function(t){var e=this._map.getZLevel(),i=1;0!==t.properties.zLevel&&t.properties.zLevel!==e&&(i=.35);var r=Mazemap.Util.getPoiLngLat(t),n={type:"Point",coordinates:[r.lng,r.lat]},o=t.properties;return o.opacity=i,{type:"Feature",geometry:n,properties:o}}}])&&ni(t.prototype,e),r&&ni(t,r),i}();function si(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ui={className:"",positionGUIControl:null,blueDot:null,map:null,startState:"deactivated"},li={_lastLngLat:null,lngLat:null,_lastZLevel:null,zLevel:null,accuracy:null},ci={bearing:null},pi=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=V()({},ui,t),this.state=this.options.startState,this.events=new Ce(["statechange"]),this.on=this.events.on.bind(this.events),!this.options.map||!this.options.blueDot)throw new Error("Missing needed parameters");this.positionGUIControl=this.options.positionGUIControl,this.blueDot=this.options.blueDot,this.map=this.options.map,this.updateInjectedLocationToMap=this.updateInjectedLocationToMap.bind(this)}var t,i,r;return t=e,(i=[{key:"getState",value:function(){return this.state}},{key:"setState",value:function(t){if(t!==this.state)return this.state=t,this.events.trigger("statechange"),"follow"===this.state?(this.positionGUIControl&&this.positionGUIControl.setState("follow"),this._addEventListeners(),void(li.lngLat=li._lastLngLat)):"deactivated"===this.state?(this.positionGUIControl&&this.positionGUIControl.setState("default"),void this._removeEventListeners()):"active"===this.state?(this.positionGUIControl&&this.positionGUIControl.setState("active"),void this._addEventListeners()):void 0}},{key:"_addEventListeners",value:function(){this._updateInterval||(this._updateInterval=setInterval(this.updateInjectedLocationToMap,40))}},{key:"_removeEventListeners",value:function(){this._updateInterval&&(clearInterval(this._updateInterval),this._updateInterval=!1)}},{key:"updateLocationData",value:function(t){t.latlng,t.accuracy,t.zLevel;li.lngLat=li._lastLngLat=t.lngLat,li.accuracy=t.accuracy,li.zLevel=li._lastZLevel=t.zLevel}},{key:"updateBearingData",value:function(t){ci.bearing=t.bearing}},{key:"updateInjectedLocationToMap",value:function(){var t={animate:!0,duration:400};li.accuracy&&this.blueDot.setAccuracy(li.accuracy);var e=li.lngLat;e&&e.lat&&e.lng&&(t.center=li.lngLat,this.blueDot.setLngLat(e,{animate:!0,duration:400}));var i=ci.bearing;i&&(t.bearing=i),(t.bearing||t.center)&&(li.lngLat=null,ci.bearing=null,"follow"===this.state&&this.map.easeTo(t,{animate:!0,duration:400})),li.zLevel&&li.zLevel!==this.map.zLevel&&"follow"===this.state&&(this.map.zLevel=li.zLevel),li.zLevel&&(this.blueDot.setZLevel(li.zLevel),li.zLevel=null)}}])&&si(t.prototype,i),r&&si(t,r),e}(),hi=i(22),di=i.n(hi),fi=i(47),yi=i.n(fi),mi=i(48),gi=i.n(mi),vi=i(49),_i=i.n(vi),xi=i(50),bi=i.n(xi),Mi=i(51),wi=i.n(Mi),Ii=i(52),Ti=i.n(Ii),Li=i(53),zi=i.n(Li),Di=i(54),Ai=i.n(Di),Si=i(55),Ei=i.n(Si),Ci=i(56),Ni=i.n(Ci),ji=i(16),ki=i.n(ji),Pi=i(17),Oi=i.n(Pi),Bi=i(57),Ui=i.n(Bi),Ri=i(58),Fi=i.n(Ri),Zi=i(59),Vi=i.n(Zi),Gi=i(60),Yi=i.n(Gi),Qi=i(61),Wi=i.n(Qi),Hi=i(23),qi=i.n(Hi),Xi=i(24),Ji=i.n(Xi),Ki=i(62),$i=i.n(Ki),tr=i(63),er=i.n(tr),ir=i(64),rr=i.n(ir),nr=i(65),or=i.n(nr),ar=i(66),sr=i.n(ar),ur=i(67),lr=i.n(ur),cr=i(68),pr=i.n(cr),hr=i(69),dr=i.n(hr),fr=i(70),yr=i.n(fr),mr=i(71),gr=i.n(mr),vr={foot_white:ki.a,foot_black:Oi.a,"stair-up_black":Fi.a,"stair-down_black":Vi.a,stair_black:Ui.a,pedestrian_white:ki.a,pedestrian_black:Oi.a,bicycle_white:Yi.a,bicycle_black:Wi.a,car_white:qi.a,car_black:Ji.a,drive_white:qi.a,drive_black:Ji.a,bus_white:$i.a,bus_black:er.a,tram_white:rr.a,tram_black:or.a,metro_white:sr.a,metro_black:lr.a,rail_white:pr.a,rail_black:dr.a,airplane_white:yr.a,airplane_black:gr.a},_r={duration_white:Ei.a,duration_black:Ni.a,building_enter_green:di.a,building_exit_green:di.a,exclamation_circle_yellow:yi.a,elevator_blue:Ti.a,elevator_down_blue:zi.a,elevator_up_blue:Ai.a,stairs_blue:_i.a,stairs_down_blue:bi.a,stairs_up_blue:wi.a,share_arrow_blue:gi.a};function xr(t,e){var i=t&&t.toLowerCase()+"_"+e.toLowerCase();return vr[i]}function br(t,e){var i=t.toLowerCase()+"_"+e.toLowerCase();return _r[i]}function Mr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var wr={type:"FeatureCollection",features:[]},Ir={lineWidth:12,highlightLineWidth:6,highlightOpacity:.25,highlightColor:"#FFF"},Tr=function(){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.map=t,this.data=null,this.options=V()({},Ir,e),this.sourceId=ti.getUniqueSourceIdStr(t,"mm-route-shape-"),t.addSource(this.sourceId,{type:"geojson",data:wr}),t.addLayer({id:ti.getUniqueLayerIdStr(t,"mm-route-shape-"),type:"line",source:this.sourceId,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":{type:"identity",property:"line-color"},"line-width":this.options.lineWidth,"line-opacity":{type:"identity",property:"line-opacity"}}},"mm-poi-label"),t.addLayer({id:ti.getUniqueLayerIdStr(t,"mm-route-shape-highlight-"),type:"line",source:this.sourceId,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":this.options.highlightColor,"line-width":this.options.highlightLineWidth,"line-opacity":this.options.highlightOpacity}},"mm-poi-label")}var t,e,r;return t=i,(e=[{key:"setData",value:function(t){this.map.getSource(this.sourceId).setData(t)}}])&&Mr(t.prototype,e),r&&Mr(t,r),i}();function Lr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var zr={markerMinZoom:10,routeLineColorPrimary:"#0099EA",routeLineColorSecondary:"#888888",routeLineColorTransit:"#31D64B"},Dr=function(){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.map=t,this.options=V()({},zr,e),this.pathFeatures=[],this.routeDrawer=new Tr(this.map,this.options),this.routeMarkers=[],t.on("zlevel",this._updatePath.bind(this)),t.on("zoomend",this._onZoomEnd.bind(this)),this._updatePath()}var t,e,r;return t=i,(e=[{key:"_updatePath",value:function(){var i=this,r=this.map.getZLevel();this.pathFeatures.forEach(function(t){var e="TRANSIT"===t.properties.travelMode;"mergesegment"===t.properties.source?(t.properties["line-color"]=i.options.routeLineColorPrimary,t.properties["line-opacity"]=.5):e?(t.properties["line-color"]=i.options.routeLineColorTransit,t.properties["line-opacity"]=1):0===t.properties.z||t.properties.z===r?(t.properties["line-color"]=i.options.routeLineColorPrimary,t.properties["line-opacity"]=1):(t.properties["line-color"]=i.options.routeLineColorSecondary,t.properties["line-opacity"]=.75)}),this.routeDrawer.setData({type:"FeatureCollection",features:this.pathFeatures})}},{key:"_updateMarkers",value:function(){var t=this.generateMarkersForFeatures(this.pathFeatures);this.setMarkers(t)}},{key:"_onZoomEnd",value:function(){var e=this.map.getZoom();e<=this.options.markerMinZoom?this.hideMarkers(function(t){return e<=t.options.minZoom}):this.showMarkers()}},{key:"setPath",value:function(t){return this.setPathFeatures(t&&t.features)}},{key:"setPathFeatures",value:function(t){return this.pathFeatures=t||[],this._updatePath(),this._updateMarkers(),this}},{key:"setMarkers",value:function(t){var e=this;this.removeMarkers(),this.routeMarkers=t.slice(),this.routeMarkers.forEach(function(t){t.addTo(e.map)})}},{key:"removeMarkers",value:function(){this.routeMarkers.forEach(function(t){t.remove()}),this.routeMarkers=[]}},{key:"hideMarkers",value:function(e){this.routeMarkers.forEach(function(t){(!e||e&&e(t))&&t.remove()})}},{key:"showMarkers",value:function(){var e=this;this.routeMarkers.forEach(function(t){t.addTo(e.map)})}},{key:"clear",value:function(){return this.pathFeatures=[],this._updateMarkers(),this._updatePath(),this}},{key:"addRoutePathClickListener",value:function(){var i=["mm-route-shape-off-z-outline"];this.map.on("mousemove",function(t){var e=this.map.queryRenderedFeatures(t.point,{layers:i});this.map.getCanvas().style.cursor=e.length?"pointer":""}.bind(this)),this.map.on("click",function(t){var e=this.map.queryRenderedFeatures(t.point,{layers:i});e.length&&this.map.fire("routeClick",{features:e})}.bind(this)),this.map.on("routeClick",function(t){var e=t.features[0].properties.z;this.map.zLevel=e}.bind(this))}},{key:"generateMarkersForFeatures",value:function(t){var g=[];return t.forEach(function(t){var e,i,r,n,o,a,s,u,l,c,p,h,d,f,y,m;"Point"===t.geometry.type&&(i="MazeBlue",r=16,n=.4,o=!(e=void 0),a=.7,s=.8,u=36,l=t.properties.z,(c="TRANSIT"===t.properties.travelMode)&&(r=10,o=!(n=1),s=.6,i="#31D64B"),"STAIR"===t.properties.routepoint?e=br("stairs","blue"):"STAIR-UP"===t.properties.routepoint?e=br("stairs_up","blue"):"STAIR-DOWN"===t.properties.routepoint?e=br("stairs_down","blue"):"ELEVATOR"===t.properties.routepoint?e=br("elevator","blue"):"ELEVATOR-UP"===t.properties.routepoint?e=br("elevator_up","blue"):"ELEVATOR-DOWN"===t.properties.routepoint?e=br("elevator_down","blue"):"NO_HC"===t.properties.routepoint?e=br("exclamation_circle","yellow"):"BUILDING_ENTER"!==t.properties.routepoint&&"BUILDING_EXIT"!==t.properties.routepoint||(e=br("building_enter","green"),i="green",a=.85,u=28,s=1.3,n=1,l=t.properties.z),"AIRPLANE"===t.properties.travelType&&(r=2),c&&(e=xr(t.properties.travelType,"white")),p=new He({shape:"circle",size:u,color:i,innerCircle:o,innerCircleScale:a,glyphColor:"#218af3",glyph:e?null:"",imgUrl:e,imgScale:s,offZOpacity:n,zLevel:l,minZoom:r}).setLngLat(t.geometry.coordinates),c&&(d=((h=t.properties.transitInfo).shortName?h.shortName+" ":"")+h.headsign,f=h.from.name,y=h.to.name,m=new Mazemap.Popup({closeOnClick:!0,offset:[0,-18]}).setHTML('<div style="text-align: left; margin: 8px;"><span class="transit-cased-title">'+d+'</span><p style="text-align: left; margin: 0px; margin-top: 4px; padding-top: 4px;"><strong>From: </strong>'+f+"<br /><strong>To: </strong>"+y+"</p></div>"),p.setPopup(m)),g.push(p))}),g}}])&&Lr(t.prototype,e),r&&Lr(t,r),i}(),Ar=i(72),Sr=i.n(Ar),Er=i(73),Cr=i.n(Er);function Nr(t,e,i,r,n){if(!t)return"";var o=r||"black",a=yt(t.durationEstimateSeconds/60,!0),s="",u=t.distanceDrivingMeters+t.distanceWalkingMeters+t.distanceCyclingMeters;i&&i.forEach(function(t){s+='<div class="metric-info-item">                         <img aria-role="presentation" aria-hidden="true" class="metric-icon" src=\''+xr(t,o)+"'>                     </div>"});var l='<div aria-labelledby="mm-gui-aria-duration-label" class="metric-info-item" style="margin-left: 20px;">                                 '+(n?'<span style="color: '+o+'" class="metric-data">'+ft(u,e)+"</span>":"")+'                                <img aria-role="presentation" aria-hidden="true" class="metric-icon" src=\''+br("duration",o)+"'>                                 <span style=\"color: "+o+'" class="metric-data">'+a+'</span>                                 <span id="mm-gui-aria-duration-label" class="mm-aria-hidden">Travel duration: '+a+"</span>                             </div>";return'<div class="mazemap-gui-route-meta-container">                 <div class="route-metric-info">'+s+l+"</div>             </div>"}function jr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var kr=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=V()({},t),this.version="0.1-alpha",this.container=Ct("div","mazemap-gui-route-details-container"),this.state={waypoints:{a:null,b:null},pathMetrics:null,modes:[],directionSteps:null,instructionsError:null,distanceUnitsType:this.options.distanceUnitsType||"metric"},this.render()}var t,i,r;return t=e,(i=[{key:"setWayPointA",value:function(t){this.state.waypoints.a=t}},{key:"setPathMetrics",value:function(t){this.state.pathMetrics=t}},{key:"setWayPointB",value:function(t){this.state.waypoints.b=t}},{key:"setSteps",value:function(t){this.state.instructionsError=null,this.state.directionSteps=t}},{key:"setModes",value:function(t){this.state.modes=t}},{key:"setDistanceUnitsType",value:function(t){this.state.distanceUnitsType=t}},{key:"setStepsError",value:function(t){this.state.instructionsError=t}},{key:"getContainer",value:function(){return this.container}},{key:"render",value:function(){var t="<div>"+function(t){if(!t||!t.a||!t.b)return"";var e='                 <div class="waypoint-item" tabindex="0">                     <h2 class="waypoint-title"><img aria-role="presentation" aria-hidden="true" class="waypoint-icon" src=\'{{waypointIcon}}\'>{{waypointTitle}}</h2>                     <span class="waypoint-detail">{{waypointDetail}}</span>                 </div>',i='         <div class="mazemap-gui-route-waypoints">             {{wayPointA}}             {{wayPointB}}         </div>',r="";t.a&&(r=e.replace("{{waypointIcon}}",Sr.a).replace("{{waypointTitle}}",t.a.title).replace("{{waypointDetail}}",t.a.detail),i=i.replace("{{wayPointA}}",r)),i=i.replace("{{wayPointA}}",r);var n="";return t.b&&(n=e.replace("{{waypointIcon}}",Cr.a).replace("{{waypointTitle}}",t.b.title).replace("{{waypointDetail}}",t.b.detail),i=i.replace("{{wayPointB}}",n)),i=i.replace("{{wayPointB}}",r)}(this.state.waypoints)+"<hr />"+Nr(this.state.pathMetrics,this.state.distanceUnitsType,this.state.modes)+"<hr />"+function(t,e){if(e)return'<div class="mazemap-route-description-container">                     <h2 id="route-details-steps-header">'+e+"</h2>                 </div>";if(!t)return"";for(var i="",r=0;r<t.length;r++)i+=t[r].instruction?'<li aria-role="list-item" tabindex="0" class="directions-list-item"><span class="item-inner-spacing">{{instruction}}</span></li>'.replace("{{instruction}}",t[r].instruction):"";return'<div class="mazemap-route-description-container">                 <h2 id="route-details-steps-header">Detailed instructions</h2>                 <ol class="steps-list" tabindex="0" aria-labelledby="route-details-steps-header">                     '+i+"                </ol>             </div>"}(this.state.directionSteps,this.state.instructionsError)+"</div>";return this.container.innerHTML=t,this.container}}])&&jr(t.prototype,i),r&&jr(t,r),e}(),Pr=i(25),Or=i.n(Pr),Br=i(74),Ur=i.n(Br),Rr=i(75),Fr=i.n(Rr),Zr=i(76),Vr=i.n(Zr),Gr=i(77),Yr=i.n(Gr),Qr=i(78),Wr=i.n(Qr),Hr=i(79),qr=i.n(Hr),Xr=i(80),Jr=i.n(Xr);function Kr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var $r={className:"",startState:"passive"},tn=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=V()({},$r,t),this.options.className="mazemap-control-position "+this.options.className,this.state=this.options.startState,this.events=new Ce(["click","statechange"]),this.on=this.events.on.bind(this.events)}var t,i,r;return t=e,(i=[{key:"onRemove",value:function(){this._container.remove()}},{key:"onAdd",value:function(t){var e=Ct("div",this.options.className+" mapboxgl-ctrl-group mapboxgl-ctrl");return Nt(e,"click",this._onClick,this),this._map=t,this._container=e,this.render(),e}},{key:"_onClick",value:function(t){t.preventDefault(),t.stopPropagation(),this.events.trigger("click")}},{key:"setState",value:function(t){this.state=t,this.events.trigger("statechange"),this.render()}},{key:"getState",value:function(){return this.state}},{key:"render",value:function(){this._container.innerHTML="",this.btn=Ct("button","mapboxgl-ctrl-icon location-btn",this._container),this.btn.setAttribute("aria-label","User position");var t=new Image;switch(t.width="20",t.className="svg-icon",t.alt="GPS icon image",this.state){case"default":case"passive":t.src=Ye(Or.a);break;case"active":t.src=Ye(Ur.a);break;case"offz":t.src=Ye(Vr.a);break;case"follow":t.src=Ye(Fr.a);break;case"working":t.src=Ye(Wr.a),t.className+=" pos-gui-rotate";break;case"error":t.src=Ye(Yr.a);break;case"off":t.src=Ye(qr.a);break;case"unfixed":t.src=Ye(Jr.a)}this.btn.appendChild(t)}}])&&Kr(t.prototype,i),r&&Kr(t,r),e}();function en(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rn(e,i){Object.keys(i).forEach(function(t){e.style[t]=i[t]})}var nn={transition:"all 1s",background:"rgba(0, 0, 0, 0)",position:"fixed",top:0,left:0,right:0,bottom:0},on={transition:"all 1s",background:"#f6f6f6",borderRadius:"3px",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",padding:"40px",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -100%)"},an=function(){function n(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=e.container,r=e.closeOnClickOutside;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this._container=i||document.body,this._createDOMElement(),!1!==r&&(this._card.onclick=function(t){return t.stopPropagation()},this._domEl.onclick=function(){return t.hide()})}var t,e,i;return t=n,(e=[{key:"_createDOMElement",value:function(){var t=document.createElement("div");rn(t,nn);var e=document.createElement("div");rn(e,on),t.appendChild(e),this._domEl=t,this._card=e}},{key:"show",value:function(){var t=this;return this._container.appendChild(this._domEl),setTimeout(function(){rn(t._domEl,{transition:"all 0.2s",background:"rgba(0, 0, 0, 0.5)"}),rn(t._card,{transform:"translate(-50%, -50%)"})},1),this}},{key:"hide",value:function(){var t=this;return rn(this._domEl,{opacity:0}),setTimeout(function(){return t._container.removeChild(t._domEl)},200),this}},{key:"getContentElement",value:function(){return this._card}},{key:"setContent",value:function(t){return this._card.innerHTML="",this._card.appendChild(t),this}},{key:"setHTML",value:function(t){return this._card.innerHTML=t,this}},{key:"buildContent",value:function(t){var e=t.title,i=t.body,r=document.createElement("div"),n=document.createElement("h3");n.innerHTML=e,r.appendChild(n);var o=document.createElement("div");return o.innerHTML=i,r.appendChild(o),this.setContent(r),this}}])&&en(t.prototype,e),i&&en(t,i),n}();function sn(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function un(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ln=function(e,i){Object.keys(i).forEach(function(t){e.style[t]=i[t]})},cn={position:"absolute",top:0,bottom:0,background:"#f6f6f6",borderRight:"solid 1px #ccc",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",transition:"left .5s"},pn={position:"absolute",top:0,left:0,right:0,bottom:0,width:"auto"},hn=function(){function s(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=e.el,r=e.map,n=e.width,o=e.side,a=e.display;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),this._domEl=i,this._map=r,this._width=n||"300px",this._side=o||"left",ln(this._domEl,Object.assign((sn(t={transition:this._side+" .5s"},this._side,"-"+this._width),sn(t,"width",this._width),sn(t,"display",a||"block"),t),cn)),ln(this._mapEl,Object.assign({transition:this._side+" .5s"},pn))}var t,e,i;return t=s,(e=[{key:"show",value:function(){var t=this;setTimeout(function(){ln(t._domEl,sn({},t._side,0)),ln(t._mapEl,sn({},t._side,t._width))},1)}},{key:"hide",value:function(){ln(this._domEl,sn({},this._side,"-"+this._width)),ln(this._mapEl,sn({},this._side,0))}},{key:"_mapEl",get:function(){return this._map.getContainer()}}])&&un(t.prototype,e),i&&un(t,i),s}();function dn(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var fn=function(){function a(t){var e=t.el,i=t.items,r=t.getItemId,n=t.createItemElement,o=t.noItemsMessage;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this._domEL=e,this._getItemId=r,this._createItemElement=n,this._noItemsMessage=o||"No Items",this._activeId=null,this._events=new Ce(["activeItemChange"]),this.setItems(i||[])}var t,e,i;return t=a,(e=[{key:"setItems",value:function(t){var r=this;this._items=t.slice(),0===t.lenght&&(this._domEL.innerHTML="<i>"+this._noItemsMessage+"</i>"),this._domEL.innerHTML="";function n(t){var e=t.currentTarget.getAttribute("data-item-id");r.setActiveItemId(e)}t.forEach(function(t){var e=r._createItemElement(t),i=r._getItemId(t);e.setAttribute("data-item-id",i),e.onclick=n,r._domEL.appendChild(e)})}},{key:"getItemElementFromId",value:function(t){return this._domEL.querySelector('[data-item-id="'+t+'"]')}},{key:"getActiveItemId",value:function(){return this._activeId}},{key:"setActiveItemId",value:function(t){var e,i;t!==this._activeId&&(!this._activeId||(e=this.getItemElementFromId(this._activeId))&&e.classList.remove("selected"),this._activeId=t,(i=this.getItemElementFromId(this._activeId))&&i.classList.add("selected"),this.events.trigger("activeItemChange"))}},{key:"setActiveItem",value:function(t){var e=t?this._getItemId(t):null;this.setActiveItemId(e)}},{key:"events",get:function(){return this._events}}])&&dn(t.prototype,e),i&&dn(t,i),a}(),yn=i(81),mn=i.n(yn);var gn={Turf:n,Colors:o,getPoiLngLat:at,metersToString:ft,minutesToString:yt,setQueryString:function(t){var e=window.location.protocol+"//"+window.location.host+window.location.pathname+t+window.location.hash;window.history.pushState({path:e},"",e)},parseUrlQueryParam:function(t,e){var i=mn()(e),r=i.hash||{},n=i.search||{};return r.hasOwnProperty(t)?decodeURIComponent(r[t]):n.hasOwnProperty(t)?decodeURIComponent(n[t]):null}},vn={analyticsEnabled:!0,trackerName:"MazeMapGA"};var _n=function(){var t,e,i,r,n,o,a;t=window,e=document,i="script",r="https://www.google-analytics.com/analytics.js",n="ga",t.GoogleAnalyticsObject=t.GoogleAnalyticsObject||"ga",t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},t[n].l=+new Date,(o=e.createElement(i)).async=1,o.src=r,window.addEventListener("load",function(){e.getElementsByTagName("head").item(0).appendChild(o),(a=e.getElementsByTagName(i)[0]).parentNode.insertBefore(o,a)});var s=window.GoogleAnalyticsObject;return window[s]("create",M,"auto",{name:vn.trackerName}),s}();function xn(t){return"".concat(vn.trackerName,".").concat(t)}var bn={set:function(t,e){vn.analyticsEnabled&&window[_n](xn("set"),t,e)},sendEvent:function(t,e,i,r){vn.analyticsEnabled&&window[_n](xn("send"),"event",t,e,i,r)},sendErrorEvent:function(t,e,i,r){vn.analyticsEnabled&&window[_n](xn("send"),"event","Error: "+t,e,i,r)},pageView:function(){vn.analyticsEnabled&&window[_n](xn("send"),"pageview")},timing:function(t,e,i,r){vn.analyticsEnabled&&window[_n](xn("send"),"timing",t,e,i,r)}};function Mn(){vn.analyticsEnabled=!1}function wn(){return vn.analyticsEnabled}function In(t){t&&bn.set(w,t)}function Tn(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}bn.set("anonymizeIp",!0),In("JS API");var Ln=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,r;return e=t,r=[{key:"trackMapInit",value:function(t){var e="number"==typeof t.campuses?"Id":"Tag",i=t.campuses;bn.sendEvent("Map Initialization",e,i)}}],(i=null)&&Tn(e.prototype,i),r&&Tn(e,r),t}(),zn=i(10);function Dn(t){t.getZLevel();if(!t.getSource("mm-tiles"))throw new Error("MazeMap Tile Source not added");t.style.sourceCaches["mm-tiles"].clearTiles(),t._update()}function An(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Sn={},En=function(){function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.options=V()({},Sn,e),this.map=t,this.handlers={},this.defaultHandlers={},this._onMapEvent=this._onMapEvent.bind(this)}var t,e,r;return t=i,(e=[{key:"getHandleLayers",value:function(t){return this.handlers[t]?Object.keys(this.handlers[t]):[]}},{key:"on",value:function(t,e,i){this.defaultHandlers[t]||this.handlers[t]||(this.defaultHandlers[t]=[],this.handlers[t]={},this.map.on(t,this._onMapEvent)),e?this.handlers[t][e]=i:this.defaultHandlers[t].push(i)}},{key:"off",value:function(t,e){this.handlers[t]&&this.handlers[t][e]&&(this.handlers[t][e]=null,delete this.handlers[t][e])}},{key:"_onMapEvent",value:function(r){var n=this,t=this.getHandleLayers(r.type),o=r.type,a=this.map.queryRenderedFeatures(r.point,{layers:t}),s=a.reduce(function(t,e){var i=e.layer.id;return-1===t.indexOf(i)?t.concat([i]):t},[]);r.eventLayers=s,r.eventFeatures=a;for(var u=!0,e=0;e<s.length;e++){if("break"===function(t){if(!0!==u)return"break";var e=s[t],i=a.filter(function(t){return t.layer.id===e});u=n.handlers[o][e](r,i)}(e))break}if(!0===u){if(!this.defaultHandlers[o])return;this.defaultHandlers[o].forEach(function(t){t(r)})}}}])&&An(t.prototype,e),r&&An(t,r),i}(),Cn=i(82),Nn=i.n(Cn);function jn(t){this._cluster=Nn()({}),this._cluster.load(t),this._tileZoom=void 0,this._map=void 0,this._labelsByZoom={},this.__onZoom=this._onZoom.bind(this)}jn.prototype={setData:function(t){this._labelsByZoom={},this._tileZoom=null,this._cluster.load(t.features.filter(function(t){return"Point"===t.geometry.type})),this._onZoom()},addTo:function(t){return(this._map=t).on("zoom",this.__onZoom),this._onZoom(),this},remove:function(){return this._map.off("zoom",this.__onZoom),this._labelsByZoom={},this._tileZoom=null,this},_onZoom:function(){var t,e=Math.floor(this._map.getZoom());if(e!==this._tileZoom){this._tileZoom=e;var i=this._cluster.getClusters([-180,-85,180,85],e),r=i.length;if(this._labelsByZoom[e]){var n=this._map.getSource("mm-campus-cluster");n&&n.setData(this._labelsByZoom[e])}else{for(this._labelsByZoom[e]={type:"FeatureCollection",features:[]},t=0;t<r;t++){var o,a,s=void 0;1<i[t].properties.point_count?(o=i[t].properties.cluster_id,(a=this._cluster.getLeaves(o,e)).length<=3?s=a.sort(function(t,e){return e.properties.priority-t.properties.priority}).map(function(t){return t.properties.name}).join("\n"):function(){var e={};a.sort(function(t,e){return e.properties.priority-t.properties.priority}).map(function(t){return t.properties.parents.filter(function(t){return t})}).forEach(function(t){return t.forEach(function(t){return e[t]?e[t]++:e[t]=1})});var i={};Object.keys(e).map(function(t){return[t,e[t]]}).filter(function(t){return 1<t[1]}).map(function(t){return i[t[0]]=t[1]}),a.map(function(t){t.properties.parents.some(function(t){return t in i})||(i[t.properties.name]=1)}),s=Object.keys(i).map(function(t){return[t,i[t]]}).sort(function(t,e){return e[1]-t[1]}).map(function(t){return t[0]}).slice(0,3).join("\n")}()):s=i[t].properties.name,this._labelsByZoom[e].features.push({type:"Feature",geometry:i[t].geometry,properties:{name:s}})}var u=this._map.getSource("mm-campus-cluster");u&&u.setData(this._labelsByZoom[e])}}}};var kn={type:"FeatureCollection",features:[]},Pn=function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default",i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{showCampusLabels:!0};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=i,this.options.showCampusLabels=!1!==this.options.showCampusLabels,"string"==typeof e?this.loadCampusCollection(e):this.loadSingleCampus(e)};function On(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Pn.prototype={loadCampusCollection:function(t){return this.campusId=null,this.collectionTag=t,this.campuses=ge.getCampusesFeatureCollection(t,!0),this.campuses.then(this._setCampuses.bind(this))},loadSingleCampus:function(t){return this.collectionTag=null,this.campusId=t,this.campuses=ge.getCampusFeatureCollection(t,!0),this.campuses.then(this._setCampuses.bind(this))},onceWhenLoaded:function(){return this.campuses.then(function(){return null})},getCampusCollectionTag:function(){return this.collectionTag},setMap:function(t){this._map=t,this._addCampusesSource(this._map),this._initCampusStyling(this._map),this.campuses.then(this._setCampuses.bind(this))},_addCampusesSource:function(t){t.addSource("mm-campus-geojson",{type:"geojson",data:kn}),this.options.showCampusLabels&&(t.addSource("mm-campus-cluster",{type:"geojson",data:kn,maxzoom:20,cluster:!0,clusterRadius:20,clusterMaxZoom:14}),this.campusClusterMarkers=new jn(kn.features),this.campusClusterMarkers.addTo(t))},_setCampuses:function(t){if(this._map){var e=this._map.getSource("mm-campus-geojson");return t?(e&&e.setData(t),this.campusClusterMarkers&&this.campusClusterMarkers.setData(t),t):(this.campusClusterMarkers&&(this.campusClusterMarkers._labelsByZoom={},this.campusClusterMarkers.setData(kn)),void(e&&e.setData(kn)))}},_initCampusStyling:function(t,e){var i=1<arguments.length&&void 0!==e?e:"mm-campus-geojson";t.addLayer({id:"mm-campus-area",type:"fill",minzoom:0,source:i,paint:{"fill-color":"hsla(29, 68%, 69%, 0.16)","fill-opacity":{base:1,stops:[[5,0],[6,.75],[12,.75],[14,.1],[15,0]]}},filter:["any",["in","$type","Polygon"]]},"mm-building-fill"),this.options.showCampusLabels&&(t.addLayer({id:"mm-campus-dot",source:i,type:"circle",minzoom:0,maxzoom:14,paint:{"circle-color":"#F3752A","circle-radius":4,"circle-stroke-width":2,"circle-stroke-color":"white"},filter:["==","$type","Point"]}),t.addLayer({id:"mm-campus-label",source:"mm-campus-cluster",type:"symbol",minzoom:0,maxzoom:17.5,layout:{"symbol-avoid-edges":!1,"text-field":"{name}","text-font":{base:1,stops:[[4,["DIN Offc Pro Bold"]],[5,["DIN Offc Pro Bold"]],[17,["DIN Offc Pro Regular"]]]},"text-size":{base:1,stops:[[4,10],[16,15]]},"text-transform":{base:1,stops:[[13,"none"],[14,"uppercase"]]},"text-anchor":{base:1,stops:[[13,"top"],[14,"center"]]},"text-padding":4,"text-offset":{base:1,stops:[[13,[0,.5]],[14,[0,0]]]},"text-letter-spacing":.05},paint:{"text-color":"#202","text-halo-color":"#fff","text-halo-width":2},filter:["==","$type","Point"]}))}};var Bn={},Un={minZoom:16},Rn=function(){function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.options=V()({},Un,e),this._map=t,this._currentCampusId=null,this._enabled=!1,this.zLevels={},this.events=new Ce(["zlevelsupdate"]),this.on=this.events.on.bind(this.events)}var t,e,r;return t=i,(e=[{key:"isEnabled",value:function(){return this._enabled}},{key:"enable",value:function(){this.isEnabled()||(this.debounceRefreshAvailableZLevels=st(this.refreshAvailableZLevels.bind(this),200),this._map.on("moveend",this.debounceRefreshAvailableZLevels),this._map.on("zoomend",this.debounceRefreshAvailableZLevels),this._map.on("sourcedata",this.debounceRefreshAvailableZLevels),this._enabled=!0,this.debounceRefreshAvailableZLevels())}},{key:"disable",value:function(){this.isEnabled()&&(this._map.off("moveend",this.debounceRefreshAvailableZLevels),this._map.off("zoomend",this.debounceRefreshAvailableZLevels),this._map.off("sourcedata",this.debounceRefreshAvailableZLevels),this._enabled=!1)}},{key:"setDefaultZlevel",value:function(t){t.properties.defaultZLevel&&(this._map.zLevel=t.properties.defaultZLevel)}},{key:"refreshCurrentCampus",value:function(){var t=this._map.getLayer("mm-campus-area")?this._map.queryRenderedFeatures(this._map.project(this._map.getCenter()),{layers:["mm-campus-area"]}):[];if(0<t.length){var e=t[0],i=e.properties.id,r=!this._map.getZLevel();return(this._currentCampusId!==i||r)&&(this._getBuildingsInMapView().concat(this._getFloorsInMapView()).length||this.options.initialCampuses?(this._currentCampusId=i,this.options.initialCampuses=null,this.debounceRefreshAvailableZLevels()):this.setDefaultZlevel(e),!0)}return!1}},{key:"_campusBuildingsHashMap",value:function(t){return Bn[t]?Bn[t]:Bn[t]=(e=t,ge.getBuildingsByCampusId(e).then(function(t){return function(t){for(var e={},i=0;i<t.length;i++){var r={};r.id=t[i].properties.id,r.floors={};var n,o,a=0,s=t[i].properties.floors;for(a in s)s.hasOwnProperty(a)&&(n=s[a].z,o=s[a].name,r.floors[n]=o);e[r.id]=r}return e}(t)}).catch(function(t){window.console.error("Error fetching data about buildings: ",t)}));var e}},{key:"_getBuildingsInMapView",value:function(){return this._map.getLayer("mm-building-fill")?ht(this._map.queryRenderedFeatures({layers:["mm-building-fill"]}),"id"):[]}},{key:"_getFloorsInMapView",value:function(){return this._map.getLayer("mm-floor-outline")?ht(this._map.queryRenderedFeatures({layers:["mm-floor-outline"]}),"id"):[]}},{key:"refreshAvailableZLevels",value:function(){if(this._map.getZoom()<this.options.minZoom)null!==this.zLevels&&(this.zLevels=null,this.events.trigger("zlevelsupdate",{zLevels:null}));else if(!0!==this.refreshCurrentCampus()&&null!==this._currentCampusId){var t,e=this._getBuildingsInMapView(),l=null;if(!this._map.getLayer("mm-building-fill")||0<(t=ht(this._map.queryRenderedFeatures(this._map.project(this._map.getCenter()),{layers:["mm-building-fill"]}),"id")).length&&(l=t[0]),!e.length)return this._getFloorsInMapView().length?void 0:(this.zLevels=null,void this.events.trigger("zlevelsupdate",{zLevels:null}));var c=e.map(function(t){return t.properties.id});this._campusBuildingsHashMap(this._currentCampusId).then(function(t){var e=[];for(var i in t)-1!==c.indexOf(t[i].id)&&e.push(t[i]);this.zLevels={};for(var r=0;r<e.length;r++){var n=e[r].floors,o=0;for(o in n)n.hasOwnProperty(o)&&(this.zLevels[o]=n[o])}if(l){var a=t[l.properties.id];if(a){var s=a.floors;for(var u in s)s.hasOwnProperty(u)&&(this.zLevels[u]=s[u])}}this.events.trigger("zlevelsupdate",{zLevels:this.zLevels})}.bind(this))}}}])&&On(t.prototype,e),r&&On(t,r),i}();function Fn(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Zn={type:"FeatureCollection",features:[]},Vn=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=t,this.data=null,this.sourceId=ti.getUniqueSourceIdStr(t,"mm-outline-shape-"),t.addSource(this.sourceId,{type:"geojson",data:Zn}),t.addLayer({id:ti.getUniqueLayerIdStr(t,"mm-outline-shape-"),type:"line",source:this.sourceId,paint:{"line-color":"#3098fc","line-width":4}})}var t,i,r;return t=e,(i=[{key:"setData",value:function(t){this.map.getSource(this.sourceId).setData(t)}}])&&Fn(t.prototype,i),r&&Fn(t,r),e}();function Gn(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Yn={type:"FeatureCollection",features:[]},Qn=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=t,this.data=null,this.sourceId=ti.getUniqueSourceIdStr(t,"mm-outline-shape-"),t.addSource(this.sourceId,{type:"geojson",data:Yn}),t.addLayer({id:ti.getUniqueLayerIdStr(t,"mm-circle-shape-"),type:"circle",minzoom:16,source:this.sourceId,paint:{"circle-radius":8,"circle-color":"#3bb2d0"}})}var t,i,r;return t=e,(i=[{key:"setData",value:function(t){this.map.getSource(this.sourceId).setData(t)}}])&&Gn(t.prototype,i),r&&Gn(t,r),e}();function Wn(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Hn={},qn={minZoom:16},Xn=function(){function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.options=V()({},qn,e),this._map=t,this._currentCampus=null,this._currentCampusId=null,this._nearestBuildingId=null,this._center=null,this._enabled=!1,this.zLevels={},this.events=new Ce(["zlevelsupdate"]),this.on=this.events.on.bind(this.events),e.debugZLevelUpdater&&(this.outlineDrawer=new Vn(this._map),this.circleDrawer=new Qn(this._map))}var t,e,r;return t=i,(e=[{key:"isEnabled",value:function(){return this._enabled}},{key:"enable",value:function(){this.isEnabled()||(this.debounceRefreshAvailableZLevels=st(this.refreshAvailableZLevels.bind(this),200),this._map.on("moveend",this.debounceRefreshAvailableZLevels),this._map.on("zoomend",this.debounceRefreshAvailableZLevels),this._map.on("sourcedata",this.debounceRefreshAvailableZLevels),this._enabled=!0,this.debounceRefreshAvailableZLevels())}},{key:"disable",value:function(){this.isEnabled()&&(this._map.off("moveend",this.debounceRefreshAvailableZLevels),this._map.off("zoomend",this.debounceRefreshAvailableZLevels),this._map.off("sourcedata",this.debounceRefreshAvailableZLevels),this._enabled=!1)}},{key:"setDefaultZlevel",value:function(t){t.properties.defaultZLevel&&(this._map.zLevel=t.properties.defaultZLevel)}},{key:"refreshCurrentCampus",value:function(){var t=this._map.getLayer("mm-campus-area")?this._map.queryRenderedFeatures(this._map.project(this._map.getCenter()),{layers:["mm-campus-area"]}):[];if(0<t.length){var e=t[0],i=e.properties.id,r=!this._map.getZLevel();return(this._currentCampusId!==i||r)&&(this._getBuildingsInMapView().concat(this._getFloorsInMapView()).length||this.options.initialCampuses?(this._currentCampusId=i,this._currentCampus=e,this.options.initialCampuses=null,this.debounceRefreshAvailableZLevels()):this.setDefaultZlevel(e),!0)}return!1}},{key:"_getBuildingsInMapView",value:function(){return this._map.getLayer("mm-building-fill")?ht(this._map.queryRenderedFeatures({layers:["mm-building-fill"]}),"id"):[]}},{key:"_getFloorsInMapView",value:function(){return this._map.getLayer("mm-floor-outline")?ht(this._map.queryRenderedFeatures({layers:["mm-floor-outline"]}),"id"):[]}},{key:"_campusBuildingsHashMap",value:function(t){return Hn[t]?Hn[t]:Hn[t]=ge.getBuildingsByCampusId(t)}},{key:"refreshAvailableZLevels",value:function(){var f;this._map.getZoom()<this.options.minZoom?null!==this.zLevels&&(this.zLevels=null,this.events.trigger("zlevelsupdate",{zLevels:null})):!0!==this.refreshCurrentCampus()&&(this.zLevels={},null!==this._currentCampusId&&(f=new Set(this._getBuildingsInMapView().map(function(t){return t.properties.id})),this._campusBuildingsHashMap(this._currentCampusId).then(function(t){var e,i,u,r,n=null,o=t.filter(function(t){return f.has(t.properties.id)}),a=ht(this._map.queryRenderedFeatures(this._map.project(this._map.getCenter()),{layers:["mm-building-fill"]}),"id");if(0<a.length)var s=a[0].properties.id,n=t.find(function(t){return t.properties.id===s});else if(e=o,i=this._map.getCenter(),u={type:"Point",coordinates:[i.lng,i.lat]},r=e.reduce(function(t,e){var a=e.geometry.coordinates[0],s=a.length;return t[e.properties.id]=a.reduce(function(t,e,i){var r=a[(i+1)%s],n=W([[e[0],e[1]],[r[0],r[1]]]),o=rt.a(u,n,{units:"meters"});return t&&t<o?t:o}),t},{}),!(n=e.reduce(function(t,e){return r[t.properties.id]<r[e.properties.id]?t:e})))return;if(n.properties.id===this._nearestBuildingId){var l=this._map.getCenter();if(null!==this._center&&this._center.lng===l.lng&&this._center.lat===l.lat)return;this._center=l}this._nearestBuildingId=n.properties.id;var c,p,h=function(t){var e={},i=0,r=t.properties.floors;for(i in r){var n;r.hasOwnProperty(i)&&(n=r[i].z,e[n]=r[i].name)}return e}(n);if(0!==h.length){for(var d in h)h.hasOwnProperty(d)&&(this.zLevels[d]=h[d]);this.zLevels.hasOwnProperty(this._map.zLevel)||(this._map.zLevel=this._currentCampus.properties.defaultZLevel),this.options.debugZLevelUpdater&&(c=Jn("Polygon",n.geometry.coordinates),this.outlineDrawer.setData({type:"FeatureCollection",features:[c]}),p=Jn("Point",[this._map.getCenter().lng,this._map.getCenter().lat]),this.circleDrawer.setData({type:"FeatureCollection",features:[p]})),this.events.trigger("zlevelsupdate",{zLevels:this.zLevels})}}.bind(this))))}}])&&Wn(t.prototype,e),r&&Wn(t,r),i}();function Jn(t,e){return{type:"Feature",geometry:{type:t,coordinates:e},properties:{}}}function Kn(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var $n=1===window.devicePixelRatio?1:2,to=30*$n,eo=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=t,this._enabled=!1,this._missingIconIds=new Set,this._onStyleImageMissing=this._onStyleImageMissing.bind(this),this._debounceRefreshMap=st(this._refreshMap.bind(this),50)}var t,i,r;return t=e,(i=[{key:"isEnabled",value:function(){return this._enabled}},{key:"enable",value:function(){this.isEnabled()||(this._enabled=!0,this.map.on("styleimagemissing",this._onStyleImageMissing))}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1,this.map.off("styleimagemissing",this._onStyleImageMissing))}},{key:"_onStyleImageMissing",value:function(t){this.isMazeMapIconId(t.id)&&(this._missingIconIds.has(t.id)||(this._missingIconIds.add(t.id),this.addIcon(t.id)))}},{key:"isMazeMapIconId",value:function(t){return String(Number(t))===String(t)}},{key:"_generateBlankImageData",value:function(t){for(var e=[255,255,255,0],i=t,r=new Uint8Array(i*i*4),n=0;n<i;n++)for(var o=0;o<i;o++){var a=4*(o*i+n);r[0+a]=e[0],r[1+a]=e[1],r[2+a]=e[2],r[3+a]=e[3]}return r}},{key:"loadIconImageURL",value:function(t,n,e){var o=this,a=2<arguments.length&&void 0!==e?e:1;return n?t?new Promise(function(i,r){o.map.loadImage(t,function(t,e){t?(console.error("error loading image!",t),console.warn("Generating blank image placeholder"),o.map.addImage(n,{width:2,height:2,data:o._generateBlankImageData(2)}),r()):(o.map.hasImage(n)||o.map.addImage(n,e,{pixelRatio:a}),i())})}):Promise.reject(new Error("No image url specified")):Promise.reject(new Error("No image name specified"))}},{key:"addIcon",value:function(t){var e=this;return this.map.hasImage(t)?Promise.resolve():this.loadIconImageURL("".concat(N(),"/api/icons/").concat(t,".png?size=").concat(to),t,$n).then(function(){e._debounceRefreshMap()}).catch(function(t){console.error("Error redrawing icons"),console.error(t),e._debounceRefreshMap()})}},{key:"_refreshMap",value:function(){var t=this.map.style.sourceCaches["mm-tiles"];t&&t.reload()}}])&&Kn(t.prototype,i),r&&Kn(t,r),e}();function io(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ro=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.disableAttributionLinks=t&&t.disableAttributionLinks||/Mobile|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}var t,i,r;return t=e,(i=[{key:"onAdd",value:function(){this._container=Ct("div","mapboxgl-ctrl");var t=this.disableAttributionLinks?'<span tabindex="-1" aria-hidden="true" class="mazemap-ctrl-logo" title="Map by MazeMap"/>':'<a tabindex="-1" aria-hidden="true" class="mazemap-ctrl-logo" href="https://www.mazemap.com" target="_blank" aria-labelledby="mm-logo-title"><span id="mm-logo-title" style="visibility:hidden; font-size: 0; display: block; width: 0; height: 0; overflow: hidden;" aria-hidden="true">Map by MazeMap</span></a>';return this._container.innerHTML='<div class="mazemap-ctrl-logo-wrapper">'+t+"</div>",this._container}},{key:"onRemove",value:function(){this._container.parentNode.removeChild(this._container)}},{key:"getDefaultPosition",value:function(){return"bottom-left"}}])&&io(t.prototype,i),r&&io(t,r),e}(),no=function(t,e){var i=O(),r=U(),n=F();n&&(r="Bearer ".concat(n),t+=(-1===t.indexOf("?")?"?":"&")+"view_request=".concat(n));var o,a,s,u=!1;if(-1<t.indexOf("{mmTileBaseUrl}")&&(o=k(),a="/all/latest",(s=this.campuses.getCampusCollectionTag())&&"all"!==s&&"default"!==s&&(a="/".concat(s,"/latest")),-1!==o.indexOf("/all/latest")?o=o.replace("/all/latest",a):o+=a,t=t.replace("{mmTileBaseUrl}",o),u=!0),-1<t.indexOf("{zLevel}")){var l=parseFloat(this.getZLevel(),"10");if(!l&&"Tile"===e)return{url:i};l=l?l.toFixed(1):"0",t=t.replace("{zLevel}",l),u=!0}return!!u&&(L&&(t+=(-1===t.indexOf("?")?"?":"&")+"cachebust=".concat(Math.random())),r?{url:t,headers:{Authorization:r}}:{url:t})};function oo(t){return(oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ao(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function so(t,e){return(so=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function uo(o){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,i,r,n=co(o);return e=a?(t=co(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments),i=this,!(r=e)||"object"!==oo(r)&&"function"!=typeof r?lo(i):r}}function lo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function co(t){return(co=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var po={style:"mazemap://v2017_mbsprite",minZoom:0,maxZoom:24,center:[0,0],zoom:0,maxBounds:null,zLevel:void 0,logoPosition:"bottom-left",campuses:"default",autoSetRTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.0/mapbox-gl-rtl-text.js",attributionControl:!0,flags:{}},ho=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&so(t,e)}(p,g.a.Map);var t,e,i,c=uo(p);function p(t){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);var e,r=V()({},po,t);r.style.match(/mazemap:\/\//)&&(e=r.style.replace("mazemap://",""),r.style=N()+"/api/styles/".concat(e,"/")),g.a.accessToken="pk.eyJ1IjoibWF6ZW1hcCIsImEiOiJZbGRNd09zIn0.tBjK2GIzHRFzeGfOoh8P4Q",r.maxZoom=Math.min(r.maxZoom||22,22);var n,o,a,s,u=r.attributionControl;r.attributionControl=!1,i=c.call(this,r),r.transformRequest=(n=r.transformRequest,o=lo(i),a=n,s=no.bind(o),function(t,e){var i=s(t,e);if(i&&a){var r=i.url,n=a(r,e);return n?V()({},i,n):i}return i||!!a&&a(t,e)}),i._requestManager._transformRequestFn=r.transformRequest,i.layerEventHandler=new En(lo(i)),i._setupExtraContainers(),i._flags=r.flags;var l=i._controlContainer.querySelector(".mapboxgl-ctrl-logo");if(r.hideMapboxLogo&&l?l.parentNode.remove():l&&(l.setAttribute("aria-hidden","true"),l.setAttribute("tabindex","-1")),r.autoSetRTLTextPlugin)try{g.a.setRTLTextPlugin(r.autoSetRTLTextPlugin)}catch(t){if(t&&"setRTLTextPlugin cannot be called multiple times."!==t.message)throw t}return i.addControl(new ro({disableAttributionLinks:r.disableAttributionLinks}),"bottom-right"),u&&i.addControl(new g.a.AttributionControl({compact:!0,customAttribution:['<a href="https://www.mazemap.com/" target="_blank"> MazeMap</a>','<a class="mazemap-ctrl-terms" href="https://www.mazemap.com/terms" target="_blank" title="MazeMap Terms of Service">Terms</a>']}),"bottom-right"),r.disableAttributionLinks&&(i.getContainer().className+=" disable-attribution-links"),i.campuses=new Pn(r.campuses,{showCampusLabels:r.showCampusLabels}),i.on("load",function(){var e;i._zLevel=Number(r.zLevel),e=lo(i),zn.sources&&Object.keys(zn.sources).forEach(function(t){e.addSource(t,zn.sources[t])}),zn.layers.forEach(function(t){e.getLayer(t.id)&&e.removeLayer(t.id),e.addLayer(t)}),Dn(e,e.getZLevel()),e.on("zlevel",function(){Dn(e)}),i.campuses.setMap(lo(i)),!1!==r.zLevelUpdater&&(i.zLevelUpdater=i._createZLevelpdater(r),i.campuses.onceWhenLoaded().then(function(){i.zLevelUpdater&&i.zLevelUpdater.enable()})),i.iconLoader=new eo(lo(i)),i.iconLoader.enable(),!1!==r.zLevelControl&&(i.zLevelControl=new Pt({autoUpdate:!0,maxHeight:400}),i.addControl(i.zLevelControl,"bottom-left")),i.route=new Dr(lo(i))}),Ln.trackMapInit(r),i}return t=p,(e=[{key:"_createZLevelpdater",value:function(t){switch(t.zLevelUpdaterType){case"buildingClosestToCenter":return new Xn(this,{initialZLevel:t.zLevel,initialCampuses:t.campuses,debugZLevelUpdater:!!t.debug&&t.debug.centerBasedZLevelUpdater});case"buildingsInView":default:return new Rn(this,{initialZLevel:t.zLevel,initialCampuses:t.campuses})}}},{key:"_setupExtraContainers",value:function(){var e=this;["middle-left","middle-right"].forEach(function(t){e._controlPositions[t]=Ct("div","mapboxgl-ctrl-".concat(t),e._controlContainer)})}},{key:"fitBoundsRotated",value:function(t,e,i){var r;"number"==typeof(e=V()({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding&&(r=e.padding,e.padding={top:r,bottom:r,right:r,left:r}),t=g.a.LngLatBounds.convert(t);var n=[e.padding.left-e.padding.right,e.padding.top-e.padding.bottom],o=Math.min(e.padding.right,e.padding.left),a=Math.min(e.padding.top,e.padding.bottom);e.offset=[e.offset[0]+n[0],e.offset[1]+n[1]],e.bearing=e.bearing||this.getBearing();var s=g.a.Point.convert(e.offset),u=this.transform,l=u.project(t.getNorthWest()),c=u.project(t.getSouthEast()),p=c.sub(l),h=e.bearing*(Math.PI/180),d=p.x*Math.abs(Math.cos(h))+p.y*Math.abs(Math.sin(h)),f=p.x*Math.abs(Math.sin(h))+p.y*Math.abs(Math.cos(h)),y=(u.width-2*o-2*Math.abs(s.x))/d,m=(u.height-2*a-2*Math.abs(s.y))/f;return m<0||y<0?("undefined"!=typeof console&&console.warn("Map cannot fit within canvas with the given bounds, padding, and/or offset."),this):(e.center=u.unproject(l.add(c).div(2)),e.zoom=Math.min(u.scaleZoom(u.scale*Math.min(y,m)),e.maxZoom),e.linear?this.easeTo(e,i):this.flyTo(e,i))}},{key:"getZLevel",value:function(){return this._zLevel}},{key:"setZLevel",value:function(t){if(!isNaN(t)&&0!==t&&null!==t&&t!==this._zLevel)return t=Number(t),this.fire({type:"before_zlevel_change"}),this._zLevel=t,this.fire({type:"zlevel"}),this._zLevel}},{key:"_removeSourceAndLayers",value:function(i){var r=this,n=this.style._layers;Object.keys(n).forEach(function(t){var e=n[t];e.source===i&&r.removeLayer(e.id)}),this.removeSource(i)}},{key:"zLevel",get:function(){return this.getZLevel()},set:function(t){return this.setZLevel(t)}}])&&ao(t.prototype,e),i&&ao(t,i),p}();function fo(t,e){if(!t)throw new Error("Missing parameter campusId");var i={zlevel:Number(e)};return G(N()+"/api/hotel/"+Number(t)+"/rooms/"+lt(i)).then(ut).catch(function(t){return window.console&&window.console.warn&&window.console.warn(t),{}})}var yo={getRoomsByZLevel:fo,getRoomsByZLevelAsPOIFeatures:function(t,e){return fo(t,e).then(function(t){var e=t.rooms;return Object.keys(e).map(function(t){return e[t]})}).then(function(t){return t.map(de)}).catch(function(t){return window.console&&window.console.warn&&window.console.warn(t),[]})}};function mo(t){if(!(t&&t.campusId&&t.zLevel))throw new Error("getRoomsByZLevelAsPOIFeatures needs correct parameters.  Example: getRoomsByZLevelAsPOIFeatures({campusId: X, zLevel: Y})");return yo.getRoomsByZLevelAsPOIFeatures(t.campusId,t.zLevel)}window.Promise=window.Promise||d.a,i(89);var go=g.a.version,vo=g.a.Popup,_o=g.a.LngLat,xo=g.a.LngLatBounds,bo=c,Mo=p}],n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=157);function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}var i,r});